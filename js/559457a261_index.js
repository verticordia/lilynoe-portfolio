var GV=Object.create;var yh=Object.defineProperty;var KV=Object.getOwnPropertyDescriptor;var YV=Object.getOwnPropertyNames;var XV=Object.getPrototypeOf,ZV=Object.prototype.hasOwnProperty;var V=(t,e)=>()=>(t&&(e=t(t=0)),e);var oe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),hr=(t,e)=>{for(var r in e)yh(t,r,{get:e[r],enumerable:!0})},G_=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of YV(e))!ZV.call(t,n)&&n!==r&&yh(t,n,{get:()=>e[n],enumerable:!(i=KV(e,n))||i.enumerable});return t};var ye=(t,e,r)=>(r=t!=null?GV(XV(t)):{},G_(e||!t||!t.__esModule?yh(r,"default",{value:t,enumerable:!0}):r,t)),Rc=t=>G_(yh({},"__esModule",{value:!0}),t);function wo(t,e){for(var r in e)t[r]=e[r];return t}function my(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Lt(t,e,r){var i,n,o,s={};for(o in e)o=="key"?i=e[o]:o=="ref"?n=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?Oc.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)s[o]===void 0&&(s[o]=t.defaultProps[o]);return kc(t,s,i,n,null)}function kc(t,e,r,i,n){var o={type:t,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++Z_,__i:-1,__u:0};return n==null&&lt.vnode!=null&&lt.vnode(o),o}function xe(){return{current:null}}function ce(t){return t.children}function me(t,e){this.props=t,this.context=e}function Ol(t,e){if(e==null)return t.__?Ol(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?Ol(t):null}function iE(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return iE(t)}}function hy(t){(!t.__d&&(t.__d=!0)&&ka.push(t)&&!wh.__r++||K_!==lt.debounceRendering)&&((K_=lt.debounceRendering)||J_)(wh)}function wh(){for(var t,e,r,i,n,o,s,a=1;ka.length;)ka.length>a&&ka.sort(Q_),t=ka.shift(),a=ka.length,t.__d&&(r=void 0,n=(i=(e=t).__v).__e,o=[],s=[],e.__P&&((r=wo({},i)).__v=i.__v+1,lt.vnode&&lt.vnode(r),gy(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[n]:null,o,n??Ol(i),!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,sE(o,r,s),r.__e!=n&&iE(r)));wh.__r=0}function nE(t,e,r,i,n,o,s,a,l,p,f){var d,m,g,v,x,_,E=i&&i.__k||rE,O=e.length;for(l=QV(r,e,E,l,O),d=0;d<O;d++)(g=r.__k[d])!=null&&(m=g.__i===-1?Nc:E[g.__i]||Nc,g.__i=d,_=gy(t,g,m,n,o,s,a,l,p,f),v=g.__e,g.ref&&m.ref!=g.ref&&(m.ref&&vy(m.ref,null,g),f.push(g.ref,g.__c||v,g)),x==null&&v!=null&&(x=v),4&g.__u||m.__k===g.__k?l=oE(g,l,t):typeof g.type=="function"&&_!==void 0?l=_:v&&(l=v.nextSibling),g.__u&=-7);return r.__e=x,l}function QV(t,e,r,i,n){var o,s,a,l,p,f=r.length,d=f,m=0;for(t.__k=new Array(n),o=0;o<n;o++)(s=e[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(l=o+m,(s=t.__k[o]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?kc(null,s,null,null,null):Lc(s)?kc(ce,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?kc(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,a=null,(p=s.__i=e4(s,r,l,d))!==-1&&(d--,(a=r[p])&&(a.__u|=2)),a==null||a.__v===null?(p==-1&&(n>f?m--:n<f&&m++),typeof s.type!="function"&&(s.__u|=4)):p!=l&&(p==l-1?m--:p==l+1?m++:(p>l?m--:m++,s.__u|=4))):t.__k[o]=null;if(d)for(o=0;o<f;o++)(a=r[o])!=null&&!(2&a.__u)&&(a.__e==i&&(i=Ol(a)),lE(a,a));return i}function oE(t,e,r){var i,n;if(typeof t.type=="function"){for(i=t.__k,n=0;i&&n<i.length;n++)i[n]&&(i[n].__=t,e=oE(i[n],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=Ol(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function xo(t,e){return e=e||[],t==null||typeof t=="boolean"||(Lc(t)?t.some(function(r){xo(r,e)}):e.push(t)),e}function e4(t,e,r,i){var n,o,s=t.key,a=t.type,l=e[r];if(l===null&&t.key==null||l&&s==l.key&&a===l.type&&!(2&l.__u))return r;if(i>(l!=null&&!(2&l.__u)?1:0))for(n=r-1,o=r+1;n>=0||o<e.length;){if(n>=0){if((l=e[n])&&!(2&l.__u)&&s==l.key&&a===l.type)return n;n--}if(o<e.length){if((l=e[o])&&!(2&l.__u)&&s==l.key&&a===l.type)return o;o++}}return-1}function Y_(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||JV.test(e)?r:r+"px"}function bh(t,e,r,i,n){var o;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)r&&e in r||Y_(t.style,e,"");if(r)for(e in r)i&&r[e]===i[e]||Y_(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(eE,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=r,r?i?r.t=i.t:(r.t=fy,t.addEventListener(e,o?py:dy,o)):t.removeEventListener(e,o?py:dy,o);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function X_(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.u==null)e.u=fy++;else if(e.u<r.t)return;return r(lt.event?lt.event(e):e)}}}function gy(t,e,r,i,n,o,s,a,l,p){var f,d,m,g,v,x,_,E,O,L,I,D,R,W,N,z,$,q=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(l=!!(32&r.__u),o=[a=e.__e=r.__e]),(f=lt.__b)&&f(e);e:if(typeof q=="function")try{if(E=e.props,O="prototype"in q&&q.prototype.render,L=(f=q.contextType)&&i[f.__c],I=f?L?L.props.value:f.__:i,r.__c?_=(d=e.__c=r.__c).__=d.__E:(O?e.__c=d=new q(E,I):(e.__c=d=new me(E,I),d.constructor=q,d.render=r4),L&&L.sub(d),d.props=E,d.state||(d.state={}),d.context=I,d.__n=i,m=d.__d=!0,d.__h=[],d._sb=[]),O&&d.__s==null&&(d.__s=d.state),O&&q.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=wo({},d.__s)),wo(d.__s,q.getDerivedStateFromProps(E,d.__s))),g=d.props,v=d.state,d.__v=e,m)O&&q.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),O&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(O&&q.getDerivedStateFromProps==null&&E!==g&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(E,I),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(E,d.__s,I)===!1||e.__v==r.__v)){for(e.__v!=r.__v&&(d.props=E,d.state=d.__s,d.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(J){J&&(J.__=e)}),D=0;D<d._sb.length;D++)d.__h.push(d._sb[D]);d._sb=[],d.__h.length&&s.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(E,d.__s,I),O&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(g,v,x)})}if(d.context=I,d.props=E,d.__P=t,d.__e=!1,R=lt.__r,W=0,O){for(d.state=d.__s,d.__d=!1,R&&R(e),f=d.render(d.props,d.state,d.context),N=0;N<d._sb.length;N++)d.__h.push(d._sb[N]);d._sb=[]}else do d.__d=!1,R&&R(e),f=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++W<25);d.state=d.__s,d.getChildContext!=null&&(i=wo(wo({},i),d.getChildContext())),O&&!m&&d.getSnapshotBeforeUpdate!=null&&(x=d.getSnapshotBeforeUpdate(g,v)),z=f,f!=null&&f.type===ce&&f.key==null&&(z=aE(f.props.children)),a=nE(t,Lc(z)?z:[z],e,r,i,n,o,s,a,l,p),d.base=e.__e,e.__u&=-161,d.__h.length&&s.push(d),_&&(d.__E=d.__=null)}catch(J){if(e.__v=null,l||o!=null)if(J.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else for($=o.length;$--;)my(o[$]);else e.__e=r.__e,e.__k=r.__k;lt.__e(J,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):a=e.__e=t4(r.__e,e,r,i,n,o,s,l,p);return(f=lt.diffed)&&f(e),128&e.__u?void 0:a}function sE(t,e,r){for(var i=0;i<r.length;i++)vy(r[i],r[++i],r[++i]);lt.__c&&lt.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(o){o.call(n)})}catch(o){lt.__e(o,n.__v)}})}function aE(t){return typeof t!="object"||t==null?t:Lc(t)?t.map(aE):wo({},t)}function t4(t,e,r,i,n,o,s,a,l){var p,f,d,m,g,v,x,_=r.props,E=e.props,O=e.type;if(O=="svg"?n="http://www.w3.org/2000/svg":O=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),o!=null){for(p=0;p<o.length;p++)if((g=o[p])&&"setAttribute"in g==!!O&&(O?g.localName==O:g.nodeType==3)){t=g,o[p]=null;break}}if(t==null){if(O==null)return document.createTextNode(E);t=document.createElementNS(n,O,E.is&&E),a&&(lt.__m&&lt.__m(e,o),a=!1),o=null}if(O===null)_===E||a&&t.data===E||(t.data=E);else{if(o=o&&Oc.call(t.childNodes),_=r.props||Nc,!a&&o!=null)for(_={},p=0;p<t.attributes.length;p++)_[(g=t.attributes[p]).name]=g.value;for(p in _)if(g=_[p],p!="children"){if(p=="dangerouslySetInnerHTML")d=g;else if(!(p in E)){if(p=="value"&&"defaultValue"in E||p=="checked"&&"defaultChecked"in E)continue;bh(t,p,null,g,n)}}for(p in E)g=E[p],p=="children"?m=g:p=="dangerouslySetInnerHTML"?f=g:p=="value"?v=g:p=="checked"?x=g:a&&typeof g!="function"||_[p]===g||bh(t,p,g,_[p],n);if(f)a||d&&(f.__html===d.__html||f.__html===t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(d&&(t.innerHTML=""),nE(e.type==="template"?t.content:t,Lc(m)?m:[m],e,r,i,O=="foreignObject"?"http://www.w3.org/1999/xhtml":n,o,s,o?o[0]:r.__k&&Ol(r,0),a,l),o!=null)for(p=o.length;p--;)my(o[p]);a||(p="value",O=="progress"&&v==null?t.removeAttribute("value"):v!==void 0&&(v!==t[p]||O=="progress"&&!v||O=="option"&&v!==_[p])&&bh(t,p,v,_[p],n),p="checked",x!==void 0&&x!==t[p]&&bh(t,p,x,_[p],n))}return t}function vy(t,e,r){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(n){lt.__e(n,r)}}function lE(t,e,r){var i,n;if(lt.unmount&&lt.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||vy(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){lt.__e(o,e)}i.base=i.__P=null}if(i=t.__k)for(n=0;n<i.length;n++)i[n]&&lE(i[n],e,r||typeof t.type!="function");r||my(t.__e),t.__c=t.__=t.__e=void 0}function r4(t,e,r){return this.constructor(t,r)}function Ls(t,e,r){var i,n,o,s;e==document&&(e=document.documentElement),lt.__&&lt.__(t,e),n=(i=typeof r=="function")?null:r&&r.__k||e.__k,o=[],s=[],gy(e,t=(!i&&r||e).__k=Lt(ce,null,[t]),n||Nc,Nc,e.namespaceURI,!i&&r?[r]:n?null:e.firstChild?Oc.call(e.childNodes):null,o,!i&&r?r:n?n.__e:e.firstChild,i,s),sE(o,t,s)}function Fc(t,e){Ls(t,e,Fc)}function uE(t,e,r){var i,n,o,s,a=wo({},t.props);for(o in t.type&&t.type.defaultProps&&(s=t.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?n=e[o]:a[o]=e[o]===void 0&&s!==void 0?s[o]:e[o];return arguments.length>2&&(a.children=arguments.length>3?Oc.call(arguments,2):r),kc(t.type,a,i||t.key,n||t.ref,null)}function In(t){function e(r){var i,n;return this.getChildContext||(i=new Set,(n={})[e.__c]=this,this.getChildContext=function(){return n},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.forEach(function(s){s.__e=!0,hy(s)})},this.sub=function(o){i.add(o);var s=o.componentWillUnmount;o.componentWillUnmount=function(){i&&i.delete(o),s&&s.call(o)}}),r.children}return e.__c="__cC"+tE++,e.__=t,e.Provider=e.__l=(e.Consumer=function(r,i){return r.children(i)}).contextType=e,e}var Oc,lt,Z_,Dc,ka,K_,J_,Q_,eE,fy,dy,py,tE,Nc,rE,JV,Lc,ke=V(()=>{Nc={},rE=[],JV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Lc=Array.isArray;Oc=rE.slice,lt={__e:function(t,e,r,i){for(var n,o,s;e=e.__;)if((n=e.__c)&&!n.__)try{if((o=n.constructor)&&o.getDerivedStateFromError!=null&&(n.setState(o.getDerivedStateFromError(t)),s=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t,i||{}),s=n.__d),s)return n.__E=n}catch(a){t=a}throw t}},Z_=0,Dc=function(t){return t!=null&&t.constructor==null},me.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=wo({},this.state),typeof t=="function"&&(t=t(wo({},r),this.props)),t&&wo(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),hy(this))},me.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),hy(this))},me.prototype.render=ce,ka=[],J_=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Q_=function(t,e){return t.__v.__b-e.__v.__b},wh.__r=0,eE=/(PointerCapture)$|Capture$/i,fy=0,dy=X_(!1),py=X_(!0),tE=0});function Na(t,e){vr.__h&&vr.__h(ir,t,Dl||e),Dl=0;var r=ir.__H||(ir.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function wi(t){return Dl=1,qn(bE,t)}function qn(t,e,r){var i=Na(rs++,2);if(i.t=t,!i.__c&&(i.__=[r?r(e):bE(void 0,e),function(a){var l=i.__N?i.__N[0]:i.__[0],p=i.t(l,a);l!==p&&(i.__N=[p,i.__[1]],i.__c.setState({}))}],i.__c=ir,!ir.__f)){var n=function(a,l,p){if(!i.__c.__H)return!0;var f=i.__c.__H.__.filter(function(m){return!!m.__c});if(f.every(function(m){return!m.__N}))return!o||o.call(this,a,l,p);var d=i.__c.props!==a;return f.forEach(function(m){if(m.__N){var g=m.__[0];m.__=m.__N,m.__N=void 0,g!==m.__[0]&&(d=!0)}}),o&&o.call(this,a,l,p)||d};ir.__f=!0;var o=ir.shouldComponentUpdate,s=ir.componentWillUpdate;ir.componentWillUpdate=function(a,l,p){if(this.__e){var f=o;o=void 0,n(a,l,p),o=f}s&&s.call(this,a,l,p)},ir.shouldComponentUpdate=n}return i.__N||i.__}function Ft(t,e){var r=Na(rs++,3);!vr.__s&&wy(r.__H,e)&&(r.__=t,r.u=e,ir.__H.__h.push(r))}function Oi(t,e){var r=Na(rs++,4);!vr.__s&&wy(r.__H,e)&&(r.__=t,r.u=e,ir.__h.push(r))}function xi(t){return Dl=5,Qt(function(){return{current:t}},[])}function Fs(t,e,r){Dl=6,Oi(function(){if(typeof t=="function"){var i=t(e());return function(){t(null),i&&typeof i=="function"&&i()}}if(t)return t.current=e(),function(){return t.current=null}},r==null?r:r.concat(t))}function Qt(t,e){var r=Na(rs++,7);return wy(r.__H,e)&&(r.__=t(),r.__H=e,r.__h=t),r.__}function zs(t,e){return Dl=8,Qt(function(){return t},e)}function Lr(t){var e=ir.context[t.__c],r=Na(rs++,9);return r.c=t,e?(r.__==null&&(r.__=!0,e.sub(ir)),e.props.value):t.__}function zc(t,e){vr.useDebugValue&&vr.useDebugValue(e?e(t):t)}function i4(t){var e=Na(rs++,10),r=wi();return e.__=t,ir.componentDidCatch||(ir.componentDidCatch=function(i,n){e.__&&e.__(i,n),r[1](i)}),[r[0],function(){r[1](void 0)}]}function Sh(){var t=Na(rs++,11);if(!t.__){for(var e=ir.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var r=e.__m||(e.__m=[0,0]);t.__="P"+r[0]+"-"+r[1]++}return t.__}function n4(){for(var t;t=yE.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(xh),t.__H.__h.forEach(by),t.__H.__h=[]}catch(e){t.__H.__h=[],vr.__e(e,t.__v)}}function o4(t){var e,r=function(){clearTimeout(i),vE&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(r,100);vE&&(e=requestAnimationFrame(r))}function xh(t){var e=ir,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),ir=e}function by(t){var e=ir;t.__c=t.__(),ir=e}function wy(t,e){return!t||t.length!==e.length||e.some(function(r,i){return r!==t[i]})}function bE(t,e){return typeof e=="function"?e(t):e}var rs,ir,yy,cE,Dl,yE,vr,dE,pE,hE,fE,mE,gE,vE,Bs=V(()=>{ke();Dl=0,yE=[],vr=lt,dE=vr.__b,pE=vr.__r,hE=vr.diffed,fE=vr.__c,mE=vr.unmount,gE=vr.__;vr.__b=function(t){ir=null,dE&&dE(t)},vr.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),gE&&gE(t,e)},vr.__r=function(t){pE&&pE(t),rs=0;var e=(ir=t.__c).__H;e&&(yy===ir?(e.__h=[],ir.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.forEach(xh),e.__h.forEach(by),e.__h=[],rs=0)),yy=ir},vr.diffed=function(t){hE&&hE(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(yE.push(e)!==1&&cE===vr.requestAnimationFrame||((cE=vr.requestAnimationFrame)||o4)(n4)),e.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),yy=ir=null},vr.__c=function(t,e){e.some(function(r){try{r.__h.forEach(xh),r.__h=r.__h.filter(function(i){return!i.__||by(i)})}catch(i){e.some(function(n){n.__h&&(n.__h=[])}),e=[],vr.__e(i,r.__v)}}),fE&&fE(t,e)},vr.unmount=function(t){mE&&mE(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(i){try{xh(i)}catch(n){e=n}}),r.__H=void 0,e&&vr.__e(e,r.__v))};vE=typeof requestAnimationFrame=="function"});var GE={};hr(GE,{Children:()=>Oa,Component:()=>me,Fragment:()=>ce,PureComponent:()=>Tr,StrictMode:()=>$E,Suspense:()=>Bc,SuspenseList:()=>Ll,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>FE,cloneElement:()=>UE,createContext:()=>In,createElement:()=>Lt,createFactory:()=>zE,createPortal:()=>it,createRef:()=>xe,default:()=>ze,findDOMNode:()=>WE,flushSync:()=>VE,forwardRef:()=>Di,hydrate:()=>LE,isElement:()=>jE,isFragment:()=>BE,isMemo:()=>qE,isValidElement:()=>qc,lazy:()=>NE,memo:()=>TE,render:()=>DE,startTransition:()=>Ey,unmountComponentAtNode:()=>HE,unstable_batchedUpdates:()=>Uc,useCallback:()=>zs,useContext:()=>Lr,useDebugValue:()=>zc,useDeferredValue:()=>Cy,useEffect:()=>Ft,useErrorBoundary:()=>i4,useId:()=>Sh,useImperativeHandle:()=>Fs,useInsertionEffect:()=>Iy,useLayoutEffect:()=>Oi,useMemo:()=>Qt,useReducer:()=>qn,useRef:()=>xi,useState:()=>wi,useSyncExternalStore:()=>_y,useTransition:()=>Py,version:()=>b4});function AE(t,e){for(var r in e)t[r]=e[r];return t}function Sy(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function _y(t,e){var r=e(),i=wi({t:{__:r,u:e}}),n=i[0].t,o=i[1];return Oi(function(){n.__=r,n.u=e,xy(n)&&o({t:n})},[t,r,e]),Ft(function(){return xy(n)&&o({t:n}),t(function(){xy(n)&&o({t:n})})},[t]),r}function xy(t){var e,r,i=t.u,n=t.__;try{var o=i();return!((e=n)===(r=o)&&(e!==0||1/e==1/r)||e!=e&&r!=r)}catch{return!0}}function Ey(t){t()}function Cy(t){return t}function Py(){return[!1,Ey]}function Tr(t,e){this.props=t,this.context=e}function TE(t,e){function r(n){var o=this.props.ref,s=o==n.ref;return!s&&o&&(o.call?o(null):o.current=null),e?!e(this.props,n)||!s:Sy(this.props,n)}function i(n){return this.shouldComponentUpdate=r,Lt(t,n)}return i.displayName="Memo("+(t.displayName||t.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i}function Di(t){function e(r){var i=AE({},r);return delete i.ref,t(i,r.ref||null)}return e.$$typeof=s4,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}function ME(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),t.__c.__H=null),(t=AE({},t)).__c!=null&&(t.__c.__P===r&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(i){return ME(i,e,r)})),t}function RE(t,e,r){return t&&r&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(i){return RE(i,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=r)),t}function Bc(){this.__u=0,this.o=null,this.__b=null}function kE(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function NE(t){var e,r,i;function n(o){if(e||(e=t()).then(function(s){r=s.default||s},function(s){i=s}),i)throw i;if(!r)throw e;return Lt(r,o)}return n.displayName="Lazy",n.__f=!0,n}function Ll(){this.i=null,this.l=null}function l4(t){return this.getChildContext=function(){return t.context},t.children}function u4(t){var e=this,r=t.h;e.componentWillUnmount=function(){Ls(null,e.v),e.v=null,e.h=null},e.h&&e.h!==r&&e.componentWillUnmount(),e.v||(e.h=r,e.v={nodeType:1,parentNode:r,childNodes:[],contains:function(){return!0},appendChild:function(i){this.childNodes.push(i),e.h.appendChild(i)},insertBefore:function(i,n){this.childNodes.push(i),e.h.insertBefore(i,n)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.h.removeChild(i)}}),Ls(Lt(l4,{context:e.context},t.__v),e.v)}function it(t,e){var r=Lt(u4,{__v:t,h:e});return r.containerInfo=e,r}function DE(t,e,r){return e.__k==null&&(e.textContent=""),Ls(t,e),typeof r=="function"&&r(),t?t.__c:null}function LE(t,e,r){return Fc(t,e),typeof r=="function"&&r(),t?t.__c:null}function m4(){}function g4(){return this.cancelBubble}function v4(){return this.defaultPrevented}function zE(t){return Lt.bind(null,t)}function qc(t){return!!t&&t.$$typeof===OE}function BE(t){return qc(t)&&t.type===ce}function qE(t){return!!t&&!!t.displayName&&(typeof t.displayName=="string"||t.displayName instanceof String)&&t.displayName.startsWith("Memo(")}function UE(t){return qc(t)?uE.apply(null,arguments):t}function HE(t){return!!t.__k&&(Ls(null,t),!0)}function WE(t){return t&&(t.base||t.nodeType===1&&t)||null}var Iy,wE,s4,xE,Oa,a4,SE,_E,OE,c4,d4,p4,h4,f4,EE,Ay,y4,CE,PE,IE,FE,b4,Uc,VE,$E,jE,ze,Ye=V(()=>{ke();ke();Bs();Bs();Iy=Oi;(Tr.prototype=new me).isPureReactComponent=!0,Tr.prototype.shouldComponentUpdate=function(t,e){return Sy(this.props,t)||Sy(this.state,e)};wE=lt.__b;lt.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),wE&&wE(t)};s4=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;xE=function(t,e){return t==null?null:xo(xo(t).map(e))},Oa={map:xE,forEach:xE,count:function(t){return t?xo(t).length:0},only:function(t){var e=xo(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:xo},a4=lt.__e;lt.__e=function(t,e,r,i){if(t.then){for(var n,o=e;o=o.__;)if((n=o.__c)&&n.__c)return e.__e==null&&(e.__e=r.__e,e.__k=r.__k),n.__c(t,e)}a4(t,e,r,i)};SE=lt.unmount;lt.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),SE&&SE(t)},(Bc.prototype=new me).__c=function(t,e){var r=e.__c,i=this;i.o==null&&(i.o=[]),i.o.push(r);var n=kE(i.__v),o=!1,s=function(){o||(o=!0,r.__R=null,n?n(a):a())};r.__R=s;var a=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=RE(l,l.__c.__P,l.__c.__O)}var p;for(i.setState({__a:i.__b=null});p=i.o.pop();)p.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(s,s)},Bc.prototype.componentWillUnmount=function(){this.o=[]},Bc.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=ME(this.__b,r,i.__O=i.__P)}this.__b=null}var n=e.__a&&Lt(ce,null,t.fallback);return n&&(n.__u&=-33),[Lt(ce,null,e.__a?null:t.children),n]};_E=function(t,e,r){if(++r[1]===r[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(r=t.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.i=r=r[2]}};(Ll.prototype=new me).__a=function(t){var e=this,r=kE(e.__v),i=e.l.get(t);return i[0]++,function(n){var o=function(){e.props.revealOrder?(i.push(n),_E(e,t,i)):n()};r?r(o):o()}},Ll.prototype.render=function(t){this.i=null,this.l=new Map;var e=xo(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.l.set(e[r],this.i=[1,0,this.i]);return t.children},Ll.prototype.componentDidUpdate=Ll.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,r){_E(t,r,e)})};OE=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,c4=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,d4=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,p4=/[A-Z0-9]/g,h4=typeof document<"u",f4=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};me.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(me.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});EE=lt.event;lt.event=function(t){return EE&&(t=EE(t)),t.persist=m4,t.isPropagationStopped=g4,t.isDefaultPrevented=v4,t.nativeEvent=t};y4={enumerable:!1,configurable:!0,get:function(){return this.class}},CE=lt.vnode;lt.vnode=function(t){typeof t.type=="string"&&function(e){var r=e.props,i=e.type,n={},o=i.indexOf("-")===-1;for(var s in r){var a=r[s];if(!(s==="value"&&"defaultValue"in r&&a==null||h4&&s==="children"&&i==="noscript"||s==="class"||s==="className")){var l=s.toLowerCase();s==="defaultValue"&&"value"in r&&r.value==null?s="value":s==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?s="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||f4(r.type)?l==="onfocus"?s="onfocusin":l==="onblur"?s="onfocusout":d4.test(s)&&(s=l):l=s="oninput":o&&c4.test(s)?s=s.replace(p4,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&n[s=l]&&(s="oninputCapture"),n[s]=a}}i=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=xo(r.children).forEach(function(p){p.props.selected=n.value.indexOf(p.props.value)!=-1})),i=="select"&&n.defaultValue!=null&&(n.value=xo(r.children).forEach(function(p){p.props.selected=n.multiple?n.defaultValue.indexOf(p.props.value)!=-1:n.defaultValue==p.props.value})),r.class&&!r.className?(n.class=r.class,Object.defineProperty(n,"className",y4)):(r.className&&!r.class||r.class&&r.className)&&(n.class=n.className=r.className),e.props=n}(t),t.$$typeof=OE,CE&&CE(t)};PE=lt.__r;lt.__r=function(t){PE&&PE(t),Ay=t.__c};IE=lt.diffed;lt.diffed=function(t){IE&&IE(t);var e=t.props,r=t.__e;r!=null&&t.type==="textarea"&&"value"in e&&e.value!==r.value&&(r.value=e.value==null?"":e.value),Ay=null};FE={ReactCurrentDispatcher:{current:{readContext:function(t){return Ay.__n[t.__c].props.value},useCallback:zs,useContext:Lr,useDebugValue:zc,useDeferredValue:Cy,useEffect:Ft,useId:Sh,useImperativeHandle:Fs,useInsertionEffect:Iy,useLayoutEffect:Oi,useMemo:Qt,useReducer:qn,useRef:xi,useState:wi,useSyncExternalStore:_y,useTransition:Py}}},b4="18.3.1";Uc=function(t,e){return t(e)},VE=function(t,e){return t(e)},$E=ce,jE=qc,ze={useState:wi,useId:Sh,useReducer:qn,useEffect:Ft,useLayoutEffect:Oi,useInsertionEffect:Iy,useTransition:Py,useDeferredValue:Cy,useSyncExternalStore:_y,startTransition:Ey,useRef:xi,useImperativeHandle:Fs,useMemo:Qt,useCallback:zs,useContext:Lr,useDebugValue:zc,version:"18.3.1",Children:Oa,render:DE,hydrate:LE,unmountComponentAtNode:HE,createPortal:it,createElement:Lt,createContext:In,createFactory:zE,cloneElement:UE,createRef:xe,Fragment:ce,isValidElement:qc,isElement:jE,isFragment:BE,isMemo:qE,findDOMNode:WE,Component:me,PureComponent:Tr,memo:TE,forwardRef:Di,flushSync:VE,unstable_batchedUpdates:Uc,StrictMode:$E,Suspense:Bc,SuspenseList:Ll,lazy:NE,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:FE}});var YE=oe((Lue,KE)=>{"use strict";var w4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";KE.exports=w4});var QE=oe((Fue,JE)=>{"use strict";var x4=YE();function XE(){}function ZE(){}ZE.resetWarningCache=XE;JE.exports=function(){function t(i,n,o,s,a,l){if(l!==x4){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ZE,resetWarningCache:XE};return r.PropTypes=r,r}});var Ty=oe((que,eC)=>{eC.exports=QE()();var zue,Bue});var An,qs=V(()=>{Ye();An=ze.createContext(null)});function S4(t){t()}var tC,rC,iC,My=V(()=>{tC=S4,rC=function(e){return tC=e},iC=function(){return tC}});function _4(){var t=iC(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var n=e;n;)n.callback(),n=n.next})},get:function(){for(var n=[],o=e;o;)n.push(o),o=o.next;return n},subscribe:function(n){var o=!0,s=r={callback:n,next:null,prev:r};return s.prev?s.prev.next=s:e=s,function(){!o||e===null||(o=!1,s.next?s.next.prev=s.prev:r=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}function Hc(t,e){var r,i=nC;function n(d){return l(),i.subscribe(d)}function o(){i.notify()}function s(){f.onStateChange&&f.onStateChange()}function a(){return!!r}function l(){r||(r=e?e.addNestedSub(s):t.subscribe(s),i=_4())}function p(){r&&(r(),r=void 0,i.clear(),i=nC)}var f={addNestedSub:n,notifyNestedSubs:o,handleChangeWrapper:s,isSubscribed:a,trySubscribe:l,tryUnsubscribe:p,getListeners:function(){return i}};return f}var nC,_h=V(()=>{My();nC={notify:function(){},get:function(){return[]}}});var Wc,Eh=V(()=>{Ye();Wc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Oi:Ft});function E4(t){var e=t.store,r=t.context,i=t.children,n=Qt(function(){var a=Hc(e);return{store:e,subscription:a}},[e]),o=Qt(function(){return e.getState()},[e]);Wc(function(){var a=n.subscription;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),o!==e.getState()&&a.notifyNestedSubs(),function(){a.tryUnsubscribe(),a.onStateChange=null}},[n,o]);var s=r||An;return ze.createElement(s.Provider,{value:n},i)}var Ry,oC=V(()=>{Ye();qs();_h();Eh();Ry=E4});function jt(){return jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},jt.apply(this,arguments)}var Da=V(()=>{});function Li(t,e){if(t==null)return{};var r={},i=Object.keys(t),n,o;for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}var Fl=V(()=>{});var aC=oe(Gt=>{"use strict";var $r=typeof Symbol=="function"&&Symbol.for,ky=$r?Symbol.for("react.element"):60103,Ny=$r?Symbol.for("react.portal"):60106,Ch=$r?Symbol.for("react.fragment"):60107,Ph=$r?Symbol.for("react.strict_mode"):60108,Ih=$r?Symbol.for("react.profiler"):60114,Ah=$r?Symbol.for("react.provider"):60109,Th=$r?Symbol.for("react.context"):60110,Oy=$r?Symbol.for("react.async_mode"):60111,Mh=$r?Symbol.for("react.concurrent_mode"):60111,Rh=$r?Symbol.for("react.forward_ref"):60112,kh=$r?Symbol.for("react.suspense"):60113,C4=$r?Symbol.for("react.suspense_list"):60120,Nh=$r?Symbol.for("react.memo"):60115,Oh=$r?Symbol.for("react.lazy"):60116,P4=$r?Symbol.for("react.block"):60121,I4=$r?Symbol.for("react.fundamental"):60117,A4=$r?Symbol.for("react.responder"):60118,T4=$r?Symbol.for("react.scope"):60119;function un(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ky:switch(t=t.type,t){case Oy:case Mh:case Ch:case Ih:case Ph:case kh:return t;default:switch(t=t&&t.$$typeof,t){case Th:case Rh:case Oh:case Nh:case Ah:return t;default:return e}}case Ny:return e}}}function sC(t){return un(t)===Mh}Gt.AsyncMode=Oy;Gt.ConcurrentMode=Mh;Gt.ContextConsumer=Th;Gt.ContextProvider=Ah;Gt.Element=ky;Gt.ForwardRef=Rh;Gt.Fragment=Ch;Gt.Lazy=Oh;Gt.Memo=Nh;Gt.Portal=Ny;Gt.Profiler=Ih;Gt.StrictMode=Ph;Gt.Suspense=kh;Gt.isAsyncMode=function(t){return sC(t)||un(t)===Oy};Gt.isConcurrentMode=sC;Gt.isContextConsumer=function(t){return un(t)===Th};Gt.isContextProvider=function(t){return un(t)===Ah};Gt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ky};Gt.isForwardRef=function(t){return un(t)===Rh};Gt.isFragment=function(t){return un(t)===Ch};Gt.isLazy=function(t){return un(t)===Oh};Gt.isMemo=function(t){return un(t)===Nh};Gt.isPortal=function(t){return un(t)===Ny};Gt.isProfiler=function(t){return un(t)===Ih};Gt.isStrictMode=function(t){return un(t)===Ph};Gt.isSuspense=function(t){return un(t)===kh};Gt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ch||t===Mh||t===Ih||t===Ph||t===kh||t===C4||typeof t=="object"&&t!==null&&(t.$$typeof===Oh||t.$$typeof===Nh||t.$$typeof===Ah||t.$$typeof===Th||t.$$typeof===Rh||t.$$typeof===I4||t.$$typeof===A4||t.$$typeof===T4||t.$$typeof===P4)};Gt.typeOf=un});var Dy=oe((rce,lC)=>{"use strict";lC.exports=aC()});var Dh=oe((ice,fC)=>{"use strict";var Ly=Dy(),M4={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},R4={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},k4={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},pC={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Fy={};Fy[Ly.ForwardRef]=k4;Fy[Ly.Memo]=pC;function uC(t){return Ly.isMemo(t)?pC:Fy[t.$$typeof]||M4}var N4=Object.defineProperty,O4=Object.getOwnPropertyNames,cC=Object.getOwnPropertySymbols,D4=Object.getOwnPropertyDescriptor,L4=Object.getPrototypeOf,dC=Object.prototype;function hC(t,e,r){if(typeof e!="string"){if(dC){var i=L4(e);i&&i!==dC&&hC(t,i,r)}var n=O4(e);cC&&(n=n.concat(cC(e)));for(var o=uC(t),s=uC(e),a=0;a<n.length;++a){var l=n[a];if(!R4[l]&&!(r&&r[l])&&!(s&&s[l])&&!(o&&o[l])){var p=D4(e,l);try{N4(t,l,p)}catch{}}}}return t}fC.exports=hC});var wC=oe(nr=>{"use strict";var Lh=60103,Fh=60106,Vc=60107,$c=60108,jc=60114,Gc=60109,Kc=60110,Yc=60112,Xc=60113,zy=60120,Zc=60115,Jc=60116,mC=60121,gC=60122,vC=60117,yC=60129,bC=60131;typeof Symbol=="function"&&Symbol.for&&(jr=Symbol.for,Lh=jr("react.element"),Fh=jr("react.portal"),Vc=jr("react.fragment"),$c=jr("react.strict_mode"),jc=jr("react.profiler"),Gc=jr("react.provider"),Kc=jr("react.context"),Yc=jr("react.forward_ref"),Xc=jr("react.suspense"),zy=jr("react.suspense_list"),Zc=jr("react.memo"),Jc=jr("react.lazy"),mC=jr("react.block"),gC=jr("react.server.block"),vC=jr("react.fundamental"),yC=jr("react.debug_trace_mode"),bC=jr("react.legacy_hidden"));var jr;function Un(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Lh:switch(t=t.type,t){case Vc:case jc:case $c:case Xc:case zy:return t;default:switch(t=t&&t.$$typeof,t){case Kc:case Yc:case Jc:case Zc:case Gc:return t;default:return e}}case Fh:return e}}}var F4=Gc,z4=Lh,B4=Yc,q4=Vc,U4=Jc,H4=Zc,W4=Fh,V4=jc,$4=$c,j4=Xc;nr.ContextConsumer=Kc;nr.ContextProvider=F4;nr.Element=z4;nr.ForwardRef=B4;nr.Fragment=q4;nr.Lazy=U4;nr.Memo=H4;nr.Portal=W4;nr.Profiler=V4;nr.StrictMode=$4;nr.Suspense=j4;nr.isAsyncMode=function(){return!1};nr.isConcurrentMode=function(){return!1};nr.isContextConsumer=function(t){return Un(t)===Kc};nr.isContextProvider=function(t){return Un(t)===Gc};nr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lh};nr.isForwardRef=function(t){return Un(t)===Yc};nr.isFragment=function(t){return Un(t)===Vc};nr.isLazy=function(t){return Un(t)===Jc};nr.isMemo=function(t){return Un(t)===Zc};nr.isPortal=function(t){return Un(t)===Fh};nr.isProfiler=function(t){return Un(t)===jc};nr.isStrictMode=function(t){return Un(t)===$c};nr.isSuspense=function(t){return Un(t)===Xc};nr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Vc||t===jc||t===yC||t===$c||t===Xc||t===zy||t===bC||typeof t=="object"&&t!==null&&(t.$$typeof===Jc||t.$$typeof===Zc||t.$$typeof===Gc||t.$$typeof===Kc||t.$$typeof===Yc||t.$$typeof===vC||t.$$typeof===mC||t[0]===gC)};nr.typeOf=Un});var SC=oe((oce,xC)=>{"use strict";xC.exports=wC()});function Z4(t,e){var r=t[1];return[e.payload,r+1]}function _C(t,e,r){Wc(function(){return t.apply(void 0,e)},r)}function J4(t,e,r,i,n,o,s){t.current=i,e.current=n,r.current=!1,o.current&&(o.current=null,s())}function Q4(t,e,r,i,n,o,s,a,l,p){if(t){var f=!1,d=null,m=function(){if(!f){var x=e.getState(),_,E;try{_=i(x,n.current)}catch(O){E=O,d=O}E||(d=null),_===o.current?s.current||l():(o.current=_,a.current=_,s.current=!0,p({type:"STORE_UPDATED",payload:{error:E}}))}};r.onStateChange=m,r.trySubscribe(),m();var g=function(){if(f=!0,r.tryUnsubscribe(),r.onStateChange=null,d)throw d};return g}}function zh(t,e){e===void 0&&(e={});var r=e,i=r.getDisplayName,n=i===void 0?function(R){return"ConnectAdvanced("+R+")"}:i,o=r.methodName,s=o===void 0?"connectAdvanced":o,a=r.renderCountProp,l=a===void 0?void 0:a,p=r.shouldHandleStateChanges,f=p===void 0?!0:p,d=r.storeKey,m=d===void 0?"store":d,g=r.withRef,v=g===void 0?!1:g,x=r.forwardRef,_=x===void 0?!1:x,E=r.context,O=E===void 0?An:E,L=Li(r,G4);if(0)var I;var D=O;return function(W){var N=W.displayName||W.name||"Component",z=n(N),$=jt({},L,{getDisplayName:n,methodName:s,renderCountProp:l,shouldHandleStateChanges:f,storeKey:m,displayName:z,wrappedComponentName:N,WrappedComponent:W}),q=L.pure;function J(Y){return t(Y.dispatch,$)}var X=q?Qt:function(Y){return Y()};function se(Y){var te=Qt(function(){var Ot=Y.reactReduxForwardedRef,oo=Li(Y,K4);return[Y.context,Ot,oo]},[Y]),re=te[0],ie=te[1],ae=te[2],he=Qt(function(){return re&&re.Consumer&&(0,EC.isContextConsumer)(ze.createElement(re.Consumer,null))?re:D},[re,D]),de=Lr(he),we=!!Y.store&&!!Y.store.getState&&!!Y.store.dispatch,Re=!!de&&!!de.store,ve=we?Y.store:de.store,Ae=Qt(function(){return J(ve)},[ve]),Ve=Qt(function(){if(!f)return X4;var Ot=Hc(ve,we?null:de.subscription),oo=Ot.notifyNestedSubs.bind(Ot);return[Ot,oo]},[ve,we,de]),Me=Ve[0],Le=Ve[1],We=Qt(function(){return we?de:jt({},de,{subscription:Me})},[we,de,Me]),Fe=qn(Z4,Y4,e$),st=Fe[0],Ze=st[0],et=Fe[1];if(Ze&&Ze.error)throw Ze.error;var Je=xi(),Et=xi(ae),kt=xi(),Xe=xi(!1),Tt=X(function(){return kt.current&&ae===Et.current?kt.current:Ae(ve.getState(),ae)},[ve,Ze,ae]);_C(J4,[Et,Je,Xe,ae,Tt,kt,Le]),_C(Q4,[f,ve,Me,Ae,Et,Je,Xe,kt,Le,et],[ve,Me,Ae]);var Kt=Qt(function(){return ze.createElement(W,jt({},Tt,{ref:ie}))},[ie,W,Tt]),Rr=Qt(function(){return f?ze.createElement(he.Provider,{value:We},Kt):Kt},[he,Kt,We]);return Rr}var ee=q?ze.memo(se):se;if(ee.WrappedComponent=W,ee.displayName=se.displayName=z,_){var Z=ze.forwardRef(function(te,re){return ze.createElement(ee,jt({},te,{reactReduxForwardedRef:re}))});return Z.displayName=z,Z.WrappedComponent=W,(0,By.default)(Z,W)}return(0,By.default)(ee,W)}}var By,EC,G4,K4,Y4,X4,e$,qy=V(()=>{Da();Fl();By=ye(Dh());Ye();EC=ye(SC());_h();Eh();qs();G4=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],K4=["reactReduxForwardedRef"],Y4=[],X4=[null,null];e$=function(){return[null,0]}});function CC(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function zl(t,e){if(CC(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(e,r[n])||!CC(t[r[n]],e[r[n]]))return!1;return!0}var Uy=V(()=>{});function Hy(t,e){var r={},i=function(s){var a=t[s];typeof a=="function"&&(r[s]=function(){return e(a.apply(void 0,arguments))})};for(var n in t)i(n);return r}var PC=V(()=>{});var IC=V(()=>{});var Wy=V(()=>{});var Vy=V(()=>{IC();Wy()});function Qc(t){return function(r,i){var n=t(r,i);function o(){return n}return o.dependsOnOwnProps=!1,o}}function AC(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function Bh(t,e){return function(i,n){var o=n.displayName,s=function(l,p){return s.dependsOnOwnProps?s.mapToProps(l,p):s.mapToProps(l)};return s.dependsOnOwnProps=!0,s.mapToProps=function(l,p){s.mapToProps=t,s.dependsOnOwnProps=AC(t);var f=s(l,p);return typeof f=="function"&&(s.mapToProps=f,s.dependsOnOwnProps=AC(f),f=s(l,p)),f},s}}var $y=V(()=>{Vy()});function r$(t){return typeof t=="function"?Bh(t,"mapDispatchToProps"):void 0}function i$(t){return t?void 0:Qc(function(e){return{dispatch:e}})}function n$(t){return t&&typeof t=="object"?Qc(function(e){return Hy(t,e)}):void 0}var TC,MC=V(()=>{PC();$y();TC=[r$,i$,n$]});function o$(t){return typeof t=="function"?Bh(t,"mapStateToProps"):void 0}function s$(t){return t?void 0:Qc(function(){return{}})}var RC,kC=V(()=>{$y();RC=[o$,s$]});function a$(t,e,r){return jt({},r,t,e)}function l$(t){return function(r,i){var n=i.displayName,o=i.pure,s=i.areMergedPropsEqual,a=!1,l;return function(f,d,m){var g=t(f,d,m);return a?(!o||!s(g,l))&&(l=g):(a=!0,l=g),l}}}function u$(t){return typeof t=="function"?l$(t):void 0}function c$(t){return t?void 0:function(){return a$}}var NC,OC=V(()=>{Da();Vy();NC=[u$,c$]});var DC=V(()=>{Wy()});function p$(t,e,r,i){return function(o,s){return r(t(o,s),e(i,s),s)}}function h$(t,e,r,i,n){var o=n.areStatesEqual,s=n.areOwnPropsEqual,a=n.areStatePropsEqual,l=!1,p,f,d,m,g;function v(L,I){return p=L,f=I,d=t(p,f),m=e(i,f),g=r(d,m,f),l=!0,g}function x(){return d=t(p,f),e.dependsOnOwnProps&&(m=e(i,f)),g=r(d,m,f),g}function _(){return t.dependsOnOwnProps&&(d=t(p,f)),e.dependsOnOwnProps&&(m=e(i,f)),g=r(d,m,f),g}function E(){var L=t(p,f),I=!a(L,d);return d=L,I&&(g=r(d,m,f)),g}function O(L,I){var D=!s(I,f),R=!o(L,p,I,f);return p=L,f=I,D&&R?x():D?_():R?E():g}return function(I,D){return l?O(I,D):v(I,D)}}function jy(t,e){var r=e.initMapStateToProps,i=e.initMapDispatchToProps,n=e.initMergeProps,o=Li(e,d$),s=r(t,o),a=i(t,o),l=n(t,o),p=o.pure?h$:p$;return p(s,a,l,t,o)}var d$,LC=V(()=>{Fl();DC();d$=["initMapStateToProps","initMapDispatchToProps","initMergeProps"]});function Gy(t,e,r){for(var i=e.length-1;i>=0;i--){var n=e[i](t);if(n)return n}return function(o,s){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+s.wrappedComponentName+".")}}function m$(t,e){return t===e}function g$(t){var e=t===void 0?{}:t,r=e.connectHOC,i=r===void 0?zh:r,n=e.mapStateToPropsFactories,o=n===void 0?RC:n,s=e.mapDispatchToPropsFactories,a=s===void 0?TC:s,l=e.mergePropsFactories,p=l===void 0?NC:l,f=e.selectorFactory,d=f===void 0?jy:f;return function(g,v,x,_){_===void 0&&(_={});var E=_,O=E.pure,L=O===void 0?!0:O,I=E.areStatesEqual,D=I===void 0?m$:I,R=E.areOwnPropsEqual,W=R===void 0?zl:R,N=E.areStatePropsEqual,z=N===void 0?zl:N,$=E.areMergedPropsEqual,q=$===void 0?zl:$,J=Li(E,f$),X=Gy(g,o,"mapStateToProps"),se=Gy(v,a,"mapDispatchToProps"),ee=Gy(x,p,"mergeProps");return i(d,jt({methodName:"connect",getDisplayName:function(Y){return"Connect("+Y+")"},shouldHandleStateChanges:!!g,initMapStateToProps:X,initMapDispatchToProps:se,initMergeProps:ee,pure:L,areStatesEqual:D,areOwnPropsEqual:W,areStatePropsEqual:z,areMergedPropsEqual:q},J))}}var f$,Ue,FC=V(()=>{Da();Fl();qy();Uy();MC();kC();OC();LC();f$=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];Ue=g$()});function Ky(){var t=Lr(An);return t}var Yy=V(()=>{Ye();qs()});function Xy(t){t===void 0&&(t=An);var e=t===An?Ky:function(){return Lr(t)};return function(){var i=e(),n=i.store;return n}}var qh,Zy=V(()=>{Ye();qs();Yy();qh=Xy()});var zC=V(()=>{qs();Zy()});var BC=V(()=>{Ye();Yy();_h();Eh();qs()});var qC=V(()=>{oC();qy();qs();FC();zC();BC();Zy();Uy()});var UC=V(()=>{Ye()});var ft=V(()=>{qC();UC();My();rC(Uc)});var Uh=oe(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.frontloadConnect=Fa.Frontload=void 0;var Jy=function(){function t(e,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();Fa.frontloadServerRender=I$;var v$=(Ye(),Rc(GE)),ed=WC(v$),y$=Ty(),HC=WC(y$);function WC(t){return t&&t.__esModule?t:{default:t}}function VC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $C(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function jC(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var b$=function(){return typeof window>"u"||!window.document||!window.document.createElement},w$=b$(),Bl=[],La={MOUNT:0,UPDATE:1},x$=!1,GC=function(e,r){for(var i=[],n=0;n<e.length;n++)i.push(r(e[n],n));return i};function S$(t,e){var r=e.withLogging,i=e.continueRenderingOnError,n=void 0;return Promise.all(GC(t,function(o){return o.catch(function(s){return n||(n=s),r&&x$("frontloadServerRender info","ERROR:",s),s})})).then(function(){if(i!==!0&&n)throw n})}var _$=Fa.Frontload=function(t){jC(e,t),Jy(e,[{key:"getChildContext",value:function(){var i=this;return{frontload:{isServer:this.isServer,firstClientRenderDone:this.isServer?!0:this.firstClientRenderDone,pushFrontload:function(o,s,a,l,p){var f=a===La.MOUNT,d=a===La.UPDATE,m=i.props.noServerRender||s.noServerRender;i.isServer&&m||f&&s.onMount===!1||d&&!s.onUpdate||(i.isServer?Bl.unshift({fn:function(){return o(l,{isMount:f,isUpdate:d})},options:s,componentDisplayName:l.displayName}):(m||i.firstClientRenderDone)&&o(l,{isMount:f,isUpdate:d}))}}}}}]);function e(r,i){VC(this,e);var n=$C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,i));return n.isServer=r.isServer===void 0?w$:r.isServer,n.componentDidMount=function(){n.firstClientRenderDone=!0},n}return Jy(e,[{key:"render",value:function(){return ed.default.Children.only(this.props.children)}}]),e}(ed.default.Component);_$.childContextTypes={frontload:HC.default.object};var KC=function(t){jC(e,t);function e(r,i){VC(this,e);var n=$C(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,i));return n.pushFrontload=function(o){return function(s){if(o===La.UPDATE){var a=n.props.options._experimental_updateFunc;if(a&&!a(s.componentProps,n.props.componentProps))return}var l="for component: ["+(n.props.component.displayName||"anonymous")+"] on ["+(o===La.MOUNT?"mount":"update")+"]";n.context.frontload.pushFrontload(n.props.frontload,n.props.options,o,n.props.componentProps,l)}},i.frontload.isServer?n.componentWillMount=n.pushFrontload(La.MOUNT):(n.componentDidMount=n.pushFrontload(La.MOUNT),n.componentDidUpdate=n.pushFrontload(La.UPDATE)),n}return Jy(e,[{key:"render",value:function(){return ed.default.createElement(this.props.component,this.props.componentProps)}}]),e}(ed.default.Component);KC.contextTypes={frontload:HC.default.object};var Mde=Fa.frontloadConnect=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(i){return function(n){return ed.default.createElement(KC,{frontload:e,component:i,componentProps:n,options:r})}}};function E$(t){t(!0);var e=Bl;return Bl=[],e}function C$(t,e){return S$(GC(t,function(r){return r.fn()}),e)}function P$(t){var e=t(!1);return Bl=[],e}function YC(t,e){var r=e.withLogging,i=e.maxNestedFrontloadComponents,n=e.continueRenderingOnError,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=E$(t),l=a.length+0,p=l-s;if(!p){var f=P$(t);return Promise.resolve(f)}var d=r&&Date.now();return C$(a,{withLogging:r,continueRenderingOnError:n}).then(function(){if(o===i){var m=t(!1),g=Bl.length+0,v=g-l;return Bl=[],m}return YC(t,{withLogging:r,maxNestedFrontloadComponents:i,continueRenderingOnError:n},o+1,l)})}function I$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.maxNestedFrontloadComponents||(e.maxNestedFrontloadComponents=1),YC(t,e)}});function td(t,e){return td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},td(t,e)}var XC=V(()=>{});function ji(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,td(t,e)}var Hh=V(()=>{XC()});function Wh(t){return t.charAt(0)==="/"}function Qy(t,e){for(var r=e,i=r+1,n=t.length;i<n;r+=1,i+=1)t[r]=t[i];t.pop()}function A$(t,e){e===void 0&&(e="");var r=t&&t.split("/")||[],i=e&&e.split("/")||[],n=t&&Wh(t),o=e&&Wh(e),s=n||o;if(t&&Wh(t)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";var a;if(i.length){var l=i[i.length-1];a=l==="."||l===".."||l===""}else a=!1;for(var p=0,f=i.length;f>=0;f--){var d=i[f];d==="."?Qy(i,f):d===".."?(Qy(i,f),p++):p&&(Qy(i,f),p--)}if(!s)for(;p--;p)i.unshift("..");s&&i[0]!==""&&(!i[0]||!Wh(i[0]))&&i.unshift("");var m=i.join("/");return a&&m.substr(-1)!=="/"&&(m+="/"),m}var ZC,JC=V(()=>{ZC=A$});var QC=V(()=>{});function M$(t,e){if(!T$){if(t)return;var r="Warning: "+e;typeof console<"u"&&console.warn(r);try{throw Error(r)}catch{}}}var T$,eb,eP=V(()=>{T$=!0;eb=M$});function Hn(t,e){if(!t){if(R$)throw new Error(tb);var r=typeof e=="function"?e():e,i=r?"".concat(tb,": ").concat(r):tb;throw new Error(i)}}var R$,tb,Vh=V(()=>{R$=!0,tb="Invariant failed"});function id(t){return t.charAt(0)==="/"?t:"/"+t}function tP(t){return t.charAt(0)==="/"?t.substr(1):t}function k$(t,e){return t.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(t.charAt(e.length))!==-1}function aP(t,e){return k$(t,e)?t.substr(e.length):t}function lP(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t}function N$(t){var e=t||"/",r="",i="",n=e.indexOf("#");n!==-1&&(i=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");return o!==-1&&(r=e.substr(o),e=e.substr(0,o)),{pathname:e,search:r==="?"?"":r,hash:i==="#"?"":i}}function Si(t){var e=t.pathname,r=t.search,i=t.hash,n=e||"/";return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function Fi(t,e,r,i){var n;typeof t=="string"?(n=N$(t),n.state=e):(n=jt({},t),n.pathname===void 0&&(n.pathname=""),n.search?n.search.charAt(0)!=="?"&&(n.search="?"+n.search):n.search="",n.hash?n.hash.charAt(0)!=="#"&&(n.hash="#"+n.hash):n.hash="",e!==void 0&&n.state===void 0&&(n.state=e));try{n.pathname=decodeURI(n.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+n.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return r&&(n.key=r),i?n.pathname?n.pathname.charAt(0)!=="/"&&(n.pathname=ZC(n.pathname,i.pathname)):n.pathname=i.pathname:n.pathname||(n.pathname="/"),n}function ib(){var t=null;function e(s){return t=s,function(){t===s&&(t=null)}}function r(s,a,l,p){if(t!=null){var f=typeof t=="function"?t(s,a):t;typeof f=="string"?typeof l=="function"?l(f,p):p(!0):p(f!==!1)}else p(!0)}var i=[];function n(s){var a=!0;function l(){a&&s.apply(void 0,arguments)}return i.push(l),function(){a=!1,i=i.filter(function(p){return p!==l})}}function o(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];i.forEach(function(p){return p.apply(void 0,a)})}return{setPrompt:e,confirmTransitionTo:r,appendListener:n,notifyListeners:o}}function cP(t,e){e(window.confirm(t))}function O$(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function D$(){return window.navigator.userAgent.indexOf("Trident")===-1}function L$(){return window.navigator.userAgent.indexOf("Firefox")===-1}function F$(t){return t.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}function nP(){try{return window.history.state||{}}catch{return{}}}function $h(t){t===void 0&&(t={}),uP||Hn(!1);var e=window.history,r=O$(),i=!D$(),n=t,o=n.forceRefresh,s=o===void 0?!1:o,a=n.getUserConfirmation,l=a===void 0?cP:a,p=n.keyLength,f=p===void 0?6:p,d=t.basename?lP(id(t.basename)):"";function m(re){var ie=re||{},ae=ie.key,he=ie.state,de=window.location,we=de.pathname,Re=de.search,ve=de.hash,Ae=we+Re+ve;return d&&(Ae=aP(Ae,d)),Fi(Ae,he,ae)}function g(){return Math.random().toString(36).substr(2,f)}var v=ib();function x(re){jt(te,re),te.length=e.length,v.notifyListeners(te.location,te.action)}function _(re){F$(re)||L(m(re.state))}function E(){L(m(nP()))}var O=!1;function L(re){if(O)O=!1,x();else{var ie="POP";v.confirmTransitionTo(re,ie,l,function(ae){ae?x({action:ie,location:re}):I(re)})}}function I(re){var ie=te.location,ae=R.indexOf(ie.key);ae===-1&&(ae=0);var he=R.indexOf(re.key);he===-1&&(he=0);var de=ae-he;de&&(O=!0,$(de))}var D=m(nP()),R=[D.key];function W(re){return d+Si(re)}function N(re,ie){var ae="PUSH",he=Fi(re,ie,g(),te.location);v.confirmTransitionTo(he,ae,l,function(de){if(de){var we=W(he),Re=he.key,ve=he.state;if(r)if(e.pushState({key:Re,state:ve},null,we),s)window.location.href=we;else{var Ae=R.indexOf(te.location.key),Ve=R.slice(0,Ae+1);Ve.push(he.key),R=Ve,x({action:ae,location:he})}else window.location.href=we}})}function z(re,ie){var ae="REPLACE",he=Fi(re,ie,g(),te.location);v.confirmTransitionTo(he,ae,l,function(de){if(de){var we=W(he),Re=he.key,ve=he.state;if(r)if(e.replaceState({key:Re,state:ve},null,we),s)window.location.replace(we);else{var Ae=R.indexOf(te.location.key);Ae!==-1&&(R[Ae]=he.key),x({action:ae,location:he})}else window.location.replace(we)}})}function $(re){e.go(re)}function q(){$(-1)}function J(){$(1)}var X=0;function se(re){X+=re,X===1&&re===1?(window.addEventListener(rP,_),i&&window.addEventListener(iP,E)):X===0&&(window.removeEventListener(rP,_),i&&window.removeEventListener(iP,E))}var ee=!1;function Z(re){re===void 0&&(re=!1);var ie=v.setPrompt(re);return ee||(se(1),ee=!0),function(){return ee&&(ee=!1,se(-1)),ie()}}function Y(re){var ie=v.appendListener(re);return se(1),function(){se(-1),ie()}}var te={length:e.length,action:"POP",location:D,createHref:W,push:N,replace:z,go:$,goBack:q,goForward:J,block:Z,listen:Y};return te}function dP(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)}function rd(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.substring(e+1)}function B$(t){window.location.hash=t}function rb(t){window.location.replace(dP(window.location.href)+"#"+t)}function pP(t){t===void 0&&(t={}),uP||Hn(!1);var e=window.history,r=L$(),i=t,n=i.getUserConfirmation,o=n===void 0?cP:n,s=i.hashType,a=s===void 0?"slash":s,l=t.basename?lP(id(t.basename)):"",p=z$[a],f=p.encodePath,d=p.decodePath;function m(){var ae=d(rd());return l&&(ae=aP(ae,l)),Fi(ae)}var g=ib();function v(ae){jt(ie,ae),ie.length=e.length,g.notifyListeners(ie.location,ie.action)}var x=!1,_=null;function E(ae,he){return ae.pathname===he.pathname&&ae.search===he.search&&ae.hash===he.hash}function O(){var ae=rd(),he=f(ae);if(ae!==he)rb(he);else{var de=m(),we=ie.location;if(!x&&E(we,de)||_===Si(de))return;_=null,L(de)}}function L(ae){if(x)x=!1,v();else{var he="POP";g.confirmTransitionTo(ae,he,o,function(de){de?v({action:he,location:ae}):I(ae)})}}function I(ae){var he=ie.location,de=N.lastIndexOf(Si(he));de===-1&&(de=0);var we=N.lastIndexOf(Si(ae));we===-1&&(we=0);var Re=de-we;Re&&(x=!0,J(Re))}var D=rd(),R=f(D);D!==R&&rb(R);var W=m(),N=[Si(W)];function z(ae){var he=document.querySelector("base"),de="";return he&&he.getAttribute("href")&&(de=dP(window.location.href)),de+"#"+f(l+Si(ae))}function $(ae,he){var de="PUSH",we=Fi(ae,void 0,void 0,ie.location);g.confirmTransitionTo(we,de,o,function(Re){if(Re){var ve=Si(we),Ae=f(l+ve),Ve=rd()!==Ae;if(Ve){_=ve,B$(Ae);var Me=N.lastIndexOf(Si(ie.location)),Le=N.slice(0,Me+1);Le.push(ve),N=Le,v({action:de,location:we})}else v()}})}function q(ae,he){var de="REPLACE",we=Fi(ae,void 0,void 0,ie.location);g.confirmTransitionTo(we,de,o,function(Re){if(Re){var ve=Si(we),Ae=f(l+ve),Ve=rd()!==Ae;Ve&&(_=ve,rb(Ae));var Me=N.indexOf(Si(ie.location));Me!==-1&&(N[Me]=ve),v({action:de,location:we})}})}function J(ae){e.go(ae)}function X(){J(-1)}function se(){J(1)}var ee=0;function Z(ae){ee+=ae,ee===1&&ae===1?window.addEventListener(oP,O):ee===0&&window.removeEventListener(oP,O)}var Y=!1;function te(ae){ae===void 0&&(ae=!1);var he=g.setPrompt(ae);return Y||(Z(1),Y=!0),function(){return Y&&(Y=!1,Z(-1)),he()}}function re(ae){var he=g.appendListener(ae);return Z(1),function(){Z(-1),he()}}var ie={length:e.length,action:"POP",location:W,createHref:z,push:$,replace:q,go:J,goBack:X,goForward:se,block:te,listen:re};return ie}function sP(t,e,r){return Math.min(Math.max(t,e),r)}function hP(t){t===void 0&&(t={});var e=t,r=e.getUserConfirmation,i=e.initialEntries,n=i===void 0?["/"]:i,o=e.initialIndex,s=o===void 0?0:o,a=e.keyLength,l=a===void 0?6:a,p=ib();function f(N){jt(W,N),W.length=W.entries.length,p.notifyListeners(W.location,W.action)}function d(){return Math.random().toString(36).substr(2,l)}var m=sP(s,0,n.length-1),g=n.map(function(N){return typeof N=="string"?Fi(N,void 0,d()):Fi(N,void 0,N.key||d())}),v=Si;function x(N,z){var $="PUSH",q=Fi(N,z,d(),W.location);p.confirmTransitionTo(q,$,r,function(J){if(J){var X=W.index,se=X+1,ee=W.entries.slice(0);ee.length>se?ee.splice(se,ee.length-se,q):ee.push(q),f({action:$,location:q,index:se,entries:ee})}})}function _(N,z){var $="REPLACE",q=Fi(N,z,d(),W.location);p.confirmTransitionTo(q,$,r,function(J){J&&(W.entries[W.index]=q,f({action:$,location:q}))})}function E(N){var z=sP(W.index+N,0,W.entries.length-1),$="POP",q=W.entries[z];p.confirmTransitionTo(q,$,r,function(J){J?f({action:$,location:q,index:z}):f()})}function O(){E(-1)}function L(){E(1)}function I(N){var z=W.index+N;return z>=0&&z<W.entries.length}function D(N){return N===void 0&&(N=!1),p.setPrompt(N)}function R(N){return p.appendListener(N)}var W={length:g.length,action:"POP",location:g[m],index:m,entries:g,createHref:v,push:x,replace:_,go:E,goBack:O,goForward:L,canGo:I,block:D,listen:R};return W}var uP,rP,iP,oP,z$,jh=V(()=>{Da();JC();QC();Vh();uP=!!(typeof window<"u"&&window.document&&window.document.createElement);rP="popstate",iP="hashchange";oP="hashchange",z$={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+tP(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:tP,decodePath:id},slash:{encodePath:id,decodePath:id}}});function q$(){var t="__global_unique_id__";return fP[t]=(fP[t]||0)+1}function U$(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function H$(t){var e=[];return{on:function(i){e.push(i)},off:function(i){e=e.filter(function(n){return n!==i})},get:function(){return t},set:function(i,n){t=i,e.forEach(function(o){return o(t,n)})}}}function W$(t){return Array.isArray(t)?t[0]:t}function V$(t,e){var r,i,n="__create-react-context-"+q$()+"__",o=function(a){ji(l,a);function l(){var f;return f=a.apply(this,arguments)||this,f.emitter=H$(f.props.value),f}var p=l.prototype;return p.getChildContext=function(){var d;return d={},d[n]=this.emitter,d},p.componentWillReceiveProps=function(d){if(this.props.value!==d.value){var m=this.props.value,g=d.value,v;U$(m,g)?v=0:(v=typeof e=="function"?e(m,g):nb,v|=0,v!==0&&this.emitter.set(d.value,v))}},p.render=function(){return this.props.children},l}(me);o.childContextTypes=(r={},r[n]=ob.default.object.isRequired,r);var s=function(a){ji(l,a);function l(){var f;return f=a.apply(this,arguments)||this,f.state={value:f.getValue()},f.onUpdate=function(d,m){var g=f.observedBits|0;g&m&&f.setState({value:f.getValue()})},f}var p=l.prototype;return p.componentWillReceiveProps=function(d){var m=d.observedBits;this.observedBits=m??nb},p.componentDidMount=function(){this.context[n]&&this.context[n].on(this.onUpdate);var d=this.props.observedBits;this.observedBits=d??nb},p.componentWillUnmount=function(){this.context[n]&&this.context[n].off(this.onUpdate)},p.getValue=function(){return this.context[n]?this.context[n].get():t},p.render=function(){return W$(this.props.children)(this.state.value)},l}(me);return s.contextTypes=(i={},i[n]=ob.default.object,i),{Provider:o,Consumer:s}}var ob,nb,fP,$$,mP,gP=V(()=>{Ye();Hh();ob=ye(Ty()),nb=1073741823,fP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};$$=ze.createContext||V$,mP=$$});var yP=oe((Kde,vP)=>{vP.exports=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"}});var SP=oe((Yde,ql)=>{var Kh=yP();ql.exports=xP;ql.exports.parse=sb;ql.exports.compile=G$;ql.exports.tokensToFunction=bP;ql.exports.tokensToRegExp=wP;var j$=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function sb(t,e){for(var r=[],i=0,n=0,o="",s=e&&e.delimiter||"/",a;(a=j$.exec(t))!=null;){var l=a[0],p=a[1],f=a.index;if(o+=t.slice(n,f),n=f+l.length,p){o+=p[1];continue}var d=t[n],m=a[2],g=a[3],v=a[4],x=a[5],_=a[6],E=a[7];o&&(r.push(o),o="");var O=m!=null&&d!=null&&d!==m,L=_==="+"||_==="*",I=_==="?"||_==="*",D=a[2]||s,R=v||x;r.push({name:g||i++,prefix:m||"",delimiter:D,optional:I,repeat:L,partial:O,asterisk:!!E,pattern:R?X$(R):E?".*":"[^"+Gh(D)+"]+?"})}return n<t.length&&(o+=t.substr(n)),o&&r.push(o),r}function G$(t,e){return bP(sb(t,e),e)}function K$(t){return encodeURI(t).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Y$(t){return encodeURI(t).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function bP(t,e){for(var r=new Array(t.length),i=0;i<t.length;i++)typeof t[i]=="object"&&(r[i]=new RegExp("^(?:"+t[i].pattern+")$",lb(e)));return function(n,o){for(var s="",a=n||{},l=o||{},p=l.pretty?K$:encodeURIComponent,f=0;f<t.length;f++){var d=t[f];if(typeof d=="string"){s+=d;continue}var m=a[d.name],g;if(m==null)if(d.optional){d.partial&&(s+=d.prefix);continue}else throw new TypeError('Expected "'+d.name+'" to be defined');if(Kh(m)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(m)+"`");if(m.length===0){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var v=0;v<m.length;v++){if(g=p(m[v]),!r[f].test(g))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(g)+"`");s+=(v===0?d.prefix:d.delimiter)+g}continue}if(g=d.asterisk?Y$(m):p(m),!r[f].test(g))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+g+'"');s+=d.prefix+g}return s}}function Gh(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function X$(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function ab(t,e){return t.keys=e,t}function lb(t){return t&&t.sensitive?"":"i"}function Z$(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var i=0;i<r.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ab(t,e)}function J$(t,e,r){for(var i=[],n=0;n<t.length;n++)i.push(xP(t[n],e,r).source);var o=new RegExp("(?:"+i.join("|")+")",lb(r));return ab(o,e)}function Q$(t,e,r){return wP(sb(t,r),e,r)}function wP(t,e,r){Kh(e)||(r=e||r,e=[]),r=r||{};for(var i=r.strict,n=r.end!==!1,o="",s=0;s<t.length;s++){var a=t[s];if(typeof a=="string")o+=Gh(a);else{var l=Gh(a.prefix),p="(?:"+a.pattern+")";e.push(a),a.repeat&&(p+="(?:"+l+p+")*"),a.optional?a.partial?p=l+"("+p+")?":p="(?:"+l+"("+p+"))?":p=l+"("+p+")",o+=p}}var f=Gh(r.delimiter||"/"),d=o.slice(-f.length)===f;return i||(o=(d?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),n?o+="$":o+=i&&d?"":"(?="+f+"|$)",ab(new RegExp("^"+o,lb(r)),e)}function xP(t,e,r){return Kh(e)||(r=e||r,e=[]),r=r||{},t instanceof RegExp?Z$(t,e):Kh(t)?J$(t,e,r):Q$(t,e,r)}});function i9(t,e){var r=""+e.end+e.strict+e.sensitive,i=_P[r]||(_P[r]={});if(i[t])return i[t];var n=[],o=(0,IP.default)(t,n,e),s={regexp:o,keys:n};return EP<r9&&(i[t]=s,EP++),s}function za(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var r=e,i=r.path,n=r.exact,o=n===void 0?!1:n,s=r.strict,a=s===void 0?!1:s,l=r.sensitive,p=l===void 0?!1:l,f=[].concat(i);return f.reduce(function(d,m){if(!m&&m!=="")return null;if(d)return d;var g=i9(m,{end:o,strict:a,sensitive:p}),v=g.regexp,x=g.keys,_=v.exec(t);if(!_)return null;var E=_[0],O=_.slice(1),L=t===E;return o&&!L?null:{path:m,url:m==="/"&&E===""?"/":E,isExact:L,params:x.reduce(function(I,D,R){return I[D.name]=O[R],I},{})}},null)}function n9(t){return ze.Children.count(t)===0}function cb(t){return t.charAt(0)==="/"?t:"/"+t}function o9(t,e){return t?jt({},e,{pathname:cb(t)+e.pathname}):e}function s9(t,e){if(!t)return e;var r=cb(t);return e.pathname.indexOf(r)!==0?e:jt({},e,{pathname:e.pathname.substr(r.length)})}function CP(t){return typeof t=="string"?t:Si(t)}function ub(t){return function(){Hn(!1)}}function PP(){}function Wn(t){var e="withRouter("+(t.displayName||t.name)+")",r=function(n){var o=n.wrappedComponentRef,s=Li(n,["wrappedComponentRef"]);return ze.createElement(Us.Consumer,null,function(a){return a||Hn(!1),ze.createElement(t,jt({},s,a,{ref:o}))})};return r.displayName=e,r.WrappedComponent=t,(0,AP.default)(r,t)}var IP,ipe,AP,TP,e9,Us,Hs,t9,spe,_P,r9,EP,Tn,a9,Yh,ape,is=V(()=>{Hh();Ye();jh();gP();Vh();Da();IP=ye(SP()),ipe=ye(Dy());Fl();AP=ye(Dh()),TP=function(e){var r=mP();return r.displayName=e,r},e9=TP("Router-History"),Us=TP("Router"),Hs=function(t){ji(e,t),e.computeRootMatch=function(n){return{path:"/",url:"/",params:{},isExact:n==="/"}};function e(i){var n;return n=t.call(this,i)||this,n.state={location:i.history.location},n._isMounted=!1,n._pendingLocation=null,i.staticContext||(n.unlisten=i.history.listen(function(o){n._pendingLocation=o})),n}var r=e.prototype;return r.componentDidMount=function(){var n=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(o){n._isMounted&&n.setState({location:o})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return ze.createElement(Us.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},ze.createElement(e9.Provider,{children:this.props.children||null,value:this.props.history}))},e}(ze.Component),t9=function(t){ji(e,t);function e(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,i.history=hP(i.props),i}var r=e.prototype;return r.render=function(){return ze.createElement(Hs,{history:this.history,children:this.props.children})},e}(ze.Component),spe=function(t){ji(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},r.componentDidUpdate=function(n){this.props.onUpdate&&this.props.onUpdate.call(this,this,n)},r.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},r.render=function(){return null},e}(ze.Component),_P={},r9=1e4,EP=0;Tn=function(t){ji(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var n=this;return ze.createElement(Us.Consumer,null,function(o){o||Hn(!1);var s=n.props.location||o.location,a=n.props.computedMatch?n.props.computedMatch:n.props.path?za(s.pathname,n.props):o.match,l=jt({},o,{location:s,match:a}),p=n.props,f=p.children,d=p.component,m=p.render;return Array.isArray(f)&&n9(f)&&(f=null),ze.createElement(Us.Provider,{value:l},l.match?f?typeof f=="function"?f(l):f:d?ze.createElement(d,l):m?m(l):null:typeof f=="function"?f(l):null)})},e}(ze.Component);a9=function(t){ji(e,t);function e(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,i.handlePush=function(a){return i.navigateTo(a,"PUSH")},i.handleReplace=function(a){return i.navigateTo(a,"REPLACE")},i.handleListen=function(){return PP},i.handleBlock=function(){return PP},i}var r=e.prototype;return r.navigateTo=function(n,o){var s=this.props,a=s.basename,l=a===void 0?"":a,p=s.context,f=p===void 0?{}:p;f.action=o,f.location=o9(l,Fi(n)),f.url=CP(f.location)},r.render=function(){var n=this.props,o=n.basename,s=o===void 0?"":o,a=n.context,l=a===void 0?{}:a,p=n.location,f=p===void 0?"/":p,d=Li(n,["basename","context","location"]),m={createHref:function(v){return cb(s+CP(v))},action:"POP",location:s9(s,Fi(f)),push:this.handlePush,replace:this.handleReplace,go:ub("go"),goBack:ub("goBack"),goForward:ub("goForward"),listen:this.handleListen,block:this.handleBlock};return ze.createElement(Hs,jt({},d,{history:m,staticContext:l}))},e}(ze.Component),Yh=function(t){ji(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var n=this;return ze.createElement(Us.Consumer,null,function(o){o||Hn(!1);var s=n.props.location||o.location,a,l;return ze.Children.forEach(n.props.children,function(p){if(l==null&&ze.isValidElement(p)){a=p;var f=p.props.path||p.props.from;l=f?za(s.pathname,jt({},p.props,{path:f})):o.match}}),l?ze.cloneElement(a,{location:s,computedMatch:l}):null})},e}(ze.Component);ape=ze.useContext});var Pe=oe((Ul,nd)=>{(function(){var t,e="4.17.21",r=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",n="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",p=1,f=2,d=4,m=1,g=2,v=1,x=2,_=4,E=8,O=16,L=32,I=64,D=128,R=256,W=512,N=30,z="...",$=800,q=16,J=1,X=2,se=3,ee=1/0,Z=9007199254740991,Y=17976931348623157e292,te=NaN,re=4294967295,ie=re-1,ae=re>>>1,he=[["ary",D],["bind",v],["bindKey",x],["curry",E],["curryRight",O],["flip",W],["partial",L],["partialRight",I],["rearg",R]],de="[object Arguments]",we="[object Array]",Re="[object AsyncFunction]",ve="[object Boolean]",Ae="[object Date]",Ve="[object DOMException]",Me="[object Error]",Le="[object Function]",We="[object GeneratorFunction]",Fe="[object Map]",st="[object Number]",Ze="[object Null]",et="[object Object]",Je="[object Promise]",Et="[object Proxy]",kt="[object RegExp]",Xe="[object Set]",Tt="[object String]",Kt="[object Symbol]",Rr="[object Undefined]",Ot="[object WeakMap]",oo="[object WeakSet]",so="[object ArrayBuffer]",mn="[object DataView]",Ir="[object Float32Array]",wt="[object Float64Array]",zi="[object Int8Array]",Ai="[object Int16Array]",hl="[object Int32Array]",mr="[object Uint8Array]",ao="[object Uint8ClampedArray]",lo="[object Uint16Array]",bs="[object Uint32Array]",Zu=/\b__p \+= '';/g,ai=/\b(__p \+=) '' \+/g,wp=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fl=/&(?:amp|lt|gt|quot|#39);/g,ml=/[&<>"']/g,Qg=RegExp(fl.source),ev=RegExp(ml.source),Ju=/<%-([\s\S]+?)%>/g,xp=/<%([\s\S]+?)%>/g,Qu=/<%=([\s\S]+?)%>/g,Sp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tv=/^\w*$/,rv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ec=/[\\^$.*+?()[\]{}|]/g,_p=RegExp(ec.source),ti=/^\s+/,Fo=/\s/,pa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,tc=/\{\n\/\* \[wrapped with (.+)\] \*/,ha=/,? & /,ws=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,iv=/[()=,{}\[\]\/\s]/,Ep=/\\(\\)?/g,rc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ic=/\w*$/,gl=/^[-+]0x[0-9a-f]+$/i,li=/^0b[01]+$/i,zo=/^\[object .+?Constructor\]$/,ui=/^0o[0-7]+$/i,Ur=/^(?:0|[1-9]\d*)$/,Bo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qi=/($^)/,qo=/['\n\r\u2028\u2029\\]/g,uo="\\ud800-\\udfff",Uo="\\u0300-\\u036f",xs="\\ufe20-\\ufe2f",nc="\\u20d0-\\u20ff",Ss=Uo+xs+nc,_s="\\u2700-\\u27bf",fa="a-z\\xdf-\\xf6\\xf8-\\xff",vl="\\xac\\xb1\\xd7\\xf7",oc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Bi="\\u2000-\\u206f",sc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",co="A-Z\\xc0-\\xd6\\xd8-\\xde",po="\\ufe0e\\ufe0f",ma=vl+oc+Bi+sc,gn="['\u2019]",Ti="["+uo+"]",vn="["+ma+"]",ga="["+Ss+"]",ac="\\d+",vt="["+_s+"]",yn="["+fa+"]",ci="[^"+uo+ma+ac+_s+fa+co+"]",Hr="\\ud83c[\\udffb-\\udfff]",va="(?:"+ga+"|"+Hr+")",Ho="[^"+uo+"]",qi="(?:\\ud83c[\\udde6-\\uddff]){2}",ya="[\\ud800-\\udbff][\\udc00-\\udfff]",Dn="["+co+"]",Es="\\u200d",ba="(?:"+yn+"|"+ci+")",nv="(?:"+Dn+"|"+ci+")",Cp="(?:"+gn+"(?:d|ll|m|re|s|t|ve))?",lc="(?:"+gn+"(?:D|LL|M|RE|S|T|VE))?",yl=va+"?",uc="["+po+"]?",ov="(?:"+Es+"(?:"+[Ho,qi,ya].join("|")+")"+uc+yl+")*",Pp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",dc=uc+yl+ov,Ip="(?:"+[vt,qi,ya].join("|")+")"+dc,Ap="(?:"+[Ho+ga+"?",ga,qi,ya,Ti].join("|")+")",sv=RegExp(gn,"g"),Tp=RegExp(ga,"g"),ho=RegExp(Hr+"(?="+Hr+")|"+Ap+dc,"g"),av=RegExp([Dn+"?"+yn+"+"+Cp+"(?="+[vn,Dn,"$"].join("|")+")",nv+"+"+lc+"(?="+[vn,Dn+ba,"$"].join("|")+")",Dn+"?"+ba+"+"+Cp,Dn+"+"+lc,cc,Pp,ac,Ip].join("|"),"g"),fo=RegExp("["+Es+uo+Ss+po+"]"),bl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mp=-1,Yt={};Yt[Ir]=Yt[wt]=Yt[zi]=Yt[Ai]=Yt[hl]=Yt[mr]=Yt[ao]=Yt[lo]=Yt[bs]=!0,Yt[de]=Yt[we]=Yt[so]=Yt[ve]=Yt[mn]=Yt[Ae]=Yt[Me]=Yt[Le]=Yt[Fe]=Yt[st]=Yt[et]=Yt[kt]=Yt[Xe]=Yt[Tt]=Yt[Ot]=!1;var Xt={};Xt[de]=Xt[we]=Xt[so]=Xt[mn]=Xt[ve]=Xt[Ae]=Xt[Ir]=Xt[wt]=Xt[zi]=Xt[Ai]=Xt[hl]=Xt[Fe]=Xt[st]=Xt[et]=Xt[kt]=Xt[Xe]=Xt[Tt]=Xt[Kt]=Xt[mr]=Xt[ao]=Xt[lo]=Xt[bs]=!0,Xt[Me]=Xt[Le]=Xt[Ot]=!1;var lv={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},uv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},dv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pv=parseFloat,hv=parseInt,Rp=typeof global=="object"&&global&&global.Object===Object&&global,fv=typeof self=="object"&&self&&self.Object===Object&&self,or=Rp||fv||Function("return this")(),wl=typeof Ul=="object"&&Ul&&!Ul.nodeType&&Ul,Ui=wl&&typeof nd=="object"&&nd&&!nd.nodeType&&nd,kr=Ui&&Ui.exports===wl,Ln=kr&&Rp.process,di=function(){try{var le=Ui&&Ui.require&&Ui.require("util").types;return le||Ln&&Ln.binding&&Ln.binding("util")}catch{}}(),Wo=di&&di.isArrayBuffer,kp=di&&di.isDate,bn=di&&di.isMap,pi=di&&di.isRegExp,Np=di&&di.isSet,Op=di&&di.isTypedArray;function Mi(le,be,ge){switch(ge.length){case 0:return le.call(be);case 1:return le.call(be,ge[0]);case 2:return le.call(be,ge[0],ge[1]);case 3:return le.call(be,ge[0],ge[1],ge[2])}return le.apply(be,ge)}function Cs(le,be,ge,je){for(var mt=-1,Dt=le==null?0:le.length;++mt<Dt;){var Or=le[mt];be(je,Or,ge(Or),le)}return je}function ri(le,be){for(var ge=-1,je=le==null?0:le.length;++ge<je&&be(le[ge],ge,le)!==!1;);return le}function Dp(le,be){for(var ge=le==null?0:le.length;ge--&&be(le[ge],ge,le)!==!1;);return le}function hc(le,be){for(var ge=-1,je=le==null?0:le.length;++ge<je;)if(!be(le[ge],ge,le))return!1;return!0}function ii(le,be){for(var ge=-1,je=le==null?0:le.length,mt=0,Dt=[];++ge<je;){var Or=le[ge];be(Or,ge,le)&&(Dt[mt++]=Or)}return Dt}function wa(le,be){var ge=le==null?0:le.length;return!!ge&&en(le,be,0)>-1}function xl(le,be,ge){for(var je=-1,mt=le==null?0:le.length;++je<mt;)if(ge(be,le[je]))return!0;return!1}function Nt(le,be){for(var ge=-1,je=le==null?0:le.length,mt=Array(je);++ge<je;)mt[ge]=be(le[ge],ge,le);return mt}function wn(le,be){for(var ge=-1,je=be.length,mt=le.length;++ge<je;)le[mt+ge]=be[ge];return le}function xa(le,be,ge,je){var mt=-1,Dt=le==null?0:le.length;for(je&&Dt&&(ge=le[++mt]);++mt<Dt;)ge=be(ge,le[mt],mt,le);return ge}function Sl(le,be,ge,je){var mt=le==null?0:le.length;for(je&&mt&&(ge=le[--mt]);mt--;)ge=be(ge,le[mt],mt,le);return ge}function Vo(le,be){for(var ge=-1,je=le==null?0:le.length;++ge<je;)if(be(le[ge],ge,le))return!0;return!1}var fc=Sa("length");function hi(le){return le.split("")}function mc(le){return le.match(ws)||[]}function $o(le,be,ge){var je;return ge(le,function(mt,Dt,Or){if(be(mt,Dt,Or))return je=Dt,!1}),je}function fi(le,be,ge,je){for(var mt=le.length,Dt=ge+(je?1:-1);je?Dt--:++Dt<mt;)if(be(le[Dt],Dt,le))return Dt;return-1}function en(le,be,ge){return be===be?Ar(le,be,ge):fi(le,_l,ge)}function Ps(le,be,ge,je){for(var mt=ge-1,Dt=le.length;++mt<Dt;)if(je(le[mt],be))return mt;return-1}function _l(le){return le!==le}function Is(le,be){var ge=le==null?0:le.length;return ge?El(le,be)/ge:te}function Sa(le){return function(be){return be==null?t:be[le]}}function _a(le){return function(be){return le==null?t:le[be]}}function mo(le,be,ge,je,mt){return mt(le,function(Dt,Or,rr){ge=je?(je=!1,Dt):be(ge,Dt,Or,rr)}),ge}function gc(le,be){var ge=le.length;for(le.sort(be);ge--;)le[ge]=le[ge].value;return le}function El(le,be){for(var ge,je=-1,mt=le.length;++je<mt;){var Dt=be(le[je]);Dt!==t&&(ge=ge===t?Dt:ge+Dt)}return ge}function As(le,be){for(var ge=-1,je=Array(le);++ge<le;)je[ge]=be(ge);return je}function mv(le,be){return Nt(be,function(ge){return[ge,le[ge]]})}function tn(le){return le&&le.slice(0,nn(le)+1).replace(ti,"")}function Wt(le){return function(be){return le(be)}}function M(le,be){return Nt(be,function(ge){return le[ge]})}function H(le,be){return le.has(be)}function K(le,be){for(var ge=-1,je=le.length;++ge<je&&en(be,le[ge],0)>-1;);return ge}function G(le,be){for(var ge=le.length;ge--&&en(be,le[ge],0)>-1;);return ge}function Se(le,be){for(var ge=le.length,je=0;ge--;)le[ge]===be&&++je;return je}var Te=_a(lv),De=_a(uv);function rt(le){return"\\"+dv[le]}function ht(le,be){return le==null?t:le[be]}function yt(le){return fo.test(le)}function $e(le){return bl.test(le)}function Ct(le){for(var be,ge=[];!(be=le.next()).done;)ge.push(be.value);return ge}function Vt(le){var be=-1,ge=Array(le.size);return le.forEach(function(je,mt){ge[++be]=[mt,je]}),ge}function mi(le,be){return function(ge){return le(be(ge))}}function Zt(le,be){for(var ge=-1,je=le.length,mt=0,Dt=[];++ge<je;){var Or=le[ge];(Or===be||Or===l)&&(le[ge]=l,Dt[mt++]=ge)}return Dt}function Jt(le){var be=-1,ge=Array(le.size);return le.forEach(function(je){ge[++be]=je}),ge}function pr(le){var be=-1,ge=Array(le.size);return le.forEach(function(je){ge[++be]=[je,je]}),ge}function Ar(le,be,ge){for(var je=ge-1,mt=le.length;++je<mt;)if(le[je]===be)return je;return-1}function rn(le,be,ge){for(var je=ge+1;je--;)if(le[je]===be)return je;return je}function gi(le){return yt(le)?Nr(le):fc(le)}function vi(le){return yt(le)?Ts(le):hi(le)}function nn(le){for(var be=le.length;be--&&Fo.test(le.charAt(be)););return be}var go=_a(cv);function Nr(le){for(var be=ho.lastIndex=0;ho.test(le);)++be;return be}function Ts(le){return le.match(ho)||[]}function jo(le){return le.match(av)||[]}var gv=function le(be){be=be==null?or:Wr.defaults(or.Object(),be,Wr.pick(or,pc));var ge=be.Array,je=be.Date,mt=be.Error,Dt=be.Function,Or=be.Math,rr=be.Object,vv=be.RegExp,qB=be.String,xn=be.TypeError,Lp=ge.prototype,UB=Dt.prototype,Cl=rr.prototype,Fp=be["__core-js_shared__"],zp=UB.toString,$t=Cl.hasOwnProperty,HB=0,nS=function(){var u=/[^.]+$/.exec(Fp&&Fp.keys&&Fp.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Bp=Cl.toString,WB=zp.call(rr),VB=or._,$B=vv("^"+zp.call($t).replace(ec,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qp=kr?be.Buffer:t,Ms=be.Symbol,Up=be.Uint8Array,oS=qp?qp.allocUnsafe:t,Hp=mi(rr.getPrototypeOf,rr),sS=rr.create,aS=Cl.propertyIsEnumerable,Wp=Lp.splice,lS=Ms?Ms.isConcatSpreadable:t,vc=Ms?Ms.iterator:t,Ea=Ms?Ms.toStringTag:t,Vp=function(){try{var u=Ta(rr,"defineProperty");return u({},"",{}),u}catch{}}(),jB=be.clearTimeout!==or.clearTimeout&&be.clearTimeout,GB=je&&je.now!==or.Date.now&&je.now,KB=be.setTimeout!==or.setTimeout&&be.setTimeout,$p=Or.ceil,jp=Or.floor,yv=rr.getOwnPropertySymbols,YB=qp?qp.isBuffer:t,uS=be.isFinite,XB=Lp.join,ZB=mi(rr.keys,rr),Dr=Or.max,yi=Or.min,JB=je.now,QB=be.parseInt,cS=Or.random,eq=Lp.reverse,bv=Ta(be,"DataView"),yc=Ta(be,"Map"),wv=Ta(be,"Promise"),Pl=Ta(be,"Set"),bc=Ta(be,"WeakMap"),wc=Ta(rr,"create"),Gp=bc&&new bc,Il={},tq=Ma(bv),rq=Ma(yc),iq=Ma(wv),nq=Ma(Pl),oq=Ma(bc),Kp=Ms?Ms.prototype:t,xc=Kp?Kp.valueOf:t,dS=Kp?Kp.toString:t;function U(u){if(wr(u)&&!gt(u)&&!(u instanceof It)){if(u instanceof Sn)return u;if($t.call(u,"__wrapped__"))return p_(u)}return new Sn(u)}var Al=function(){function u(){}return function(c){if(!gr(c))return{};if(sS)return sS(c);u.prototype=c;var b=new u;return u.prototype=t,b}}();function Yp(){}function Sn(u,c){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}U.templateSettings={escape:Ju,evaluate:xp,interpolate:Qu,variable:"",imports:{_:U}},U.prototype=Yp.prototype,U.prototype.constructor=U,Sn.prototype=Al(Yp.prototype),Sn.prototype.constructor=Sn;function It(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function sq(){var u=new It(this.__wrapped__);return u.__actions__=Hi(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Hi(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Hi(this.__views__),u}function aq(){if(this.__filtered__){var u=new It(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function lq(){var u=this.__wrapped__.value(),c=this.__dir__,b=gt(u),P=c<0,F=b?u.length:0,j=wU(0,F,this.__views__),Q=j.start,ne=j.end,ue=ne-Q,_e=P?ne:Q-1,Ee=this.__iteratees__,Ie=Ee.length,qe=0,Qe=yi(ue,this.__takeCount__);if(!b||!P&&F==ue&&Qe==ue)return DS(u,this.__actions__);var ct=[];e:for(;ue--&&qe<Qe;){_e+=c;for(var xt=-1,dt=u[_e];++xt<Ie;){var Pt=Ee[xt],Mt=Pt.iteratee,an=Pt.type,Ni=Mt(dt);if(an==X)dt=Ni;else if(!Ni){if(an==J)continue e;break e}}ct[qe++]=dt}return ct}It.prototype=Al(Yp.prototype),It.prototype.constructor=It;function Ca(u){var c=-1,b=u==null?0:u.length;for(this.clear();++c<b;){var P=u[c];this.set(P[0],P[1])}}function uq(){this.__data__=wc?wc(null):{},this.size=0}function cq(u){var c=this.has(u)&&delete this.__data__[u];return this.size-=c?1:0,c}function dq(u){var c=this.__data__;if(wc){var b=c[u];return b===s?t:b}return $t.call(c,u)?c[u]:t}function pq(u){var c=this.__data__;return wc?c[u]!==t:$t.call(c,u)}function hq(u,c){var b=this.__data__;return this.size+=this.has(u)?0:1,b[u]=wc&&c===t?s:c,this}Ca.prototype.clear=uq,Ca.prototype.delete=cq,Ca.prototype.get=dq,Ca.prototype.has=pq,Ca.prototype.set=hq;function Go(u){var c=-1,b=u==null?0:u.length;for(this.clear();++c<b;){var P=u[c];this.set(P[0],P[1])}}function fq(){this.__data__=[],this.size=0}function mq(u){var c=this.__data__,b=Xp(c,u);if(b<0)return!1;var P=c.length-1;return b==P?c.pop():Wp.call(c,b,1),--this.size,!0}function gq(u){var c=this.__data__,b=Xp(c,u);return b<0?t:c[b][1]}function vq(u){return Xp(this.__data__,u)>-1}function yq(u,c){var b=this.__data__,P=Xp(b,u);return P<0?(++this.size,b.push([u,c])):b[P][1]=c,this}Go.prototype.clear=fq,Go.prototype.delete=mq,Go.prototype.get=gq,Go.prototype.has=vq,Go.prototype.set=yq;function Ko(u){var c=-1,b=u==null?0:u.length;for(this.clear();++c<b;){var P=u[c];this.set(P[0],P[1])}}function bq(){this.size=0,this.__data__={hash:new Ca,map:new(yc||Go),string:new Ca}}function wq(u){var c=lh(this,u).delete(u);return this.size-=c?1:0,c}function xq(u){return lh(this,u).get(u)}function Sq(u){return lh(this,u).has(u)}function _q(u,c){var b=lh(this,u),P=b.size;return b.set(u,c),this.size+=b.size==P?0:1,this}Ko.prototype.clear=bq,Ko.prototype.delete=wq,Ko.prototype.get=xq,Ko.prototype.has=Sq,Ko.prototype.set=_q;function Pa(u){var c=-1,b=u==null?0:u.length;for(this.__data__=new Ko;++c<b;)this.add(u[c])}function Eq(u){return this.__data__.set(u,s),this}function Cq(u){return this.__data__.has(u)}Pa.prototype.add=Pa.prototype.push=Eq,Pa.prototype.has=Cq;function Fn(u){var c=this.__data__=new Go(u);this.size=c.size}function Pq(){this.__data__=new Go,this.size=0}function Iq(u){var c=this.__data__,b=c.delete(u);return this.size=c.size,b}function Aq(u){return this.__data__.get(u)}function Tq(u){return this.__data__.has(u)}function Mq(u,c){var b=this.__data__;if(b instanceof Go){var P=b.__data__;if(!yc||P.length<r-1)return P.push([u,c]),this.size=++b.size,this;b=this.__data__=new Ko(P)}return b.set(u,c),this.size=b.size,this}Fn.prototype.clear=Pq,Fn.prototype.delete=Iq,Fn.prototype.get=Aq,Fn.prototype.has=Tq,Fn.prototype.set=Mq;function pS(u,c){var b=gt(u),P=!b&&Ra(u),F=!b&&!P&&Ds(u),j=!b&&!P&&!F&&kl(u),Q=b||P||F||j,ne=Q?As(u.length,qB):[],ue=ne.length;for(var _e in u)(c||$t.call(u,_e))&&!(Q&&(_e=="length"||F&&(_e=="offset"||_e=="parent")||j&&(_e=="buffer"||_e=="byteLength"||_e=="byteOffset")||Jo(_e,ue)))&&ne.push(_e);return ne}function hS(u){var c=u.length;return c?u[Rv(0,c-1)]:t}function Rq(u,c){return uh(Hi(u),Ia(c,0,u.length))}function kq(u){return uh(Hi(u))}function xv(u,c,b){(b!==t&&!zn(u[c],b)||b===t&&!(c in u))&&Yo(u,c,b)}function Sc(u,c,b){var P=u[c];(!($t.call(u,c)&&zn(P,b))||b===t&&!(c in u))&&Yo(u,c,b)}function Xp(u,c){for(var b=u.length;b--;)if(zn(u[b][0],c))return b;return-1}function Nq(u,c,b,P){return Rs(u,function(F,j,Q){c(P,F,b(F),Q)}),P}function fS(u,c){return u&&yo(c,Vr(c),u)}function Oq(u,c){return u&&yo(c,Vi(c),u)}function Yo(u,c,b){c=="__proto__"&&Vp?Vp(u,c,{configurable:!0,enumerable:!0,value:b,writable:!0}):u[c]=b}function Sv(u,c){for(var b=-1,P=c.length,F=ge(P),j=u==null;++b<P;)F[b]=j?t:ry(u,c[b]);return F}function Ia(u,c,b){return u===u&&(b!==t&&(u=u<=b?u:b),c!==t&&(u=u>=c?u:c)),u}function _n(u,c,b,P,F,j){var Q,ne=c&p,ue=c&f,_e=c&d;if(b&&(Q=F?b(u,P,F,j):b(u)),Q!==t)return Q;if(!gr(u))return u;var Ee=gt(u);if(Ee){if(Q=SU(u),!ne)return Hi(u,Q)}else{var Ie=bi(u),qe=Ie==Le||Ie==We;if(Ds(u))return zS(u,ne);if(Ie==et||Ie==de||qe&&!F){if(Q=ue||qe?{}:i_(u),!ne)return ue?dU(u,Oq(Q,u)):cU(u,fS(Q,u))}else{if(!Xt[Ie])return F?u:{};Q=_U(u,Ie,ne)}}j||(j=new Fn);var Qe=j.get(u);if(Qe)return Qe;j.set(u,Q),k_(u)?u.forEach(function(dt){Q.add(_n(dt,c,b,dt,u,j))}):M_(u)&&u.forEach(function(dt,Pt){Q.set(Pt,_n(dt,c,b,Pt,u,j))});var ct=_e?ue?Hv:Uv:ue?Vi:Vr,xt=Ee?t:ct(u);return ri(xt||u,function(dt,Pt){xt&&(Pt=dt,dt=u[Pt]),Sc(Q,Pt,_n(dt,c,b,Pt,u,j))}),Q}function Dq(u){var c=Vr(u);return function(b){return mS(b,u,c)}}function mS(u,c,b){var P=b.length;if(u==null)return!P;for(u=rr(u);P--;){var F=b[P],j=c[F],Q=u[F];if(Q===t&&!(F in u)||!j(Q))return!1}return!0}function gS(u,c,b){if(typeof u!="function")throw new xn(n);return Tc(function(){u.apply(t,b)},c)}function _c(u,c,b,P){var F=-1,j=wa,Q=!0,ne=u.length,ue=[],_e=c.length;if(!ne)return ue;b&&(c=Nt(c,Wt(b))),P?(j=xl,Q=!1):c.length>=r&&(j=H,Q=!1,c=new Pa(c));e:for(;++F<ne;){var Ee=u[F],Ie=b==null?Ee:b(Ee);if(Ee=P||Ee!==0?Ee:0,Q&&Ie===Ie){for(var qe=_e;qe--;)if(c[qe]===Ie)continue e;ue.push(Ee)}else j(c,Ie,P)||ue.push(Ee)}return ue}var Rs=WS(vo),vS=WS(Ev,!0);function Lq(u,c){var b=!0;return Rs(u,function(P,F,j){return b=!!c(P,F,j),b}),b}function Zp(u,c,b){for(var P=-1,F=u.length;++P<F;){var j=u[P],Q=c(j);if(Q!=null&&(ne===t?Q===Q&&!sn(Q):b(Q,ne)))var ne=Q,ue=j}return ue}function Fq(u,c,b,P){var F=u.length;for(b=bt(b),b<0&&(b=-b>F?0:F+b),P=P===t||P>F?F:bt(P),P<0&&(P+=F),P=b>P?0:O_(P);b<P;)u[b++]=c;return u}function yS(u,c){var b=[];return Rs(u,function(P,F,j){c(P,F,j)&&b.push(P)}),b}function ni(u,c,b,P,F){var j=-1,Q=u.length;for(b||(b=CU),F||(F=[]);++j<Q;){var ne=u[j];c>0&&b(ne)?c>1?ni(ne,c-1,b,P,F):wn(F,ne):P||(F[F.length]=ne)}return F}var _v=VS(),bS=VS(!0);function vo(u,c){return u&&_v(u,c,Vr)}function Ev(u,c){return u&&bS(u,c,Vr)}function Jp(u,c){return ii(c,function(b){return Qo(u[b])})}function Aa(u,c){c=Ns(c,u);for(var b=0,P=c.length;u!=null&&b<P;)u=u[bo(c[b++])];return b&&b==P?u:t}function wS(u,c,b){var P=c(u);return gt(u)?P:wn(P,b(u))}function Ri(u){return u==null?u===t?Rr:Ze:Ea&&Ea in rr(u)?bU(u):kU(u)}function Cv(u,c){return u>c}function zq(u,c){return u!=null&&$t.call(u,c)}function Bq(u,c){return u!=null&&c in rr(u)}function qq(u,c,b){return u>=yi(c,b)&&u<Dr(c,b)}function Pv(u,c,b){for(var P=b?xl:wa,F=u[0].length,j=u.length,Q=j,ne=ge(j),ue=1/0,_e=[];Q--;){var Ee=u[Q];Q&&c&&(Ee=Nt(Ee,Wt(c))),ue=yi(Ee.length,ue),ne[Q]=!b&&(c||F>=120&&Ee.length>=120)?new Pa(Q&&Ee):t}Ee=u[0];var Ie=-1,qe=ne[0];e:for(;++Ie<F&&_e.length<ue;){var Qe=Ee[Ie],ct=c?c(Qe):Qe;if(Qe=b||Qe!==0?Qe:0,!(qe?H(qe,ct):P(_e,ct,b))){for(Q=j;--Q;){var xt=ne[Q];if(!(xt?H(xt,ct):P(u[Q],ct,b)))continue e}qe&&qe.push(ct),_e.push(Qe)}}return _e}function Uq(u,c,b,P){return vo(u,function(F,j,Q){c(P,b(F),j,Q)}),P}function Ec(u,c,b){c=Ns(c,u),u=a_(u,c);var P=u==null?u:u[bo(Cn(c))];return P==null?t:Mi(P,u,b)}function xS(u){return wr(u)&&Ri(u)==de}function Hq(u){return wr(u)&&Ri(u)==so}function Wq(u){return wr(u)&&Ri(u)==Ae}function Cc(u,c,b,P,F){return u===c?!0:u==null||c==null||!wr(u)&&!wr(c)?u!==u&&c!==c:Vq(u,c,b,P,Cc,F)}function Vq(u,c,b,P,F,j){var Q=gt(u),ne=gt(c),ue=Q?we:bi(u),_e=ne?we:bi(c);ue=ue==de?et:ue,_e=_e==de?et:_e;var Ee=ue==et,Ie=_e==et,qe=ue==_e;if(qe&&Ds(u)){if(!Ds(c))return!1;Q=!0,Ee=!1}if(qe&&!Ee)return j||(j=new Fn),Q||kl(u)?e_(u,c,b,P,F,j):vU(u,c,ue,b,P,F,j);if(!(b&m)){var Qe=Ee&&$t.call(u,"__wrapped__"),ct=Ie&&$t.call(c,"__wrapped__");if(Qe||ct){var xt=Qe?u.value():u,dt=ct?c.value():c;return j||(j=new Fn),F(xt,dt,b,P,j)}}return qe?(j||(j=new Fn),yU(u,c,b,P,F,j)):!1}function $q(u){return wr(u)&&bi(u)==Fe}function Iv(u,c,b,P){var F=b.length,j=F,Q=!P;if(u==null)return!j;for(u=rr(u);F--;){var ne=b[F];if(Q&&ne[2]?ne[1]!==u[ne[0]]:!(ne[0]in u))return!1}for(;++F<j;){ne=b[F];var ue=ne[0],_e=u[ue],Ee=ne[1];if(Q&&ne[2]){if(_e===t&&!(ue in u))return!1}else{var Ie=new Fn;if(P)var qe=P(_e,Ee,ue,u,c,Ie);if(!(qe===t?Cc(Ee,_e,m|g,P,Ie):qe))return!1}}return!0}function SS(u){if(!gr(u)||IU(u))return!1;var c=Qo(u)?$B:zo;return c.test(Ma(u))}function jq(u){return wr(u)&&Ri(u)==kt}function Gq(u){return wr(u)&&bi(u)==Xe}function Kq(u){return wr(u)&&mh(u.length)&&!!Yt[Ri(u)]}function _S(u){return typeof u=="function"?u:u==null?$i:typeof u=="object"?gt(u)?PS(u[0],u[1]):CS(u):$_(u)}function Av(u){if(!Ac(u))return ZB(u);var c=[];for(var b in rr(u))$t.call(u,b)&&b!="constructor"&&c.push(b);return c}function Yq(u){if(!gr(u))return RU(u);var c=Ac(u),b=[];for(var P in u)P=="constructor"&&(c||!$t.call(u,P))||b.push(P);return b}function Tv(u,c){return u<c}function ES(u,c){var b=-1,P=Wi(u)?ge(u.length):[];return Rs(u,function(F,j,Q){P[++b]=c(F,j,Q)}),P}function CS(u){var c=Vv(u);return c.length==1&&c[0][2]?o_(c[0][0],c[0][1]):function(b){return b===u||Iv(b,u,c)}}function PS(u,c){return jv(u)&&n_(c)?o_(bo(u),c):function(b){var P=ry(b,u);return P===t&&P===c?iy(b,u):Cc(c,P,m|g)}}function Qp(u,c,b,P,F){u!==c&&_v(c,function(j,Q){if(F||(F=new Fn),gr(j))Xq(u,c,Q,b,Qp,P,F);else{var ne=P?P(Kv(u,Q),j,Q+"",u,c,F):t;ne===t&&(ne=j),xv(u,Q,ne)}},Vi)}function Xq(u,c,b,P,F,j,Q){var ne=Kv(u,b),ue=Kv(c,b),_e=Q.get(ue);if(_e){xv(u,b,_e);return}var Ee=j?j(ne,ue,b+"",u,c,Q):t,Ie=Ee===t;if(Ie){var qe=gt(ue),Qe=!qe&&Ds(ue),ct=!qe&&!Qe&&kl(ue);Ee=ue,qe||Qe||ct?gt(ne)?Ee=ne:_r(ne)?Ee=Hi(ne):Qe?(Ie=!1,Ee=zS(ue,!0)):ct?(Ie=!1,Ee=BS(ue,!0)):Ee=[]:Mc(ue)||Ra(ue)?(Ee=ne,Ra(ne)?Ee=D_(ne):(!gr(ne)||Qo(ne))&&(Ee=i_(ue))):Ie=!1}Ie&&(Q.set(ue,Ee),F(Ee,ue,P,j,Q),Q.delete(ue)),xv(u,b,Ee)}function IS(u,c){var b=u.length;if(b)return c+=c<0?b:0,Jo(c,b)?u[c]:t}function AS(u,c,b){c.length?c=Nt(c,function(j){return gt(j)?function(Q){return Aa(Q,j.length===1?j[0]:j)}:j}):c=[$i];var P=-1;c=Nt(c,Wt(at()));var F=ES(u,function(j,Q,ne){var ue=Nt(c,function(_e){return _e(j)});return{criteria:ue,index:++P,value:j}});return gc(F,function(j,Q){return uU(j,Q,b)})}function Zq(u,c){return TS(u,c,function(b,P){return iy(u,P)})}function TS(u,c,b){for(var P=-1,F=c.length,j={};++P<F;){var Q=c[P],ne=Aa(u,Q);b(ne,Q)&&Pc(j,Ns(Q,u),ne)}return j}function Jq(u){return function(c){return Aa(c,u)}}function Mv(u,c,b,P){var F=P?Ps:en,j=-1,Q=c.length,ne=u;for(u===c&&(c=Hi(c)),b&&(ne=Nt(u,Wt(b)));++j<Q;)for(var ue=0,_e=c[j],Ee=b?b(_e):_e;(ue=F(ne,Ee,ue,P))>-1;)ne!==u&&Wp.call(ne,ue,1),Wp.call(u,ue,1);return u}function MS(u,c){for(var b=u?c.length:0,P=b-1;b--;){var F=c[b];if(b==P||F!==j){var j=F;Jo(F)?Wp.call(u,F,1):Ov(u,F)}}return u}function Rv(u,c){return u+jp(cS()*(c-u+1))}function Qq(u,c,b,P){for(var F=-1,j=Dr($p((c-u)/(b||1)),0),Q=ge(j);j--;)Q[P?j:++F]=u,u+=b;return Q}function kv(u,c){var b="";if(!u||c<1||c>Z)return b;do c%2&&(b+=u),c=jp(c/2),c&&(u+=u);while(c);return b}function St(u,c){return Yv(s_(u,c,$i),u+"")}function eU(u){return hS(Nl(u))}function tU(u,c){var b=Nl(u);return uh(b,Ia(c,0,b.length))}function Pc(u,c,b,P){if(!gr(u))return u;c=Ns(c,u);for(var F=-1,j=c.length,Q=j-1,ne=u;ne!=null&&++F<j;){var ue=bo(c[F]),_e=b;if(ue==="__proto__"||ue==="constructor"||ue==="prototype")return u;if(F!=Q){var Ee=ne[ue];_e=P?P(Ee,ue,ne):t,_e===t&&(_e=gr(Ee)?Ee:Jo(c[F+1])?[]:{})}Sc(ne,ue,_e),ne=ne[ue]}return u}var RS=Gp?function(u,c){return Gp.set(u,c),u}:$i,rU=Vp?function(u,c){return Vp(u,"toString",{configurable:!0,enumerable:!1,value:oy(c),writable:!0})}:$i;function iU(u){return uh(Nl(u))}function En(u,c,b){var P=-1,F=u.length;c<0&&(c=-c>F?0:F+c),b=b>F?F:b,b<0&&(b+=F),F=c>b?0:b-c>>>0,c>>>=0;for(var j=ge(F);++P<F;)j[P]=u[P+c];return j}function nU(u,c){var b;return Rs(u,function(P,F,j){return b=c(P,F,j),!b}),!!b}function eh(u,c,b){var P=0,F=u==null?P:u.length;if(typeof c=="number"&&c===c&&F<=ae){for(;P<F;){var j=P+F>>>1,Q=u[j];Q!==null&&!sn(Q)&&(b?Q<=c:Q<c)?P=j+1:F=j}return F}return Nv(u,c,$i,b)}function Nv(u,c,b,P){var F=0,j=u==null?0:u.length;if(j===0)return 0;c=b(c);for(var Q=c!==c,ne=c===null,ue=sn(c),_e=c===t;F<j;){var Ee=jp((F+j)/2),Ie=b(u[Ee]),qe=Ie!==t,Qe=Ie===null,ct=Ie===Ie,xt=sn(Ie);if(Q)var dt=P||ct;else _e?dt=ct&&(P||qe):ne?dt=ct&&qe&&(P||!Qe):ue?dt=ct&&qe&&!Qe&&(P||!xt):Qe||xt?dt=!1:dt=P?Ie<=c:Ie<c;dt?F=Ee+1:j=Ee}return yi(j,ie)}function kS(u,c){for(var b=-1,P=u.length,F=0,j=[];++b<P;){var Q=u[b],ne=c?c(Q):Q;if(!b||!zn(ne,ue)){var ue=ne;j[F++]=Q===0?0:Q}}return j}function NS(u){return typeof u=="number"?u:sn(u)?te:+u}function on(u){if(typeof u=="string")return u;if(gt(u))return Nt(u,on)+"";if(sn(u))return dS?dS.call(u):"";var c=u+"";return c=="0"&&1/u==-ee?"-0":c}function ks(u,c,b){var P=-1,F=wa,j=u.length,Q=!0,ne=[],ue=ne;if(b)Q=!1,F=xl;else if(j>=r){var _e=c?null:mU(u);if(_e)return Jt(_e);Q=!1,F=H,ue=new Pa}else ue=c?[]:ne;e:for(;++P<j;){var Ee=u[P],Ie=c?c(Ee):Ee;if(Ee=b||Ee!==0?Ee:0,Q&&Ie===Ie){for(var qe=ue.length;qe--;)if(ue[qe]===Ie)continue e;c&&ue.push(Ie),ne.push(Ee)}else F(ue,Ie,b)||(ue!==ne&&ue.push(Ie),ne.push(Ee))}return ne}function Ov(u,c){return c=Ns(c,u),u=a_(u,c),u==null||delete u[bo(Cn(c))]}function OS(u,c,b,P){return Pc(u,c,b(Aa(u,c)),P)}function th(u,c,b,P){for(var F=u.length,j=P?F:-1;(P?j--:++j<F)&&c(u[j],j,u););return b?En(u,P?0:j,P?j+1:F):En(u,P?j+1:0,P?F:j)}function DS(u,c){var b=u;return b instanceof It&&(b=b.value()),xa(c,function(P,F){return F.func.apply(F.thisArg,wn([P],F.args))},b)}function Dv(u,c,b){var P=u.length;if(P<2)return P?ks(u[0]):[];for(var F=-1,j=ge(P);++F<P;)for(var Q=u[F],ne=-1;++ne<P;)ne!=F&&(j[F]=_c(j[F]||Q,u[ne],c,b));return ks(ni(j,1),c,b)}function LS(u,c,b){for(var P=-1,F=u.length,j=c.length,Q={};++P<F;){var ne=P<j?c[P]:t;b(Q,u[P],ne)}return Q}function Lv(u){return _r(u)?u:[]}function Fv(u){return typeof u=="function"?u:$i}function Ns(u,c){return gt(u)?u:jv(u,c)?[u]:d_(qt(u))}var oU=St;function Os(u,c,b){var P=u.length;return b=b===t?P:b,!c&&b>=P?u:En(u,c,b)}var FS=jB||function(u){return or.clearTimeout(u)};function zS(u,c){if(c)return u.slice();var b=u.length,P=oS?oS(b):new u.constructor(b);return u.copy(P),P}function zv(u){var c=new u.constructor(u.byteLength);return new Up(c).set(new Up(u)),c}function sU(u,c){var b=c?zv(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.byteLength)}function aU(u){var c=new u.constructor(u.source,ic.exec(u));return c.lastIndex=u.lastIndex,c}function lU(u){return xc?rr(xc.call(u)):{}}function BS(u,c){var b=c?zv(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.length)}function qS(u,c){if(u!==c){var b=u!==t,P=u===null,F=u===u,j=sn(u),Q=c!==t,ne=c===null,ue=c===c,_e=sn(c);if(!ne&&!_e&&!j&&u>c||j&&Q&&ue&&!ne&&!_e||P&&Q&&ue||!b&&ue||!F)return 1;if(!P&&!j&&!_e&&u<c||_e&&b&&F&&!P&&!j||ne&&b&&F||!Q&&F||!ue)return-1}return 0}function uU(u,c,b){for(var P=-1,F=u.criteria,j=c.criteria,Q=F.length,ne=b.length;++P<Q;){var ue=qS(F[P],j[P]);if(ue){if(P>=ne)return ue;var _e=b[P];return ue*(_e=="desc"?-1:1)}}return u.index-c.index}function US(u,c,b,P){for(var F=-1,j=u.length,Q=b.length,ne=-1,ue=c.length,_e=Dr(j-Q,0),Ee=ge(ue+_e),Ie=!P;++ne<ue;)Ee[ne]=c[ne];for(;++F<Q;)(Ie||F<j)&&(Ee[b[F]]=u[F]);for(;_e--;)Ee[ne++]=u[F++];return Ee}function HS(u,c,b,P){for(var F=-1,j=u.length,Q=-1,ne=b.length,ue=-1,_e=c.length,Ee=Dr(j-ne,0),Ie=ge(Ee+_e),qe=!P;++F<Ee;)Ie[F]=u[F];for(var Qe=F;++ue<_e;)Ie[Qe+ue]=c[ue];for(;++Q<ne;)(qe||F<j)&&(Ie[Qe+b[Q]]=u[F++]);return Ie}function Hi(u,c){var b=-1,P=u.length;for(c||(c=ge(P));++b<P;)c[b]=u[b];return c}function yo(u,c,b,P){var F=!b;b||(b={});for(var j=-1,Q=c.length;++j<Q;){var ne=c[j],ue=P?P(b[ne],u[ne],ne,b,u):t;ue===t&&(ue=u[ne]),F?Yo(b,ne,ue):Sc(b,ne,ue)}return b}function cU(u,c){return yo(u,$v(u),c)}function dU(u,c){return yo(u,t_(u),c)}function rh(u,c){return function(b,P){var F=gt(b)?Cs:Nq,j=c?c():{};return F(b,u,at(P,2),j)}}function Tl(u){return St(function(c,b){var P=-1,F=b.length,j=F>1?b[F-1]:t,Q=F>2?b[2]:t;for(j=u.length>3&&typeof j=="function"?(F--,j):t,Q&&ki(b[0],b[1],Q)&&(j=F<3?t:j,F=1),c=rr(c);++P<F;){var ne=b[P];ne&&u(c,ne,P,j)}return c})}function WS(u,c){return function(b,P){if(b==null)return b;if(!Wi(b))return u(b,P);for(var F=b.length,j=c?F:-1,Q=rr(b);(c?j--:++j<F)&&P(Q[j],j,Q)!==!1;);return b}}function VS(u){return function(c,b,P){for(var F=-1,j=rr(c),Q=P(c),ne=Q.length;ne--;){var ue=Q[u?ne:++F];if(b(j[ue],ue,j)===!1)break}return c}}function pU(u,c,b){var P=c&v,F=Ic(u);function j(){var Q=this&&this!==or&&this instanceof j?F:u;return Q.apply(P?b:this,arguments)}return j}function $S(u){return function(c){c=qt(c);var b=yt(c)?vi(c):t,P=b?b[0]:c.charAt(0),F=b?Os(b,1).join(""):c.slice(1);return P[u]()+F}}function Ml(u){return function(c){return xa(W_(H_(c).replace(sv,"")),u,"")}}function Ic(u){return function(){var c=arguments;switch(c.length){case 0:return new u;case 1:return new u(c[0]);case 2:return new u(c[0],c[1]);case 3:return new u(c[0],c[1],c[2]);case 4:return new u(c[0],c[1],c[2],c[3]);case 5:return new u(c[0],c[1],c[2],c[3],c[4]);case 6:return new u(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new u(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var b=Al(u.prototype),P=u.apply(b,c);return gr(P)?P:b}}function hU(u,c,b){var P=Ic(u);function F(){for(var j=arguments.length,Q=ge(j),ne=j,ue=Rl(F);ne--;)Q[ne]=arguments[ne];var _e=j<3&&Q[0]!==ue&&Q[j-1]!==ue?[]:Zt(Q,ue);if(j-=_e.length,j<b)return XS(u,c,ih,F.placeholder,t,Q,_e,t,t,b-j);var Ee=this&&this!==or&&this instanceof F?P:u;return Mi(Ee,this,Q)}return F}function jS(u){return function(c,b,P){var F=rr(c);if(!Wi(c)){var j=at(b,3);c=Vr(c),b=function(ne){return j(F[ne],ne,F)}}var Q=u(c,b,P);return Q>-1?F[j?c[Q]:Q]:t}}function GS(u){return Zo(function(c){var b=c.length,P=b,F=Sn.prototype.thru;for(u&&c.reverse();P--;){var j=c[P];if(typeof j!="function")throw new xn(n);if(F&&!Q&&ah(j)=="wrapper")var Q=new Sn([],!0)}for(P=Q?P:b;++P<b;){j=c[P];var ne=ah(j),ue=ne=="wrapper"?Wv(j):t;ue&&Gv(ue[0])&&ue[1]==(D|E|L|R)&&!ue[4].length&&ue[9]==1?Q=Q[ah(ue[0])].apply(Q,ue[3]):Q=j.length==1&&Gv(j)?Q[ne]():Q.thru(j)}return function(){var _e=arguments,Ee=_e[0];if(Q&&_e.length==1&&gt(Ee))return Q.plant(Ee).value();for(var Ie=0,qe=b?c[Ie].apply(this,_e):Ee;++Ie<b;)qe=c[Ie].call(this,qe);return qe}})}function ih(u,c,b,P,F,j,Q,ne,ue,_e){var Ee=c&D,Ie=c&v,qe=c&x,Qe=c&(E|O),ct=c&W,xt=qe?t:Ic(u);function dt(){for(var Pt=arguments.length,Mt=ge(Pt),an=Pt;an--;)Mt[an]=arguments[an];if(Qe)var Ni=Rl(dt),ln=Se(Mt,Ni);if(P&&(Mt=US(Mt,P,F,Qe)),j&&(Mt=HS(Mt,j,Q,Qe)),Pt-=ln,Qe&&Pt<_e){var Er=Zt(Mt,Ni);return XS(u,c,ih,dt.placeholder,b,Mt,Er,ne,ue,_e-Pt)}var Bn=Ie?b:this,ts=qe?Bn[u]:u;return Pt=Mt.length,ne?Mt=NU(Mt,ne):ct&&Pt>1&&Mt.reverse(),Ee&&ue<Pt&&(Mt.length=ue),this&&this!==or&&this instanceof dt&&(ts=xt||Ic(ts)),ts.apply(Bn,Mt)}return dt}function KS(u,c){return function(b,P){return Uq(b,u,c(P),{})}}function nh(u,c){return function(b,P){var F;if(b===t&&P===t)return c;if(b!==t&&(F=b),P!==t){if(F===t)return P;typeof b=="string"||typeof P=="string"?(b=on(b),P=on(P)):(b=NS(b),P=NS(P)),F=u(b,P)}return F}}function Bv(u){return Zo(function(c){return c=Nt(c,Wt(at())),St(function(b){var P=this;return u(c,function(F){return Mi(F,P,b)})})})}function oh(u,c){c=c===t?" ":on(c);var b=c.length;if(b<2)return b?kv(c,u):c;var P=kv(c,$p(u/gi(c)));return yt(c)?Os(vi(P),0,u).join(""):P.slice(0,u)}function fU(u,c,b,P){var F=c&v,j=Ic(u);function Q(){for(var ne=-1,ue=arguments.length,_e=-1,Ee=P.length,Ie=ge(Ee+ue),qe=this&&this!==or&&this instanceof Q?j:u;++_e<Ee;)Ie[_e]=P[_e];for(;ue--;)Ie[_e++]=arguments[++ne];return Mi(qe,F?b:this,Ie)}return Q}function YS(u){return function(c,b,P){return P&&typeof P!="number"&&ki(c,b,P)&&(b=P=t),c=es(c),b===t?(b=c,c=0):b=es(b),P=P===t?c<b?1:-1:es(P),Qq(c,b,P,u)}}function sh(u){return function(c,b){return typeof c=="string"&&typeof b=="string"||(c=Pn(c),b=Pn(b)),u(c,b)}}function XS(u,c,b,P,F,j,Q,ne,ue,_e){var Ee=c&E,Ie=Ee?Q:t,qe=Ee?t:Q,Qe=Ee?j:t,ct=Ee?t:j;c|=Ee?L:I,c&=~(Ee?I:L),c&_||(c&=~(v|x));var xt=[u,c,F,Qe,Ie,ct,qe,ne,ue,_e],dt=b.apply(t,xt);return Gv(u)&&l_(dt,xt),dt.placeholder=P,u_(dt,u,c)}function qv(u){var c=Or[u];return function(b,P){if(b=Pn(b),P=P==null?0:yi(bt(P),292),P&&uS(b)){var F=(qt(b)+"e").split("e"),j=c(F[0]+"e"+(+F[1]+P));return F=(qt(j)+"e").split("e"),+(F[0]+"e"+(+F[1]-P))}return c(b)}}var mU=Pl&&1/Jt(new Pl([,-0]))[1]==ee?function(u){return new Pl(u)}:ly;function ZS(u){return function(c){var b=bi(c);return b==Fe?Vt(c):b==Xe?pr(c):mv(c,u(c))}}function Xo(u,c,b,P,F,j,Q,ne){var ue=c&x;if(!ue&&typeof u!="function")throw new xn(n);var _e=P?P.length:0;if(_e||(c&=~(L|I),P=F=t),Q=Q===t?Q:Dr(bt(Q),0),ne=ne===t?ne:bt(ne),_e-=F?F.length:0,c&I){var Ee=P,Ie=F;P=F=t}var qe=ue?t:Wv(u),Qe=[u,c,b,P,F,Ee,Ie,j,Q,ne];if(qe&&MU(Qe,qe),u=Qe[0],c=Qe[1],b=Qe[2],P=Qe[3],F=Qe[4],ne=Qe[9]=Qe[9]===t?ue?0:u.length:Dr(Qe[9]-_e,0),!ne&&c&(E|O)&&(c&=~(E|O)),!c||c==v)var ct=pU(u,c,b);else c==E||c==O?ct=hU(u,c,ne):(c==L||c==(v|L))&&!F.length?ct=fU(u,c,b,P):ct=ih.apply(t,Qe);var xt=qe?RS:l_;return u_(xt(ct,Qe),u,c)}function JS(u,c,b,P){return u===t||zn(u,Cl[b])&&!$t.call(P,b)?c:u}function QS(u,c,b,P,F,j){return gr(u)&&gr(c)&&(j.set(c,u),Qp(u,c,t,QS,j),j.delete(c)),u}function gU(u){return Mc(u)?t:u}function e_(u,c,b,P,F,j){var Q=b&m,ne=u.length,ue=c.length;if(ne!=ue&&!(Q&&ue>ne))return!1;var _e=j.get(u),Ee=j.get(c);if(_e&&Ee)return _e==c&&Ee==u;var Ie=-1,qe=!0,Qe=b&g?new Pa:t;for(j.set(u,c),j.set(c,u);++Ie<ne;){var ct=u[Ie],xt=c[Ie];if(P)var dt=Q?P(xt,ct,Ie,c,u,j):P(ct,xt,Ie,u,c,j);if(dt!==t){if(dt)continue;qe=!1;break}if(Qe){if(!Vo(c,function(Pt,Mt){if(!H(Qe,Mt)&&(ct===Pt||F(ct,Pt,b,P,j)))return Qe.push(Mt)})){qe=!1;break}}else if(!(ct===xt||F(ct,xt,b,P,j))){qe=!1;break}}return j.delete(u),j.delete(c),qe}function vU(u,c,b,P,F,j,Q){switch(b){case mn:if(u.byteLength!=c.byteLength||u.byteOffset!=c.byteOffset)return!1;u=u.buffer,c=c.buffer;case so:return!(u.byteLength!=c.byteLength||!j(new Up(u),new Up(c)));case ve:case Ae:case st:return zn(+u,+c);case Me:return u.name==c.name&&u.message==c.message;case kt:case Tt:return u==c+"";case Fe:var ne=Vt;case Xe:var ue=P&m;if(ne||(ne=Jt),u.size!=c.size&&!ue)return!1;var _e=Q.get(u);if(_e)return _e==c;P|=g,Q.set(u,c);var Ee=e_(ne(u),ne(c),P,F,j,Q);return Q.delete(u),Ee;case Kt:if(xc)return xc.call(u)==xc.call(c)}return!1}function yU(u,c,b,P,F,j){var Q=b&m,ne=Uv(u),ue=ne.length,_e=Uv(c),Ee=_e.length;if(ue!=Ee&&!Q)return!1;for(var Ie=ue;Ie--;){var qe=ne[Ie];if(!(Q?qe in c:$t.call(c,qe)))return!1}var Qe=j.get(u),ct=j.get(c);if(Qe&&ct)return Qe==c&&ct==u;var xt=!0;j.set(u,c),j.set(c,u);for(var dt=Q;++Ie<ue;){qe=ne[Ie];var Pt=u[qe],Mt=c[qe];if(P)var an=Q?P(Mt,Pt,qe,c,u,j):P(Pt,Mt,qe,u,c,j);if(!(an===t?Pt===Mt||F(Pt,Mt,b,P,j):an)){xt=!1;break}dt||(dt=qe=="constructor")}if(xt&&!dt){var Ni=u.constructor,ln=c.constructor;Ni!=ln&&"constructor"in u&&"constructor"in c&&!(typeof Ni=="function"&&Ni instanceof Ni&&typeof ln=="function"&&ln instanceof ln)&&(xt=!1)}return j.delete(u),j.delete(c),xt}function Zo(u){return Yv(s_(u,t,m_),u+"")}function Uv(u){return wS(u,Vr,$v)}function Hv(u){return wS(u,Vi,t_)}var Wv=Gp?function(u){return Gp.get(u)}:ly;function ah(u){for(var c=u.name+"",b=Il[c],P=$t.call(Il,c)?b.length:0;P--;){var F=b[P],j=F.func;if(j==null||j==u)return F.name}return c}function Rl(u){var c=$t.call(U,"placeholder")?U:u;return c.placeholder}function at(){var u=U.iteratee||sy;return u=u===sy?_S:u,arguments.length?u(arguments[0],arguments[1]):u}function lh(u,c){var b=u.__data__;return PU(c)?b[typeof c=="string"?"string":"hash"]:b.map}function Vv(u){for(var c=Vr(u),b=c.length;b--;){var P=c[b],F=u[P];c[b]=[P,F,n_(F)]}return c}function Ta(u,c){var b=ht(u,c);return SS(b)?b:t}function bU(u){var c=$t.call(u,Ea),b=u[Ea];try{u[Ea]=t;var P=!0}catch{}var F=Bp.call(u);return P&&(c?u[Ea]=b:delete u[Ea]),F}var $v=yv?function(u){return u==null?[]:(u=rr(u),ii(yv(u),function(c){return aS.call(u,c)}))}:uy,t_=yv?function(u){for(var c=[];u;)wn(c,$v(u)),u=Hp(u);return c}:uy,bi=Ri;(bv&&bi(new bv(new ArrayBuffer(1)))!=mn||yc&&bi(new yc)!=Fe||wv&&bi(wv.resolve())!=Je||Pl&&bi(new Pl)!=Xe||bc&&bi(new bc)!=Ot)&&(bi=function(u){var c=Ri(u),b=c==et?u.constructor:t,P=b?Ma(b):"";if(P)switch(P){case tq:return mn;case rq:return Fe;case iq:return Je;case nq:return Xe;case oq:return Ot}return c});function wU(u,c,b){for(var P=-1,F=b.length;++P<F;){var j=b[P],Q=j.size;switch(j.type){case"drop":u+=Q;break;case"dropRight":c-=Q;break;case"take":c=yi(c,u+Q);break;case"takeRight":u=Dr(u,c-Q);break}}return{start:u,end:c}}function xU(u){var c=u.match(tc);return c?c[1].split(ha):[]}function r_(u,c,b){c=Ns(c,u);for(var P=-1,F=c.length,j=!1;++P<F;){var Q=bo(c[P]);if(!(j=u!=null&&b(u,Q)))break;u=u[Q]}return j||++P!=F?j:(F=u==null?0:u.length,!!F&&mh(F)&&Jo(Q,F)&&(gt(u)||Ra(u)))}function SU(u){var c=u.length,b=new u.constructor(c);return c&&typeof u[0]=="string"&&$t.call(u,"index")&&(b.index=u.index,b.input=u.input),b}function i_(u){return typeof u.constructor=="function"&&!Ac(u)?Al(Hp(u)):{}}function _U(u,c,b){var P=u.constructor;switch(c){case so:return zv(u);case ve:case Ae:return new P(+u);case mn:return sU(u,b);case Ir:case wt:case zi:case Ai:case hl:case mr:case ao:case lo:case bs:return BS(u,b);case Fe:return new P;case st:case Tt:return new P(u);case kt:return aU(u);case Xe:return new P;case Kt:return lU(u)}}function EU(u,c){var b=c.length;if(!b)return u;var P=b-1;return c[P]=(b>1?"& ":"")+c[P],c=c.join(b>2?", ":" "),u.replace(pa,`{
/* [wrapped with `+c+`] */
`)}function CU(u){return gt(u)||Ra(u)||!!(lS&&u&&u[lS])}function Jo(u,c){var b=typeof u;return c=c??Z,!!c&&(b=="number"||b!="symbol"&&Ur.test(u))&&u>-1&&u%1==0&&u<c}function ki(u,c,b){if(!gr(b))return!1;var P=typeof c;return(P=="number"?Wi(b)&&Jo(c,b.length):P=="string"&&c in b)?zn(b[c],u):!1}function jv(u,c){if(gt(u))return!1;var b=typeof u;return b=="number"||b=="symbol"||b=="boolean"||u==null||sn(u)?!0:tv.test(u)||!Sp.test(u)||c!=null&&u in rr(c)}function PU(u){var c=typeof u;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?u!=="__proto__":u===null}function Gv(u){var c=ah(u),b=U[c];if(typeof b!="function"||!(c in It.prototype))return!1;if(u===b)return!0;var P=Wv(b);return!!P&&u===P[0]}function IU(u){return!!nS&&nS in u}var AU=Fp?Qo:cy;function Ac(u){var c=u&&u.constructor,b=typeof c=="function"&&c.prototype||Cl;return u===b}function n_(u){return u===u&&!gr(u)}function o_(u,c){return function(b){return b==null?!1:b[u]===c&&(c!==t||u in rr(b))}}function TU(u){var c=hh(u,function(P){return b.size===a&&b.clear(),P}),b=c.cache;return c}function MU(u,c){var b=u[1],P=c[1],F=b|P,j=F<(v|x|D),Q=P==D&&b==E||P==D&&b==R&&u[7].length<=c[8]||P==(D|R)&&c[7].length<=c[8]&&b==E;if(!(j||Q))return u;P&v&&(u[2]=c[2],F|=b&v?0:_);var ne=c[3];if(ne){var ue=u[3];u[3]=ue?US(ue,ne,c[4]):ne,u[4]=ue?Zt(u[3],l):c[4]}return ne=c[5],ne&&(ue=u[5],u[5]=ue?HS(ue,ne,c[6]):ne,u[6]=ue?Zt(u[5],l):c[6]),ne=c[7],ne&&(u[7]=ne),P&D&&(u[8]=u[8]==null?c[8]:yi(u[8],c[8])),u[9]==null&&(u[9]=c[9]),u[0]=c[0],u[1]=F,u}function RU(u){var c=[];if(u!=null)for(var b in rr(u))c.push(b);return c}function kU(u){return Bp.call(u)}function s_(u,c,b){return c=Dr(c===t?u.length-1:c,0),function(){for(var P=arguments,F=-1,j=Dr(P.length-c,0),Q=ge(j);++F<j;)Q[F]=P[c+F];F=-1;for(var ne=ge(c+1);++F<c;)ne[F]=P[F];return ne[c]=b(Q),Mi(u,this,ne)}}function a_(u,c){return c.length<2?u:Aa(u,En(c,0,-1))}function NU(u,c){for(var b=u.length,P=yi(c.length,b),F=Hi(u);P--;){var j=c[P];u[P]=Jo(j,b)?F[j]:t}return u}function Kv(u,c){if(!(c==="constructor"&&typeof u[c]=="function")&&c!="__proto__")return u[c]}var l_=c_(RS),Tc=KB||function(u,c){return or.setTimeout(u,c)},Yv=c_(rU);function u_(u,c,b){var P=c+"";return Yv(u,EU(P,OU(xU(P),b)))}function c_(u){var c=0,b=0;return function(){var P=JB(),F=q-(P-b);if(b=P,F>0){if(++c>=$)return arguments[0]}else c=0;return u.apply(t,arguments)}}function uh(u,c){var b=-1,P=u.length,F=P-1;for(c=c===t?P:c;++b<c;){var j=Rv(b,F),Q=u[j];u[j]=u[b],u[b]=Q}return u.length=c,u}var d_=TU(function(u){var c=[];return u.charCodeAt(0)===46&&c.push(""),u.replace(rv,function(b,P,F,j){c.push(F?j.replace(Ep,"$1"):P||b)}),c});function bo(u){if(typeof u=="string"||sn(u))return u;var c=u+"";return c=="0"&&1/u==-ee?"-0":c}function Ma(u){if(u!=null){try{return zp.call(u)}catch{}try{return u+""}catch{}}return""}function OU(u,c){return ri(he,function(b){var P="_."+b[0];c&b[1]&&!wa(u,P)&&u.push(P)}),u.sort()}function p_(u){if(u instanceof It)return u.clone();var c=new Sn(u.__wrapped__,u.__chain__);return c.__actions__=Hi(u.__actions__),c.__index__=u.__index__,c.__values__=u.__values__,c}function DU(u,c,b){(b?ki(u,c,b):c===t)?c=1:c=Dr(bt(c),0);var P=u==null?0:u.length;if(!P||c<1)return[];for(var F=0,j=0,Q=ge($p(P/c));F<P;)Q[j++]=En(u,F,F+=c);return Q}function LU(u){for(var c=-1,b=u==null?0:u.length,P=0,F=[];++c<b;){var j=u[c];j&&(F[P++]=j)}return F}function FU(){var u=arguments.length;if(!u)return[];for(var c=ge(u-1),b=arguments[0],P=u;P--;)c[P-1]=arguments[P];return wn(gt(b)?Hi(b):[b],ni(c,1))}var zU=St(function(u,c){return _r(u)?_c(u,ni(c,1,_r,!0)):[]}),BU=St(function(u,c){var b=Cn(c);return _r(b)&&(b=t),_r(u)?_c(u,ni(c,1,_r,!0),at(b,2)):[]}),qU=St(function(u,c){var b=Cn(c);return _r(b)&&(b=t),_r(u)?_c(u,ni(c,1,_r,!0),t,b):[]});function UU(u,c,b){var P=u==null?0:u.length;return P?(c=b||c===t?1:bt(c),En(u,c<0?0:c,P)):[]}function HU(u,c,b){var P=u==null?0:u.length;return P?(c=b||c===t?1:bt(c),c=P-c,En(u,0,c<0?0:c)):[]}function WU(u,c){return u&&u.length?th(u,at(c,3),!0,!0):[]}function VU(u,c){return u&&u.length?th(u,at(c,3),!0):[]}function $U(u,c,b,P){var F=u==null?0:u.length;return F?(b&&typeof b!="number"&&ki(u,c,b)&&(b=0,P=F),Fq(u,c,b,P)):[]}function h_(u,c,b){var P=u==null?0:u.length;if(!P)return-1;var F=b==null?0:bt(b);return F<0&&(F=Dr(P+F,0)),fi(u,at(c,3),F)}function f_(u,c,b){var P=u==null?0:u.length;if(!P)return-1;var F=P-1;return b!==t&&(F=bt(b),F=b<0?Dr(P+F,0):yi(F,P-1)),fi(u,at(c,3),F,!0)}function m_(u){var c=u==null?0:u.length;return c?ni(u,1):[]}function jU(u){var c=u==null?0:u.length;return c?ni(u,ee):[]}function GU(u,c){var b=u==null?0:u.length;return b?(c=c===t?1:bt(c),ni(u,c)):[]}function KU(u){for(var c=-1,b=u==null?0:u.length,P={};++c<b;){var F=u[c];P[F[0]]=F[1]}return P}function g_(u){return u&&u.length?u[0]:t}function YU(u,c,b){var P=u==null?0:u.length;if(!P)return-1;var F=b==null?0:bt(b);return F<0&&(F=Dr(P+F,0)),en(u,c,F)}function XU(u){var c=u==null?0:u.length;return c?En(u,0,-1):[]}var ZU=St(function(u){var c=Nt(u,Lv);return c.length&&c[0]===u[0]?Pv(c):[]}),JU=St(function(u){var c=Cn(u),b=Nt(u,Lv);return c===Cn(b)?c=t:b.pop(),b.length&&b[0]===u[0]?Pv(b,at(c,2)):[]}),QU=St(function(u){var c=Cn(u),b=Nt(u,Lv);return c=typeof c=="function"?c:t,c&&b.pop(),b.length&&b[0]===u[0]?Pv(b,t,c):[]});function eH(u,c){return u==null?"":XB.call(u,c)}function Cn(u){var c=u==null?0:u.length;return c?u[c-1]:t}function tH(u,c,b){var P=u==null?0:u.length;if(!P)return-1;var F=P;return b!==t&&(F=bt(b),F=F<0?Dr(P+F,0):yi(F,P-1)),c===c?rn(u,c,F):fi(u,_l,F,!0)}function rH(u,c){return u&&u.length?IS(u,bt(c)):t}var iH=St(v_);function v_(u,c){return u&&u.length&&c&&c.length?Mv(u,c):u}function nH(u,c,b){return u&&u.length&&c&&c.length?Mv(u,c,at(b,2)):u}function oH(u,c,b){return u&&u.length&&c&&c.length?Mv(u,c,t,b):u}var sH=Zo(function(u,c){var b=u==null?0:u.length,P=Sv(u,c);return MS(u,Nt(c,function(F){return Jo(F,b)?+F:F}).sort(qS)),P});function aH(u,c){var b=[];if(!(u&&u.length))return b;var P=-1,F=[],j=u.length;for(c=at(c,3);++P<j;){var Q=u[P];c(Q,P,u)&&(b.push(Q),F.push(P))}return MS(u,F),b}function Xv(u){return u==null?u:eq.call(u)}function lH(u,c,b){var P=u==null?0:u.length;return P?(b&&typeof b!="number"&&ki(u,c,b)?(c=0,b=P):(c=c==null?0:bt(c),b=b===t?P:bt(b)),En(u,c,b)):[]}function uH(u,c){return eh(u,c)}function cH(u,c,b){return Nv(u,c,at(b,2))}function dH(u,c){var b=u==null?0:u.length;if(b){var P=eh(u,c);if(P<b&&zn(u[P],c))return P}return-1}function pH(u,c){return eh(u,c,!0)}function hH(u,c,b){return Nv(u,c,at(b,2),!0)}function fH(u,c){var b=u==null?0:u.length;if(b){var P=eh(u,c,!0)-1;if(zn(u[P],c))return P}return-1}function mH(u){return u&&u.length?kS(u):[]}function gH(u,c){return u&&u.length?kS(u,at(c,2)):[]}function vH(u){var c=u==null?0:u.length;return c?En(u,1,c):[]}function yH(u,c,b){return u&&u.length?(c=b||c===t?1:bt(c),En(u,0,c<0?0:c)):[]}function bH(u,c,b){var P=u==null?0:u.length;return P?(c=b||c===t?1:bt(c),c=P-c,En(u,c<0?0:c,P)):[]}function wH(u,c){return u&&u.length?th(u,at(c,3),!1,!0):[]}function xH(u,c){return u&&u.length?th(u,at(c,3)):[]}var SH=St(function(u){return ks(ni(u,1,_r,!0))}),_H=St(function(u){var c=Cn(u);return _r(c)&&(c=t),ks(ni(u,1,_r,!0),at(c,2))}),EH=St(function(u){var c=Cn(u);return c=typeof c=="function"?c:t,ks(ni(u,1,_r,!0),t,c)});function CH(u){return u&&u.length?ks(u):[]}function PH(u,c){return u&&u.length?ks(u,at(c,2)):[]}function IH(u,c){return c=typeof c=="function"?c:t,u&&u.length?ks(u,t,c):[]}function Zv(u){if(!(u&&u.length))return[];var c=0;return u=ii(u,function(b){if(_r(b))return c=Dr(b.length,c),!0}),As(c,function(b){return Nt(u,Sa(b))})}function y_(u,c){if(!(u&&u.length))return[];var b=Zv(u);return c==null?b:Nt(b,function(P){return Mi(c,t,P)})}var AH=St(function(u,c){return _r(u)?_c(u,c):[]}),TH=St(function(u){return Dv(ii(u,_r))}),MH=St(function(u){var c=Cn(u);return _r(c)&&(c=t),Dv(ii(u,_r),at(c,2))}),RH=St(function(u){var c=Cn(u);return c=typeof c=="function"?c:t,Dv(ii(u,_r),t,c)}),kH=St(Zv);function NH(u,c){return LS(u||[],c||[],Sc)}function OH(u,c){return LS(u||[],c||[],Pc)}var DH=St(function(u){var c=u.length,b=c>1?u[c-1]:t;return b=typeof b=="function"?(u.pop(),b):t,y_(u,b)});function b_(u){var c=U(u);return c.__chain__=!0,c}function LH(u,c){return c(u),u}function ch(u,c){return c(u)}var FH=Zo(function(u){var c=u.length,b=c?u[0]:0,P=this.__wrapped__,F=function(j){return Sv(j,u)};return c>1||this.__actions__.length||!(P instanceof It)||!Jo(b)?this.thru(F):(P=P.slice(b,+b+(c?1:0)),P.__actions__.push({func:ch,args:[F],thisArg:t}),new Sn(P,this.__chain__).thru(function(j){return c&&!j.length&&j.push(t),j}))});function zH(){return b_(this)}function BH(){return new Sn(this.value(),this.__chain__)}function qH(){this.__values__===t&&(this.__values__=N_(this.value()));var u=this.__index__>=this.__values__.length,c=u?t:this.__values__[this.__index__++];return{done:u,value:c}}function UH(){return this}function HH(u){for(var c,b=this;b instanceof Yp;){var P=p_(b);P.__index__=0,P.__values__=t,c?F.__wrapped__=P:c=P;var F=P;b=b.__wrapped__}return F.__wrapped__=u,c}function WH(){var u=this.__wrapped__;if(u instanceof It){var c=u;return this.__actions__.length&&(c=new It(this)),c=c.reverse(),c.__actions__.push({func:ch,args:[Xv],thisArg:t}),new Sn(c,this.__chain__)}return this.thru(Xv)}function VH(){return DS(this.__wrapped__,this.__actions__)}var $H=rh(function(u,c,b){$t.call(u,b)?++u[b]:Yo(u,b,1)});function jH(u,c,b){var P=gt(u)?hc:Lq;return b&&ki(u,c,b)&&(c=t),P(u,at(c,3))}function GH(u,c){var b=gt(u)?ii:yS;return b(u,at(c,3))}var KH=jS(h_),YH=jS(f_);function XH(u,c){return ni(dh(u,c),1)}function ZH(u,c){return ni(dh(u,c),ee)}function JH(u,c,b){return b=b===t?1:bt(b),ni(dh(u,c),b)}function w_(u,c){var b=gt(u)?ri:Rs;return b(u,at(c,3))}function x_(u,c){var b=gt(u)?Dp:vS;return b(u,at(c,3))}var QH=rh(function(u,c,b){$t.call(u,b)?u[b].push(c):Yo(u,b,[c])});function eW(u,c,b,P){u=Wi(u)?u:Nl(u),b=b&&!P?bt(b):0;var F=u.length;return b<0&&(b=Dr(F+b,0)),gh(u)?b<=F&&u.indexOf(c,b)>-1:!!F&&en(u,c,b)>-1}var tW=St(function(u,c,b){var P=-1,F=typeof c=="function",j=Wi(u)?ge(u.length):[];return Rs(u,function(Q){j[++P]=F?Mi(c,Q,b):Ec(Q,c,b)}),j}),rW=rh(function(u,c,b){Yo(u,b,c)});function dh(u,c){var b=gt(u)?Nt:ES;return b(u,at(c,3))}function iW(u,c,b,P){return u==null?[]:(gt(c)||(c=c==null?[]:[c]),b=P?t:b,gt(b)||(b=b==null?[]:[b]),AS(u,c,b))}var nW=rh(function(u,c,b){u[b?0:1].push(c)},function(){return[[],[]]});function oW(u,c,b){var P=gt(u)?xa:mo,F=arguments.length<3;return P(u,at(c,4),b,F,Rs)}function sW(u,c,b){var P=gt(u)?Sl:mo,F=arguments.length<3;return P(u,at(c,4),b,F,vS)}function aW(u,c){var b=gt(u)?ii:yS;return b(u,fh(at(c,3)))}function lW(u){var c=gt(u)?hS:eU;return c(u)}function uW(u,c,b){(b?ki(u,c,b):c===t)?c=1:c=bt(c);var P=gt(u)?Rq:tU;return P(u,c)}function cW(u){var c=gt(u)?kq:iU;return c(u)}function dW(u){if(u==null)return 0;if(Wi(u))return gh(u)?gi(u):u.length;var c=bi(u);return c==Fe||c==Xe?u.size:Av(u).length}function pW(u,c,b){var P=gt(u)?Vo:nU;return b&&ki(u,c,b)&&(c=t),P(u,at(c,3))}var hW=St(function(u,c){if(u==null)return[];var b=c.length;return b>1&&ki(u,c[0],c[1])?c=[]:b>2&&ki(c[0],c[1],c[2])&&(c=[c[0]]),AS(u,ni(c,1),[])}),ph=GB||function(){return or.Date.now()};function fW(u,c){if(typeof c!="function")throw new xn(n);return u=bt(u),function(){if(--u<1)return c.apply(this,arguments)}}function S_(u,c,b){return c=b?t:c,c=u&&c==null?u.length:c,Xo(u,D,t,t,t,t,c)}function __(u,c){var b;if(typeof c!="function")throw new xn(n);return u=bt(u),function(){return--u>0&&(b=c.apply(this,arguments)),u<=1&&(c=t),b}}var Jv=St(function(u,c,b){var P=v;if(b.length){var F=Zt(b,Rl(Jv));P|=L}return Xo(u,P,c,b,F)}),E_=St(function(u,c,b){var P=v|x;if(b.length){var F=Zt(b,Rl(E_));P|=L}return Xo(c,P,u,b,F)});function C_(u,c,b){c=b?t:c;var P=Xo(u,E,t,t,t,t,t,c);return P.placeholder=C_.placeholder,P}function P_(u,c,b){c=b?t:c;var P=Xo(u,O,t,t,t,t,t,c);return P.placeholder=P_.placeholder,P}function I_(u,c,b){var P,F,j,Q,ne,ue,_e=0,Ee=!1,Ie=!1,qe=!0;if(typeof u!="function")throw new xn(n);c=Pn(c)||0,gr(b)&&(Ee=!!b.leading,Ie="maxWait"in b,j=Ie?Dr(Pn(b.maxWait)||0,c):j,qe="trailing"in b?!!b.trailing:qe);function Qe(Er){var Bn=P,ts=F;return P=F=t,_e=Er,Q=u.apply(ts,Bn),Q}function ct(Er){return _e=Er,ne=Tc(Pt,c),Ee?Qe(Er):Q}function xt(Er){var Bn=Er-ue,ts=Er-_e,j_=c-Bn;return Ie?yi(j_,j-ts):j_}function dt(Er){var Bn=Er-ue,ts=Er-_e;return ue===t||Bn>=c||Bn<0||Ie&&ts>=j}function Pt(){var Er=ph();if(dt(Er))return Mt(Er);ne=Tc(Pt,xt(Er))}function Mt(Er){return ne=t,qe&&P?Qe(Er):(P=F=t,Q)}function an(){ne!==t&&FS(ne),_e=0,P=ue=F=ne=t}function Ni(){return ne===t?Q:Mt(ph())}function ln(){var Er=ph(),Bn=dt(Er);if(P=arguments,F=this,ue=Er,Bn){if(ne===t)return ct(ue);if(Ie)return FS(ne),ne=Tc(Pt,c),Qe(ue)}return ne===t&&(ne=Tc(Pt,c)),Q}return ln.cancel=an,ln.flush=Ni,ln}var mW=St(function(u,c){return gS(u,1,c)}),gW=St(function(u,c,b){return gS(u,Pn(c)||0,b)});function vW(u){return Xo(u,W)}function hh(u,c){if(typeof u!="function"||c!=null&&typeof c!="function")throw new xn(n);var b=function(){var P=arguments,F=c?c.apply(this,P):P[0],j=b.cache;if(j.has(F))return j.get(F);var Q=u.apply(this,P);return b.cache=j.set(F,Q)||j,Q};return b.cache=new(hh.Cache||Ko),b}hh.Cache=Ko;function fh(u){if(typeof u!="function")throw new xn(n);return function(){var c=arguments;switch(c.length){case 0:return!u.call(this);case 1:return!u.call(this,c[0]);case 2:return!u.call(this,c[0],c[1]);case 3:return!u.call(this,c[0],c[1],c[2])}return!u.apply(this,c)}}function yW(u){return __(2,u)}var bW=oU(function(u,c){c=c.length==1&&gt(c[0])?Nt(c[0],Wt(at())):Nt(ni(c,1),Wt(at()));var b=c.length;return St(function(P){for(var F=-1,j=yi(P.length,b);++F<j;)P[F]=c[F].call(this,P[F]);return Mi(u,this,P)})}),Qv=St(function(u,c){var b=Zt(c,Rl(Qv));return Xo(u,L,t,c,b)}),A_=St(function(u,c){var b=Zt(c,Rl(A_));return Xo(u,I,t,c,b)}),wW=Zo(function(u,c){return Xo(u,R,t,t,t,c)});function xW(u,c){if(typeof u!="function")throw new xn(n);return c=c===t?c:bt(c),St(u,c)}function SW(u,c){if(typeof u!="function")throw new xn(n);return c=c==null?0:Dr(bt(c),0),St(function(b){var P=b[c],F=Os(b,0,c);return P&&wn(F,P),Mi(u,this,F)})}function _W(u,c,b){var P=!0,F=!0;if(typeof u!="function")throw new xn(n);return gr(b)&&(P="leading"in b?!!b.leading:P,F="trailing"in b?!!b.trailing:F),I_(u,c,{leading:P,maxWait:c,trailing:F})}function EW(u){return S_(u,1)}function CW(u,c){return Qv(Fv(c),u)}function PW(){if(!arguments.length)return[];var u=arguments[0];return gt(u)?u:[u]}function IW(u){return _n(u,d)}function AW(u,c){return c=typeof c=="function"?c:t,_n(u,d,c)}function TW(u){return _n(u,p|d)}function MW(u,c){return c=typeof c=="function"?c:t,_n(u,p|d,c)}function RW(u,c){return c==null||mS(u,c,Vr(c))}function zn(u,c){return u===c||u!==u&&c!==c}var kW=sh(Cv),NW=sh(function(u,c){return u>=c}),Ra=xS(function(){return arguments}())?xS:function(u){return wr(u)&&$t.call(u,"callee")&&!aS.call(u,"callee")},gt=ge.isArray,OW=Wo?Wt(Wo):Hq;function Wi(u){return u!=null&&mh(u.length)&&!Qo(u)}function _r(u){return wr(u)&&Wi(u)}function DW(u){return u===!0||u===!1||wr(u)&&Ri(u)==ve}var Ds=YB||cy,LW=kp?Wt(kp):Wq;function FW(u){return wr(u)&&u.nodeType===1&&!Mc(u)}function zW(u){if(u==null)return!0;if(Wi(u)&&(gt(u)||typeof u=="string"||typeof u.splice=="function"||Ds(u)||kl(u)||Ra(u)))return!u.length;var c=bi(u);if(c==Fe||c==Xe)return!u.size;if(Ac(u))return!Av(u).length;for(var b in u)if($t.call(u,b))return!1;return!0}function BW(u,c){return Cc(u,c)}function qW(u,c,b){b=typeof b=="function"?b:t;var P=b?b(u,c):t;return P===t?Cc(u,c,t,b):!!P}function ey(u){if(!wr(u))return!1;var c=Ri(u);return c==Me||c==Ve||typeof u.message=="string"&&typeof u.name=="string"&&!Mc(u)}function UW(u){return typeof u=="number"&&uS(u)}function Qo(u){if(!gr(u))return!1;var c=Ri(u);return c==Le||c==We||c==Re||c==Et}function T_(u){return typeof u=="number"&&u==bt(u)}function mh(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=Z}function gr(u){var c=typeof u;return u!=null&&(c=="object"||c=="function")}function wr(u){return u!=null&&typeof u=="object"}var M_=bn?Wt(bn):$q;function HW(u,c){return u===c||Iv(u,c,Vv(c))}function WW(u,c,b){return b=typeof b=="function"?b:t,Iv(u,c,Vv(c),b)}function VW(u){return R_(u)&&u!=+u}function $W(u){if(AU(u))throw new mt(i);return SS(u)}function jW(u){return u===null}function GW(u){return u==null}function R_(u){return typeof u=="number"||wr(u)&&Ri(u)==st}function Mc(u){if(!wr(u)||Ri(u)!=et)return!1;var c=Hp(u);if(c===null)return!0;var b=$t.call(c,"constructor")&&c.constructor;return typeof b=="function"&&b instanceof b&&zp.call(b)==WB}var ty=pi?Wt(pi):jq;function KW(u){return T_(u)&&u>=-Z&&u<=Z}var k_=Np?Wt(Np):Gq;function gh(u){return typeof u=="string"||!gt(u)&&wr(u)&&Ri(u)==Tt}function sn(u){return typeof u=="symbol"||wr(u)&&Ri(u)==Kt}var kl=Op?Wt(Op):Kq;function YW(u){return u===t}function XW(u){return wr(u)&&bi(u)==Ot}function ZW(u){return wr(u)&&Ri(u)==oo}var JW=sh(Tv),QW=sh(function(u,c){return u<=c});function N_(u){if(!u)return[];if(Wi(u))return gh(u)?vi(u):Hi(u);if(vc&&u[vc])return Ct(u[vc]());var c=bi(u),b=c==Fe?Vt:c==Xe?Jt:Nl;return b(u)}function es(u){if(!u)return u===0?u:0;if(u=Pn(u),u===ee||u===-ee){var c=u<0?-1:1;return c*Y}return u===u?u:0}function bt(u){var c=es(u),b=c%1;return c===c?b?c-b:c:0}function O_(u){return u?Ia(bt(u),0,re):0}function Pn(u){if(typeof u=="number")return u;if(sn(u))return te;if(gr(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=gr(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=tn(u);var b=li.test(u);return b||ui.test(u)?hv(u.slice(2),b?2:8):gl.test(u)?te:+u}function D_(u){return yo(u,Vi(u))}function e6(u){return u?Ia(bt(u),-Z,Z):u===0?u:0}function qt(u){return u==null?"":on(u)}var t6=Tl(function(u,c){if(Ac(c)||Wi(c)){yo(c,Vr(c),u);return}for(var b in c)$t.call(c,b)&&Sc(u,b,c[b])}),L_=Tl(function(u,c){yo(c,Vi(c),u)}),vh=Tl(function(u,c,b,P){yo(c,Vi(c),u,P)}),r6=Tl(function(u,c,b,P){yo(c,Vr(c),u,P)}),i6=Zo(Sv);function n6(u,c){var b=Al(u);return c==null?b:fS(b,c)}var o6=St(function(u,c){u=rr(u);var b=-1,P=c.length,F=P>2?c[2]:t;for(F&&ki(c[0],c[1],F)&&(P=1);++b<P;)for(var j=c[b],Q=Vi(j),ne=-1,ue=Q.length;++ne<ue;){var _e=Q[ne],Ee=u[_e];(Ee===t||zn(Ee,Cl[_e])&&!$t.call(u,_e))&&(u[_e]=j[_e])}return u}),s6=St(function(u){return u.push(t,QS),Mi(F_,t,u)});function a6(u,c){return $o(u,at(c,3),vo)}function l6(u,c){return $o(u,at(c,3),Ev)}function u6(u,c){return u==null?u:_v(u,at(c,3),Vi)}function c6(u,c){return u==null?u:bS(u,at(c,3),Vi)}function d6(u,c){return u&&vo(u,at(c,3))}function p6(u,c){return u&&Ev(u,at(c,3))}function h6(u){return u==null?[]:Jp(u,Vr(u))}function f6(u){return u==null?[]:Jp(u,Vi(u))}function ry(u,c,b){var P=u==null?t:Aa(u,c);return P===t?b:P}function m6(u,c){return u!=null&&r_(u,c,zq)}function iy(u,c){return u!=null&&r_(u,c,Bq)}var g6=KS(function(u,c,b){c!=null&&typeof c.toString!="function"&&(c=Bp.call(c)),u[c]=b},oy($i)),v6=KS(function(u,c,b){c!=null&&typeof c.toString!="function"&&(c=Bp.call(c)),$t.call(u,c)?u[c].push(b):u[c]=[b]},at),y6=St(Ec);function Vr(u){return Wi(u)?pS(u):Av(u)}function Vi(u){return Wi(u)?pS(u,!0):Yq(u)}function b6(u,c){var b={};return c=at(c,3),vo(u,function(P,F,j){Yo(b,c(P,F,j),P)}),b}function w6(u,c){var b={};return c=at(c,3),vo(u,function(P,F,j){Yo(b,F,c(P,F,j))}),b}var x6=Tl(function(u,c,b){Qp(u,c,b)}),F_=Tl(function(u,c,b,P){Qp(u,c,b,P)}),S6=Zo(function(u,c){var b={};if(u==null)return b;var P=!1;c=Nt(c,function(j){return j=Ns(j,u),P||(P=j.length>1),j}),yo(u,Hv(u),b),P&&(b=_n(b,p|f|d,gU));for(var F=c.length;F--;)Ov(b,c[F]);return b});function _6(u,c){return z_(u,fh(at(c)))}var E6=Zo(function(u,c){return u==null?{}:Zq(u,c)});function z_(u,c){if(u==null)return{};var b=Nt(Hv(u),function(P){return[P]});return c=at(c),TS(u,b,function(P,F){return c(P,F[0])})}function C6(u,c,b){c=Ns(c,u);var P=-1,F=c.length;for(F||(F=1,u=t);++P<F;){var j=u==null?t:u[bo(c[P])];j===t&&(P=F,j=b),u=Qo(j)?j.call(u):j}return u}function P6(u,c,b){return u==null?u:Pc(u,c,b)}function I6(u,c,b,P){return P=typeof P=="function"?P:t,u==null?u:Pc(u,c,b,P)}var B_=ZS(Vr),q_=ZS(Vi);function A6(u,c,b){var P=gt(u),F=P||Ds(u)||kl(u);if(c=at(c,4),b==null){var j=u&&u.constructor;F?b=P?new j:[]:gr(u)?b=Qo(j)?Al(Hp(u)):{}:b={}}return(F?ri:vo)(u,function(Q,ne,ue){return c(b,Q,ne,ue)}),b}function T6(u,c){return u==null?!0:Ov(u,c)}function M6(u,c,b){return u==null?u:OS(u,c,Fv(b))}function R6(u,c,b,P){return P=typeof P=="function"?P:t,u==null?u:OS(u,c,Fv(b),P)}function Nl(u){return u==null?[]:M(u,Vr(u))}function k6(u){return u==null?[]:M(u,Vi(u))}function N6(u,c,b){return b===t&&(b=c,c=t),b!==t&&(b=Pn(b),b=b===b?b:0),c!==t&&(c=Pn(c),c=c===c?c:0),Ia(Pn(u),c,b)}function O6(u,c,b){return c=es(c),b===t?(b=c,c=0):b=es(b),u=Pn(u),qq(u,c,b)}function D6(u,c,b){if(b&&typeof b!="boolean"&&ki(u,c,b)&&(c=b=t),b===t&&(typeof c=="boolean"?(b=c,c=t):typeof u=="boolean"&&(b=u,u=t)),u===t&&c===t?(u=0,c=1):(u=es(u),c===t?(c=u,u=0):c=es(c)),u>c){var P=u;u=c,c=P}if(b||u%1||c%1){var F=cS();return yi(u+F*(c-u+pv("1e-"+((F+"").length-1))),c)}return Rv(u,c)}var L6=Ml(function(u,c,b){return c=c.toLowerCase(),u+(b?U_(c):c)});function U_(u){return ny(qt(u).toLowerCase())}function H_(u){return u=qt(u),u&&u.replace(Bo,Te).replace(Tp,"")}function F6(u,c,b){u=qt(u),c=on(c);var P=u.length;b=b===t?P:Ia(bt(b),0,P);var F=b;return b-=c.length,b>=0&&u.slice(b,F)==c}function z6(u){return u=qt(u),u&&ev.test(u)?u.replace(ml,De):u}function B6(u){return u=qt(u),u&&_p.test(u)?u.replace(ec,"\\$&"):u}var q6=Ml(function(u,c,b){return u+(b?"-":"")+c.toLowerCase()}),U6=Ml(function(u,c,b){return u+(b?" ":"")+c.toLowerCase()}),H6=$S("toLowerCase");function W6(u,c,b){u=qt(u),c=bt(c);var P=c?gi(u):0;if(!c||P>=c)return u;var F=(c-P)/2;return oh(jp(F),b)+u+oh($p(F),b)}function V6(u,c,b){u=qt(u),c=bt(c);var P=c?gi(u):0;return c&&P<c?u+oh(c-P,b):u}function $6(u,c,b){u=qt(u),c=bt(c);var P=c?gi(u):0;return c&&P<c?oh(c-P,b)+u:u}function j6(u,c,b){return b||c==null?c=0:c&&(c=+c),QB(qt(u).replace(ti,""),c||0)}function G6(u,c,b){return(b?ki(u,c,b):c===t)?c=1:c=bt(c),kv(qt(u),c)}function K6(){var u=arguments,c=qt(u[0]);return u.length<3?c:c.replace(u[1],u[2])}var Y6=Ml(function(u,c,b){return u+(b?"_":"")+c.toLowerCase()});function X6(u,c,b){return b&&typeof b!="number"&&ki(u,c,b)&&(c=b=t),b=b===t?re:b>>>0,b?(u=qt(u),u&&(typeof c=="string"||c!=null&&!ty(c))&&(c=on(c),!c&&yt(u))?Os(vi(u),0,b):u.split(c,b)):[]}var Z6=Ml(function(u,c,b){return u+(b?" ":"")+ny(c)});function J6(u,c,b){return u=qt(u),b=b==null?0:Ia(bt(b),0,u.length),c=on(c),u.slice(b,b+c.length)==c}function Q6(u,c,b){var P=U.templateSettings;b&&ki(u,c,b)&&(c=t),u=qt(u),c=vh({},c,P,JS);var F=vh({},c.imports,P.imports,JS),j=Vr(F),Q=M(F,j),ne,ue,_e=0,Ee=c.interpolate||Qi,Ie="__p += '",qe=vv((c.escape||Qi).source+"|"+Ee.source+"|"+(Ee===Qu?rc:Qi).source+"|"+(c.evaluate||Qi).source+"|$","g"),Qe="//# sourceURL="+($t.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Mp+"]")+`
`;u.replace(qe,function(dt,Pt,Mt,an,Ni,ln){return Mt||(Mt=an),Ie+=u.slice(_e,ln).replace(qo,rt),Pt&&(ne=!0,Ie+=`' +
__e(`+Pt+`) +
'`),Ni&&(ue=!0,Ie+=`';
`+Ni+`;
__p += '`),Mt&&(Ie+=`' +
((__t = (`+Mt+`)) == null ? '' : __t) +
'`),_e=ln+dt.length,dt}),Ie+=`';
`;var ct=$t.call(c,"variable")&&c.variable;if(!ct)Ie=`with (obj) {
`+Ie+`
}
`;else if(iv.test(ct))throw new mt(o);Ie=(ue?Ie.replace(Zu,""):Ie).replace(ai,"$1").replace(wp,"$1;"),Ie="function("+(ct||"obj")+`) {
`+(ct?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ne?", __e = _.escape":"")+(ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ie+`return __p
}`;var xt=V_(function(){return Dt(j,Qe+"return "+Ie).apply(t,Q)});if(xt.source=Ie,ey(xt))throw xt;return xt}function eV(u){return qt(u).toLowerCase()}function tV(u){return qt(u).toUpperCase()}function rV(u,c,b){if(u=qt(u),u&&(b||c===t))return tn(u);if(!u||!(c=on(c)))return u;var P=vi(u),F=vi(c),j=K(P,F),Q=G(P,F)+1;return Os(P,j,Q).join("")}function iV(u,c,b){if(u=qt(u),u&&(b||c===t))return u.slice(0,nn(u)+1);if(!u||!(c=on(c)))return u;var P=vi(u),F=G(P,vi(c))+1;return Os(P,0,F).join("")}function nV(u,c,b){if(u=qt(u),u&&(b||c===t))return u.replace(ti,"");if(!u||!(c=on(c)))return u;var P=vi(u),F=K(P,vi(c));return Os(P,F).join("")}function oV(u,c){var b=N,P=z;if(gr(c)){var F="separator"in c?c.separator:F;b="length"in c?bt(c.length):b,P="omission"in c?on(c.omission):P}u=qt(u);var j=u.length;if(yt(u)){var Q=vi(u);j=Q.length}if(b>=j)return u;var ne=b-gi(P);if(ne<1)return P;var ue=Q?Os(Q,0,ne).join(""):u.slice(0,ne);if(F===t)return ue+P;if(Q&&(ne+=ue.length-ne),ty(F)){if(u.slice(ne).search(F)){var _e,Ee=ue;for(F.global||(F=vv(F.source,qt(ic.exec(F))+"g")),F.lastIndex=0;_e=F.exec(Ee);)var Ie=_e.index;ue=ue.slice(0,Ie===t?ne:Ie)}}else if(u.indexOf(on(F),ne)!=ne){var qe=ue.lastIndexOf(F);qe>-1&&(ue=ue.slice(0,qe))}return ue+P}function sV(u){return u=qt(u),u&&Qg.test(u)?u.replace(fl,go):u}var aV=Ml(function(u,c,b){return u+(b?" ":"")+c.toUpperCase()}),ny=$S("toUpperCase");function W_(u,c,b){return u=qt(u),c=b?t:c,c===t?$e(u)?jo(u):mc(u):u.match(c)||[]}var V_=St(function(u,c){try{return Mi(u,t,c)}catch(b){return ey(b)?b:new mt(b)}}),lV=Zo(function(u,c){return ri(c,function(b){b=bo(b),Yo(u,b,Jv(u[b],u))}),u});function uV(u){var c=u==null?0:u.length,b=at();return u=c?Nt(u,function(P){if(typeof P[1]!="function")throw new xn(n);return[b(P[0]),P[1]]}):[],St(function(P){for(var F=-1;++F<c;){var j=u[F];if(Mi(j[0],this,P))return Mi(j[1],this,P)}})}function cV(u){return Dq(_n(u,p))}function oy(u){return function(){return u}}function dV(u,c){return u==null||u!==u?c:u}var pV=GS(),hV=GS(!0);function $i(u){return u}function sy(u){return _S(typeof u=="function"?u:_n(u,p))}function fV(u){return CS(_n(u,p))}function mV(u,c){return PS(u,_n(c,p))}var gV=St(function(u,c){return function(b){return Ec(b,u,c)}}),vV=St(function(u,c){return function(b){return Ec(u,b,c)}});function ay(u,c,b){var P=Vr(c),F=Jp(c,P);b==null&&!(gr(c)&&(F.length||!P.length))&&(b=c,c=u,u=this,F=Jp(c,Vr(c)));var j=!(gr(b)&&"chain"in b)||!!b.chain,Q=Qo(u);return ri(F,function(ne){var ue=c[ne];u[ne]=ue,Q&&(u.prototype[ne]=function(){var _e=this.__chain__;if(j||_e){var Ee=u(this.__wrapped__),Ie=Ee.__actions__=Hi(this.__actions__);return Ie.push({func:ue,args:arguments,thisArg:u}),Ee.__chain__=_e,Ee}return ue.apply(u,wn([this.value()],arguments))})}),u}function yV(){return or._===this&&(or._=VB),this}function ly(){}function bV(u){return u=bt(u),St(function(c){return IS(c,u)})}var wV=Bv(Nt),xV=Bv(hc),SV=Bv(Vo);function $_(u){return jv(u)?Sa(bo(u)):Jq(u)}function _V(u){return function(c){return u==null?t:Aa(u,c)}}var EV=YS(),CV=YS(!0);function uy(){return[]}function cy(){return!1}function PV(){return{}}function IV(){return""}function AV(){return!0}function TV(u,c){if(u=bt(u),u<1||u>Z)return[];var b=re,P=yi(u,re);c=at(c),u-=re;for(var F=As(P,c);++b<u;)c(b);return F}function MV(u){return gt(u)?Nt(u,bo):sn(u)?[u]:Hi(d_(qt(u)))}function RV(u){var c=++HB;return qt(u)+c}var kV=nh(function(u,c){return u+c},0),NV=qv("ceil"),OV=nh(function(u,c){return u/c},1),DV=qv("floor");function LV(u){return u&&u.length?Zp(u,$i,Cv):t}function FV(u,c){return u&&u.length?Zp(u,at(c,2),Cv):t}function zV(u){return Is(u,$i)}function BV(u,c){return Is(u,at(c,2))}function qV(u){return u&&u.length?Zp(u,$i,Tv):t}function UV(u,c){return u&&u.length?Zp(u,at(c,2),Tv):t}var HV=nh(function(u,c){return u*c},1),WV=qv("round"),VV=nh(function(u,c){return u-c},0);function $V(u){return u&&u.length?El(u,$i):0}function jV(u,c){return u&&u.length?El(u,at(c,2)):0}return U.after=fW,U.ary=S_,U.assign=t6,U.assignIn=L_,U.assignInWith=vh,U.assignWith=r6,U.at=i6,U.before=__,U.bind=Jv,U.bindAll=lV,U.bindKey=E_,U.castArray=PW,U.chain=b_,U.chunk=DU,U.compact=LU,U.concat=FU,U.cond=uV,U.conforms=cV,U.constant=oy,U.countBy=$H,U.create=n6,U.curry=C_,U.curryRight=P_,U.debounce=I_,U.defaults=o6,U.defaultsDeep=s6,U.defer=mW,U.delay=gW,U.difference=zU,U.differenceBy=BU,U.differenceWith=qU,U.drop=UU,U.dropRight=HU,U.dropRightWhile=WU,U.dropWhile=VU,U.fill=$U,U.filter=GH,U.flatMap=XH,U.flatMapDeep=ZH,U.flatMapDepth=JH,U.flatten=m_,U.flattenDeep=jU,U.flattenDepth=GU,U.flip=vW,U.flow=pV,U.flowRight=hV,U.fromPairs=KU,U.functions=h6,U.functionsIn=f6,U.groupBy=QH,U.initial=XU,U.intersection=ZU,U.intersectionBy=JU,U.intersectionWith=QU,U.invert=g6,U.invertBy=v6,U.invokeMap=tW,U.iteratee=sy,U.keyBy=rW,U.keys=Vr,U.keysIn=Vi,U.map=dh,U.mapKeys=b6,U.mapValues=w6,U.matches=fV,U.matchesProperty=mV,U.memoize=hh,U.merge=x6,U.mergeWith=F_,U.method=gV,U.methodOf=vV,U.mixin=ay,U.negate=fh,U.nthArg=bV,U.omit=S6,U.omitBy=_6,U.once=yW,U.orderBy=iW,U.over=wV,U.overArgs=bW,U.overEvery=xV,U.overSome=SV,U.partial=Qv,U.partialRight=A_,U.partition=nW,U.pick=E6,U.pickBy=z_,U.property=$_,U.propertyOf=_V,U.pull=iH,U.pullAll=v_,U.pullAllBy=nH,U.pullAllWith=oH,U.pullAt=sH,U.range=EV,U.rangeRight=CV,U.rearg=wW,U.reject=aW,U.remove=aH,U.rest=xW,U.reverse=Xv,U.sampleSize=uW,U.set=P6,U.setWith=I6,U.shuffle=cW,U.slice=lH,U.sortBy=hW,U.sortedUniq=mH,U.sortedUniqBy=gH,U.split=X6,U.spread=SW,U.tail=vH,U.take=yH,U.takeRight=bH,U.takeRightWhile=wH,U.takeWhile=xH,U.tap=LH,U.throttle=_W,U.thru=ch,U.toArray=N_,U.toPairs=B_,U.toPairsIn=q_,U.toPath=MV,U.toPlainObject=D_,U.transform=A6,U.unary=EW,U.union=SH,U.unionBy=_H,U.unionWith=EH,U.uniq=CH,U.uniqBy=PH,U.uniqWith=IH,U.unset=T6,U.unzip=Zv,U.unzipWith=y_,U.update=M6,U.updateWith=R6,U.values=Nl,U.valuesIn=k6,U.without=AH,U.words=W_,U.wrap=CW,U.xor=TH,U.xorBy=MH,U.xorWith=RH,U.zip=kH,U.zipObject=NH,U.zipObjectDeep=OH,U.zipWith=DH,U.entries=B_,U.entriesIn=q_,U.extend=L_,U.extendWith=vh,ay(U,U),U.add=kV,U.attempt=V_,U.camelCase=L6,U.capitalize=U_,U.ceil=NV,U.clamp=N6,U.clone=IW,U.cloneDeep=TW,U.cloneDeepWith=MW,U.cloneWith=AW,U.conformsTo=RW,U.deburr=H_,U.defaultTo=dV,U.divide=OV,U.endsWith=F6,U.eq=zn,U.escape=z6,U.escapeRegExp=B6,U.every=jH,U.find=KH,U.findIndex=h_,U.findKey=a6,U.findLast=YH,U.findLastIndex=f_,U.findLastKey=l6,U.floor=DV,U.forEach=w_,U.forEachRight=x_,U.forIn=u6,U.forInRight=c6,U.forOwn=d6,U.forOwnRight=p6,U.get=ry,U.gt=kW,U.gte=NW,U.has=m6,U.hasIn=iy,U.head=g_,U.identity=$i,U.includes=eW,U.indexOf=YU,U.inRange=O6,U.invoke=y6,U.isArguments=Ra,U.isArray=gt,U.isArrayBuffer=OW,U.isArrayLike=Wi,U.isArrayLikeObject=_r,U.isBoolean=DW,U.isBuffer=Ds,U.isDate=LW,U.isElement=FW,U.isEmpty=zW,U.isEqual=BW,U.isEqualWith=qW,U.isError=ey,U.isFinite=UW,U.isFunction=Qo,U.isInteger=T_,U.isLength=mh,U.isMap=M_,U.isMatch=HW,U.isMatchWith=WW,U.isNaN=VW,U.isNative=$W,U.isNil=GW,U.isNull=jW,U.isNumber=R_,U.isObject=gr,U.isObjectLike=wr,U.isPlainObject=Mc,U.isRegExp=ty,U.isSafeInteger=KW,U.isSet=k_,U.isString=gh,U.isSymbol=sn,U.isTypedArray=kl,U.isUndefined=YW,U.isWeakMap=XW,U.isWeakSet=ZW,U.join=eH,U.kebabCase=q6,U.last=Cn,U.lastIndexOf=tH,U.lowerCase=U6,U.lowerFirst=H6,U.lt=JW,U.lte=QW,U.max=LV,U.maxBy=FV,U.mean=zV,U.meanBy=BV,U.min=qV,U.minBy=UV,U.stubArray=uy,U.stubFalse=cy,U.stubObject=PV,U.stubString=IV,U.stubTrue=AV,U.multiply=HV,U.nth=rH,U.noConflict=yV,U.noop=ly,U.now=ph,U.pad=W6,U.padEnd=V6,U.padStart=$6,U.parseInt=j6,U.random=D6,U.reduce=oW,U.reduceRight=sW,U.repeat=G6,U.replace=K6,U.result=C6,U.round=WV,U.runInContext=le,U.sample=lW,U.size=dW,U.snakeCase=Y6,U.some=pW,U.sortedIndex=uH,U.sortedIndexBy=cH,U.sortedIndexOf=dH,U.sortedLastIndex=pH,U.sortedLastIndexBy=hH,U.sortedLastIndexOf=fH,U.startCase=Z6,U.startsWith=J6,U.subtract=VV,U.sum=$V,U.sumBy=jV,U.template=Q6,U.times=TV,U.toFinite=es,U.toInteger=bt,U.toLength=O_,U.toLower=eV,U.toNumber=Pn,U.toSafeInteger=e6,U.toString=qt,U.toUpper=tV,U.trim=rV,U.trimEnd=iV,U.trimStart=nV,U.truncate=oV,U.unescape=sV,U.uniqueId=RV,U.upperCase=aV,U.upperFirst=ny,U.each=w_,U.eachRight=x_,U.first=g_,ay(U,function(){var u={};return vo(U,function(c,b){$t.call(U.prototype,b)||(u[b]=c)}),u}(),{chain:!1}),U.VERSION=e,ri(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){U[u].placeholder=U}),ri(["drop","take"],function(u,c){It.prototype[u]=function(b){b=b===t?1:Dr(bt(b),0);var P=this.__filtered__&&!c?new It(this):this.clone();return P.__filtered__?P.__takeCount__=yi(b,P.__takeCount__):P.__views__.push({size:yi(b,re),type:u+(P.__dir__<0?"Right":"")}),P},It.prototype[u+"Right"]=function(b){return this.reverse()[u](b).reverse()}}),ri(["filter","map","takeWhile"],function(u,c){var b=c+1,P=b==J||b==se;It.prototype[u]=function(F){var j=this.clone();return j.__iteratees__.push({iteratee:at(F,3),type:b}),j.__filtered__=j.__filtered__||P,j}}),ri(["head","last"],function(u,c){var b="take"+(c?"Right":"");It.prototype[u]=function(){return this[b](1).value()[0]}}),ri(["initial","tail"],function(u,c){var b="drop"+(c?"":"Right");It.prototype[u]=function(){return this.__filtered__?new It(this):this[b](1)}}),It.prototype.compact=function(){return this.filter($i)},It.prototype.find=function(u){return this.filter(u).head()},It.prototype.findLast=function(u){return this.reverse().find(u)},It.prototype.invokeMap=St(function(u,c){return typeof u=="function"?new It(this):this.map(function(b){return Ec(b,u,c)})}),It.prototype.reject=function(u){return this.filter(fh(at(u)))},It.prototype.slice=function(u,c){u=bt(u);var b=this;return b.__filtered__&&(u>0||c<0)?new It(b):(u<0?b=b.takeRight(-u):u&&(b=b.drop(u)),c!==t&&(c=bt(c),b=c<0?b.dropRight(-c):b.take(c-u)),b)},It.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},It.prototype.toArray=function(){return this.take(re)},vo(It.prototype,function(u,c){var b=/^(?:filter|find|map|reject)|While$/.test(c),P=/^(?:head|last)$/.test(c),F=U[P?"take"+(c=="last"?"Right":""):c],j=P||/^find/.test(c);F&&(U.prototype[c]=function(){var Q=this.__wrapped__,ne=P?[1]:arguments,ue=Q instanceof It,_e=ne[0],Ee=ue||gt(Q),Ie=function(Pt){var Mt=F.apply(U,wn([Pt],ne));return P&&qe?Mt[0]:Mt};Ee&&b&&typeof _e=="function"&&_e.length!=1&&(ue=Ee=!1);var qe=this.__chain__,Qe=!!this.__actions__.length,ct=j&&!qe,xt=ue&&!Qe;if(!j&&Ee){Q=xt?Q:new It(this);var dt=u.apply(Q,ne);return dt.__actions__.push({func:ch,args:[Ie],thisArg:t}),new Sn(dt,qe)}return ct&&xt?u.apply(this,ne):(dt=this.thru(Ie),ct?P?dt.value()[0]:dt.value():dt)})}),ri(["pop","push","shift","sort","splice","unshift"],function(u){var c=Lp[u],b=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",P=/^(?:pop|shift)$/.test(u);U.prototype[u]=function(){var F=arguments;if(P&&!this.__chain__){var j=this.value();return c.apply(gt(j)?j:[],F)}return this[b](function(Q){return c.apply(gt(Q)?Q:[],F)})}}),vo(It.prototype,function(u,c){var b=U[c];if(b){var P=b.name+"";$t.call(Il,P)||(Il[P]=[]),Il[P].push({name:c,func:b})}}),Il[ih(t,x).name]=[{name:"wrapper",func:t}],It.prototype.clone=sq,It.prototype.reverse=aq,It.prototype.value=lq,U.prototype.at=FH,U.prototype.chain=zH,U.prototype.commit=BH,U.prototype.next=qH,U.prototype.plant=HH,U.prototype.reverse=WH,U.prototype.toJSON=U.prototype.valueOf=U.prototype.value=VH,U.prototype.first=U.prototype.head,vc&&(U.prototype[vc]=UH),U},Wr=gv();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(or._=Wr,define(function(){return Wr})):Ui?((Ui.exports=Wr)._=Wr,wl._=Wr):or._=Wr}).call(Ul)});var tt={};hr(tt,{closest:()=>qa,collapseOptions:()=>pt,constrain:()=>M9,contentIsIndexable:()=>Qh,convertDateToISO:()=>q9,convertToEpoch:()=>F9,convertTransformIntoMatrixStyleString:()=>w9,decompose:()=>Xh,deviceType:()=>fb,easeInCubic:()=>x9,easeInOutCirc:()=>C9,easeInOutCubic:()=>gb,easeInOutSine:()=>bb,easeInQuadratic:()=>_9,easeInSine:()=>yb,easeOutCubic:()=>wb,easeOutExponential:()=>E9,easeOutQuadratic:()=>S9,easeOutSine:()=>vb,filterZoomLinks:()=>k9,formatDate:()=>L9,formatDate3LetterMonth:()=>B9,getCSSValueAndUnit:()=>lr,getCorrectRenderContextForGivenPID:()=>Sb,getFiletypeAndOembedFromURL:()=>P9,getHeight:()=>T9,getWidth:()=>A9,handleHomePageScrollLock:()=>D9,isAdminEdit:()=>Fr,isAlphanumeric:()=>z9,isChrome:()=>h9,isDateInFuture:()=>O9,isDevEnv:()=>l9,isEdge:()=>f9,isFirefox:()=>p9,isIE:()=>NP,isIE8:()=>m9,isIOS:()=>sd,isIOSWebView:()=>g9,isInDocumentOrShadowRoot:()=>xb,isInstagram:()=>mb,isLocalEnv:()=>db,isMac:()=>od,isMobile:()=>c9,isMobileWindowSize:()=>y9,isProduction:()=>Jh,isProductionTestingAcct:()=>pb,isPromoCodeTransitionPeriod:()=>R9,isSafari:()=>cn,isServer:()=>pe,isServerRendered:()=>u9,isSitePreview:()=>Ba,mergeRefs:()=>I9,parseMatrixStyleString:()=>b9,sitePreviewHostname:()=>hb,stringReplaceMultiple:()=>v9,stripTLD:()=>N9,viewportOrientation:()=>d9});var Zh,db,l9,Jh,pb,pe,u9,MP,Fr,RP,kP,Ba,hb,c9,d9,fb,od,p9,mb,cn,h9,NP,f9,m9,sd,g9,v9,Qh,y9,b9,w9,Xh,lr,gb,vb,yb,bb,wb,x9,S9,_9,E9,C9,pt,P9,I9,A9,T9,qa,xb,M9,R9,k9,N9,O9,Sb,D9,L9,F9,z9,B9,q9,Be=V(()=>{Zh=ye(Pe()),db=/^local.*/.test("production"),l9=/^dev.*/.test("production"),Jh=!0,pb=(t,e)=>{let r=[1,12,14494300,14502618,18,39,75,13933487,14497410,14065331,14229062,14313249];return e==="newsletter"&&(r=[13933487,39]),r.includes(t)||!1},pe=!(typeof window<"u"&&window.document&&window.document.createElement),u9=!pe&&window.hasOwnProperty("__PRELOADED_STATE__"),MP=!1;try{window.parent!==window&&window.location.host===window.parent.location.host&&window.parent.location.pathname.startsWith("/edit")&&(MP=!0)}catch{}Fr=MP,RP=!1;try{if(typeof window<"u"&&window.location.pathname.match("site.preview")!==null){let t=window.location.pathname.match(/^\/site\.preview\/(?<hostname>[^\/]+)/i);t?.groups?.hostname&&(kP=t.groups?.hostname,RP=!0)}}catch{}Ba=RP,hb=kP,c9=function(){if(pe)return!1;var t=!1,e=window.navigator.userAgent||window.navigator.vendor||window.opera;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0)}(e),t=t||!t&&/(android)/i.test(e.substr(0,40)),t}(),d9=()=>pe?!1:window.matchMedia("(max-aspect-ratio: 1:1)")?"portrait":"landscape",fb=()=>{if(pe)return"mouse";let t=window.matchMedia("(hover:hover)"),e=window.matchMedia("(any-pointer:fine)");return t.matches&&e.matches?"mouse":"touch"},od=()=>pe?!1:navigator?.userAgent?.includes("Mac"),p9=()=>pe?!1:/Firefox\/\d+\.\d+/.test(navigator.userAgent),mb=()=>pe?!1:navigator.userAgent.indexOf("Instagram")!=-1,cn=()=>pe?!1:navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1,h9=()=>pe?!1:window.chrome!==null&&navigator.userAgent.indexOf("Chrome")!=-1&&navigator.vendor==="Google Inc."&&typeof window.opr>"u"&&navigator.userAgent.indexOf("Edg")==-1,NP=()=>pe?!1:/MSIE (\d+\.\d+);/.test(navigator.userAgent),f9=()=>pe?!1:/Edge/.test(navigator.userAgent),m9=()=>{if(pe)return!1;var t=-1;if(NP()){var e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");e.exec(navigator.userAgent)!=null&&(t=parseFloat(RegExp.$1))}return t<9&&t>0},sd=()=>pe?!1:!!navigator.userAgent.match(/i(Phone|Pod|Pad)/i),g9=()=>{if(pe)return!1;var t=window.navigator.standalone,e=window.navigator.userAgent.toLowerCase(),r=/safari/.test(e),i=/iphone|ipod|ipad/.test(e);if(i){if(!t&&r)return!1;if(t&&!r)return!1;if(!t&&!r)return!0}return!1},v9=(t,e)=>{for(var r in e)t=t.replace(new RegExp(r,"g"),e[r]);return t},Qh=t=>t?t.page_type==="set"?!0:!(t.display===!1||t.pin||t.overlay):!1,y9=t=>t<770,b9=t=>{let e=t.indexOf("matrix(")>-1,r=t.indexOf("matrix3d(")>-1,i,n;return e?(i=t.replace("matrix(","").replace(")").split(", ").map(o=>parseFloat(o)),n=Xh(i[0],i[1],i[2],i[3],i[4],i[5],!1)):r?(i=t.replace("matrix3d(","").replace(")").split(", ").map(o=>parseFloat(o)),n=Xh(i[0],i[1],i[4],i[5],i[12],i[13],!1),n.translate.z=i[14]):n=Xh(0,0,0,0,0,0,!1),n},w9=t=>{let e=t.hasOwnProperty("translate"),r=t.hasOwnProperty("scale"),i=r&&t.scale.x||1,n=r&&t.scale.y||1,o=e&&t.translate.x||0,s=e&&t.translate.y||0,a=e&&t.translate.z||0,l=t.rotation||0,p=e&&t.translate.hasOwnProperty("z"),f;if(p){let d=[Math.cos(l)/i,-Math.sin(l),0,o,Math.sin(l),Math.cos(l)/n,0,s,0,0,1,a,0,0,0,1];f=`matrix3d(${d[0]}, ${d[4]}, ${d[8]}, ${d[12]}, ${d[1]}, ${d[5]}, ${d[9]}, ${d[13]}, ${d[2]}, ${d[6]}, ${d[10]}, ${d[14]}, ${d[3]}, ${d[7]}, ${d[11]}, ${d[15]})`}else{let d=[Math.cos(l)/i,-Math.sin(l),o,Math.sin(l),Math.cos(l)/n,s,0,0,1];f=`matrix(${d[0]}, ${d[3]}, ${d[1]}, ${d[4]}, ${d[2]}, ${d[5]})`}return f},Xh=(t=0,e=0,r=0,i=0,n=0,o=0,s=!1)=>{var a=Math.acos,l=Math.atan,p=Math.sqrt,f=Math.PI,d={x:n,y:o},m=0,g={x:1,y:1},v={x:0,y:0},x=t*i-e*r;if(s)t?(v={x:l(r/t),y:l(e/t)},g={x:t,y:x/t}):e?(m=f*.5,g={x:e,y:x/e},v.x=l(i/e)):(g={x:r,y:i},v.x=f*.25);else if(t||e){var _=p(t*t+e*e);m=e>0?a(t/_):-a(t/_),g={x:_,y:x/_},v.x=l((t*r+e*i)/(_*_))}else if(r||i){var E=p(r*r+i*i);m=f*.5-(i>0?a(-r/E):-a(r/E)),g={x:x/E,y:E},v.y=l((t*r+e*i)/(E*E))}else g={x:0,y:0};return{scale:g,translate:d,rotation:m,skew:v}},lr=(t,e)=>{t=t?.toString()||"",t=t.replace(/^\.(\d+)/,"0.$1");let r=t.replace(/[^\d.-]/g,""),i=t.replace(r+"","").trim();return r=parseFloat(r),i===""&&e!==void 0?i=e:(i.indexOf("var(")>-1||i.indexOf("calc(")>-1)&&(r="",i=t),[r,i]},gb=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,vb=t=>Math.sin(t*Math.PI/2),yb=t=>1-Math.cos(t*Math.PI/2),bb=t=>t>=1?1:-(Math.cos(Math.PI*t)-1)/2,wb=t=>1-Math.pow(-1*t+1,3),x9=t=>Math.pow(t,3),S9=t=>1-Math.pow(-1*t+1,4),_9=t=>Math.pow(t,4),E9=t=>t===1?1:1-Math.pow(2,-10*t),C9=t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,pt=t=>{let e={},r=i=>{i.forEach(n=>{if(n.type=="color"&&n.tabs?n.tabs.forEach(o=>{e[o.name]=o.value}):n.type=="checkbox-color"&&r([n.checkbox,n.color]),n.value!=null&&n.value!=null){e[n.name]={value:n.value},n.values&&(n.type==="radio"||n.type==="select")&&(e[n.name].values=n.values.map(s=>s.value)),e[n.name].type=n.type,n.excludeFromShuffle!==void 0&&(e[n.name].excludeFromShuffle=n.excludeFromShuffle);let o;n.defaultUnit!==void 0&&(o=e.unit=n.defaultUnit),n.min!==void 0&&(typeof n.min=="object"?e[n.name].min=n.min[o]??n.min.etc??0:e[n.name].min=n.min),n.max!==void 0&&(typeof n.max=="object"?e[n.name].max=n.max[o]??n.max.etc??0:e[n.name].max=n.max),typeof n.step=="object"?e[n.name].step=n.step[o]??n.step.etc??1:e[n.name].step=n.step,n.inheritsFrom&&(e[n.name].inheritsFrom=n.inheritsFrom),n.unit&&(e[n.name].unit=n.unit)}n.toggle&&r([n.toggle]),n.children&&r(n.children)})};return r(t),e},P9=(t,e={width:250})=>{let r=null,i=null,n=t.toLowerCase();if(n.endsWith(".mov")||n.endsWith(".mp4")||n.endsWith(".webm"))return{fileType:"video",oembedURL:null,id:null};if(n.endsWith(".png")||n.endsWith(".webp")||n.endsWith(".jpg")||n.endsWith(".jpeg")||n.endsWith(".gif")||n.endsWith(".avif")||n.endsWith(".apng")||n.endsWith(".svg"))return{fileType:"image",oembedURL:null,id:null};r="url";var o="",s="",a="",l=/(?:<iframe [^>]*src=")?(?:https?:\/\/(?:[\w]+\.)*vimeo\.com(?:[\/\w:]*(?:\/videos)?)?\/([0-9]+)[^\s]*)"?(?:[^>]*><\/iframe>)?(?:<p>.*<\/p>)?/,d=t.match(l);if(d&&d[0]){let m=d[0].split(/\/|\?h=|&|\?/);for(var p=0;p<m.length;p++)!m[p].includes(":")&&!m[p].includes(".")&&!m[p].includes("vimeo")&&!m[p].includes("=")&&!m[p].includes("video")&&!m[p].includes("showcase")&&!m[p].includes("player")&&m[p].length>3&&(o.length==0?o=m[p]:o+="/"+m[p]);r="vimeo",i="https://vimeo.com/api/oembed.json?url=https://vimeo.com/"+o+"&width="+e.width}var f=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(shorts\/)|(watch\?))\??v?=?([^#\&\?]*).*/,d=t.match(f);return d&&(d[7]&&d[7].length==11?(o=d[7],i="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v="+o):d[8]&&d[8].length==11?(o=d[8],i="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url=https://www.youtube.com/shorts/"+o):i="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url="+(t.indexOf("?")>-1?t.split("?")[0]:t),r="youtube"),{fileType:r,oembedURL:i,id:o}},I9=(...t)=>{let e=t.filter(Boolean);return e.length?e.length===0?e[0]:r=>{for(let i of e)typeof i=="function"?i(r):i&&(i.current=r)}:null},A9=t=>{var e=getComputedStyle(t,null);return e.getPropertyValue("box-sizing")==="border-box"?parseFloat(e.width)-((parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0)+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0)):parseFloat(e.width)},T9=t=>{var e=getComputedStyle(t,null);return e.getPropertyValue("box-sizing")==="border-box"?parseFloat(e.height)-((parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0)+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)):parseFloat(e.height)},qa=(t,e)=>{var r=t&&(e(t)?t:qa(t.parentNode,e));return r||null},xb=t=>{for(var e=t;e&&e.parentNode;){if(e.parentNode===document)return!0;e.parentNode instanceof DocumentFragment?e=e.parentNode.host:e=e.parentNode}return!1},M9=(t,e,r)=>t>r?r:t<e?e:t,R9=t=>{let e=new Date,r=new Date(t);if(isNaN(r.getTime()))return!1;let i=r.getTime()-e.getTime();return Math.floor(i/(1e3*60*60*24))<=15},k9=t=>(t=Zh.default.filter(t,e=>{var r=e.getAttribute("href");return!(r&&(r===""||r=="#"||r.indexOf("mailto:")==0||r.indexOf("tel:")==0))}),t),N9=t=>{if(!t)return[null,null];let e=/(\.[^.]+)$/,r=t.match(e);if(r){let i=r[1],n=t.slice(0,-i.length);return[i,n]}else return[null,t]},O9=t=>{if(!t)return!0;let e=new Date(t),r=Math.floor(e.getTime()/1e3),n=Math.floor(Date.now()/1e3)-15*24*60*60;return r>=n},Sb=(t,e,r)=>{let i=t.pages.byId[r],n=e.getHomepageId(t),o=e.getHiddenHomepageId(t),s=t.sets.byId[Zh.default.findKey(t.structure.byParent,p=>p.includes(n))],a=t.sets.byId[Zh.default.findKey(t.structure.byParent,p=>p.includes(r))],l=r;if(t.sets.byId.root?.stack===!0)i?.display===!1?l=i.id:l=a?.id||"root";else if(i){if(i.pin||i.overlay||a?.stack)if(l=a?.id,(i.pin||i.overlay)&&a?.stack===!1){if(a?.id===s?.id&&(l="root"),a.page_count>=1){let p=t.structure.byParent[a.id]?.filter(f=>t.structure.indexById[f]!==null&&t.sets.byId[f]===void 0&&t.pages.byId[f]?.password_enabled!==!0&&f!==o).sort((f,d)=>t.structure.bySort[f]-t.structure.bySort[d]);p.length>0&&(p.includes(n)?l=n:l=p[0])}}else i?.display===!1&&a?.stack===!0&&(l=i.id);else l=i.id;l==="root"&&n&&(l=n)}return l},D9=(t=!0,e=!1)=>{if(pe)return;document.querySelectorAll("html, body, #templates, #siteslist").forEach(i=>{if(i.scrollHeight>i.clientHeight)if(t){if(e&&(i.dataset.scrollPos=i.scrollTop),i.style.overflow==="hidden")return;!i.dataset.originalOverflow&&i.style.overflow!==""&&(i.dataset.originalOverflow=i.style.overflow),i.style.overflow="hidden"}else{if(i.dataset.originalOverflow!==void 0)i.style.overflow=i.dataset.originalOverflow,delete i.dataset.originalOverflow;else{if(i.style.overflow!=="hidden")return;i.style.removeProperty("overflow")}e||delete i.dataset.scrollPos,i.dataset.scrollPos!==void 0&&requestAnimationFrame(()=>{i.scrollTop=i.dataset.scrollPos})}else i.style.overflow=="hidden"&&!t&&(i.style.overflow=null)})},L9=(t,e=!0)=>{let r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(!t)return;let i=new Date(t),n=i.getDate(),o=parseInt(i.getMonth()),s=r[o],a=i.getFullYear(),l=i.getHours()%12===0?12:i.getHours()%12,p=i.getMinutes().toString().match(/\d/g).length===1?"0"+i.getMinutes():i.getMinutes(),f="0"+i.getSeconds(),d=i.getHours()>=12?"pm":"am",m=new Date().setHours(0,0,0,0),g=m-864e5,v=null;return t>=m&&(v="today"),t<=m&&t>=g&&(v="yesterday"),e?v!==null?v+", "+l+":"+p+d:s+" "+n+" "+a+", "+l+":"+p+d:(a=a.toString().slice(2),s+" "+n+" \u2018"+a)},F9=t=>{if(!isNaN(Number(t))&&Number(t)>1e9)return Math.floor(Number(t));typeof t=="string"&&t.includes(".")&&(t=t.split(".")[0]+"Z");let e=new Date(t);return isNaN(e.getTime())?(console.warn("Invalid timestamp format"),0):Math.floor(e.getTime()/1e3)},z9=t=>/^(?=.*[a-z0-9])[a-z0-9\s]+$/i.test(t),B9=t=>{if(t==null)return null;let e=new Date(t);return isNaN(e.getTime())?(console.error("Invalid date format:",t),t):`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${e.getDate()} ${e.getFullYear()}`},q9=t=>{let e={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},[r,i,n]=t.split(" ");if(!e[r])throw new Error(`Invalid month abbreviation: "${r}"`);let o=i.padStart(2,"0"),s=parseInt(n,10);return`${n.length===2?2e3+s:s}-${e[r]}-${o}`}});var _b=oe((upe,OP)=>{"use strict";OP.exports=function(e,r){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(r,n)}}});var Gr=oe((cpe,FP)=>{"use strict";var U9=_b(),Cb=Object.prototype.toString,Pb=function(t){return function(e){var r=Cb.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function Ua(t){return t=t.toLowerCase(),function(r){return Pb(r)===t}}function Ib(t){return Array.isArray(t)}function tf(t){return typeof t>"u"}function H9(t){return t!==null&&!tf(t)&&t.constructor!==null&&!tf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var DP=Ua("ArrayBuffer");function W9(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&DP(t.buffer),e}function V9(t){return typeof t=="string"}function $9(t){return typeof t=="number"}function LP(t){return t!==null&&typeof t=="object"}function ef(t){if(Pb(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var j9=Ua("Date"),G9=Ua("File"),K9=Ua("Blob"),Y9=Ua("FileList");function Ab(t){return Cb.call(t)==="[object Function]"}function X9(t){return LP(t)&&Ab(t.pipe)}function Z9(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Cb.call(t)===e||Ab(t.toString)&&t.toString()===e)}var J9=Ua("URLSearchParams");function Q9(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function e8(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Tb(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Ib(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function Eb(){var t={};function e(n,o){ef(t[o])&&ef(n)?t[o]=Eb(t[o],n):ef(n)?t[o]=Eb({},n):Ib(n)?t[o]=n.slice():t[o]=n}for(var r=0,i=arguments.length;r<i;r++)Tb(arguments[r],e);return t}function t8(t,e,r){return Tb(e,function(n,o){r&&typeof n=="function"?t[o]=U9(n,r):t[o]=n}),t}function r8(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function i8(t,e,r,i){t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function n8(t,e,r){var i,n,o,s={};e=e||{};do{for(i=Object.getOwnPropertyNames(t),n=i.length;n-- >0;)o=i[n],s[o]||(e[o]=t[o],s[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function o8(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var i=t.indexOf(e,r);return i!==-1&&i===r}function s8(t){if(!t)return null;var e=t.length;if(tf(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var a8=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));FP.exports={isArray:Ib,isArrayBuffer:DP,isBuffer:H9,isFormData:Z9,isArrayBufferView:W9,isString:V9,isNumber:$9,isObject:LP,isPlainObject:ef,isUndefined:tf,isDate:j9,isFile:G9,isBlob:K9,isFunction:Ab,isStream:X9,isURLSearchParams:J9,isStandardBrowserEnv:e8,forEach:Tb,merge:Eb,extend:t8,trim:Q9,stripBOM:r8,inherits:i8,toFlatObject:n8,kindOf:Pb,kindOfTest:Ua,endsWith:o8,toArray:s8,isTypedArray:a8,isFileList:Y9}});var Mb=oe((dpe,BP)=>{"use strict";var Hl=Gr();function zP(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}BP.exports=function(e,r,i){if(!r)return e;var n;if(i)n=i(r);else if(Hl.isURLSearchParams(r))n=r.toString();else{var o=[];Hl.forEach(r,function(l,p){l===null||typeof l>"u"||(Hl.isArray(l)?p=p+"[]":l=[l],Hl.forEach(l,function(d){Hl.isDate(d)?d=d.toISOString():Hl.isObject(d)&&(d=JSON.stringify(d)),o.push(zP(p)+"="+zP(d))}))}),n=o.join("&")}if(n){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}});var UP=oe((ppe,qP)=>{"use strict";var l8=Gr();function rf(){this.handlers=[]}rf.prototype.use=function(e,r,i){return this.handlers.push({fulfilled:e,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};rf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};rf.prototype.forEach=function(e){l8.forEach(this.handlers,function(i){i!==null&&e(i)})};qP.exports=rf});var WP=oe((hpe,HP)=>{"use strict";var u8=Gr();HP.exports=function(e,r){u8.forEach(e,function(n,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=n,delete e[o])})}});var Ha=oe((fpe,GP)=>{"use strict";var VP=Gr();function Wl(t,e,r,i,n){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n)}VP.inherits(Wl,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var $P=Wl.prototype,jP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){jP[t]={value:t}});Object.defineProperties(Wl,jP);Object.defineProperty($P,"isAxiosError",{value:!0});Wl.from=function(t,e,r,i,n,o){var s=Object.create($P);return VP.toFlatObject(t,s,function(l){return l!==Error.prototype}),Wl.call(s,t.message,e,r,i,n),s.name=t.name,o&&Object.assign(s,o),s};GP.exports=Wl});var Rb=oe((mpe,KP)=>{"use strict";KP.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var kb=oe((gpe,YP)=>{"use strict";var Vn=Gr();function c8(t,e){e=e||new FormData;var r=[];function i(o){return o===null?"":Vn.isDate(o)?o.toISOString():Vn.isArrayBuffer(o)||Vn.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function n(o,s){if(Vn.isPlainObject(o)||Vn.isArray(o)){if(r.indexOf(o)!==-1)throw Error("Circular reference detected in "+s);r.push(o),Vn.forEach(o,function(l,p){if(!Vn.isUndefined(l)){var f=s?s+"."+p:p,d;if(l&&!s&&typeof l=="object"){if(Vn.endsWith(p,"{}"))l=JSON.stringify(l);else if(Vn.endsWith(p,"[]")&&(d=Vn.toArray(l))){d.forEach(function(m){!Vn.isUndefined(m)&&e.append(f,i(m))});return}}n(l,f)}}),r.pop()}else e.append(s,i(o))}return n(t),e}YP.exports=c8});var ZP=oe((vpe,XP)=>{"use strict";var Nb=Ha();XP.exports=function(e,r,i){var n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):r(new Nb("Request failed with status code "+i.status,[Nb.ERR_BAD_REQUEST,Nb.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}});var QP=oe((ype,JP)=>{"use strict";var nf=Gr();JP.exports=nf.isStandardBrowserEnv()?function(){return{write:function(r,i,n,o,s,a){var l=[];l.push(r+"="+encodeURIComponent(i)),nf.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),nf.isString(o)&&l.push("path="+o),nf.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var tI=oe((bpe,eI)=>{"use strict";eI.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var iI=oe((wpe,rI)=>{"use strict";rI.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var Ob=oe((xpe,nI)=>{"use strict";var d8=tI(),p8=iI();nI.exports=function(e,r){return e&&!d8(r)?p8(e,r):r}});var sI=oe((Spe,oI)=>{"use strict";var Db=Gr(),h8=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];oI.exports=function(e){var r={},i,n,o;return e&&Db.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),i=Db.trim(a.substr(0,o)).toLowerCase(),n=Db.trim(a.substr(o+1)),i){if(r[i]&&h8.indexOf(i)>=0)return;i==="set-cookie"?r[i]=(r[i]?r[i]:[]).concat([n]):r[i]=r[i]?r[i]+", "+n:n}}),r}});var uI=oe((_pe,lI)=>{"use strict";var aI=Gr();lI.exports=aI.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function n(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=n(window.location.href),function(s){var a=aI.isString(s)?n(s):s;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}()});var ad=oe((Epe,dI)=>{"use strict";var Lb=Ha(),f8=Gr();function cI(t){Lb.call(this,t??"canceled",Lb.ERR_CANCELED),this.name="CanceledError"}f8.inherits(cI,Lb,{__CANCEL__:!0});dI.exports=cI});var hI=oe((Cpe,pI)=>{"use strict";pI.exports=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}});var Fb=oe((Ppe,fI)=>{"use strict";var ld=Gr(),m8=ZP(),g8=QP(),v8=Mb(),y8=Ob(),b8=sI(),w8=uI(),x8=Rb(),ns=Ha(),S8=ad(),_8=hI();fI.exports=function(e){return new Promise(function(i,n){var o=e.data,s=e.headers,a=e.responseType,l;function p(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}ld.isFormData(o)&&ld.isStandardBrowserEnv()&&delete s["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+m)}var g=y8(e.baseURL,e.url);f.open(e.method.toUpperCase(),v8(g,e.params,e.paramsSerializer),!0),f.timeout=e.timeout;function v(){if(f){var E="getAllResponseHeaders"in f?b8(f.getAllResponseHeaders()):null,O=!a||a==="text"||a==="json"?f.responseText:f.response,L={data:O,status:f.status,statusText:f.statusText,headers:E,config:e,request:f};m8(function(D){i(D),p()},function(D){n(D),p()},L),f=null}}if("onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(v)},f.onabort=function(){f&&(n(new ns("Request aborted",ns.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new ns("Network Error",ns.ERR_NETWORK,e,f,f)),f=null},f.ontimeout=function(){var O=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",L=e.transitional||x8;e.timeoutErrorMessage&&(O=e.timeoutErrorMessage),n(new ns(O,L.clarifyTimeoutError?ns.ETIMEDOUT:ns.ECONNABORTED,e,f)),f=null},ld.isStandardBrowserEnv()){var x=(e.withCredentials||w8(g))&&e.xsrfCookieName?g8.read(e.xsrfCookieName):void 0;x&&(s[e.xsrfHeaderName]=x)}"setRequestHeader"in f&&ld.forEach(s,function(O,L){typeof o>"u"&&L.toLowerCase()==="content-type"?delete s[L]:f.setRequestHeader(L,O)}),ld.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),a&&a!=="json"&&(f.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&f.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(l=function(E){f&&(n(!E||E&&E.type?new S8:E),f.abort(),f=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l))),o||(o=null);var _=_8(g);if(_&&["http","https","file"].indexOf(_)===-1){n(new ns("Unsupported protocol "+_+":",ns.ERR_BAD_REQUEST,e));return}f.send(o)})}});var gI=oe((Ipe,mI)=>{mI.exports=null});var sf=oe((Ape,wI)=>{"use strict";var Kr=Gr(),vI=WP(),yI=Ha(),E8=Rb(),C8=kb(),P8={"Content-Type":"application/x-www-form-urlencoded"};function bI(t,e){!Kr.isUndefined(t)&&Kr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function I8(){var t;return typeof XMLHttpRequest<"u"?t=Fb():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=Fb()),t}function A8(t,e,r){if(Kr.isString(t))try{return(e||JSON.parse)(t),Kr.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}var of={transitional:E8,adapter:I8(),transformRequest:[function(e,r){if(vI(r,"Accept"),vI(r,"Content-Type"),Kr.isFormData(e)||Kr.isArrayBuffer(e)||Kr.isBuffer(e)||Kr.isStream(e)||Kr.isFile(e)||Kr.isBlob(e))return e;if(Kr.isArrayBufferView(e))return e.buffer;if(Kr.isURLSearchParams(e))return bI(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i=Kr.isObject(e),n=r&&r["Content-Type"],o;if((o=Kr.isFileList(e))||i&&n==="multipart/form-data"){var s=this.env&&this.env.FormData;return C8(o?{"files[]":e}:e,s&&new s)}else if(i||n==="application/json")return bI(r,"application/json"),A8(e);return e}],transformResponse:[function(e){var r=this.transitional||of.transitional,i=r&&r.silentJSONParsing,n=r&&r.forcedJSONParsing,o=!i&&this.responseType==="json";if(o||n&&Kr.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?yI.from(s,yI.ERR_BAD_RESPONSE,this,null,this.response):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gI()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Kr.forEach(["delete","get","head"],function(e){of.headers[e]={}});Kr.forEach(["post","put","patch"],function(e){of.headers[e]=Kr.merge(P8)});wI.exports=of});var SI=oe((Tpe,xI)=>{"use strict";var T8=Gr(),M8=sf();xI.exports=function(e,r,i){var n=this||M8;return T8.forEach(i,function(s){e=s.call(n,e,r)}),e}});var zb=oe((Mpe,_I)=>{"use strict";_I.exports=function(e){return!!(e&&e.__CANCEL__)}});var PI=oe((Rpe,CI)=>{"use strict";var EI=Gr(),Bb=SI(),R8=zb(),k8=sf(),N8=ad();function qb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new N8}CI.exports=function(e){qb(e),e.headers=e.headers||{},e.data=Bb.call(e,e.data,e.headers,e.transformRequest),e.headers=EI.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),EI.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]});var r=e.adapter||k8.adapter;return r(e).then(function(n){return qb(e),n.data=Bb.call(e,n.data,n.headers,e.transformResponse),n},function(n){return R8(n)||(qb(e),n&&n.response&&(n.response.data=Bb.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})}});var Ub=oe((kpe,II)=>{"use strict";var dn=Gr();II.exports=function(e,r){r=r||{};var i={};function n(f,d){return dn.isPlainObject(f)&&dn.isPlainObject(d)?dn.merge(f,d):dn.isPlainObject(d)?dn.merge({},d):dn.isArray(d)?d.slice():d}function o(f){if(dn.isUndefined(r[f])){if(!dn.isUndefined(e[f]))return n(void 0,e[f])}else return n(e[f],r[f])}function s(f){if(!dn.isUndefined(r[f]))return n(void 0,r[f])}function a(f){if(dn.isUndefined(r[f])){if(!dn.isUndefined(e[f]))return n(void 0,e[f])}else return n(void 0,r[f])}function l(f){if(f in r)return n(e[f],r[f]);if(f in e)return n(void 0,e[f])}var p={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return dn.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var m=p[d]||o,g=m(d);dn.isUndefined(g)&&m!==l||(i[d]=g)}),i}});var Hb=oe((Npe,AI)=>{AI.exports={version:"0.27.2"}});var RI=oe((Ope,MI)=>{"use strict";var O8=Hb().version,Ws=Ha(),Wb={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Wb[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var TI={};Wb.transitional=function(e,r,i){function n(o,s){return"[Axios v"+O8+"] Transitional option '"+o+"'"+s+(i?". "+i:"")}return function(o,s,a){if(e===!1)throw new Ws(n(s," has been removed"+(r?" in "+r:"")),Ws.ERR_DEPRECATED);return r&&!TI[s]&&(TI[s]=!0,console.warn(n(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function D8(t,e,r){if(typeof t!="object")throw new Ws("options must be an object",Ws.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(t),n=i.length;n-- >0;){var o=i[n],s=e[o];if(s){var a=t[o],l=a===void 0||s(a,o,t);if(l!==!0)throw new Ws("option "+o+" must be "+l,Ws.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ws("Unknown option "+o,Ws.ERR_BAD_OPTION)}}MI.exports={assertOptions:D8,validators:Wb}});var FI=oe((Dpe,LI)=>{"use strict";var OI=Gr(),L8=Mb(),kI=UP(),NI=PI(),af=Ub(),F8=Ob(),DI=RI(),Vl=DI.validators;function $l(t){this.defaults=t,this.interceptors={request:new kI,response:new kI}}$l.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=af(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var i=r.transitional;i!==void 0&&DI.assertOptions(i,{silentJSONParsing:Vl.transitional(Vl.boolean),forcedJSONParsing:Vl.transitional(Vl.boolean),clarifyTimeoutError:Vl.transitional(Vl.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(o=o&&g.synchronous,n.unshift(g.fulfilled,g.rejected))});var s=[];this.interceptors.response.forEach(function(g){s.push(g.fulfilled,g.rejected)});var a;if(!o){var l=[NI,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(s),a=Promise.resolve(r);l.length;)a=a.then(l.shift(),l.shift());return a}for(var p=r;n.length;){var f=n.shift(),d=n.shift();try{p=f(p)}catch(m){d(m);break}}try{a=NI(p)}catch(m){return Promise.reject(m)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};$l.prototype.getUri=function(e){e=af(this.defaults,e);var r=F8(e.baseURL,e.url);return L8(r,e.params,e.paramsSerializer)};OI.forEach(["delete","get","head","options"],function(e){$l.prototype[e]=function(r,i){return this.request(af(i||{},{method:e,url:r,data:(i||{}).data}))}});OI.forEach(["post","put","patch"],function(e){function r(i){return function(o,s,a){return this.request(af(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}$l.prototype[e]=r(),$l.prototype[e+"Form"]=r(!0)});LI.exports=$l});var BI=oe((Lpe,zI)=>{"use strict";var z8=ad();function jl(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(n){e=n});var r=this;this.promise.then(function(i){if(r._listeners){var n,o=r._listeners.length;for(n=0;n<o;n++)r._listeners[n](i);r._listeners=null}}),this.promise.then=function(i){var n,o=new Promise(function(s){r.subscribe(s),n=s}).then(i);return o.cancel=function(){r.unsubscribe(n)},o},t(function(n){r.reason||(r.reason=new z8(n),e(r.reason))})}jl.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};jl.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};jl.prototype.unsubscribe=function(e){if(this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};jl.source=function(){var e,r=new jl(function(n){e=n});return{token:r,cancel:e}};zI.exports=jl});var UI=oe((Fpe,qI)=>{"use strict";qI.exports=function(e){return function(i){return e.apply(null,i)}}});var WI=oe((zpe,HI)=>{"use strict";var B8=Gr();HI.exports=function(e){return B8.isObject(e)&&e.isAxiosError===!0}});var jI=oe((Bpe,Vb)=>{"use strict";var VI=Gr(),q8=_b(),lf=FI(),U8=Ub(),H8=sf();function $I(t){var e=new lf(t),r=q8(lf.prototype.request,e);return VI.extend(r,lf.prototype,e),VI.extend(r,e),r.create=function(n){return $I(U8(t,n))},r}var Gi=$I(H8);Gi.Axios=lf;Gi.CanceledError=ad();Gi.CancelToken=BI();Gi.isCancel=zb();Gi.VERSION=Hb().version;Gi.toFormData=kb();Gi.AxiosError=Ha();Gi.Cancel=Gi.CanceledError;Gi.all=function(e){return Promise.all(e)};Gi.spread=UI();Gi.isAxiosError=WI();Vb.exports=Gi;Vb.exports.default=Gi});var Mn=oe((qpe,GI)=>{GI.exports=jI()});function Vs(t){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vs(t)}var $b=V(()=>{});function jb(t,e){if(Vs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(Vs(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KI=V(()=>{$b()});function Gb(t){var e=jb(t,"string");return Vs(e)=="symbol"?e:String(e)}var YI=V(()=>{$b();KI()});function Kb(t,e,r){return e=Gb(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var XI=V(()=>{YI()});function ZI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function uf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZI(Object(r),!0).forEach(function(i){Kb(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZI(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var JI=V(()=>{XI()});var tA={};hr(tA,{__DO_NOT_USE__ActionTypes:()=>ud,applyMiddleware:()=>Xb,bindActionCreators:()=>zt,combineReducers:()=>$n,compose:()=>cf,createStore:()=>cd,legacy_createStore:()=>V8});function oi(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}function W8(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function cd(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(oi(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(oi(1));return r(cd)(t,e)}if(typeof t!="function")throw new Error(oi(2));var n=t,o=e,s=[],a=s,l=!1;function p(){a===s&&(a=s.slice())}function f(){if(l)throw new Error(oi(3));return o}function d(x){if(typeof x!="function")throw new Error(oi(4));if(l)throw new Error(oi(5));var _=!0;return p(),a.push(x),function(){if(_){if(l)throw new Error(oi(6));_=!1,p();var O=a.indexOf(x);a.splice(O,1),s=null}}}function m(x){if(!W8(x))throw new Error(oi(7));if(typeof x.type>"u")throw new Error(oi(8));if(l)throw new Error(oi(9));try{l=!0,o=n(o,x)}finally{l=!1}for(var _=s=a,E=0;E<_.length;E++){var O=_[E];O()}return x}function g(x){if(typeof x!="function")throw new Error(oi(10));n=x,m({type:ud.REPLACE})}function v(){var x,_=d;return x={subscribe:function(O){if(typeof O!="object"||O===null)throw new Error(oi(11));function L(){O.next&&O.next(f())}L();var I=_(L);return{unsubscribe:I}}},x[QI]=function(){return this},x}return m({type:ud.INIT}),i={dispatch:m,subscribe:d,getState:f,replaceReducer:g},i[QI]=v,i}function $8(t){Object.keys(t).forEach(function(e){var r=t[e],i=r(void 0,{type:ud.INIT});if(typeof i>"u")throw new Error(oi(12));if(typeof r(void 0,{type:ud.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(oi(13))})}function $n(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++){var n=e[i];typeof t[n]=="function"&&(r[n]=t[n])}var o=Object.keys(r),s,a;try{$8(r)}catch(l){a=l}return function(p,f){if(p===void 0&&(p={}),a)throw a;if(0)var d;for(var m=!1,g={},v=0;v<o.length;v++){var x=o[v],_=r[x],E=p[x],O=_(E,f);if(typeof O>"u"){var L=f&&f.type;throw new Error(oi(14))}g[x]=O,m=m||O!==E}return m=m||o.length!==Object.keys(p).length,m?g:p}}function eA(t,e){return function(){return e(t.apply(this,arguments))}}function zt(t,e){if(typeof t=="function")return eA(t,e);if(typeof t!="object"||t===null)throw new Error(oi(16));var r={};for(var i in t){var n=t[i];typeof n=="function"&&(r[i]=eA(n,e))}return r}function cf(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,n){return function(){return i(n.apply(void 0,arguments))}})}function Xb(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return function(){var n=i.apply(void 0,arguments),o=function(){throw new Error(oi(15))},s={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=e.map(function(l){return l(s)});return o=cf.apply(void 0,a)(n.dispatch),uf(uf({},n),{},{dispatch:o})}}}var QI,Yb,ud,V8,xr=V(()=>{JI();QI=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Yb=function(){return Math.random().toString(36).substring(7).split("").join(".")},ud={INIT:"@@redux/INIT"+Yb(),REPLACE:"@@redux/REPLACE"+Yb(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Yb()}};V8=cd});var Zb=oe(jn=>{"use strict";jn.__esModule=!0;jn.createDynamicMiddlewares=jn.resetMiddlewares=jn.removeMiddleware=jn.addMiddleware=void 0;var j8=(xr(),Rc(tA)),rA=function(){var e=[],r=[],i=void 0,n=function(p){return i=p,function(f){return function(d){return j8.compose.apply(void 0,r)(f)(d)}}},o=function(){for(var p,f,d=arguments.length,m=Array(d),g=0;g<d;g++)m[g]=arguments[g];(p=r).push.apply(p,m.map(function(v){return v(i)})),(f=e).push.apply(f,m)},s=function(p){var f=e.findIndex(function(d){return d===p});if(f===-1){console.error("Middleware does not exist!",p);return}e=e.filter(function(d,m){return m!==f}),r=r.filter(function(d,m){return m!==f})},a=function(){r=[],e=[]};return{enhancer:n,addMiddleware:o,removeMiddleware:s,resetMiddlewares:a}},df=rA();jn.default=df.enhancer;var G8=df.addMiddleware,K8=df.removeMiddleware,Y8=df.resetMiddlewares;jn.addMiddleware=G8;jn.removeMiddleware=K8;jn.resetMiddlewares=Y8;jn.createDynamicMiddlewares=rA});function iA(t){var e=function(i){var n=i.dispatch,o=i.getState;return function(s){return function(a){return typeof a=="function"?a(n,o,t):s(a)}}};return e}var nA,oA,sA=V(()=>{nA=iA();nA.withExtraArgument=iA;oA=nA});var lA=oe((ehe,aA)=>{function X8(){this.__data__=[],this.size=0}aA.exports=X8});var Gl=oe((the,uA)=>{function Z8(t,e){return t===e||t!==t&&e!==e}uA.exports=Z8});var dd=oe((rhe,cA)=>{var J8=Gl();function Q8(t,e){for(var r=t.length;r--;)if(J8(t[r][0],e))return r;return-1}cA.exports=Q8});var pA=oe((ihe,dA)=>{var ej=dd(),tj=Array.prototype,rj=tj.splice;function ij(t){var e=this.__data__,r=ej(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():rj.call(e,r,1),--this.size,!0}dA.exports=ij});var fA=oe((nhe,hA)=>{var nj=dd();function oj(t){var e=this.__data__,r=nj(e,t);return r<0?void 0:e[r][1]}hA.exports=oj});var gA=oe((ohe,mA)=>{var sj=dd();function aj(t){return sj(this.__data__,t)>-1}mA.exports=aj});var yA=oe((she,vA)=>{var lj=dd();function uj(t,e){var r=this.__data__,i=lj(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}vA.exports=uj});var pd=oe((ahe,bA)=>{var cj=lA(),dj=pA(),pj=fA(),hj=gA(),fj=yA();function Kl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Kl.prototype.clear=cj;Kl.prototype.delete=dj;Kl.prototype.get=pj;Kl.prototype.has=hj;Kl.prototype.set=fj;bA.exports=Kl});var xA=oe((lhe,wA)=>{var mj=pd();function gj(){this.__data__=new mj,this.size=0}wA.exports=gj});var _A=oe((uhe,SA)=>{function vj(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}SA.exports=vj});var CA=oe((che,EA)=>{function yj(t){return this.__data__.get(t)}EA.exports=yj});var IA=oe((dhe,PA)=>{function bj(t){return this.__data__.has(t)}PA.exports=bj});var Jb=oe((phe,AA)=>{var wj=typeof global=="object"&&global&&global.Object===Object&&global;AA.exports=wj});var Gn=oe((hhe,TA)=>{var xj=Jb(),Sj=typeof self=="object"&&self&&self.Object===Object&&self,_j=xj||Sj||Function("return this")();TA.exports=_j});var hd=oe((fhe,MA)=>{var Ej=Gn(),Cj=Ej.Symbol;MA.exports=Cj});var OA=oe((mhe,NA)=>{var RA=hd(),kA=Object.prototype,Pj=kA.hasOwnProperty,Ij=kA.toString,fd=RA?RA.toStringTag:void 0;function Aj(t){var e=Pj.call(t,fd),r=t[fd];try{t[fd]=void 0;var i=!0}catch{}var n=Ij.call(t);return i&&(e?t[fd]=r:delete t[fd]),n}NA.exports=Aj});var LA=oe((ghe,DA)=>{var Tj=Object.prototype,Mj=Tj.toString;function Rj(t){return Mj.call(t)}DA.exports=Rj});var Wa=oe((vhe,BA)=>{var FA=hd(),kj=OA(),Nj=LA(),Oj="[object Null]",Dj="[object Undefined]",zA=FA?FA.toStringTag:void 0;function Lj(t){return t==null?t===void 0?Dj:Oj:zA&&zA in Object(t)?kj(t):Nj(t)}BA.exports=Lj});var So=oe((yhe,qA)=>{function Fj(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}qA.exports=Fj});var pf=oe((bhe,UA)=>{var zj=Wa(),Bj=So(),qj="[object AsyncFunction]",Uj="[object Function]",Hj="[object GeneratorFunction]",Wj="[object Proxy]";function Vj(t){if(!Bj(t))return!1;var e=zj(t);return e==Uj||e==Hj||e==qj||e==Wj}UA.exports=Vj});var WA=oe((whe,HA)=>{var $j=Gn(),jj=$j["__core-js_shared__"];HA.exports=jj});var jA=oe((xhe,$A)=>{var Qb=WA(),VA=function(){var t=/[^.]+$/.exec(Qb&&Qb.keys&&Qb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Gj(t){return!!VA&&VA in t}$A.exports=Gj});var e0=oe((She,GA)=>{var Kj=Function.prototype,Yj=Kj.toString;function Xj(t){if(t!=null){try{return Yj.call(t)}catch{}try{return t+""}catch{}}return""}GA.exports=Xj});var YA=oe((_he,KA)=>{var Zj=pf(),Jj=jA(),Qj=So(),e7=e0(),t7=/[\\^$.*+?()[\]{}|]/g,r7=/^\[object .+?Constructor\]$/,i7=Function.prototype,n7=Object.prototype,o7=i7.toString,s7=n7.hasOwnProperty,a7=RegExp("^"+o7.call(s7).replace(t7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l7(t){if(!Qj(t)||Jj(t))return!1;var e=Zj(t)?a7:r7;return e.test(e7(t))}KA.exports=l7});var ZA=oe((Ehe,XA)=>{function u7(t,e){return t?.[e]}XA.exports=u7});var $s=oe((Che,JA)=>{var c7=YA(),d7=ZA();function p7(t,e){var r=d7(t,e);return c7(r)?r:void 0}JA.exports=p7});var hf=oe((Phe,QA)=>{var h7=$s(),f7=Gn(),m7=h7(f7,"Map");QA.exports=m7});var md=oe((Ihe,eT)=>{var g7=$s(),v7=g7(Object,"create");eT.exports=v7});var iT=oe((Ahe,rT)=>{var tT=md();function y7(){this.__data__=tT?tT(null):{},this.size=0}rT.exports=y7});var oT=oe((The,nT)=>{function b7(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}nT.exports=b7});var aT=oe((Mhe,sT)=>{var w7=md(),x7="__lodash_hash_undefined__",S7=Object.prototype,_7=S7.hasOwnProperty;function E7(t){var e=this.__data__;if(w7){var r=e[t];return r===x7?void 0:r}return _7.call(e,t)?e[t]:void 0}sT.exports=E7});var uT=oe((Rhe,lT)=>{var C7=md(),P7=Object.prototype,I7=P7.hasOwnProperty;function A7(t){var e=this.__data__;return C7?e[t]!==void 0:I7.call(e,t)}lT.exports=A7});var dT=oe((khe,cT)=>{var T7=md(),M7="__lodash_hash_undefined__";function R7(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=T7&&e===void 0?M7:e,this}cT.exports=R7});var hT=oe((Nhe,pT)=>{var k7=iT(),N7=oT(),O7=aT(),D7=uT(),L7=dT();function Yl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Yl.prototype.clear=k7;Yl.prototype.delete=N7;Yl.prototype.get=O7;Yl.prototype.has=D7;Yl.prototype.set=L7;pT.exports=Yl});var gT=oe((Ohe,mT)=>{var fT=hT(),F7=pd(),z7=hf();function B7(){this.size=0,this.__data__={hash:new fT,map:new(z7||F7),string:new fT}}mT.exports=B7});var yT=oe((Dhe,vT)=>{function q7(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}vT.exports=q7});var gd=oe((Lhe,bT)=>{var U7=yT();function H7(t,e){var r=t.__data__;return U7(e)?r[typeof e=="string"?"string":"hash"]:r.map}bT.exports=H7});var xT=oe((Fhe,wT)=>{var W7=gd();function V7(t){var e=W7(this,t).delete(t);return this.size-=e?1:0,e}wT.exports=V7});var _T=oe((zhe,ST)=>{var $7=gd();function j7(t){return $7(this,t).get(t)}ST.exports=j7});var CT=oe((Bhe,ET)=>{var G7=gd();function K7(t){return G7(this,t).has(t)}ET.exports=K7});var IT=oe((qhe,PT)=>{var Y7=gd();function X7(t,e){var r=Y7(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}PT.exports=X7});var ff=oe((Uhe,AT)=>{var Z7=gT(),J7=xT(),Q7=_T(),eG=CT(),tG=IT();function Xl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Xl.prototype.clear=Z7;Xl.prototype.delete=J7;Xl.prototype.get=Q7;Xl.prototype.has=eG;Xl.prototype.set=tG;AT.exports=Xl});var MT=oe((Hhe,TT)=>{var rG=pd(),iG=hf(),nG=ff(),oG=200;function sG(t,e){var r=this.__data__;if(r instanceof rG){var i=r.__data__;if(!iG||i.length<oG-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new nG(i)}return r.set(t,e),this.size=r.size,this}TT.exports=sG});var mf=oe((Whe,RT)=>{var aG=pd(),lG=xA(),uG=_A(),cG=CA(),dG=IA(),pG=MT();function Zl(t){var e=this.__data__=new aG(t);this.size=e.size}Zl.prototype.clear=lG;Zl.prototype.delete=uG;Zl.prototype.get=cG;Zl.prototype.has=dG;Zl.prototype.set=pG;RT.exports=Zl});var t0=oe((Vhe,kT)=>{var hG=$s(),fG=function(){try{var t=hG(Object,"defineProperty");return t({},"",{}),t}catch{}}();kT.exports=fG});var gf=oe(($he,OT)=>{var NT=t0();function mG(t,e,r){e=="__proto__"&&NT?NT(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}OT.exports=mG});var r0=oe((jhe,DT)=>{var gG=gf(),vG=Gl();function yG(t,e,r){(r!==void 0&&!vG(t[e],r)||r===void 0&&!(e in t))&&gG(t,e,r)}DT.exports=yG});var FT=oe((Ghe,LT)=>{function bG(t){return function(e,r,i){for(var n=-1,o=Object(e),s=i(e),a=s.length;a--;){var l=s[t?a:++n];if(r(o[l],l,o)===!1)break}return e}}LT.exports=bG});var BT=oe((Khe,zT)=>{var wG=FT(),xG=wG();zT.exports=xG});var VT=oe((vd,Jl)=>{var SG=Gn(),WT=typeof vd=="object"&&vd&&!vd.nodeType&&vd,qT=WT&&typeof Jl=="object"&&Jl&&!Jl.nodeType&&Jl,_G=qT&&qT.exports===WT,UT=_G?SG.Buffer:void 0,HT=UT?UT.allocUnsafe:void 0;function EG(t,e){if(e)return t.slice();var r=t.length,i=HT?HT(r):new t.constructor(r);return t.copy(i),i}Jl.exports=EG});var i0=oe((Yhe,$T)=>{var CG=Gn(),PG=CG.Uint8Array;$T.exports=PG});var KT=oe((Xhe,GT)=>{var jT=i0();function IG(t){var e=new t.constructor(t.byteLength);return new jT(e).set(new jT(t)),e}GT.exports=IG});var ZT=oe((Zhe,XT)=>{var AG=KT();function TG(t,e){var r=e?AG(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}XT.exports=TG});var QT=oe((Jhe,JT)=>{function MG(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}JT.exports=MG});var rM=oe((Qhe,tM)=>{var RG=So(),eM=Object.create,kG=function(){function t(){}return function(e){if(!RG(e))return{};if(eM)return eM(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();tM.exports=kG});var n0=oe((efe,iM)=>{function NG(t,e){return function(r){return t(e(r))}}iM.exports=NG});var vf=oe((tfe,nM)=>{var OG=n0(),DG=OG(Object.getPrototypeOf,Object);nM.exports=DG});var yf=oe((rfe,oM)=>{var LG=Object.prototype;function FG(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||LG;return t===r}oM.exports=FG});var aM=oe((ife,sM)=>{var zG=rM(),BG=vf(),qG=yf();function UG(t){return typeof t.constructor=="function"&&!qG(t)?zG(BG(t)):{}}sM.exports=UG});var js=oe((nfe,lM)=>{function HG(t){return t!=null&&typeof t=="object"}lM.exports=HG});var cM=oe((ofe,uM)=>{var WG=Wa(),VG=js(),$G="[object Arguments]";function jG(t){return VG(t)&&WG(t)==$G}uM.exports=jG});var bf=oe((sfe,hM)=>{var dM=cM(),GG=js(),pM=Object.prototype,KG=pM.hasOwnProperty,YG=pM.propertyIsEnumerable,XG=dM(function(){return arguments}())?dM:function(t){return GG(t)&&KG.call(t,"callee")&&!YG.call(t,"callee")};hM.exports=XG});var _o=oe((afe,fM)=>{var ZG=Array.isArray;fM.exports=ZG});var wf=oe((lfe,mM)=>{var JG=9007199254740991;function QG(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=JG}mM.exports=QG});var yd=oe((ufe,gM)=>{var eK=pf(),tK=wf();function rK(t){return t!=null&&tK(t.length)&&!eK(t)}gM.exports=rK});var yM=oe((cfe,vM)=>{var iK=yd(),nK=js();function oK(t){return nK(t)&&iK(t)}vM.exports=oK});var wM=oe((dfe,bM)=>{function sK(){return!1}bM.exports=sK});var xf=oe((bd,Ql)=>{var aK=Gn(),lK=wM(),_M=typeof bd=="object"&&bd&&!bd.nodeType&&bd,xM=_M&&typeof Ql=="object"&&Ql&&!Ql.nodeType&&Ql,uK=xM&&xM.exports===_M,SM=uK?aK.Buffer:void 0,cK=SM?SM.isBuffer:void 0,dK=cK||lK;Ql.exports=dK});var PM=oe((pfe,CM)=>{var pK=Wa(),hK=vf(),fK=js(),mK="[object Object]",gK=Function.prototype,vK=Object.prototype,EM=gK.toString,yK=vK.hasOwnProperty,bK=EM.call(Object);function wK(t){if(!fK(t)||pK(t)!=mK)return!1;var e=hK(t);if(e===null)return!0;var r=yK.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&EM.call(r)==bK}CM.exports=wK});var AM=oe((hfe,IM)=>{var xK=Wa(),SK=wf(),_K=js(),EK="[object Arguments]",CK="[object Array]",PK="[object Boolean]",IK="[object Date]",AK="[object Error]",TK="[object Function]",MK="[object Map]",RK="[object Number]",kK="[object Object]",NK="[object RegExp]",OK="[object Set]",DK="[object String]",LK="[object WeakMap]",FK="[object ArrayBuffer]",zK="[object DataView]",BK="[object Float32Array]",qK="[object Float64Array]",UK="[object Int8Array]",HK="[object Int16Array]",WK="[object Int32Array]",VK="[object Uint8Array]",$K="[object Uint8ClampedArray]",jK="[object Uint16Array]",GK="[object Uint32Array]",ur={};ur[BK]=ur[qK]=ur[UK]=ur[HK]=ur[WK]=ur[VK]=ur[$K]=ur[jK]=ur[GK]=!0;ur[EK]=ur[CK]=ur[FK]=ur[PK]=ur[zK]=ur[IK]=ur[AK]=ur[TK]=ur[MK]=ur[RK]=ur[kK]=ur[NK]=ur[OK]=ur[DK]=ur[LK]=!1;function KK(t){return _K(t)&&SK(t.length)&&!!ur[xK(t)]}IM.exports=KK});var MM=oe((ffe,TM)=>{function YK(t){return function(e){return t(e)}}TM.exports=YK});var kM=oe((wd,eu)=>{var XK=Jb(),RM=typeof wd=="object"&&wd&&!wd.nodeType&&wd,xd=RM&&typeof eu=="object"&&eu&&!eu.nodeType&&eu,ZK=xd&&xd.exports===RM,o0=ZK&&XK.process,JK=function(){try{var t=xd&&xd.require&&xd.require("util").types;return t||o0&&o0.binding&&o0.binding("util")}catch{}}();eu.exports=JK});var Sf=oe((mfe,DM)=>{var QK=AM(),eY=MM(),NM=kM(),OM=NM&&NM.isTypedArray,tY=OM?eY(OM):QK;DM.exports=tY});var s0=oe((gfe,LM)=>{function rY(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}LM.exports=rY});var a0=oe((vfe,FM)=>{var iY=gf(),nY=Gl(),oY=Object.prototype,sY=oY.hasOwnProperty;function aY(t,e,r){var i=t[e];(!(sY.call(t,e)&&nY(i,r))||r===void 0&&!(e in t))&&iY(t,e,r)}FM.exports=aY});var BM=oe((yfe,zM)=>{var lY=a0(),uY=gf();function cY(t,e,r,i){var n=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(r[a],t[a],a,r,t):void 0;l===void 0&&(l=t[a]),n?uY(r,a,l):lY(r,a,l)}return r}zM.exports=cY});var UM=oe((bfe,qM)=>{function dY(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}qM.exports=dY});var Sd=oe((wfe,HM)=>{var pY=9007199254740991,hY=/^(?:0|[1-9]\d*)$/;function fY(t,e){var r=typeof t;return e=e??pY,!!e&&(r=="number"||r!="symbol"&&hY.test(t))&&t>-1&&t%1==0&&t<e}HM.exports=fY});var l0=oe((xfe,WM)=>{var mY=UM(),gY=bf(),vY=_o(),yY=xf(),bY=Sd(),wY=Sf(),xY=Object.prototype,SY=xY.hasOwnProperty;function _Y(t,e){var r=vY(t),i=!r&&gY(t),n=!r&&!i&&yY(t),o=!r&&!i&&!n&&wY(t),s=r||i||n||o,a=s?mY(t.length,String):[],l=a.length;for(var p in t)(e||SY.call(t,p))&&!(s&&(p=="length"||n&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||bY(p,l)))&&a.push(p);return a}WM.exports=_Y});var $M=oe((Sfe,VM)=>{function EY(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}VM.exports=EY});var GM=oe((_fe,jM)=>{var CY=So(),PY=yf(),IY=$M(),AY=Object.prototype,TY=AY.hasOwnProperty;function MY(t){if(!CY(t))return IY(t);var e=PY(t),r=[];for(var i in t)i=="constructor"&&(e||!TY.call(t,i))||r.push(i);return r}jM.exports=MY});var _f=oe((Efe,KM)=>{var RY=l0(),kY=GM(),NY=yd();function OY(t){return NY(t)?RY(t,!0):kY(t)}KM.exports=OY});var XM=oe((Cfe,YM)=>{var DY=BM(),LY=_f();function FY(t){return DY(t,LY(t))}YM.exports=FY});var rR=oe((Pfe,tR)=>{var ZM=r0(),zY=VT(),BY=ZT(),qY=QT(),UY=aM(),JM=bf(),QM=_o(),HY=yM(),WY=xf(),VY=pf(),$Y=So(),jY=PM(),GY=Sf(),eR=s0(),KY=XM();function YY(t,e,r,i,n,o,s){var a=eR(t,r),l=eR(e,r),p=s.get(l);if(p){ZM(t,r,p);return}var f=o?o(a,l,r+"",t,e,s):void 0,d=f===void 0;if(d){var m=QM(l),g=!m&&WY(l),v=!m&&!g&&GY(l);f=l,m||g||v?QM(a)?f=a:HY(a)?f=qY(a):g?(d=!1,f=zY(l,!0)):v?(d=!1,f=BY(l,!0)):f=[]:jY(l)||JM(l)?(f=a,JM(a)?f=KY(a):(!$Y(a)||VY(a))&&(f=UY(l))):d=!1}d&&(s.set(l,f),n(f,l,i,o,s),s.delete(l)),ZM(t,r,f)}tR.exports=YY});var oR=oe((Ife,nR)=>{var XY=mf(),ZY=r0(),JY=BT(),QY=rR(),eX=So(),tX=_f(),rX=s0();function iR(t,e,r,i,n){t!==e&&JY(e,function(o,s){if(n||(n=new XY),eX(o))QY(t,e,s,r,iR,i,n);else{var a=i?i(rX(t,s),o,s+"",t,e,n):void 0;a===void 0&&(a=o),ZY(t,s,a)}},tX)}nR.exports=iR});var Ef=oe((Afe,sR)=>{function iX(t){return t}sR.exports=iX});var lR=oe((Tfe,aR)=>{function nX(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}aR.exports=nX});var dR=oe((Mfe,cR)=>{var oX=lR(),uR=Math.max;function sX(t,e,r){return e=uR(e===void 0?t.length-1:e,0),function(){for(var i=arguments,n=-1,o=uR(i.length-e,0),s=Array(o);++n<o;)s[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=r(s),oX(t,this,a)}}cR.exports=sX});var hR=oe((Rfe,pR)=>{function aX(t){return function(){return t}}pR.exports=aX});var gR=oe((kfe,mR)=>{var lX=hR(),fR=t0(),uX=Ef(),cX=fR?function(t,e){return fR(t,"toString",{configurable:!0,enumerable:!1,value:lX(e),writable:!0})}:uX;mR.exports=cX});var yR=oe((Nfe,vR)=>{var dX=800,pX=16,hX=Date.now;function fX(t){var e=0,r=0;return function(){var i=hX(),n=pX-(i-r);if(r=i,n>0){if(++e>=dX)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}vR.exports=fX});var wR=oe((Ofe,bR)=>{var mX=gR(),gX=yR(),vX=gX(mX);bR.exports=vX});var SR=oe((Dfe,xR)=>{var yX=Ef(),bX=dR(),wX=wR();function xX(t,e){return wX(bX(t,e,yX),t+"")}xR.exports=xX});var ER=oe((Lfe,_R)=>{var SX=Gl(),_X=yd(),EX=Sd(),CX=So();function PX(t,e,r){if(!CX(r))return!1;var i=typeof e;return(i=="number"?_X(r)&&EX(e,r.length):i=="string"&&e in r)?SX(r[e],t):!1}_R.exports=PX});var PR=oe((Ffe,CR)=>{var IX=SR(),AX=ER();function TX(t){return IX(function(e,r){var i=-1,n=r.length,o=n>1?r[n-1]:void 0,s=n>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(n--,o):void 0,s&&AX(r[0],r[1],s)&&(o=n<3?void 0:o,n=1),e=Object(e);++i<n;){var a=r[i];a&&t(e,a,i,o)}return e})}CR.exports=TX});var AR=oe((zfe,IR)=>{var MX=oR(),RX=PR(),kX=RX(function(t,e,r){MX(t,e,r)});IR.exports=kX});function Va(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}var u0=V(()=>{});function c0(t={}){let e=t.promiseTypeSuffixes||NX,r=t.promiseTypeDelimiter||"_";return i=>{let{dispatch:n}=i;return o=>s=>{let a,l;if(s.payload){let E=s.payload;if(Va(E))a=E;else if(Va(E.promise))a=E.promise,l=E.data;else if(typeof E=="function"||typeof E.promise=="function"){if(a=E.promise?E.promise():E(),l=E.promise?E.data:void 0,!Va(a))return o({...s,payload:a})}else return o(s)}else return o(s);let p=s.type,f=s.meta,[d,m,g]=e,v=(E,O)=>({type:[p,O?g:m].join(r),...E===null||typeof E>"u"?{}:{payload:E},...f!==void 0?{meta:f}:{},...O?{error:!0}:{}}),x=E=>{let O=v(E,!0);n(O)},_=(E=null)=>{let O=v(E,!1);return n(O),{value:E,action:O}};return o({type:[p,d].join(r),...l!==void 0?{payload:l}:{},...f!==void 0?{meta:f}:{}}),a.then(_,x).catch(E=>{if(pe&&E.response)console.error("Request to",E.response.config.url,"failed with code",E.response.status);else{if(E&&E.response&&E.response.status===401){console.warn("No auth for request to",E.response.config.url);return}console.error(E)}}),a}}}var Cf,Pf,If,NX,d0=V(()=>{u0();Be();Cf="PENDING",Pf="FULFILLED",If="REJECTED",NX=[Cf,Pf,If]});var tu,p0,_d,cr,h0,$a,f0,m0,g0,v0,OX,TR=V(()=>{tu="cargo.site",p0="wss://w.s.cargo.site",_d="https://cargo.site",cr="https://api.cargo.site/v1",h0="https://cargo.site/_api",$a="https://cargo.site",f0="https://cargo.site/_api/v1-p",m0="yjhpd2ug",g0="https://admin.workspace.cargo.site",v0="https://newadmin.cargo.site",OX=typeof window<"u"?"production":process?.env?.CARGO_ENV;switch(OX){case"localhost":case"local-ssr":tu="local.dev.cargo.site",p0="wss://ws.dev.cargo.site",_d="https://local.dev.cargo.site",cr="https://api.dev.cargo.site/v1",h0="https://dev.cargo.site/_api",$a="https://dev.cargo.site",f0="https://dev.cargo.site/_api/v1-p",m0="na91uuyv",g0="https://workspace.local.dev.cargo.site",v0="https://admin.local.dev.cargo.site";break;case"local-crdt":tu="local.dev.cargo.site",p0="wss://ws.local.dev.cargo.site:4443",_d="https://local.dev.cargo.site",cr="https://api.dev.cargo.site/v1",h0="https://dev.cargo.site/_api",$a="https://dev.cargo.site",f0="https://dev.cargo.site/_api/v1-p",m0="na91uuyv",g0="https://workspace.local.dev.cargo.site",v0="https://admin.local.dev.cargo.site";break;case"dev":tu="dev.cargo.site",p0="wss://ws.dev.cargo.site",_d="https://dev.cargo.site",cr="https://api.dev.cargo.site/v1",h0="https://dev.cargo.site/_api",$a="https://dev.cargo.site",f0="https://dev.cargo.site/_api/v1-p",m0="na91uuyv",g0="https://admin.workspace.dev.cargo.site",v0="https://admin.dev.cargo.site";break}});var Gs=V(()=>{TR()});function DX(t){var e;return{get:function(i){return e&&t(e.key,i)?e.value:Af},put:function(i,n){e={key:i,value:n}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function LX(t,e){var r=[];function i(a){var l=r.findIndex(function(f){return e(a,f.key)});if(l>-1){var p=r[l];return l>0&&(r.splice(l,1),r.unshift(p)),p.value}return Af}function n(a,l){i(a)===Af&&(r.unshift({key:a,value:l}),r.length>t&&r.pop())}function o(){return r}function s(){r=[]}return{get:i,put:n,getEntries:o,clear:s}}function FX(t){return function(r,i){if(r===null||i===null||r.length!==i.length)return!1;for(var n=r.length,o=0;o<n;o++)if(!t(r[o],i[o]))return!1;return!0}}function RR(t,e){var r=typeof e=="object"?e:{equalityCheck:e},i=r.equalityCheck,n=i===void 0?MR:i,o=r.maxSize,s=o===void 0?1:o,a=r.resultEqualityCheck,l=FX(n),p=s===1?DX(l):LX(s,l);function f(){var d=p.get(arguments);if(d===Af){if(d=t.apply(null,arguments),a){var m=p.getEntries(),g=m.find(function(v){return a(v.value,d)});g&&(d=g.value)}p.put(arguments,d)}return d}return f.clearCache=function(){return p.clear()},f}var Af,MR,kR=V(()=>{Af="NOT_FOUND";MR=function(e,r){return e===r}});function zX(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(i){return typeof i=="function"})){var r=e.map(function(i){return typeof i=="function"?"function "+(i.name||"unnamed")+"()":typeof i}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return e}function y0(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var n=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];var p=0,f,d={memoizeOptions:void 0},m=a.pop();if(typeof m=="object"&&(d=m,m=a.pop()),typeof m!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof m+"]");var g=d,v=g.memoizeOptions,x=v===void 0?r:v,_=Array.isArray(x)?x:[x],E=zX(a),O=t.apply(void 0,[function(){return p++,m.apply(null,arguments)}].concat(_)),L=t(function(){for(var D=[],R=E.length,W=0;W<R;W++)D.push(E[W].apply(null,arguments));return f=O.apply(null,D),f});return Object.assign(L,{resultFunc:m,memoizedResultFunc:O,dependencies:E,lastResult:function(){return f},recomputations:function(){return p},resetRecomputations:function(){return p=0}}),L};return n}var NR,OR=V(()=>{kR();NR=y0(RR)});var b0={};hr(b0,{ADMIN_FRAME:()=>Ce,CRDTState:()=>er,FRONTEND_DATA:()=>Tf});var Ce,Tf,er,Bt=V(()=>{Ce={adminWindow:null},Tf={},er=Object.freeze({New:0,Published:1,Draft:2,Deleted:3})});var Cr,ut,Sr,nt,Pr=V(()=>{OR();Cr=ye(Pe(),1);Be();Bt();ut={};pe?Sr=y0(t=>t):Sr=function(){return NR.apply(this,[...arguments,{memoizeOptions:{maxSize:10}}])};ut.getItemParentId=(t,e)=>ut.flatByParentList(t)[e];ut.getHomepageId=t=>t.frontendState.isMobile?t.site?.mobile_homepage_id:t.site?.homepage_id;ut.getHomepagePurl=t=>ut.getContentById(t,ut.getHomepageId(t))?.purl?.toLowerCase();ut.getHiddenHomepageId=t=>{let e=t.site?.mobile_homepage_id,r=t.site?.homepage_id;return e===r?null:t.frontendState.isMobile?r:e};ut.flatByParentList=Sr(t=>t.structure.byParent,t=>{let e={};for(let r in t)for(let i in t[r])e[t[r][i]]=r;return e});ut.getSetsByParent=Sr(t=>t.structure.byParent,t=>t.sets.byId,(t,e)=>{let r={};for(let i in t)r[i]=t[i].filter(n=>e.hasOwnProperty(n));return r});ut.getPagesByParent=Sr(t=>t.structure.byParent,t=>t.pages.byId,(t,e)=>{let r={};for(let i in t)r[i]=t[i].filter(n=>e.hasOwnProperty(n));return r});ut.getParentSetList=Sr(ut.getItemParentId,ut.flatByParentList,(t,e)=>{let r=[];for(;t;)r.push(t),t=t!==e[t]?e[t]:null;return r});ut.getSetContents=Sr((t,e)=>e,ut.getHomepageId,(t,e,r)=>r,(t,e,r)=>t.structure.bySort,(t,e)=>t.structure.byParent[e],t=>t.pages.byId,t=>t.sets.byId,(t,e,r={},i,n=[],o,s)=>{let a;return Cr.default.without(n.map(l=>{if(a=o[l]||s[l],r.includeNotIndexable===!0||a&&(a.id===e||Qh(a)))return a}).sort((l,p)=>i[l.id]-i[p.id]),void 0)});ut.getSetContentsByIndex=Sr(ut.getSetContents,(t,e,r)=>t.structure.indexById,(t,e)=>t.reduce((r,i)=>(r[e[i.id]]=i,r),{}));ut.getSetDepthsById=Sr(t=>t.sets.byId,ut.flatByParentList,(t,e)=>{let r={};return Object.keys(t).forEach(i=>{let n=0,o=i;for(;e[o];)n++,o=e[o];r[i]=n}),r});ut.getPinsForSet=Sr(ut.getParentSetList,ut.getSetDepthsById,(t,e,r,i)=>e,(t,e,r,i)=>r,(t,e,r,i)=>i,(t,e,r,i)=>t.structure.bySort,(t,e,r,i)=>t.pages.byId,ut.getPagesByParent,t=>t.frontendState.isMobile,(t,e,r,i,n,o,s={},a={},l)=>{if(!r)return[];let p=r,f=0,d={},m=[];return t.concat([r]).forEach(v=>{a[v]&&a[v].forEach(x=>{if(s[x]&&s[x].pin&&s[x].pin_options&&s[x].pin_options.position===i){if(x!==n&&(s[x].pin_options.screen_visibility==="mobile"&&!l||s[x].pin_options.screen_visibility==="desktop"&&l))return;m.push(s[x]),d[x]=s[x].pin_options.fixed?0:e[v]}})}),m.sort((v,x)=>{let _=o[v.id],E=o[x.id];return v.pin_options.fixed?_+=i==="bottom"?9e9:-9e9:v.pin_options.overlay&&(_+=i==="bottom"?9e5:-9e5),x.pin_options.fixed?E+=i==="bottom"?9e9:-9e9:x.pin_options.overlay&&(E+=i==="bottom"?9e5:-9e5),_-E}),m.sort((v,x)=>i==="bottom"?d[x.id]-d[v.id]:d[v.id]-d[x.id]),m});ut.getAutoRenderableOverlaysForSet=Sr(ut.getParentSetList,ut.getSetDepthsById,(t,e,r)=>e,(t,e,r)=>r,(t,e,r)=>t.pages.byId,(t,e,r)=>t.frontendState.PIDToEdit,ut.getPagesByParent,(t,e,r,i,n={},o,s={})=>{if(!r||pe)return[];let a=r,l=0,p=[];return t.concat([r]).forEach(d=>{s[d]&&s[d].forEach(m=>{n[m]&&n[m].overlay&&(n[m].id===o||n[m].overlay_options?.openOnLoad||n[m].purl?.toLowerCase()===i?.toLowerCase())&&p.push(n[m])})}),p});ut.getContentById=Sr((t,e)=>e,(t,e)=>t.pages.byId[e]||t.sets.byId[e],(t,e)=>e);ut.getContentByPurl=Sr((t,e)=>e?.replace("#",""),(t,e)=>(e=e?.replace("#",""),t.pages.byId[ut.getPagesByUrl(t)[e?.toLowerCase()]]||t.sets.byId[ut.getSetsByUrl(t)[e?.toLowerCase()]]),(t,e)=>e);ut.getLoadedIndexesForSet=Sr(ut.getSetContents,t=>t.structure.indexById,(t,e)=>Cr.default.without(t.map(r=>{if(Qh(r))return e[r.id]}),void 0));ut.getMissingIndexesForSet=Sr((t,e)=>t.sets.byId[e],ut.getLoadedIndexesForSet,(t,e)=>t?Cr.default.difference([...Array(Math.max(t.page_count||0,0)).keys()],e):[]);ut.getSortedListOfIndexPairs=Sr(t=>t,(t,e)=>e,(t,e)=>t.sets.byId,(t,e)=>t.structure.indexById,ut.getSetsByParent,(t,e,r,i,n)=>{let o=s=>{let a=ut.getContentById(t,s);if(!a)return[];let l=[...Array(Math.max(a.page_count||0,0)).keys()].map(p=>[a.id,p]);return n[a.id]&&(n[a.id]||[]).map(p=>r[p]).reverse().forEach(p=>{l.splice(i[p.id]+1,0,o(p.id))}),l};return Cr.default.chunk(Cr.default.flattenDeep(o(e)),2)});ut.getSortedListOfMissingIndexPairs=Sr(t=>t,ut.getSortedListOfIndexPairs,(t,e)=>t.sets.byId,ut.getSetsByParent,(t,e,r,i)=>{let n=[];return Cr.default.uniq(e.map(o=>o[0])).forEach(o=>{n=n.concat(ut.getLoadedIndexesForSet(t,o).map(s=>[o,s]))}),Cr.default.differenceWith(e,n,Cr.default.isEqual)});ut.getGappedSetMap=Sr(t=>t,ut.getSortedListOfIndexPairs,ut.getSortedListOfMissingIndexPairs,(t,e,r)=>{let i=r[0];if(i){let n=Cr.default.uniq(e.map(a=>a[0])).reduce((a,l)=>(a[l]=0,a),{}),o=Cr.default.findIndex(e,a=>Cr.default.isEqual(a,i)),s=Cr.default.fromPairs(e.slice(0,o));return Cr.default.merge(n,s)}return{}});ut.getPagesByUrl=Sr(t=>t.pages.byId,t=>Cr.default.transform(Cr.default.omitBy(t,e=>e.crdt_state===er.Deleted),function(e,r){e[r.purl?.toLowerCase()]=r.id},{}));ut.getSetsByUrl=Sr(t=>t.sets.byId,t=>Cr.default.transform(Cr.default.omitBy(t,e=>e.crdt_state===er.Deleted),function(e,r){e[r.purl?.toLowerCase()]=r.id},{}));ut.getMediaByHash=t=>{let e={};return Cr.default.each(t.pages.byId,r=>{Cr.default.each(r.media,i=>{i.crdt_state!==er.Deleted&&(e[i.hash]=i)})}),e};ut.getMediaByParent=Sr(t=>t.pages.byId,t=>{let e={};return Cr.default.each(t,r=>{e[r.id]=r.media?.filter(i=>i.crdt_state!==er.Deleted)}),e});ut.getRenderedPageModels=Sr(t=>t.pages.byId,t=>t.frontendState.renderedPages,(t,e)=>e.map(r=>t[r.id]).filter(r=>r!==void 0));nt=ut});var S0={};hr(S0,{actionTypes:()=>Ne,actions:()=>Ge});var pn,Ka,x0,Ge,BX,DR,Ne,Mf,w0,ja,Ga,tr=V(()=>{pn=ye(Mn(),1),Ka=ye(Pe(),1);d0();Be();Gs();Pr();x0=ye(Pe(),1),Ge={},BX=pe?3e4:1e4,DR={AUTHENTICATE_USER:"AUTHENTICATE_USER",FETCH_SITEDESIGN_MODEL:"FETCH_SITEDESIGN_MODEL",FETCH_SCAFFOLDING:"FETCH_SCAFFOLDING",FETCH_SITE_PACKAGE:"FETCH_SITE_PACKAGE",FETCH_SITE_MODEL:"FETCH_SITE_MODEL",FETCH_SITE_CSS:"FETCH_SITE_CSS",FETCH_MEDIA:"FETCH_MEDIA",FETCH_CONTENT:"FETCH_CONTENT",DELETE_CONTENT:"DELETE_CONTENT",FETCH_COMMERCE_PRODUCTS:"FETCH_COMMERCE_PRODUCTS",FETCH_SHOP_MODEL:"FETCH_SHOP_MODEL"};(0,Ka.each)(DR,function(t,e,r){r[t+"_"+Pf]=e+"_"+Pf,r[t+"_"+Cf]=e+"_"+Cf,r[t+"_"+If]=e+"_"+If});Ne=(0,Ka.merge)({ADD_COMMERCE_PRODUCT_TO_CART:"ADD_COMMERCE_PRODUCT_TO_CART",RESET_COMMERCE_CART:"RESET_COMMERCE_CART",SET_INITIAL_AUTH:"SET_INITIAL_AUTH",PAGES_MOUNTED:"PAGES_MOUNTED",PAGES_UNMOUNTED:"PAGES_UNMOUNTED",UPDATE_FRONTEND_STATE:"UPDATE_FRONTEND_STATE",COMMERCE_PRODUCT_DESTROYED:"COMMERCE_PRODUCT_DESTROYED",COMMERCE_PRODUCT_UPDATED:"COMMERCE_PRODUCT_UPDATED",SHOP_MODEL_UPDATED:"SHOP_MODEL_UPDATED"},DR);Ge.getAuthToken=function(t={}){let e=new Promise((r,i)=>{let n="https://cargo.site/accesstoken";if(t.reverse_bounce_jwt){parent.location.href=n+"/bounce?jwt="+t.reverse_bounce_jwt;return}if(t.bounce){parent.location.href=n+"/bounce?site_url="+t.site_url;return}let o={};t.site_url&&(o.site_url=t.site_url),t.site_id&&(o.site_id=t.site_id),t.jwt&&(o.jwt=t.jwt);let s={};t.nonce&&(s["x-cargo-access-token-nonce"]=t.nonce),pn.default.get(n,{use_auth:!1,withCredentials:!0,params:o,headers:s,timeout:t?.timeout||BX}).then(function(a){if(!a||a.token===null)return i("No token found.");r(a)}).catch(a=>{i(a)})});return{type:Ne.AUTHENTICATE_USER,payload:e}};Ge.setAuthentication=t=>({type:Ne.AUTHENTICATE_USER_FULFILLED,payload:t});Ge.rejectAuthentication=()=>({type:Ne.AUTHENTICATE_USER_REJECTED,payload:{}});Ge.fetchScaffolding=function(){return function(t,e){let i=`/pages/${e().site.id}/scaffolding`;return t({type:Ne.FETCH_SCAFFOLDING,payload:pn.default.get(cr+i)})}};Ge.fetchFiles=function(){return function(t,e){let i=`/sites/${e().site.id}/media/files`;return t({type:Ne.FETCH_MEDIA,payload:pn.default.get(cr+i)})}};Ge.fetchCommerceProducts=function(t={}){return t=x0.default.defaults(t,{orderBy:"date_added",orderDir:"asc",idArray:null,onlyNew:!0}),function(e,r){let i=r(),n=`/commerce/${i.site.id}/products`,o;if(t.idArray){n+="/list";let s=new FormData;if(t.idArray){let a=t.idArray.filter(l=>!(t.onlyNew===!0&&i.commerce.products.hasOwnProperty(l)));if(a.length===0)return Promise.resolve();a.forEach(l=>{s.append("ids[]",l)})}o=pn.default.post(cr+n,s,{use_auth:!1})}else o=pn.default.get(cr+n,{use_auth:!1,params:{order_by:t.orderBy,order_dir:t.orderDir,limit:t.limit}});return e({type:Ne.FETCH_COMMERCE_PRODUCTS,payload:o,meta:{options:t}})}};Ge.fetchShopModel=function(t={}){return function(e,r){let i=r();if(!i.site.shop_id)return Promise.resolve();let n=`/commerce/${i.site.id}/shop/${i.site.shop_id}`;return e({type:Ne.FETCH_SHOP_MODEL,payload:pn.default.get(cr+n,{use_cache:t.force!==!0})})}};Ge.resetCommerceCart=function(){return{type:Ne.RESET_COMMERCE_CART,payload:{}}};Ge.addCommerceProductToCart=function(t,e,r={}){return function(i,n){let o=n(),s=o.commerce.products[t],a=s?.variants.find(l=>l.variant_id==e);if(!s||!a){r.failureCallback?.("Product not found");return}if((r.amount===void 0||isNaN(r.amount))&&(r.amount=1),a.inventory!==null&&r.amount>a.inventory)if(a.inventory<=0){r.failureCallback?.("Product is out of stock");return}else r.amount=a.inventory;return typeof r.callback=="function"&&r.callback(),i({type:Ne.ADD_COMMERCE_PRODUCT_TO_CART,payload:{product_id:a.product_id,variant_id:a.variant_id,quantity:r.amount},meta:{is_template:o.site.is_template}})}};Mf=null,w0=!1,ja=[],Ga=[];Ge.pageMounted=function(t){if(Ga.includes(t)&&(Ga=Ga.filter(e=>e!==t)),!ja.includes(t))return(e,r)=>(ja.push(t),Mf||(Mf=new Promise(i=>{requestAnimationFrame(()=>{e({type:Ne.PAGES_MOUNTED,payload:{pages:[...ja]}}),i(),Mf=null,ja=[]})})),Mf)};Ge.pageUnMounted=function(t){if(ja.includes(t)&&(ja=ja.filter(e=>e!==t)),!Ga.includes(t))return(e,r)=>{if(r().frontendState.PIDBeingEdited===t?.id)return e({type:Ne.PAGES_UNMOUNTED,payload:{pages:[t]}});Ga.push(t),w0||(w0=!0,requestAnimationFrame(()=>{e({type:Ne.PAGES_UNMOUNTED,payload:{pages:[...Ga]}}),w0=!1,Ga=[]}))}};Ge.fetchSiteModel=function(){return function(t,e){let i=`/sites/${e().site.id}`,n=pn.default.get(cr+i);return t({type:Ne.FETCH_SITE_MODEL,payload:n})}};Ge.fetchSiteCSS=function(){return function(t,e){let i=`/sites/${e().site.id}/css`,n=pn.default.get(cr+i);return t({type:Ne.FETCH_SITE_CSS,payload:n})}};Ge.fetchSitePackage=function(){return function(t,e){let r=e(),i;pe?i=r.frontendState.hostname:i=Ba?hb:window.location.hostname,db&&(i=i.replace("local.dev.cargo.site","dev.cargo.site"));let n=pn.default.get(cr+`/package/${i}`);return t({type:Ne.FETCH_SITE_PACKAGE,payload:n})}};Ge.fetchSiteDesignModel=function(){return function(t,e){let i=`/sites/${e().site.id}/design`,n=pn.default.get(cr+i);return t({type:Ne.FETCH_SITEDESIGN_MODEL,payload:n})}};Ge.fetchPagesByTag=function(t,e={}){return function(r,i){let n=store.getState(),o=pn.default.get(cr+`/pages/${n.site.id}/tag/${t}`,{withCredentials:!0,use_cache:e.force!==!0});return r({type:Ne.FETCH_CONTENT,payload:o})}};Ge.fetchContent=function(t,e={}){return e.idType||(e.idType="pid"),function(r,i){let n=i(),o;if(e.indexes&&n.frontendState.inAdminFrame===!0){let f=n.structure.byParent[t]?.reduce((d,m)=>(d[n.structure.indexById[m]]=m,d),{});f&&(o={},e.indexes.forEach(d=>{let m=f[d],g=n.structure.liveIndexes[m];if(g){let[v,x]=g.split("/");o[v]||(o[v]=[]),o[v].push(parseInt(x))}}),o=x0.default.map(o,(d,m)=>({set_id:m,index:d})))}if(e.force!==!0&&(e.idType==="purl"?nt.getContentByPurl(n,t):nt.getContentById(n,t)||t==="root")&&(e.indexes===void 0||e.indexes.length===0)&&e.prev!==!0&&e.next!==!0)return r({type:Ne.FETCH_CONTENT,payload:Promise.resolve()});let s=`/pages/${n.site.id}/url/${t}`;e.next===!0?s=`/pages/${n.site.id}/next/${t}`:e.prev===!0?s=`/pages/${n.site.id}/prev/${t}`:e.idType==="pid"&&(s=`/pages/${n.site.id}/id/${t}`);let a={};(0,Ka.isArray)(e.indexes)&&(s=`/pages/${n.site.id}/filter/`,o&&Object.keys(o).length>0?a.indexBySet=JSON.stringify(o):a.indexBySet=JSON.stringify([{set_id:t,index:e.indexes}]));let l=pn.default.get(cr+s,{withCredentials:!0,use_cache:e.force!==!0,params:a,validateStatus:function(f){return f>=200&&f<300&&f!==204},contentIdentifier:{idType:e.idType,id:t}}),p=new Promise((f,d)=>{l.then(m=>{(0,Ka.isArray)(m.data)||(m.data=[m.data]),e.cb?.(m),f(m)}).catch(d)});return r({type:Ne.FETCH_CONTENT,payload:p})}};Ge.updateFrontendState=function(t){return function(e,r){return e({type:Ne.UPDATE_FRONTEND_STATE,payload:t})}};Ge.deleteContent=function(t){return function(e,r){let i=new Promise().resolve({id:t});return{type:Ne.DELETE_CONTENT,payload:i}}};pe||(window.actions=Ge)});function _0(){return t=>e=>(Va(e.payload)&&e.payload.catch(function(r){if(pe&&r.response)console.error("Request to",r.response.config.url,"failed with code",r.response.status);else{if(r&&r.response&&r.response.status===401){console.warn("No auth for request to",r.response.config.url);return}console.error(r)}return r}),t(e))}var tme,LR=V(()=>{u0();tme=ye(Pe(),1);Be()});function FR(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SITE_MODEL_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.site),r){if(Ba&&(r.domain_active=!1),!pe)try{localStorage.setItem("c3-site",JSON.stringify({id:r.id,host:window.location.host}))}catch(i){console.error(i)}return{...t,...r,crdt_state:er.Published}}break}return t}var sme,zR=V(()=>{tr();Be();Bt();sme=ye(Pe(),1)});function qX(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SCAFFOLDING_FULFILLED:case Ne.FETCH_ADMIN_LIST_FULFILLED:case Ne.FETCH_CONTENT_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.scaffolding),r)return Rf.default.isArray(r)||(r=[r]),{...t,...r.reduce((i,n)=>(n.page_type!=="page"||(n={...n},delete n.index,delete n.sort,delete n.set_id,delete n.is_homepage,n.purl&&(n.purl=n.purl.toLowerCase()),n.crdt_state=er.Published,i[n.id]=n),i),{})};break;case Ne.DELETE_CONTENT:if(t[e.payload.id]){let i={...t};return delete i[e.payload.id],i}break;case Ne.UPDATE_PAGE:return{...t,[e.meta.id]:Rf.default.merge({},Rf.default.cloneDeep(t[e.meta.id]),e.payload)}}return t}var Rf,E0,BR,qR=V(()=>{tr();xr();Bt();Rf=ye(Pe(),1);Be();E0={byId:qX},BR=$n(E0)});function UX(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SCAFFOLDING_FULFILLED:case Ne.FETCH_ADMIN_LIST_FULFILLED:case Ne.FETCH_CONTENT_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.scaffolding),r)return{...t,...r.reduce((i,n)=>(n.page_type!=="set"||(n={...n},delete n.index,delete n.sort,delete n.set_id,delete n.is_homepage,n.purl&&(n.purl=n.purl.toLowerCase()),n.crdt_state=er.Published,i[n.id]=n),i),{})};break}return t}var C0,UR,HR=V(()=>{tr();xr();Bt();C0={byId:UX},UR=$n(C0)});function HX(t=VR,e){switch(e.type){case Ne.RESET_COMMERCE_CART:try{localStorage.removeItem("cargo-commerce-cart")}catch(n){console.error("Unable to store cart",n)}return{};case Ne.ADD_COMMERCE_PRODUCT_TO_CART:let r=e.payload,i;r.quantity===null?(i={...t},delete i[r.variant_id]):(t[r.variant_id]&&(r={...t[r.variant_id],quantity:Math.max(0,(t[r.variant_id].quantity||0)+r.quantity)}),i={...t,[r.variant_id]:r});try{e.meta?.is_template!==!0&&localStorage.setItem("cargo-commerce-cart",JSON.stringify(i))}catch(n){console.error("Unable to store cart",n)}return i}return t}function WX(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_COMMERCE_PRODUCTS_FULFILLED:let r=e.meta?.options||{},i=(e.payload.data?.data||[]).reduce((o,s,a)=>{let l=t[s?.product_id];return r.onlyNew&&l?(r.idArray===null&&l.sort_index===void 0&&(l.sort_index=a),o):(r.idArray===null&&(s.sort_index=a),WR(s),{...o,[s.product_id]:s})},{});return{...t,...i};case Ne.COMMERCE_PRODUCT_UPDATED:return WR(e.payload),{...t,[e.payload.product_id]:e.payload};break;case Ne.COMMERCE_PRODUCT_DESTROYED:let n={...t};return delete n[e.payload.product_id],n;break}return t}function VX(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SHOP_MODEL_FULFILLED:return{...t,...e.payload.data};case Ne.SHOP_MODEL_UPDATED:return{...t,...e.payload}}return t}var Ks,VR,WR,P0,$R,jR=V(()=>{Ks=ye(Pe(),1);xr();tr();Be();VR={};if(!pe)try{VR=JSON.parse(localStorage.getItem("cargo-commerce-cart"))||{},window.__PRELOADED_STATE__&&window.__PRELOADED_STATE__.commerce&&window.__PRELOADED_STATE__.commerce.cart&&delete window.__PRELOADED_STATE__.commerce.cart}catch{}WR=t=>{t.name&&(t.name=Ks.default.unescape(t.name)),t.variants?.forEach(e=>{Ks.default.each(e.attributes,(r,i)=>{let n=Ks.default.unescape(r);delete e.attributes[i],e.attributes[Ks.default.unescape(i)]=n})}),Ks.default.each(t.attributes,(e,r)=>{let i=e.map(n=>Ks.default.unescape(n));delete t.attributes[r],t.attributes[Ks.default.unescape(r)]=i})};P0={products:WX,cart:HX,shop:VX},$R=$n(P0)});function KR(t=$X,e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_MEDIA_FULFILLED:let r=e.payload.data;if(r)return{...t,data:GR.default.uniqBy([...t.data,...r],"id")};break}return t}var GR,$X,YR=V(()=>{tr();Bt();GR=ye(Pe(),1),$X={data:[],crdt_state:er.Published}});function XR(t={},e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SITE_CSS_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.css),r)return{...t,...r,crdt_state:er.Published};break}return t}var Pme,ZR=V(()=>{tr();Bt();Pme=ye(Pe(),1)});function I0(t=jX,e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SCAFFOLDING_FULFILLED:case Ne.FETCH_ADMIN_LIST_FULFILLED:case Ne.FETCH_CONTENT_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.scaffolding),r){let i={...t},n={};return(0,Ys.each)(r,function(o){o.page_type==="set"&&(n.hasOwnProperty(o.id)||(n[o.id]=[])),o.id!=="root"&&o.hasOwnProperty("set_id")&&(n.hasOwnProperty(o.set_id)||(n[o.set_id]=[]),n[o.set_id].push(o.id))}),i.byParent=(0,Ys.mergeWith)({},t.byParent,n,(o,s)=>{if((0,Ys.isArray)(o))return(0,Ys.uniq)(o.concat(s))}),i.bySort={...t.bySort,...r.reduce((o,s)=>(s.id!=="root"&&s.hasOwnProperty("sort")&&(o[s.id]=s.sort),o),{})},i.indexById={...t.indexById,...r.reduce((o,s)=>(s.id!=="root"&&s.hasOwnProperty("index")&&(o[s.id]=s.index),o),{})},i}break}return t}var Ys,jX,JR=V(()=>{tr();Ys=ye(Pe(),1);Bt();jX={byParent:{root:[]},bySort:{},indexById:{},liveIndexes:{},crdt_state:er.Published}});function KX(t=GX,e){switch(e.type){case Ne.AUTHENTICATE_USER_PENDING:return{...t,authenticating:!0};case Ne.AUTHENTICATE_USER_FULFILLED:if(e.payload?.data?.access_token){if(!pe)try{localStorage.setItem("c3-auth",JSON.stringify(e.payload.data))}catch(r){console.error(r)}return{...t,authenticating:!1,authenticated:!0,data:e.payload.data}}else{if(!pe)try{localStorage.removeItem("c3-auth")}catch(r){console.error(r)}return{...t,authenticating:!1,authenticated:!1}}case Ne.AUTHENTICATE_USER_REJECTED:if(!pe)try{localStorage.removeItem("c3-auth")}catch(r){console.error(r)}return{...t,authenticating:!1,authenticated:!1}}return t}var kme,GX,QR,ek=V(()=>{kme=ye(Pe(),1);Be();tr();GX={authenticating:!1,authenticated:!1};QR=KX});function XX(t=YX,e){if(!e.payload)return t;switch(e.type){case Ne.FETCH_SITEDESIGN_MODEL_FULFILLED:case Ne.FETCH_SITE_PACKAGE_FULFILLED:let r=e.payload.data;if(e.type===Ne.FETCH_SITE_PACKAGE_FULFILLED&&(r=r.design),r)return A0.default.merge(A0.default.cloneDeep(t),r.site_design);break}return t}var A0,YX,tk,rk=V(()=>{tr();A0=ye(Pe(),1);Bt();YX={images:{},quick_view:{},site:{enableColorFilter:!1,enableHomeLinkActiveStates:!1},cart:{theme:"light"},contact_form:{theme:"light"},crdt_state:er.Published};tk=XX});function nk(t=ik,e){if(!e.payload)return t;let r;switch(e.type){case Ne.UPDATE_FRONTEND_STATE:return T0.default.mergeWith({},ik,t,e.payload,(i,n,o,s,a)=>{n===void 0&&a.hasOwnProperty(o)&&delete s[o]});case Ne.FETCH_SITE_PACKAGE_FULFILLED:return{...t,hasSiteModel:!0,hasScaffolding:!0,hasSiteDesign:!0,hasSiteCSS:!0,hasSitePackage:!0};case Ne.FETCH_SCAFFOLDING_FULFILLED:return{...t,hasScaffolding:!0};case Ne.FETCH_SITE_MODEL_FULFILLED:return{...t,hasSiteModel:!0};case Ne.FETCH_SHOP_MODEL_FULFILLED:return{...t,hasShopModel:!0};case Ne.FETCH_SITE_CSS_FULFILLED:return{...t,hasSiteCSS:!0};case Ne.FETCH_SITEDESIGN_MODEL_FULFILLED:return{...t,hasSiteDesign:!0};case Ne.PAGES_MOUNTED:return r=[...t.renderedPages,...e.payload.pages],{...t,renderedPages:r};case Ne.PAGES_UNMOUNTED:return{...t,renderedPages:T0.default.difference(t.renderedPages,e.payload.pages)};case Ne.FETCH_CONTENT_REJECTED:return{...t,networkErrors:[...t.networkErrors,{...e.payload.config?.contentIdentifier,code:e.payload.response?.status}]}}return t}var T0,Ume,ik,ok=V(()=>{tr();Be();Be();T0=ye(Pe(),1),Ume=fb(),ik={hasSiteModel:!1,hasScaffolding:!1,hasSiteDesign:!1,hasSiteCSS:!1,hasShopModel:!1,hasSitePackage:!1,quickView:{mode:"default",inited:!1,autoScrolling:!1,elementArray:!1,activeIndex:0,startingIndex:0},contactForm:{transition:!1,inited:!1},adminMode:Fr,inAdminFrame:Fr,renderedPages:[],networkErrors:[],pageNotFound:!1,fontsLoaded:[],activeHashPurl:""}});var R0={};hr(R0,{default:()=>M0,rawReducers:()=>ZX});var M0,ZX,k0=V(()=>{zR();qR();HR();jR();YR();ZR();JR();ek();rk();ok();tr();M0={structure:I0,site:FR,pages:BR,sets:UR,media:KR,css:XR,auth:QR,siteDesign:tk,frontendState:nk,commerce:$R},ZX={pages:E0,sets:C0,commerce:P0}});var sk,ige,ak,lk=V(()=>{sk=ye(Zb(),1);xr();sA();ige=ye(AR(),1);tr();LR();d0();k0();Be();ak=()=>{let t=[],e=(0,sk.createDynamicMiddlewares)(),r=[oA,_0,c0(),e.enhancer],i=cf(Xb(...r),...t),n=pe?{}:window.__PRELOADED_STATE__||{},o=cd($n(M0),n,i);return pe||(window.store=o,delete window.__PRELOADED_STATE__),{store:o}}});function S(t,e,r,i,n,o){e||(e={});var s,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?s=e[a]:l[a]=e[a];var p={type:t,props:l,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--JX,__i:-1,__u:0,__source:n,__self:o};if(typeof t=="function"&&(s=t.defaultProps))for(a in s)l[a]===void 0&&(l[a]=s[a]);return lt.vnode&&lt.vnode(p),p}var JX,pge,fe=V(()=>{ke();ke();JX=0,pge=Array.isArray});var uk=V(()=>{ke();fe()});var ck=V(()=>{});var os,kf=V(()=>{Ye();ck();fe();os=({customStyle:t,className:e})=>S("div",{style:t,className:`caution-processing${e?" "+e:""}`})});var dk=V(()=>{});var pk,hk,N0,fk,mk=V(()=>{Ye();ft();xr();Gs();kf();dk();fe();pk=0,hk=!(typeof window<"u"&&window.document&&window.document.createElement),N0=class extends me{constructor(e){if(super(e),hk)return;let r=new URLSearchParams(window.location.search.replace(/\+/g,"%2B")),i=["cargo.site","local.dev.cargo.site","local.dev.cargo.site","dev.cargo.site"];this.state={error:null,loading:!1,checkingAutomatedAuth:!0,formView:"login",resetEmail:null,prevFormState:null,prefilledEmail:r.get("email"),isHomePageLogin:i.includes(window.location.hostname)},e.canCreateNewAccount?this.state.formView="newAcct":e.magicEmailLogin&&(this.state.formView="magicEmail"),this.containerRef=ze.createRef();let n=r.get("t");if(this.redirectURL=r.get("rd"),r.has("t")){r.delete("t");let o=r.toString();o.length>0&&(o="?"+o),window.history.replaceState({},document.title,window.location.origin+window.location.pathname+o)}if(this.props.loginToUdotCargoOnly){this.state.checkingAutomatedAuth=!1;return}if(pk>=1){this.state.checkingAutomatedAuth=!1;return}if(n==="")this.state.checkingAutomatedAuth=!1;else if(r.has("c")&&r.has("signature"))fetch(`${cr}/auth/verify?${r.toString()}`,{method:"get"}).then(async s=>{let a=await s.json();a.access_token&&a.id?(this.props.setAuthData(a.access_token,a.id),this.props.onLoginSuccess?.(a),window.history.replaceState({},document.title,window.location.origin+window.location.pathname)):this.setState({checkingAutomatedAuth:!1,error:"Something went wrong. Please try again later."}),requestAnimationFrame(()=>{this.setState({checkingAutomatedAuth:!1})})}).catch(s=>{console.log(s),this.setState({checkingAutomatedAuth:!1,error:"Something went wrong. Please try again later."})});else{let s=!1;this.props.domain_active&&n===null&&(s=!0);let a={timeout:3e3,jwt:n,bounce:s};this.props.site_url&&(a.site_url=this.props.site_url),this.props.site_id&&(a.site_id=this.props.site_id),this.props.getAuthToken(a).catch(l=>{console.log("Failed to fetch auth token.")}).finally(()=>{pk++,!s&&requestAnimationFrame(()=>{this.props.onCookieAuthComplete?.(),this.setState({checkingAutomatedAuth:!1})})})}}handleInitialTab=e=>{if(e.key!=="Tab")return;let r=this.containerRef.current;if(!r||r.contains(document.activeElement))return;let i=r.querySelector('input, select, textarea, button, [tabindex]:not([tabindex="-1"])');i&&(e.preventDefault(),i.focus())};ForgotButton=()=>{let e=this.state.loading?{display:"inline-block",pointerEvents:"none"}:{display:"inline-block"};return this.state.formView==="newAcct"?null:S("button",{className:"forgot",style:e,type:"button",onClick:r=>{r.preventDefault(),this.setState({formView:"forgot",error:null,prevFormState:"login"})},children:"Forgot?"})};createOrLogin=()=>{if(!this.state.isHomePageLogin)return this.ForgotButton();let e=this.state.loading?{display:"inline-block",pointerEvents:"none"}:{display:"inline-block"};return S("button",{className:"account",type:"button",style:e,onClick:r=>{r.preventDefault(),this.state.formView==="login"&&this.setState({formView:"newAcct",error:null,prevFormState:"login"}),this.state.formView==="newAcct"&&this.setState({formView:"login",error:null,prevFormState:"newAcct"})},children:[this.state.formView==="newAcct"?"Login to an existing account":null,this.state.formView==="login"?"New Account":null]})};render(){if(hk||this.state.checkingAutomatedAuth||this.props.cookieAuthOnly)return null;let e=this.state.loading?{display:"inline-block",pointerEvents:"none"}:{display:"inline-block"},r="Cargo Login";return this.state.formView==="newAcct"?r="New Account":this.state.formView==="forgot"&&(r="Reset Password"),S("div",{id:"login",className:`login-window${this.props.noOverlay===!0?" not-overlaid":""}`,ref:this.containerRef,onMouseUp:i=>{if(this.props.canClickout&&!i.target.closest(".login-modal")){let n=new CustomEvent("remove-login-form");document.dispatchEvent(n),this.props.onClickout&&!this.state.loading&&this.props.onClickout()}},children:S("div",{className:"login-modal custom login-frame",children:[S("div",{className:"login-header",children:[S("div",{className:"logo-box"}),S("div",{className:"title",children:r})]}),this.state.formView==="newAcct"?S("form",{children:[S("div",{className:"input-fields new",children:[this.state.prefilledEmail?null:S("div",{className:"text-input bars",children:S("input",{type:"text",name:"email",id:"email",placeholder:"Email Address...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),S("div",{className:"text-input bars",children:S("input",{type:"password",name:"password",placeholder:"Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.error?S("div",{className:"under-input-row",children:S("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null]}),this.state.formView==="newAcct"?S("div",{className:"terms",children:["By creating an account, you agree to our ",S("a",{href:"https://cargo.site/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"}),S("br",{}),"and ",S("a",{href:"https://cargo.site/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"}),"."]}):null,S("div",{className:"login-options",children:[S("button",{className:"login",type:"submit",style:e,onClick:i=>{i.preventDefault(),this.setState({error:null,loading:!0});let n=new FormData(this.containerRef.current.querySelector("form"));this.validateLogin(n)&&this.login(n)},children:[this.state.loading&&S(os,{className:"accent default-border-radius"}),"OK"]}),this.createOrLogin()]})]}):null,this.state.formView==="login"||this.state.formView==="magicEmail"?S("form",{children:[S("div",{className:"input-fields",children:[this.state.prefilledEmail?null:S("div",{className:"text-input bars",children:this.state.formView==="magicEmail"?S("input",{type:"text",name:"cargoMagicField",id:"cargoMagicField",autoComplete:"email",placeholder:"Enter your e\u200Cma\u200Cil a\u200Cdd\u200Cres\u200Cs",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}}):S("input",{type:"text",name:"email",id:"email",placeholder:this.state.formView==="magicEmail"?"Enter your e\u200Cma\u200Cil address":"Email Address...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.formView!=="magicEmail"&&S("div",{className:"text-input bars",children:S("input",{type:"password",name:"password",placeholder:"Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.isHomePageLogin?S("div",{className:"under-input-row",children:[this.state.error?S(ce,{children:S("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null,S("span",{children:this.ForgotButton()})]}):S(ce,{children:this.state.error?S("div",{className:"under-input-row",children:[S("span",{style:{color:"#FF0000",marginLeft:"5px"},children:this.state.error}),S("span",{})]}):null})]}),S("div",{className:"login-options",children:[S("button",{className:"login",type:"submit",style:e,onClick:i=>{i.preventDefault(),this.setState({error:null,loading:!0});let n=!0,o=new FormData(this.containerRef.current.querySelector("form"));this.state.formView==="magicEmail"&&(n=this.validateMagicLogin(o)),n&&this.login(o)},children:[this.state.loading&&S(os,{className:"accent default-border-radius"}),"OK"]}),this.state.formView!=="magicEmail"&&this.createOrLogin()]})]}):null,this.state.formView==="forgot"?S(ce,{children:S("form",{children:[S("div",{className:"enter-email",children:"Enter an email address associated with your Cargo Account:"}),S("div",{className:"input-fields",children:[S("div",{className:"text-input bars",children:S("input",{type:"text",name:"email",id:"email",placeholder:"Email Address...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.error?S("div",{className:"under-input-row",children:S("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null]}),S("div",{className:"login-options",children:[S("button",{className:"login",type:"submit",style:e,onClick:i=>{i.preventDefault(),this.setState({error:null,loading:!0});let n=new FormData(this.containerRef.current.querySelector("form"));this.forgot(n)},children:[this.state.loading&&S(os,{className:"accent default-border-radius"}),"Submit"]}),S("button",{className:"forgot",style:e,type:"button",onClick:i=>{i.preventDefault(),this.setState({formView:this.state.prevFormState?this.state.prevFormState:"login",error:null})},children:"Cancel"})]})]})}):null,this.state.formView==="reset"?S(ce,{children:S("form",{children:[S("div",{className:"enter-email",children:[this.state.resetEmail?S(ce,{children:["We\u2019ve sent a reset code to ",S("br",{}),this.state.resetEmail]}):S(ce,{children:"We\u2019ve sent a reset code to the email associated with your Cargo Account:"})," 							"]}),S("div",{className:"input-fields",children:[S("div",{className:"text-input bars",children:S("input",{type:"text",name:"pwreset",placeholder:"Enter Reset Code",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),S("div",{className:"text-input bars",children:S("input",{type:"password",name:"password",autoComplete:"new-password",placeholder:"Enter a new Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),S("div",{className:"text-input bars",children:S("input",{type:"password",name:"password_reset_confirm",autoComplete:"new-password",placeholder:"Confirm new Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.error?S("div",{className:"under-input-row",children:S("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null]}),S("div",{className:"login-options",children:[S("button",{className:"login",type:"submit",style:e,onClick:i=>{i.preventDefault();let n=new FormData(this.containerRef.current.querySelector("form")),o=this.validateForm(n);o&&(this.setState({error:null,loading:!0}),this.forgot(n)),o||this.setState({loading:!1})},children:[this.state.loading&&S(os,{className:"accent default-border-radius"}),"OK"]}),S("button",{className:"forgot",type:"button",style:e,onClick:i=>{i.preventDefault(),this.setState({formView:"login",error:null})},children:"Cancel"})]})]})}):null,this.state.formView==="magicEmailSent"?S("form",{children:[S("div",{className:"input-fields",children:S("div",{className:"field-message",style:{paddingTop:"20px"},children:S("span",{children:"We\u2019ve emailed you a login link"})})}),S("div",{className:"login-options",children:S("button",{className:"login",type:"submit",style:{visibility:"hidden"},onClick:i=>{i.preventDefault(),i.target.closest(".login-modal").style.display="none"},children:"OK"})})]}):null]})})}login=e=>{if(this.props.site_url&&e.append("site_url",this.props.site_url),this.props.templateID&&e.append("site_id",this.props.templateID),this.state.prefilledEmail&&e.append("email",this.state.prefilledEmail),this.state.formView==="magicEmail"){let n=e.get("cargoMagicField");e.append("email",n),e.delete("cargoMagicField"),fetch(`${cr}/auth/send`,{method:"post",body:e,credentials:"include"}).then(async o=>{if(o.ok)this.setState({formView:"magicEmailSent",loading:!1});else{let s=await o.json();this.setState({error:s.message||"Something went wrong. Please try again later.",loading:!1})}}).catch(o=>{console.log(o),this.setState({error:"Something went wrong. Please try again later.",loading:!1})}).finally(()=>{this.setState({loading:!1})});return}let i=this.state.formView==="newAcct"?"/dispatch/admin/loginCreate":"/dispatch/admin/login";if(e.append("network","c3"),!this.props.site_url&&!this.props.templateID&&this.state.formView==="newAcct"){let n=window.store.getState(),o=$a==="https://cargo.site"?1597765:1791886;if(n){let s=n.templates?n.templates.flatMap(a=>a.sites):[];if(s.length>0){let a=s.length-1,l=Math.floor(Math.random()*a),p=s[l];p&&(o=p?.id?p.id:o)}}e.append("site_id",o)}fetch($a+i,{method:"post",body:e,credentials:"include"}).then(async n=>{let o=await n.json(),{access_token:s,id:a,bounce_jwt:l}=o.jdata||{};s&&a?(this.props.loginToUdotCargoOnly!==!0&&this.props.setAuthData(s,a),this.props.domain_active&&l?this.props.getAuthToken({reverse_bounce_jwt:l}).then(()=>{this.redirectURL?window.location.href=this.redirectURL:this.props.onLoginSuccess?.(o.jdata)}):this.redirectURL?window.location.href=this.redirectURL:this.props.onLoginSuccess?.(o.jdata)):this.setState({error:o?.error||"Something went wrong. Please try again later.",loading:!1})}).catch(n=>{console.log(n),this.setState({error:"Something went wrong. Please try again later.",loading:!1})}).finally(()=>{this.props.loadingTillFormRemoval!==!0&&this.setState({loading:!1})})};forgot=e=>{e.append("network","c3"),this.props.site_url&&e.append("site_url",this.props.site_url),fetch($a+"/dispatch/auth/handleResetFormPost",{method:"post",body:e,credentials:"include"}).then(async r=>{let i=await r.json();if(i.error&&i.error?.[0]?.length>0)this.setState({error:i.error[0],loading:!1});else if(this.state.formView==="forgot")this.setState({formView:"reset",resetEmail:e.get("email")});else{let n=new FormData;n.set("email",this.state.resetEmail),n.set("password",e.get("password")),this.login(n)}}).catch(r=>{console.log(r),this.setState({error:"Something went wrong. Please try again later.",loading:!1})}).finally(()=>{this.setState({loading:!1})})};validateMagicLogin(e){let r=null;for(let i of e.entries()){let[n,o]=i;n==="cargoMagicField"&&(o===""||!o)&&this.state.formView==="magicEmail"&&(o===""||!o)&&(r="Field cannot be empty.")}return r?(this.setState({error:r,loading:!1}),!1):!0}validateLogin(e){let r=null;for(let i of e.entries()){let[n,o]=i;n==="email"&&(o===""||!o)&&!this.state.prefilledEmail&&(this.state.formView==="newAcct"&&(o===""||!o)?r="Fields cannot be empty.":r="Incorrect Username or Password."),n==="password"&&(o===""||!o)&&r===null&&(r="Fields cannot be empty.")}return r?(this.setState({error:r,loading:!1}),!1):!0}validateForm(e){var r=e.get("pwreset").trim(),i=e.get("password").trim(),n=e.get("password_reset_confirm").trim();return r==""?(this.setState({error:"Reset code cannot be empty."}),!1):i==""||n==""?(this.setState({error:"Password cannot be empty."}),!1):i!=n?(this.setState({error:"Passwords do not match."}),!1):!0}componentDidMount=()=>{this.animateContainer(),document.addEventListener("keydown",this.handleInitialTab,!0)};componentDidUpdate=()=>{this.animateContainer()};componentWillUnmount(){document.removeEventListener("keydown",this.handleInitialTab,!0)}animateContainer=()=>{this.props.animateIn===!1?requestAnimationFrame(()=>{this.containerRef.current&&this.containerRef.current?.classList?.add("active-immediate")}):this.containerRef.current&&!this.containerRef.current.classList.contains("active")&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.containerRef?.current&&this.containerRef?.current?.classList.add("active")})})}},fk=Ue(t=>({site_url:t.site?.site_url,site_id:t.site?.id,domain_active:t.site?.domain_active}),(t,e)=>zt({getAuthToken:e.getAuthTokenAction,setAuthData:(r,i)=>({type:"AUTHENTICATE_USER_FULFILLED",payload:{data:{access_token:r,id:i}}})},t))(N0)});var Rn,Ya=V(()=>{ft();fe();Rn=t=>e=>S(t,{store:qh(),...e})});function QX(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rZ(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.filter(function(i){return i}).join(" ")}var Jge,Qge,O0,D0,L0,ru,eZ,tZ,gk,Nf,eve,vk=V(()=>{is();is();Hh();Ye();jh();Da();Fl();Vh();Jge=function(t){ji(e,t);function e(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,i.history=$h(i.props),i}var r=e.prototype;return r.render=function(){return ze.createElement(Hs,{history:this.history,children:this.props.children})},e}(ze.Component),Qge=function(t){ji(e,t);function e(){for(var i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,i.history=pP(i.props),i}var r=e.prototype;return r.render=function(){return ze.createElement(Hs,{history:this.history,children:this.props.children})},e}(ze.Component),O0=function(e,r){return typeof e=="function"?e(r):e},D0=function(e,r){return typeof e=="string"?Fi(e,null,null,r):e},L0=function(e){return e},ru=ze.forwardRef;typeof ru>"u"&&(ru=L0);eZ=ru(function(t,e){var r=t.innerRef,i=t.navigate,n=t.onClick,o=Li(t,["innerRef","navigate","onClick"]),s=o.target,a=jt({},o,{onClick:function(p){try{n&&n(p)}catch(f){throw p.preventDefault(),f}!p.defaultPrevented&&p.button===0&&(!s||s==="_self")&&!QX(p)&&(p.preventDefault(),i())}});return L0!==ru?a.ref=e||r:a.ref=r,ze.createElement("a",a)}),tZ=ru(function(t,e){var r=t.component,i=r===void 0?eZ:r,n=t.replace,o=t.to,s=t.innerRef,a=Li(t,["component","replace","to","innerRef"]);return ze.createElement(Us.Consumer,null,function(l){l||Hn(!1);var p=l.history,f=D0(O0(o,l.location),l.location),d=f?p.createHref(f):"",m=jt({},a,{href:d,navigate:function(){var v=O0(o,l.location),x=Si(l.location)===Si(D0(v)),_=n||x?p.replace:p.push;_(v)}});return L0!==ru?m.ref=e||s:m.innerRef=s,ze.createElement(i,m)})}),gk=function(e){return e},Nf=ze.forwardRef;typeof Nf>"u"&&(Nf=gk);eve=Nf(function(t,e){var r=t["aria-current"],i=r===void 0?"page":r,n=t.activeClassName,o=n===void 0?"active":n,s=t.activeStyle,a=t.className,l=t.exact,p=t.isActive,f=t.location,d=t.sensitive,m=t.strict,g=t.style,v=t.to,x=t.innerRef,_=Li(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return ze.createElement(Us.Consumer,null,function(E){E||Hn(!1);var O=f||E.location,L=D0(O0(v,O),O),I=L.pathname,D=I&&I.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),R=D?za(O.pathname,{path:D,exact:l,sensitive:d,strict:m}):null,W=!!(p?p(R,O):R),N=typeof a=="function"?a(W):a,z=typeof g=="function"?g(W):g;W&&(N=rZ(N,o),z=jt({},z,s));var $=jt({"aria-current":W&&i||null,className:N,style:z,to:L},_);return gk!==Nf?$.ref=e||x:$.innerRef=x,ze.createElement(tZ,$)})})});var kn,_t,At,Rt,Yr=V(()=>{kn=new Map;typeof window<"u"&&(window.listeners=kn);_t=(t,e,r,i={})=>{let n=t;for(;n&&(kn.has(n)&&kn.get(n).has(e)&&(kn.get(n).get(e)&&kn.get(n).get(e)[0]==null&&console.trace(t,e,r,i),kn.get(n).get(e).forEach(o=>o(r))),i.bubbles!==!1);)n=n.parentNode||n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&n.host},At=(t,e,r)=>{if(!t){console.error("Unable to subscribe to non-existing element");return}kn.has(t)||kn.set(t,new Map);let i=kn.get(t);i.has(e)||i.set(e,[]);let n=i.get(e);n.includes(r)||n.push(r)},Rt=(t,e,r)=>{if(!kn.has(t))return;let i=kn.get(t);if(i.has(e)){if(!r){i.delete(e);return}i.set(e,i.get(e).filter(n=>n!==r)),i.get(e).length===0&&i.delete(e),i.size===0&&kn.delete(t)}}});function Lf(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;let r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(let n=0;n<r.length;n++)if(!hasOwnProperty.call(e,r[n])||!Object.is(t[r[n]],e[r[n]]))return!1;return!0}function hn(t){if(pe)return t;let e,r,i,n=()=>{e={primitiveResults:null,referenceResults:null,primitiveArgs:null,referenceArgs:null},r=!1,i=void 0};n();let o=function(){let a=arguments.length-1;if(a===-1)return r===!1&&(i=t.call(this),r=!0),i;let l=e;for(let g=0;g<a;g+=1){let v=arguments[g],x=v===null||typeof v!="object"&&typeof v!="function",_;x?l.primitiveArgs===null?_=l.primitiveArgs=new Map:_=l.primitiveArgs:l.referenceArgs===null?_=l.referenceArgs=new WeakMap:_=l.referenceArgs,_.has(v)===!1?(l={primitiveResults:null,referenceResults:null,primitiveArgs:null,referenceArgs:null},_.set(v,l)):l=_.get(v)}let p,f=arguments[a],d=f===null||typeof f!="object"&&typeof f!="function",m;return d?l.primitiveResults===null?m=l.primitiveResults=new Map:m=l.primitiveResults:l.referenceResults===null?m=l.referenceResults=new WeakMap:m=l.referenceResults,m.has(f)?p=m.get(f):(p=t.apply(this,arguments),m.set(f,p)),p};return o.clear=function(){let a=arguments.length-1;if(a===-1){n();return}let l=e;for(let d=0;d<a;d+=1){let m=arguments[d],v=m===null||typeof m!="object"&&typeof m!="function"?l.primitiveArgs:l.referenceArgs;if(v===null)return;l=v.get(m)}let p=arguments[a];p===null||typeof p!="object"&&typeof p!="function"?(l.primitiveArgs!==null&&l.primitiveArgs.delete(p),l.primitiveResults!==null&&l.primitiveResults.delete(p)):(l.referenceArgs!==null&&l.referenceArgs.delete(p),l.referenceResults!==null&&l.referenceResults.delete(p))},o}var Xs,iu,iZ,F0,ss,nZ,oZ,Of,bk,wk,Df,yk,xk,nu,_i=V(()=>{Xs=ye(Pe(),1);Pr();Be();ke();Yr();iu=(t={},e)=>{let r={retina:window.devicePixelRatio?window.devicePixelRatio>=1.2:!1,square:!1,url:"",webgl:t.hasOwnProperty("t")&&t.t=="webgl"};t=Xs.default.extend(r,t),t.t==="original"&&(t.retina=!1),t.retina===!0&&!t.webgl&&(t.q==null&&(t.q=75),t.hasOwnProperty("w")&&(t.w=Math.min(t.w*2,e.width)),t.hasOwnProperty("h")&&(t.h=Math.min(t.h*2,e.height))),t.w&&t.w>e.width&&(t.w=e.width),t.h&&t.h>e.height&&(t.h=e.height);var i=iZ(t.w,t.h,e);t.w=i.w,t.h=i.h;var n=["t","w","h","q","c"],o=[];return Xs.default.each(t,function(s,a){n.indexOf(a)===-1||s===""||(a==="c"?o.push("c/"+s.x+"/"+s.y+"/"+s.w+"/"+s.h):o.push(a+"/"+s))},void 0),e.hash!==void 0&&e.name!==void 0&&i.w>0?t.url="https://freight.cargo.site/"+o.join("/")+"/i/"+e.hash+"/"+e.name:t.url="",t},iZ=(t,e,r)=>{let i=t,n=e,o=parseInt(r.width),s=parseInt(r.height);if(o==s)i=t||e||o,n=i;else if(t&&!e){let a=o/t;n=Math.floor(s/a),i=t}else if(e&&!t){let a=s/e;i=Math.floor(o/a),n=e}else{let a=Math.min(s/e,o/t);i=Math.floor(o/a),n=Math.floor(s/a)}return{w:i,h:n}},F0=(t=1,e)=>{!t||t<1||requestAnimationFrame(()=>{e?.(),F0(--t,e)})};ss=(t,e,r,i,n=0,o={})=>{o.context=o.context||{};let s=(t.byParent[i.id]||[]).reduce((a,l)=>(a[t.indexById[l]]=l,a),{});for(;n>=0&&n<i.page_count&&o.context.hasBreak!==!0;){let a=s[n],l=a&&(e.byId[a]||r.byId[a]);if(!(l?.page_type==="set"&&o.includeSets!==!0)&&o.callback?.(i.id,n,l)==="break"){o.context.hasBreak=!0;break}l?.page_type==="set"&&ss(t,e,r,l,o.reverse===!0?l.page_count-1:0,{...o,traverseUp:!1}),o.reverse===!0?n--:n++}if(o.traverseUp!==!1&&(o.reverse===!0&&n<0||o.reverse===!1&&n>i.page_count-1)){let a=r.byId[Xs.default.findKey(t.byParent,p=>p.includes(i.id))],l=t.indexById[i.id];if(a&&l!==void 0){if(o.includeSets&&o.callback?.(a.id,l,i)==="break"){o.context.hasBreak=!0;return}ss(t,e,r,a,l+(o.reverse===!0?-1:1),o)}}};nZ=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout;lt.debounceRendering=t=>{nZ(()=>{_t(document,"preact-render-start"),t(),_t(document,"preact-render-complete")})};oZ=lt.debounceRendering,Of=null,bk=()=>{lt.debounceRendering=t=>{Of=t}},wk=t=>{Of&&!t&&(_t(document,"preact-render-start"),Of(),_t(document,"preact-render-complete")),Of=null,lt.debounceRendering=oZ},Df=new WeakMap,yk=lt.diffed;lt.diffed=t=>{Df.has(t)&&Df.get(t)(t.__e),yk&&yk(t)};xk=(t,e)=>(Df.set(t,e),()=>{Df.delete(t)}),nu=(t,e)=>{if(!t)return null;let r="",i=(o,s)=>{let a=s.style?.getPropertyValue(o);return a!==""&&a!==void 0?a:null},n=[];return Xs.default.each(t.rules,o=>{let s=o.selectorText,a={},l=!1,p=!1,f=!1;o.cssText&&o.cssText.includes("--text-style")&&(p=!0,n.push(s+" a"),n.push(s+" a:hover")),o.cssText&&Xs.default.each(n,g=>{o.cssText.includes(g)&&(p=!0)}),o?.selectorText?.includes(".mobile")&&(f=!0),Xs.default.each(e,g=>{let v=!1;Array.isArray(g.denyList)&&g.denyList.forEach(_=>{_.includes("match:")&&s?.match(_.replace("match:",""))&&(v=!0),s&&s===_&&(v=!0)});let x=!1;Array.isArray(g.allowList)?g.allowList.forEach(_=>{_.includes("match:")&&s?.match(_.replace("match:",""))&&(x=!0),s&&s===_&&(x=!0)}):x=!0,(p||f)&&(v=!0),!(v===!0||x===!1)&&(a=g.properties.reduce((_,E)=>(E&&(_[E]=i(E,o)),_),a))});let d=".mobile "+s,m=Array.from(t.rules).find(g=>g.selectorText===d);m&&Object.keys(a).forEach(g=>{i(g,m)&&(a[g]=null)}),!(Object.values(a).every(g=>g===null)||Object.values(a).length===0)&&(r+=d+" { ",Xs.default.each(a,(g,v)=>{if(g){let x=g.split(" ").reduce((_,E,O)=>_+` calc(${E} * var(--mobile-padding-offset))`,"");r+=`${v}: ${x};`}}),r+=" } ")}),r}});function uZ(t,e){let r=lZ(t.pages.byId,ou),i=aZ(r,t.structure.bySort),n=sZ(r);return{renderedPages:r,renderedPins:i,nestingMap:n,sortMap:t.structure.bySort,adminMode:t.frontendState.adminMode}}var yr,as,B0,ou,z0,sZ,aZ,lZ,Sk,Ed=V(()=>{ke();Ye();Pr();yr=ye(Pe(),1);ft();_i();fe();as=In(),B0=()=>{},ou=[],z0=class extends Tr{constructor(e){super(e),this.state={adjustPairs:[],levelData:{},pageHeights:{},renderedPins:[],renderedPages:[],nestingMap:{},onPageMount:r=>{ou=[...ou,r]},onPageUnmount:r=>{ou=ou.filter(i=>i!==r)}},B0=this.updateHeights}updateHeights=e=>{this.setState(r=>({pageHeights:{...r.pageHeights,...e}}))};getTallestOfAdjusterCandidates=e=>{let r=null,i=[];yr.default.each(e,o=>{i.push({pageID:o.id,pageName:o.title,pageHeight:this.getHeightById(o.id)})});let n=yr.default.maxBy(i,o=>o.pageHeight);return n!==void 0?yr.default.filter(e,o=>o.id===n.pageID)[0]:!1};componentDidUpdate=(e,r)=>{this.makePinAdjustments(e,r)};findTallestOverlayAdjusterPageInLevel=(e,r)=>{let i=e.filter(n=>n.pin_options?.overlay===!0&&n.pin_options.adjust===!0);return i.length>0?this.getTallestOfAdjusterCandidates(i):null};getAdjustOnlyPageHeights=(e,r)=>{let i=yr.default.filter(this.props.nestingMap[r][e],o=>o.pin_options?.adjust&&!o.pin_options?.overlay),n=0;return yr.default.each(i,o=>{n+=this.getHeightById(o.id)}),n};getAdjustOnlyPinsByLevel=(e,r)=>yr.default.filter(this.props.nestingMap[r][e],i=>!i?.pin_options?.overlay);getOverlayPinsByLevel=(e,r)=>yr.default.filter(this.props.nestingMap[r][e],i=>i?.pin_options?.overlay);getClosestPageByProximity=(e,r)=>e.sort((i,n)=>r==="top"?this.props.sortMap[i.id]-this.props.sortMap[n.id]:this.props.sortMap[n.id]-this.props.sortMap[i.id])[0];getPagesToAdjust=(e,r)=>{let i=[],n=null,o=this.getAdjustOnlyPinsByLevel(e,r);if(o.length>0?i.push(this.getClosestPageByProximity(o,e)):yr.default.each(this.props.nestingMap,(s,a)=>{if(parseInt(a)>r&&s[e].length>0){let l=s[e].filter(f=>f.pin_options?.overlay===!0),p=s[e].filter(f=>f.pin_options?.overlay===!1);if(i=l.length>0?l:[],i.length===0&&p?.length>0&&i.push(this.getClosestPageByProximity(p,e)),n=a,i.length>0)return!1}}),i[0]===void 0){let s=this.props.renderedPages.filter(l=>l.pin===!1).sort((l,p)=>this.props.sortMap[l.id]-this.props.sortMap[p.id]),a=e==="top"?0:s.length-1;s.length>0&&i.push(s[a])}return{adjustedPages:i,adjustedLevel:n}};getHeightById=e=>this.state.pageHeights[e]??ou.find(r=>r.id===e)?.getBoundingClientRect().height;makePinAdjustments=(e,r)=>{if(!this.props.renderedPages||this.props.renderedPages.length===0||yr.default.isEqual(this.props.renderedPins,e.renderedPins)&&yr.default.isEqual(this.state.pageHeights,r.pageHeights)&&yr.default.isEqual(this.props.renderedPages,e.renderedPages)&&yr.default.isEqual(this.props.sortMap,e.sortMap))return;let i=[],n={levels:{},locations:{top:{totalHeight:0},bottom:{totalHeight:0}}};yr.default.each(this.props.nestingMap,(l,p)=>{let f={};p=parseInt(p),f.level=p,yr.default.each(l,(d,m)=>{if(m==="center")return;f[m]={adjustsSelf:!1,totalHeight:0,startingHeight:null,adjusterId:null,adjusterHeight:null,adjustedLevel:null,adjusteeIDs:null,hasOverlayPins:null};let g=f[m];g.hasOverlayPins=this.getOverlayPinsByLevel(m,p).length>0;let v=this.findTallestOverlayAdjusterPageInLevel(d,m);if(v){g.adjusterId=v.id,g.adjusterHeight=this.getHeightById(v.id),g.adjustsSelf=this.getAdjustOnlyPinsByLevel(m,p).length>0;let O=this.getPagesToAdjust(m,p).adjustedPages;O?.length>0&&(g.adjustedLevel=this.props.renderedPins[O[0].id]?.depth??"content",g.adjusteeIDs=yr.default.map(O,"id"),i[v.id]={adjusts:yr.default.map(O,"id"),location:m,adjustedHeight:this.getHeightById(v.id)})}let x=0,_=v?this.getHeightById(v.id):0,E=!0;g.totalHeight=(E?_:0)+this.getAdjustOnlyPageHeights(m,p),yr.default.each(n.levels,function(O,L){L<p&&(x+=O[m].totalHeight)}),g.startingHeight=x===0?null:x}),n.levels[p]=f});let s=(this.props.nestingMap[0]?.top||[]).filter(l=>{let p=l.pin_options;return p?.fixed===!0&&p?.adjust===!0}),a=s.length>0?this.getHeightById(this.getTallestOfAdjusterCandidates(s)?.id):null;(!yr.default.isEqual(r.adjustPairs,i)||!yr.default.isEqual(r.renderedPins,this.props.renderedPins)||!yr.default.isEqual(r.levelData,n))&&this.setState({adjustPairs:i,renderedPins:this.props.renderedPins,levelData:n,totalTopFixedPinsHeight:a})};getAdjustingLevelHeight=(e,r,i)=>{let n=null;return yr.default.each(e.levels,o=>{o[i].adjustedLevel===r&&(n=o[i].totalHeight)}),n};render(){return S(as.Provider,{value:this.state,children:this.props.children||null})}},sZ=hn(t=>{let e=store.getState();return t.reduceRight((r,i)=>{let n=nt.getParentSetList(e,i.id).length-1;i.pin===!0&&i.pin_options.fixed===!0&&(n=0),r[n]||(r[n]={top:[],bottom:[],center:[]});let o=r[n],s=i.pin?i.pin_options.position:"center",a=o[s];return a.push(i),a.sort((l,p)=>e.structure.bySort[l.id]-e.structure.bySort[p.id]),r},{})}),aZ=hn((t,e)=>{let r=store.getState(),i=t.map(n=>({depth:nt.getParentSetList(r,n.id).length-1,pageListSort:e[n.id],id:n.id,fixed:n.pin_options?.fixed&&n.pin_options?.fixed===!0})).sort((n,o)=>n.pageListSort-o.pageListSort).sort((n,o)=>{if(n.fixed||o.fixed)return n.depth-o.depth});return t.reduceRight((n,o,s)=>{if(o.pin===!0&&yr.default.isPlainObject(o.pin_options)){let a=nt.getParentSetList(r,o.id).length-1;n[o.id]={depth:o.pin_options.fixed?0:nt.getParentSetList(r,o.id).length-1,originalDepth:a,location:o.pin_options?.position,type:o.pin_options.fixed?"fixed":o.pin_options.overlay?"overlay":"adjust",adjusts:o.pin_options?.adjust,sort:e[o.id],pinSort:i.findIndex(l=>l.id===o.id)+1}}return n},{})}),lZ=hn((t,e)=>e.map(r=>t[r.id]).filter(r=>r!==void 0&&r.overlay!==!0));Sk=Ue(uZ)(z0)});function Ut(t){class e extends me{constructor(i){super(i)}render(i){return S(t,{...this.props,pageInfo:this.context})}}return e.contextType=_k,e}var Ff,_k,q0,zf,zr=V(()=>{ke();ft();fe();Ff=new Map,_k=In({isEditing:!1,pid:null,filterIndexes:[],setPageData:()=>!1,getPageData:()=>!1},"PageInfoContext"),q0=class extends me{constructor(e){super(e)}setPageData=(e={},r)=>{if(!this.props.pageRef.current)return;let n=Array.from(this.props.pageRef.current.querySelectorAll(r.tagName)).indexOf(r);if(n!==-1){let o=Ff.get(this.props.value.pid+"-"+r.tagName+"-"+n);o?o={...o,...e}:o=e,Ff.set(this.props.value.pid+"-"+r.tagName+"-"+n,o)}};getPageData=e=>{if(!this.props.pageRef.current)return null;let i=Array.from(this.props.pageRef.current.querySelectorAll(e.tagName)).indexOf(e);return i!==-1?Ff.get(this.props.value.pid+"-"+e.tagName+"-"+i)||{}:{}};getContextObject=()=>(this.props.value!==this.lastProps?.value&&(this.currentContextValue={...this.props.value,setPageData:this.setPageData,getPageData:this.getPageData}),this.lastProps=this.props,this.currentContextValue);render(e){return S(_k.Provider,{value:this.getContextObject(),children:e.children})}componentDidUpdate(e){e.adminMode!==this.props.adminMode&&Ff.clear()}};zf=Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(q0)});var Bf,Ek,Ck=V(()=>{Bf=()=>new Map,Ek=(t,e,r)=>{let i=t.get(e);return i===void 0&&t.set(e,i=r()),i}});var Pk,Ik=V(()=>{Pk=()=>new Set});var Ak,Sve,Tk=V(()=>{Ak=Array.from,Sve=Array.isArray});var qf,Mk=V(()=>{Ck();Ik();Tk();qf=class{constructor(){this._observers=Bf()}on(e,r){Ek(this._observers,e,Pk).add(r)}once(e,r){let i=(...n)=>{this.off(e,i),r(...n)};this.on(e,i)}off(e,r){let i=this._observers.get(e);i!==void 0&&(i.delete(r),i.size===0&&this._observers.delete(e))}emit(e,r){return Ak((this._observers.get(e)||Bf()).values()).forEach(i=>i(...r))}destroy(){this._observers=Bf()}}});var kk,su,Rk,U0,ot,H0=V(()=>{kk=ye(Pe());Mk();Be();U0=class extends qf{constructor(){super(),this.data={baseUnit:-1,mobile:{portrait:!0,active:!1,chrome:0,maxHeight:720,minHeight:720},window:{w:1280,h:720}},pe||(this.isInstagram=mb(),this.SvhSupported=CSS.supports("height","100svh"),this.SvhSupported&&(this.minHeightMeasuringStick=document.createElement("div"),this.minHeightMeasuringStick.setAttribute("style","position: fixed; top: 0;left: 0;z-index: -99; visibility: hidden; height: 100svh;"),this.minHeightMeasuringStick.setAttribute("tabindex",-1),this.minHeightMeasuringStick.setAttribute("aria-hidden",!0),document.body.appendChild(this.minHeightMeasuringStick)),this.maxHeightMeasuringStick=document.createElement("div"),this.maxHeightMeasuringStick.setAttribute("style","position: fixed; top: 0;left: 0;z-index: -99; visibility: hidden; height: 100vh;"),this.maxHeightMeasuringStick.setAttribute("tabindex",-1),this.maxHeightMeasuringStick.setAttribute("aria-hidden",!0),document.body.appendChild(this.maxHeightMeasuringStick),this.mobilePortraitMediaQuery=window.matchMedia("(max-aspect-ratio: 4/5)"),this.mobileLandscapeMediaQuery=window.matchMedia("(min-aspect-ratio: 2/3) and (max-height: 500px)"),this.setupMobileListener(),this.onWindowResize(),window._windowInfo=this,window.addEventListener("resize",this.onWindowResize,{passive:!0}))}setupStore(e){e.subscribe(()=>{let r=e.getState();r.frontendState&&r.frontendState.adminMode!==Rk&&(setTimeout(()=>{this.onWindowResize()},150),Rk=r.frontendState.adminMode),r.adminState&&r.adminState.viewport!==su&&(su=r.adminState.viewport,this.onMobileChange())})}setupMobileListener(){this.mobilePortraitMediaQuery.removeEventListener("change",this.onMobileChange),this.mobileLandscapeMediaQuery.removeEventListener("change",this.onMobileChange),this.onMobileChange(),this.mobilePortraitMediaQuery.addEventListener("change",this.onMobileChange),this.mobileLandscapeMediaQuery.addEventListener("change",this.onMobileChange)}onMobileChange=()=>{let e;su?e=su==="mobile":e=this.mobilePortraitMediaQuery.matches||this.mobileLandscapeMediaQuery.matches;let r=this.mobilePortraitMediaQuery.matches||su&&su==="mobile"||!1;(e!==this.data.mobile.active||e&&r!==this.data.mobile.portrait)&&(this.data.mobile.active=e,this.data.mobile.portrait=r,this.onWindowResize(),this.emit("mobile-change",[e]))};getBaseUnit(e){e=e||{};var r=0;return e=kk.default.extend(!0,{height:this.data.window.h,width:this.data.window.w,min:11,max:!1,weight:5},e),r=e.width<e.height?e.width:e.height,r/=100/e.weight,e.min&&r<e.min&&(r=e.min),e.max&&r>e.max&&(r=e.max),r}onWindowResize=()=>{let{data:e}=this,r=document.documentElement.clientWidth,i=window.innerHeight,n=0,o=0,s=this.maxHeightMeasuringStick.getBoundingClientRect().height;if(this.SvhSupported)o=this.minHeightMeasuringStick.getBoundingClientRect().height;else{let m=100;o=0;let g;for(;;){let v=window.matchMedia.call(window,"(min-height:"+o+"px)").matches;if(g!==void 0&&v!==g&&(m/=2,m*=-1),o+=m,g=v,Math.abs(m)<.01){o=Math.round(o);break}}}n=s-o;let a=0,l=5,p=0,f=9;o+n>r&&(a=(o+n)/r-1),a=a/.777777778,a>1&&(a=1),e.mobile.active&&!e.mobile.portrait&&(f=18),p=this.getBaseUnit({weight:f+l*a,min:20,width:r,height:o+n});let d=!this.isInstagram;if(!d){let m=e.window.w,g=e.window.h;switch(!0){case m!=r:case Math.abs(g-i)>150:d=!0;break;default:d=!1;break}}d&&(e.window.h=i,e.window.w=r,e.mobile.minHeight=o,e.mobile.maxHeight=s,e.mobile.chrome=e.mobile.maxHeight-e.window.h,e.baseUnit=p,p!==e.size&&(document.documentElement.style.setProperty("--base-size",p*.16+"px"),document.documentElement.style.setProperty("--viewport-height",i+"px"),document.documentElement.style.setProperty("--min-viewport-height",o+"px")),this.data=e),this.emit("window-resize",[])};applyGrid=e=>{e==null&&(e=this.data.mobile.active);let r=this.data.window.w,i=this.data.window.h;e&&(i=this.data.mobile.minHeight);let n=Math.max(Math.round(r*(40/1920)),15),o=Math.max(Math.round(r*(25/1920)),15),s=15,a=e?4:8,l=8,p=4,f=4,d=r-s*2,m=i-s*2,g=d/2,v=(d-(a-1)*n)/a;g=Math.floor(g/f)*f;let x=d-g;document.documentElement.style.setProperty("--grid-width",d+"px"),document.documentElement.style.setProperty("--grid-height",m+"px"),document.documentElement.style.setProperty("--grid-cell-height",m/l+"px"),document.documentElement.style.setProperty("--grid-cell-height-rounded",Math.round(m/l)+"px"),document.documentElement.style.setProperty("--grid-subcell-height",m/(l*3)+"px"),document.documentElement.style.setProperty("--grid-leftPanel-width",x+"px"),document.documentElement.style.setProperty("--grid-rightPanel-width",g+"px"),document.documentElement.style.setProperty("--grid-cell-width",v+"px"),document.documentElement.style.setProperty("--grid-subcell-width",(v-o*2)/3+"px"),document.documentElement.style.setProperty("--grid-column-gap",n+"px"),document.documentElement.style.setProperty("--grid-subcolumn-gap",o+"px")}},ot=new U0});var Br=V(()=>{H0();H0()});function Eo(t){class e extends me{constructor(i){super(i),this.lastScrollUIDRef=xe()}render(){return S(t,{...this.props,scrollContext:this.context})}componentDidMount(){this.context&&this.props.baseNode&&(this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid),this.props.baseNode}refreshScrollContext=i=>{i.element==this.props.baseNode&&this.props.baseNode&&(this.context.removeElementFromScrollContext(this.props.baseNode,this.context.scrollUid),setTimeout(()=>{this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid},0))};componentWillUnmount(){this.props.baseNode&&this.context&&this.context.removeElementFromScrollContext(this.props.baseNode,this.context.scrollUid)}componentDidUpdate(i,n){this.props.baseNode!==i.baseNode?(i.baseNode&&this.context.removeElementFromScrollContext(i.baseNode,this.context.scrollUid),this.props.baseNode&&this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid):this.lastScrollUIDRef.current!==this.context.scrollUid&&this.props.baseNode&&(this.lastScrollUIDRef.current&&this.context.removeElementFromScrollContext(this.props.baseNode,this.lastScrollUIDRef.current),this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid)}}return e.contextType=V0,e}function fZ(t){return zt({updateFrontendState:Ge.updateFrontendState},t)}var W0,hZ,V0,au,lu,Xa,Za,Nk,Uf,uu,Co=V(()=>{ke();W0=ye(Pe(),1);Be();tr();ke();Ye();xr();ft();Br();Yr();fe();hZ={scrollUid:"default",scrollingElement:null,getScrollPosition:()=>({scrollHeight:0,scrollWidth:0,x:0,y:0,w:0,h:0}),scrollIntoView:()=>{},removeElementFromScrollContext:()=>{},addElementToScrollContext:()=>{},updateScrollPosition:()=>{}},V0=In(W0.default.cloneDeep(hZ)),au={},lu={},Xa={default:new Set};pe||(Za=new ResizeObserver(function(t){t.forEach(function(e){_t(e.target,"elementResize",null,{bubbles:!1})})}));Nk=(t,e)=>{t.forEach(function(r){let i="inside";r.boundingClientRect.bottom<0&&!r.isIntersecting?i="above":r.boundingClientRect.top>=0&&!r.isIntersecting&&(i="below"),_t(r.target,e,{hasLayout:r.boundingClientRect.width>0&&r.boundingClientRect.height>0,visible:r.isIntersecting,position:i},{bubbles:!1})})},Uf=class extends Tr{constructor(e){super(e),this.state={scrollUid:"default",scrollingElement:null,getScrollPosition:this.getScrollPosition,scrollIntoView:this.scrollIntoView,updateScrollPosition:this.updateScrollPosition,addElementToScrollContext:this.addElementToScrollContext,removeElementFromScrollContext:this.removeElementFromScrollContext},this.scrollData={x:0,y:0,w:0,h:0}}addElementToScrollContext=(e,r)=>{if(r=="default")return;let i=e.classList.contains("quick-view-item"),n=e.parentNode?.nodeName==="GALLERY-SLIDESHOW",o=e.parentNode?.nodeName==="MARQUEE-INNER",s=e.hasAttribute("uses")&&e.getAttribute("uses").includes("flying-object");i||n||o||s?(i||s)&&(_t(e,"lazyLoadIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1}),_t(e,"viewportIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})):Xa[r].has(e)||(Xa[r].add(e),lu[r].observe(e),au[r].observe(e))};removeElementFromScrollContext=(e,r)=>{lu[r]?.unobserve(e),au[r]?.unobserve(e),Xa[r]?.delete(e)};updateScrollPosition=e=>{if(pe||!this.state.scrollingElement)return;let r=e.x||this.scrollData.x,i=e.y||this.scrollData.y;this.state.scrollingElement===window?document.scrollingElement.scrollTo({top:i,left:r,behavior:"instant"}):this.state.scrollingElement.scrollTo({top:i,left:r,behavior:"instant"})};onScrollRequest=e=>{if(e.defaultPrevented)return;e.stopPropagation(),e.preventDefault();let r={...e.detail};this.scrollIntoView(e.target,r)};scrollIntoView=(e=null,r={})=>{this.onScroll(),this.onResize();let{transitionTime:i=1e3,preventQuickViewClose:n=!0,lazyScroll:o=!1,callback:s=null,verticalAlign:a="center",windowAlign:l="center",easing:p="easeInOutCubic",offset:f={x:0,y:0}}=r;if(!(this.state.scrollingElement===window?document.scrollingElement:this.state.scrollingElement).contains(e)||!e){s&&s();return}let m=e.getBoundingClientRect();for(;m.width===0&&m.height==0&&e;)e=e.parentElement,m=e.getBoundingClientRect();let g=m.left+m.width*.5,v=m.top,x=0;switch(a){case"center":x=m.height*.5;break;case"bottom":x=m.height;break;case"top":x=0;break}let _=document.documentElement.clientWidth,E=document.documentElement.clientHeight,O=0;switch(l){case"top":O=0;break;case"bottom":O=-E;break;case"center":default:O=-E+.5;break}if(o&&m.bottom>=20&&m.right>=20&&m.top<=E-20&&m.left<=_-20){s&&s();return}let L=this.getScrollPosition(),I={...L},D=L.x,R=L.y,W=Math.max(0,Math.min(L.scrollWidth-_,D-(_*.5-g)));W+=f.x;let N=Math.max(0,Math.min(L.scrollHeight-E,R+v+x+O+f.y)),z=0,$=0;cancelAnimationFrame(this.scrollAnimationFrame);var q=()=>{cancelAnimationFrame(this.scrollAnimationFrame),this.state.scrollingElement.removeEventListener("mousewheel",q),this.props.updateFrontendState({quickView:{autoScrolling:!1}}),s&&s()};this.state.scrollingElement.addEventListener("mousewheel",q);let J=X=>{let se=$===0?0:X-$;$=X,z=z+se;let ee=0;if(tt[p])ee=tt[p](z/i);else if(typeof p=="function")ee=p(z/i);else switch(p){case"linear":ee=z/i;break;default:ee=gb(z/i);break}let Z=this.getScrollPosition(),te=e.getBoundingClientRect().top,ie=Math.max(0,Math.min(Z.scrollHeight-E,Z.y+te+x+O+f.y))-N;ie!==0&&(N+=ie,R+=ie),z<=i?(this.updateScrollPosition({x:D+(W-D)*ee,y:R+(N-R)*ee}),this.scrollAnimationFrame=requestAnimationFrame(J)):(this.updateScrollPosition({x:W,y:N}),q())};this.props.updateFrontendState({quickView:{autoScrolling:n}}),i==0?(this.updateScrollPosition({x:W,y:N}),q()):this.scrollAnimationFrame=requestAnimationFrame(J)};render(){return S(V0.Provider,{value:this.props.passthrough?this.context:this.state,children:this.props.children})}componentDidUpdate(e,r,i){pe||(this.checkScrollElement(),this.state.scrollingElement!=r.scrollingElement&&this.removeListeners(r))}setNewElement=e=>{let r=W0.default.uniqueId();if(Xa[r]=new Set,e==window)At(document.scrollingElement,"elementResize",this.onResize),Za.observe(document.scrollingElement),window.addEventListener("scroll",this.onScroll,{passive:!1}),window.addEventListener("request-scroll",this.onScrollRequest,{passive:!1});else{At(e,"elementResize",this.onResize),e.addEventListener("request-scroll",this.onScrollRequest,{passive:!1});let i=e.querySelector("bodycopy");i&&(Za.observe(i),At(i,"elementResize",this.onResize)),Za.observe(e),e.addEventListener("scroll",this.onScroll,{passive:!1})}lu[r]=new IntersectionObserver(i=>Nk(i,"viewportIntersectionChange"),{root:e==window?document:e,rootMargin:"0px",threshold:0}),au[r]=new IntersectionObserver(i=>Nk(i,"lazyLoadIntersectionChange"),{root:e==window?document:e,rootMargin:window.screen.height*1.5+"px "+window.screen.width*1.5+"px",threshold:0}),this.setState({scrollUid:r,scrollingElement:e},()=>{this.onResize()})};removeListeners=e=>{if(e.scrollingElement){if(e.scrollingElement==window)window.removeEventListener("resize",this.onResize),window.removeEventListener("scroll",this.onScroll,{passive:!0}),Za.unobserve(document.scrollingElement),window.removeEventListener("request-scroll",this.onScrollRequest,{passive:!1});else{Rt(e.scrollingElement,"elementResize",this.onResize),e.scrollingElement.removeEventListener("request-scroll",this.onScrollRequest,{passive:!1}),e.scrollingElement.removeEventListener("scroll",this.onScroll,{passive:!0});let r=e.scrollingElement.querySelector("bodycopy");r&&(Za.unobserve(r),Rt(r,"elementResize",this.onResize)),Za.unobserve(e.scrollingElement)}Object.keys(Xa[e.scrollUid]).forEach(r=>{au[e.scrollUid].unobserve(r),lu[e.scrollUid].unobserve(r),Xa[e.scrollUid].delete(r)})}e.scrollUid!="default"&&(au[e.scrollUid].disconnect(),lu[e.scrollUid].disconnect(),delete au[e.scrollUid],delete lu[e.scrollUid],delete Xa[e.scrollUid])};checkScrollElement=()=>{!pe&&this.props.scrollingElement.current&&this.props.scrollingElement.current!=this.state.scrollingElement&&!this.props.passthrough?this.setNewElement(this.props.scrollingElement.current):this.state.scrollingElement!==null&&this.props.passthrough&&this.setState({scrollingElement:null,scrollUid:"default"})};componentDidMount(){pe||this.checkScrollElement()}componentWillUnmount(){pe||(cancelAnimationFrame(this.scrollAnimationFrame),cancelAnimationFrame(this.onScrollFrame),this.removeListeners(this.state))}onResize=e=>{pe||!this.state.scrollingElement||(e&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()),this.state.scrollingElement===window?(this.scrollData.scrollHeight=document.scrollingElement.scrollHeight,this.scrollData.scrollWidth=document.scrollingElement.scrollWidth,this.scrollData.h=document.documentElement.clientHeight,this.scrollData.w=document.documentElement.clientWidth):(this.scrollData.scrollHeight=this.state.scrollingElement.scrollHeight,this.scrollData.scrollWidth=this.state.scrollingElement.scrollWidth,this.scrollData.h=this.state.scrollingElement.clientHeight,this.scrollData.w=this.state.scrollingElement.clientWidth),this.onScroll())};onScroll=()=>{pe||!this.state.scrollingElement||this.props.passthrough||(this.state.scrollingElement===window?(this.scrollData.x=window.pageXOffset||document.scrollingElement.scrollLeft||document.documentElement.scrollLeft||0,this.scrollData.y=window.pageYOffset||document.scrollingElement.scrollTop||document.documentElement.scrollTop||0):(this.scrollData.x=this.state.scrollingElement.scrollLeft,this.scrollData.y=this.state.scrollingElement.scrollTop))};getScrollPosition=()=>({...this.scrollData})};Uf.contextType=V0;uu=Ue((t,e)=>({quickView:t.frontendState.quickView}),fZ)(Uf)});function mZ(t,e,r,i){if(pe)return;r=r||t.observedAttributes||Object.keys(t.propTypes||{});function n(){let s=Reflect.construct(HTMLElement,[],n);s.__observedAttributes=r,s._editorProperties={},s._vdomComponent=t,s.attachShadow({mode:"open",delegatesFocus:i&&i.delegatesFocus}),s._customSlots=i&&i.customSlots?i.customSlots:[],s._replaceChild=i&&i.replaceChild,s._props={},s._uid=cu.default.uniqueId(),s._initialMount=!0;let a=l=>{let p=new WeakMap;l.forEach(f=>{switch(f.type){case"childList":s._customElementComponent&&(p.has(s.children)||p.set(s.children,Array.from(s.children)),s._customElementComponent.setState({childArray:p.get(s.children)}));break;case"attributes":let d=f.target.getAttribute(f.attributeName);f.attributeName!=="style"&&f.attributeName!=="class"&&d!==s[f.attributeName]&&(d==null&&(d=void 0),s.__observedAttributes?.indexOf(f.attributeName)>-1?s[f.attributeName]=d:s._customElementComponent&&s._customElementComponent.setState(m=>{let g={...m.baseNodeProps};if(g[f.attributeName]!==d)return g[f.attributeName]=d,{baseNodeProps:g}}),s._props[f.attributeName]=d);break}})};return s.__observer=new MutationObserver(a),s.flushMutationQueue=function(){let l=s.__observer.takeRecords();l.length>0&&a(l)},r.forEach(l=>{let p=cu.default.camelCase(l),f=function(){return s._customElementComponent?s._customElementComponent.state.baseNodeProps[l]:s._props?.[l]??void 0},d=function(m){let g=m;g=g==null||g===""?void 0:g,g=g==="true"?!0:g,g=g==="false"?!1:g;let v=!1,x=typeof g;if((g==null||x==="string"||x==="boolean"||x==="number")&&(v=!0),s._customElementComponent&&s._customElementComponent.setState(_=>{let E={..._.baseNodeProps};if(E[l]!==g)return E[l]=g,{baseNodeProps:E}}),s._props[l]=g,v){let _=l.toLowerCase();m===""||m===void 0||m==null?s._customElementComponent.props.baseNode.hasAttribute(_)&&_!=="tag-text"&&s.removeAttribute(_):m!==""&&m!==s.getAttribute(_)&&s.setAttribute(_,m)}};Object.defineProperty(s,l,{get:f,set:d,configurable:!0}),Object.defineProperty(s,p,{get:f,set:d,configurable:!0})}),s}n.prototype=Object.create(HTMLElement.prototype),n.prototype.constructor=n,n.prototype.connectedCallback=gZ,n.prototype.disconnectedCallback=yZ,n.prototype.adoptedCallback=vZ;let o=e||t.tagName||t.displayName||t.name;return i?.extends?customElements.get(o)||customElements.define(o,n,{extends:i.extends}):customElements.get(o)||customElements.define(o,n)}function gZ(){if(this.ownerDocument?.defaultView?.frameElement?.id=="contentEditableStyleTester"||this.hasAttribute("no-component"))return;let t=this.nodeName=="TEXT-ICON";if(this._initialMount){let r=document.createElement("style");r.id="space-filler",t?r.innerHTML=`:host {
				height: 1.2em;
				width: 1.2em;
				contain: layout;
				cursor: text;

				margin-top: -1em;
				margin-bottom: -.25em;
				display: inline-block;
				vertical-align: baseline;
			
				position: relative;
			}`:r.innerText=":host { display: block; opacity: 0; }",this.shadowRoot.appendChild(r)}delete this._initialMount,this.__observer.observe(this,{attributes:!0,childList:!0,subtree:!1});let e={element:this,portalHost:null};t?e.component=S(Hf,{baseNode:this,customElementComponent:this._vdomComponent,observedAttributes:this.__observedAttributes},"custom-element-"+this._uid):e.component=S(bZ,{baseNode:this,customElementComponent:this._vdomComponent,observedAttributes:this.__observedAttributes},"custom-element-"+this._uid),_t(this,"custom-element-connected",e),this._portalHost=e.portalHost,this._portalHost===null&&$0.push(this)}function vZ(){}function yZ(){this.ownerDocument?.defaultView?.frameElement?.id=="contentEditableStyleTester"||this.hasAttribute("no-component")||(this.__observer.disconnect(),this._portalHost&&_t(this._portalHost,"custom-element-disconnected",{component:null,element:this}),this._portalHost=null,this._selectState=null)}var cu,$0,Hf,bZ,Po,sr,Xr=V(()=>{ke();Ye();_i();cu=ye(Pe(),1);Be();ft();Co();Yr();fe();$0=[];Hf=class extends me{constructor(e){super(e);let r=this.getPropsFromAttributes();this.state={baseNodeProps:{...r,...e.baseNode._props},childArray:Array.from(e.baseNode.children)},e.baseNode._customElementComponent=this}getPropsFromAttributes=()=>{let e=this.props.baseNode.attributes,r=0,i={};for(r=e.length;r--;){let n=e[r].value==="true"?!0:e[r].value;n=n==="false"?!1:n,i[e[r].name]=n}return{...i,...this.props.baseNode._props}};componentDidMount(){if(pe)return;let e=this.getPropsFromAttributes();this.setState(r=>cu.default.isEqual(e,this.state.baseNodeProps)?null:{baseNodeProps:e}),At(this.props.baseNode,"custom-element-connected",this.refreshAttributes)}componentWillUnmount(){Rt(this.props.baseNode,"custom-element-connected",this.refreshAttributes)}refreshAttributes=e=>{if(e.element==this.props.baseNode){let r=this.getPropsFromAttributes();this.setState(i=>cu.default.isEqual(r,this.state.baseNodeProps)?null:{baseNodeProps:r})}};render(e,r){let{baseNodeProps:i,childArray:n}=r;return Lt(this.props.customElementComponent,{...e,...i,childArray:n})}},bZ=Eo(Hf),Po=class extends Tr{constructor(e){super(e),this.state={portals:[]},!pe&&(Dc(this.props.portalHost)?this.stopListeningToVnodeDiff=xk(this.props.portalHost,this.onPortalHostMounted):this.props.portalHost instanceof Node&&this.onPortalHostMounted(this.props.portalHost))}render(e){return S(ce,{children:this.state.portals.map(([r,i],n)=>r&&i?it(r,i):it(null,null))},"portal-map")}addPortal=e=>{if(e.portalHost)return;let{component:r,element:i}=e;if(!r||!i)return;e.portalHost=this.portalHostElement;let n=!1;this.setState(o=>{let s=[...o.portals],a=s.findIndex(([l,p])=>p===i&&l!==null);return a===-1?s.push([r,i]):(s[a]=[null,null],n=!0),{portals:s}},()=>{n&&this.addPortal(e)})};removePortal=e=>{e.element&&this.setState(r=>{let i=[...r.portals],n=i.findIndex(([o,s])=>s===e.element);return n!==-1?(i[n]=[i[n][0],null],{portals:i}):null},()=>{})};onElementHostConnected=e=>{let r=e.element,i=[];this.setState(n=>{let o=[...n.portals];return o.forEach(([s,a],l)=>{r.contains(a)&&(i.push(a),o[l]=[null,null])}),{portals:o}},()=>{i.forEach(n=>{n.connectedCallback()})})};onPortalHostMounted=e=>{this.portalHostElement!==e&&(this.portalHostElement=e,_t(this.portalHostElement,"element-host-connected",{element:this.portalHostElement}),At(this.portalHostElement,"custom-element-connected",this.addPortal),At(this.portalHostElement,"custom-element-disconnected",this.removePortal),At(this.portalHostElement,"element-host-connected",this.onElementHostConnected));let r=$0.filter(i=>this.portalHostElement.contains(i));r.forEach(i=>i.connectedCallback()),cu.default.pullAll($0,r)};componentDidMount(){}componentDidUpdate(e,r){pe||this.state.portals.forEach(i=>{if(i[1]?.shadowRoot?.children){let n=Array.from(i[1].shadowRoot.children).find(o=>o.id==="space-filler");n&&n.remove()}})}componentWillUnmount(){pe||(this.portalHostElement&&(Rt(this.portalHostElement,"element-host-connected",this.onElementHostConnected),Rt(this.portalHostElement,"custom-element-disconnected",this.removePortal),Rt(this.portalHostElement,"custom-element-connected",this.addPortal),delete this.portalHostElement),this.stopListeningToVnodeDiff?.())}},sr=mZ});var Ok,j0,Dk,Lk=V(()=>{ke();Bt();qr();Co();Pr();Ok=ye(Pe(),1);fe();j0=class extends me{constructor(e){super(e),this.state={dragPos:{x:0,y:0},referenceDragPos:{x:0,y:0},swapTarget:null,readyForDrop:!1,draggingOverItem:!1,rect:{top:0,left:0,width:0,height:0}},this.dropRef=xe(),this.onDragOver=Ok.default.throttle(this.onDragOver,80)}showDropTarget=()=>{if(Math.abs(this.state.dragPos.x-this.state.referenceDragPos.x)>10||Math.abs(this.state.dragPos.y-this.state.referenceDragPos.y)>10){this.setState({swapTarget:null});return}Ce.globalDragEventController.customDropTarget!==this.dropRef.current&&(Ce.globalDragEventController.releaseCustomDropTarget(Ce.globalDragEventController.customDropTarget),Ce.globalDragEventController.setCustomDropTarget(this.dropRef.current)),this.setState({readyForDrop:!0})};getRect=()=>{this.state.swapTarget&&this.setState({rect:this.state.swapTarget.getBoundingClientRect()})};render(e,r){let{draggingOverItem:i,readyForDrop:n,rect:o}=r,s={frame:{display:n?"flex":"none",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.6)",position:"fixed",top:o.top+"px",left:o.left+"px",width:o.width+"px",height:o.height+"px",pointerEvents:"none",zIndex:999},replace:{pointerEvents:"none",position:"relative",top:"unset",left:"unset"}};return S("div",{ref:this.dropRef,style:s.frame,children:S("button",{className:"media-options-button multiple",style:s.replace,children:"Replace"})})}onDragEnd=(e,r,i)=>{this.onDragOver.cancel(),clearTimeout(this.showDropTargetTimer),this.setState({readyForDrop:!1,draggingOverItem:!1,swapTarget:!1})};onDragDrop=(e,r,i)=>{clearTimeout(this.showDropTargetTimer),this.onDragOver.cancel(),!(this.dropRef.current!==i.customDropTarget||!this.state.swapTarget||i.inAdmin)&&(CargoEditor.mutationManager.execute(()=>{let n=window.store.getState(),o=this.state.swapTarget,s=i.draggedMediaItems[0],a=o.closest("[thumbnail-index]"),l=o.getAttribute("hash"),p=s.getAttribute("hash"),f=o.closest(".page[id]")?.getAttribute("id");if(a){let _=o.getAttribute("href");f=nt.getContentByPurl(n,_)?.id||null}if(!f||!p)return;let d=nt.getMediaByHash(n)[p]||null,m=nt.getMediaByHash(n)[l]||null;if(!d)return;let{CRDTItem:g}=Ce.getCRDTItem({reducer:"pages.byId",item:f});if(!(n.pages.byId[f].media||[]).find(_=>_.hash==d.hash)){if(!(g.get("media")instanceof Ce.adminWindow.Y.Array)){let E=new Ce.adminWindow.Y.Array;E.insert(0,g.get("media")||[]),g.set("media",E)}let _=Ce.convertStateToSharedType(d,new Ce.adminWindow.Y.Map);g.get("media").push([_])}if(a)Ce.applyChangesToYType(g,{thumb_media_id:d.id});else{let _=d&&m&&(d.is_video!==m.is_video||d.is_image!==m.is_image||d.is_video!==m.is_video);m&&_&&(o.removeAttribute("autoplay"),o.removeAttribute("loop"),o.removeAttribute("muted"),o.removeAttribute("poster"),o.removeAttribute("browser-default"),d.is_video?(!d.has_audio_track||d.duration<15?(o.setAttribute("autoplay",!0),o.setAttribute("muted",!0),o.setAttribute("loop",!0)):(o.setAttribute("browser-default",!0),o.setAttribute("disable-zoom",!0),d.duration<20&&o.setAttribute("loop",!0)),o.setAttribute("autoplay",!0),o.setAttribute("loop",!0),o.setAttribute("muted",!0)):d.is_url&&(d.url_type=="vimeo"||d.url_type=="youtube")&&(o.setAttribute("browser-default",!0),o.setAttribute("disable-zoom",!0),o.setAttribute("muted",!1),o.setAttribute("loop",!1))),o.removeAttribute("src"),o.setAttribute("hash",p),o.removeAttribute("width"),o.removeAttribute("height")}}),this.setState({readyForDrop:!1,swapTarget:null,draggingOverItem:!1}))};onBeforeDrop=(e,r,i)=>{!i.fromAdmin&&!i.fromOutside||this.state.readyForDrop&&this.state.swapTarget?.nodeName==="MEDIA-ITEM"&&i.draggedMediaItems.length===1&&(Ce.globalDragEventController.releaseCustomDropTarget(i.customDropTarget),Ce.globalDragEventController.setCustomDropTarget(this.dropRef.current))};onDragOver=(e,r,i)=>{let n=r.target.closest("MEDIA-ITEM"),o=i.draggedMediaItems.length===1&&i.draggedMediaItems[0]!==n&&!i.draggedMediaItems.some(a=>a.getAttribute("hash")==="placeholder")&&CargoEditor.getActiveEditor().getElement().contains(n)&&i.draggedMediaItems[0]?.getAttribute("hash")!==n?.getAttribute("hash"),s=!i.inAdmin&&i.fromAdmin;if(n&&s&&o){let a=Math.abs(this.state.dragPos.x-i.cursorPosition.x)>2||Math.abs(this.state.dragPos.y-i.cursorPosition.y)>2;this.state.swapTarget!==n||a?(Ce.globalDragEventController.releaseCustomDropTarget(this.dropRef.current),clearTimeout(this.showDropTargetTimer),this.setState({dragPos:{...i.cursorPosition},referenceDragPos:{...i.cursorPosition},readyForDrop:!1,draggingOverItem:!0,swapTarget:n}),this.showDropTargetTimer=setTimeout(this.showDropTarget,400)):this.setState({dragPos:{...i.cursorPosition}}),this.getRect()}else Ce.globalDragEventController.releaseCustomDropTarget(this.dropRef.current),clearTimeout(this.showDropTargetTimer),this.setState({readyForDrop:!1,draggingOverItem:!1,swapTarget:null,dragPos:{...i.cursorPosition}})};componentDidMount(){this.findDragController().then(()=>{Ce.globalDragEventController.on("dragover",this.onDragOver),Ce.globalDragEventController.on("drop",this.onDragDrop),Ce.globalDragEventController.on("dragend",this.onDragEnd),Ce.globalDragEventController.on("before-drop",this.onBeforeDrop)})}componentWillUnmount(){this.onDragOver.cancel(),this.getRect.cancel(),Ce.globalDragEventController.off("dragover",this.onDragOver),Ce.globalDragEventController.off("drop",this.onDragDrop),Ce.globalDragEventController.off("dragend",this.onDragEnd),Ce.globalDragEventController.off("before-drop",this.onBeforeDrop)}componentDidUpdate(e,r){(this.state.swapTarget!==r.swapTarget||this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement)&&(this.props.scrollContext.scrollingElement&&this.state.swapTarget?this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),this.onScroll())}onScroll=()=>{this.ticking||(this.rectFrame=requestAnimationFrame(()=>{this.getRect(),this.ticking=!1}),this.ticking=!0)};findDragController=()=>new Promise((e,r)=>{let i=0,n=null,o=()=>{let s=Ce.globalDragEventController||null;s?(clearInterval(n),e(s)):i++,i>200&&(clearInterval(n),r())};n=setInterval(o,300),o()})},Dk=Eo(j0)});var Wf,G0,Fk,zk=V(()=>{ke();Bs();Bt();qr();Co();Be();Wf=ye(Pe(),1);fe();G0=class extends me{constructor(e){super(e),this.state={rect:{top:null,left:null},initialRect:{top:null,left:null},initialScrollY:0,isClickable:!0,visible:!1,parentFontInfo:{fontSize:null,lineHeight:null}},this.maxButtonHeight=20,this.minButtonHeight=10,this.clonedRange=null,this.ticking=!1,this.isDebug=!1,Tf.contentWindow?.CargoEditor&&Object.keys(Tf.contentWindow?.CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents)}componentWillUnmcount(){CargoEditor&&(CargoEditor.events.off("cursor-activity",this.onSelectionChange),CargoEditor.events.off("editor-keydown",this.onEditorKeydown)),window.removeEventListener("insert-context-menu-closed",this.restoreTextCursorPosition),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("selectionchange",this.onSelectionChange),window.removeEventListener("blur",this.onEditorBlur),this.props?.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll)}bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),window.addEventListener("insert-context-menu-closed",this.restoreTextCursorPosition),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousedown",this.onMouseDown),document.addEventListener("selectionchange",this.onSelectionChange),window.addEventListener("blur",this.onEditorBlur),CargoEditor.events.on("cursor-activity",this.onSelectionChange),CargoEditor.events.on("editor-keydown",this.onEditorKeydown),this.props?.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll)};componentDidUpdate(e,r){this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement&&(this.props.scrollContext.scrollingElement?this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),this.onScroll())}onScroll=e=>{if(!this.state.visible||this.ticking)return;let r=window.pageYOffset,i=window.pageYOffset-this.state.initialScrollY,n=Math.round(this.state.initialRect.top-i);this.setState({rect:{top:n,left:this.state.initialRect.left}})};onEditorBlur=()=>{this.setState({visible:!1})};onEditorKeydown=()=>{this.setState({visible:!1})};onMouseUp=e=>{this.setState({clickable:!0}),e.target.closest("[editing]")&&this.checkAndSetVisiblity()};onMouseDown=()=>{this.setState({visible:!1,clickable:!0})};onSelectionChange=Wf.default.debounce(e=>{if(this.ticking)return;if(this.ticking=!0,this.setState({visible:!1}),!CargoEditor.getActiveRange())return null;let i=document.querySelector('[editing="true"] bodycopy');if(!i)return null;let n,o=window.getComputedStyle(i);n=o.getPropertyValue("font-size"),n=Number(n.match(/[\d\.]+/));let s=o.getPropertyValue("line-height");s=Number(s.match(/[\d\.]+/)),this.setState({parentFontInfo:{fontSize:n,lineHeight:s}},()=>{this.setButtonPosition()})},50);checkAndSetVisiblity=Wf.default.debounce((e,r)=>{e=CargoEditor.getActiveRange(),r=CargoEditor?.getActiveEditor();let i=r?.checkIfEmpty(),n=this.isEligibleEmptyLine(e),o=!!(i||n);this.isDebug&&console.log("checkAndSetVisible",o),this.setVisible(o)},400);setVisible=e=>{this.isDebug&&console.log("set visible",e),this.setState({initialScrollY:window.pageYOffset,visible:e},()=>{this.ticking=!1})};isEligibleEmptyLine=e=>{if(!e)return!1;let r=e.endContainer.childNodes[e.endOffset-1],i=e.endContainer.childNodes[e.endOffset],n=e.endContainer.childNodes[e.endOffset-2];for(;r&&CargoEditor.helpers.isWhitespaceNode(r);)r=r.previousSibling;for(;i&&CargoEditor.helpers.isWhitespaceNode(i);)i=i.nextSibling;for(;n&&CargoEditor.helpers.isWhitespaceNode(n);)n=n.previousSibling;return!!(e.collapsed&&e.endContainer&&e.endContainer.nodeType==Node.ELEMENT_NODE&&(e.endContainer.nodeName==="BODYCOPY"||e.endContainer.nodeName==="COLUMN-UNIT")&&(e.endOffset===0&&e.endContainer.childNodes.length==0||this.checkNodeContent(r)&&this.checkNodeContent(n)||this.checkNodeContent(i)&&!r))};restoreTextCursorPosition=e=>{e.detail.cachedRange&&window.requestAnimationFrame(()=>{CargoEditor.helpers.setActiveRange(e.detail.cachedRange),CargoEditor?.getActiveEditor().getElement().focus()})};checkNodeContent=e=>!!(e&&e.nodeName==="BR"||e?.nodeType===Node.ELEMENT_NODE&&window.getComputedStyle(e)?.getPropertyValue("display")==="block");getTextCursorRect=(e,r,i)=>{if(!e)return!1;if(this.clonedRange===e)return null;this.clonedRange=e.cloneRange();let n=cn(),o=i.fontSize*.15*-1,s=i.lineHeight*.15*-1,a=document.createElement("input");a.style.display="inline-block",a.style.fontSize=i.fontSize+"px",a.style.border="0",a.style.background="blue",a.style.outline="none",a.style.width="2px",n?(a.style.height=i.lineHeight+"px",a.style.lineHeight=i.lineHeight+"px",a.style.margin=`${s}px 0 0 0`,a.style.padding="0",a.style.verticalAlign="text-bottom"):(a.style.height=i.fontSize+"px",a.style.verticalAlign="middle",a.style.margin=`${o}px 0 0 0`,a.style.padding="0"),a.setAttribute("data-ignore-changes",""),a.setAttribute("data-prevent-copy",""),a.setAttribute("disabled",""),a.setAttribute("readonly",""),a.setAttribute("test-delete-visible",""),a.setSaveable(!1),e.insertNode(a);let l=CargoEditor?.getActiveEditor()?.getElement?.()?.getBoundingClientRect(),p=a.getBoundingClientRect();a.nextSibling&&a.nextSibling.nodeType===Node.TEXT_NODE&&a.nextSibling.setSaveable(!0),a.remove();let f=l.height-r.height;return this.clonedRange&&CargoEditor.helpers.setActiveRange(this.clonedRange),{bottom:p.bottom-f,height:p.height,center:p.bottom-f-(p.top-f),left:p.left,right:p.right,top:p.top-f,width:p.width,x:p.x-f,y:p.y}};setButtonPosition=()=>{this.isDebug&&console.log("set button position");let e=CargoEditor.getActiveRange(),r=!1,i=!1,n=null,o=null,s=null,a=null,l=null,p=null,f=0,d=0,m=this.state.parentFontInfo?.fontSize;if(!this.state.parentFontInfo){this.ticking=!1;return}if(m>20&&(m=20),m<10&&(m=10),!Wf.default.isEmpty(CargoEditor)&&(n=CargoEditor?.getActiveEditor(),n&&(o=n.getElement()),r=n?.checkIfEmpty(),i=this.isEligibleEmptyLine(e)),p=o?o.getBoundingClientRect():null,i||r){let v=this.getTextCursorRect(e,p,this.state.parentFontInfo),x=0,_=0;if(!v){this.ticking=!1;return}let E=this.state.parentFontInfo,O=1-E.fontSize/E.lineHeight,L=E.lineHeight,I=E.fontSize;cn()?x=v.bottom-E.lineHeight*.5:x=v.bottom-v.height*.5,a=x,l=Math.ceil(v.left)}d=l?4:0,l=l+d,this.isDebug&&console.log("coordinate state set..."),this.setState({initialRect:{top:a,left:l},rect:{top:a,left:l}},()=>{this.checkAndSetVisiblity()})};callContextMenu=e=>{e.preventDefault(),e.stopPropagation(),this.setState({visible:!1});let r=CargoEditor.getActiveRange().nativeRange;document.activeElement.blur(),Ce.adminWindow.ContextMenuOpener.openContextMenu(e,"insert-content",{cachedRange:r})};render(){let e=this.state.parentFontInfo.fontSize?this.state.parentFontInfo.fontSize:20,r=e>20?20:e;r=r<10?10:r;let i=r/2,n={frame:{transform:`translate3d(${this.state.rect.left}px, ${this.state.rect.top}px, 0px)`,zIndex:999,display:"flex",position:"fixed",top:0,left:0,pointerEvents:"none",height:0,width:0},button:{display:"flex",visibility:this.state.visible&&this.state.rect.top!==0&&this.state.rect.left!==0?"visible":"hidden",position:"relative",top:"unset",left:"unset",height:r+"px",width:r+"px",pointerEvents:this.state.isClickable?"all":"none",transform:`translate(0, -${i}px)`},svg:{pointerEvents:"none",height:r+"px",width:r+"px",maxHeight:this.maxButtonHeight+"px",maxWidth:this.maxButtonHeight+"px",minHeight:this.minButtonHeight+"px",minWidth:this.minButtonHeight+"px"}};return S("div",{style:n.frame,children:S("button",{className:"insert-content-button",style:n.button,onContextMenu:o=>{o.preventDefault(),this.callContextMenu(o)},onMouseDown:o=>{this.callContextMenu(o)},children:S("svg",{style:n.svg,id:"insert-ineditor",className:"plus-icon",width:r+"px",height:r+"px",viewBox:"0 0 20 20",fill:"none",children:[S("circle",{cx:"10",cy:"10",r:"8"}),S("g",{children:[S("line",{x1:"10",y1:"5",x2:"10",y2:"15"}),S("line",{x1:"5",y1:"10",x2:"15",y2:"10"})]})]})})})}},Fk=Eo(G0)});var Io,Ke,K0,Bk,qr=V(()=>{ke();Ye();ft();Io=ye(Pe(),1);Bt();Be();Lk();zk();_i();fe();Ke={},K0=class extends me{constructor(e){super(e),this.sR=document.createElement("div"),this.testHover=Io.default.throttle(this.testHover,60),this.lockedElements=[],this.state={selecting:!1,unattachedOverlayContainer:null,active:!1,locked:!1,loaded:!1,hoveredElements:[]},this.onContentChange=Io.default.throttle(this.onContentChange,80,{leading:!0,tailing:!0}),window.addEventListener("scroll",this.onScroll),this.resizeObserver=new ResizeObserver(r=>{r.forEach(i=>{this.updateElementRect(i.target)})}),this.dragController=null,this.portalMap=new Map,this.noPointerEventsArray=[],this.editorOverlayRef=xe(),CargoEditor&&Object.keys(CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents),this.findDragController().then(r=>{this.dragController=r,this.dragController.on("dragstart",this.onDragStart),this.dragController.on("dragend",this.unlock),this.dragController.on("drop",this.unlock)}).catch(r=>{console.warn("Editor overlay failed to find drag controller.",r)}),Ke.lock=this.lock,Ke.unlock=this.unlock,Ke.lockItem=this.lockItem,Ke.unlockItem=this.unlockItem,Ke.setHoveredElements=this.setHoveredElements,Ke.deactivateHoverElement=this.deactivateHoverElement,Ke.activateHoverElement=this.activateHoverElement,Ke.getPortal=this.getPortal,Ke.removePortal=this.removePortal,Ke.portalMap=this.portalMap,Ke.testHover=this.testHover,Ke.updateElementRect=this.updateElementRect,this.pointerPosition={x:-9e9,y:-9e9}}render(){var e=localStorage.getItem("c3-plus-button")==="true";return S("div",{className:`${this.state.selecting?"selecting":""}${this.props.darkMode?" dark":""}`,id:"editor-overlay",ref:this.editorOverlayRef,style:{display:this.state.loaded?"":"none"},children:this.state.unattachedOverlayContainer&&it(S(ce,{children:[S(Dk,{}),e?S(Fk,{}):null]}),this.state.unattachedOverlayContainer)})}componentDidMount(){if(!this.editorOverlayRef.current.shadowRoot){this.editorOverlayRef.current.attachShadow({mode:"open"}),this.editorOverlayRef.current.shadowRoot.innerHTML='<link rel="stylesheet" href="https://build.cargo.site/frontend/a16aab/css/front-end/editor-ui.css"><div id="unattached-editor-overlays"></div>',Array.from(this.sR.children).forEach(i=>{this.editorOverlayRef.current.shadowRoot.appendChild(i)}),this.editorOverlayRef.current.shadowRoot.querySelector("link").addEventListener("load",()=>{this.setState({loaded:!0})});let r=this.editorOverlayRef.current.shadowRoot.querySelector("#unattached-editor-overlays");this.setState({unattachedOverlayContainer:r})}this.sR=this.editorOverlayRef.current.shadowRoot,window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("mousedown",this.onPointerDown),window.addEventListener("mouseup",this.onPointerUp),window.addEventListener("mouseup",this.onPointerUp),document.body.addEventListener("pointerleave",this.onPointerLeave),this.findAdminWindow().then(e=>{Ce.adminWindow.addEventListener("pointermove",this.onAdminPointerMove)}).catch(e=>{console.warn("Editor Overlay failed to find Editor.",e)})}componentDidUpdate(e,r){let{hoveredElements:i}=r,{hoveredElements:n}=this.state,o=Io.default.difference(n,i);Io.default.difference(i,n).forEach(a=>{let l=this.portalMap.get(a);l&&l.portalHosts.forEach((p,f)=>{p?.pointerOut?.()})}),o.forEach(a=>{let l=this.portalMap.get(a);l&&l.portalHosts.forEach((p,f)=>{p?.pointerIn?.()})}),this.updatePageButtonPositions(),this.props.adminMode!==e.adminMode&&(this.props.adminMode?(this.unlock(),this.afterAdminTimeout=setTimeout(()=>{this.testHover()},80)):(this.setHoveredElements([]),this.lock()))}componentWillUnmount(){clearTimeout(this.afterAdminTimeout),this.onContentChange.cancel(),this.dragController&&(this.dragController.off("dragstart",this.onDragStart),this.dragController.off("dragend",this.unlock),this.dragController.off("drop",this.unlock)),this.CargoEditor&&(this.CargoEditor.events.off("mutation-start",this.onMutationStart),this.CargoEditor.events.off("mutation-end",this.onMutationEnd),this.CargoEditor.events.off("editor-keyup",this.onContentChange),this.CargoEditor.events.off("editor-summary-created",this.onContentChange)),this.portalMap.forEach((e,r,i)=>{this.removePortal(r)}),this.noPointerEventsArray=[],window.removeEventListener("mousedown",this.onPointerDown),window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerleave",this.onPointerLeave),Ce.adminWindow?.removeEventListener("pointermove",this.onAdminPointerMove)}findAdminWindow=()=>new Promise((e,r)=>{let i=0,n=null,o=()=>{let s=Ce.adminWindow;s?(clearInterval(n),e(s)):i++,i>200&&(clearInterval(n),r("not found."))};n=setInterval(o,300),o()});onMutationStart=()=>{bk()};onMutationEnd=()=>{this.ticking||(this.ticking=!0,requestAnimationFrame(()=>{wk(),this.ticking=!1}))};bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),this.CargoEditor=CargoEditor,this.CargoEditor.events.on("mutation-start",this.onMutationStart),this.CargoEditor.events.on("mutation-end",this.onMutationEnd),this.CargoEditor.events.on("editor-keyup",this.onContentChange),this.CargoEditor.events.on("editor-summary-created",this.onContentChange)};findDragController=()=>new Promise((e,r)=>{let i=0,n=null,o=()=>{let s=Ce.globalDragEventController||null;s?(clearInterval(n),e(s)):i++,i>200&&(clearInterval(n),r())};n=setInterval(o,300),o()});updateElementRect=e=>{let i=this.portalMap.get(e);if(i){let n={x:0,y:0,top:0,left:0,right:0,bottom:0,width:0,height:0},o=e.getBoundingClientRect();Object.keys(n).forEach(s=>{n[s]=Math.round(o[s])}),n.height<10&&(n.height=10,n.bottom=n.top+10),i.extraMargins.forEach((s,a)=>{if(!(s===void 0||s===0))switch(a){case 0:n.top=n.y=n.top-s,n.height=n.height+s;break;case 1:n.right=n.right+s,n.width=n.width+s;break;case 2:n.height=n.height+s,n.bottom=n.bottom+s;break;case 3:n.left=n.x=n.left-s,n.width=n.width+s;break}}),this.portalMap.set(e,{portalHosts:i.portalHosts,rect:n,extraMargins:i.extraMargins}),i.portalHosts.forEach((s,a)=>{s?.updatePosition?.(n)})}};onContentChange=(e,r)=>{this.state.hoveredElements.forEach(i=>{this.updateElementRect(i)})};onScroll=()=>{this.noPointerEventsArray.forEach(this.updateElementRect),this.updatePageButtonPositions()};updatePageButtonPositions=()=>{let r=Array.from(this.portalMap).map(([a,l])=>{let p=null,f=Array.from(l?.portalHosts??[]).find(([v,x])=>x.props?.name=="EditPageButton"&&!x.props.isEditingPage?(p=v,!0):!1);if(!p?.querySelector("button.edit-page"))return!1;let d=p.querySelector("button.edit-page").getBoundingClientRect(),g=d.top<l.rect.top?{left:d.left+-f[1].state.shiftButtonX,width:d.width+1,top:d.top,height:d.height*2+1}:{left:d.left+-f[1].state.shiftButtonX,width:d.width+1,top:d.top-d.height+-2,height:d.height*2+1};return{mapRect:l.rect,portalHost:p,proposedRect:g,rect:g,component:f[1]}}).filter(a=>!!a),i=Io.default.sortBy(r,a=>a.mapRect.left),n=!0,o=4,s=0;for(;n&&s<o;)n=!1,i.forEach((a,l,p)=>{if(l===0)return;let f=a.rect,d=p.filter(m=>{if(m==a)return!1;let g=m.proposedRect;return f.left<g.left+g.width&&f.left+f.width>g.left&&f.top<g.top+g.height&&f.top+f.height>g.top});if(d.length>0){n=!0;let m=p[l-1],g=Io.default.sortBy(d,v=>-(v.proposedRect.left+v.proposedRect.width))[0];a.proposedRect={left:g.proposedRect.left+g.proposedRect.width,width:f.width,top:f.top,height:f.height},a.component.setState({shifted:!0,shiftButtonX:a.proposedRect.left-f.left}),l==1&&i[0].component.setState({shifted:!0,shiftButtonX:0})}else a.component.setState({shifted:!1,shiftButtonX:0}),l==1&&i[0].component.setState({shifted:!1,shiftButtonX:0})}),s++};onDragStart=()=>{this.setState({hoveredElements:[],locked:!0}),this.dragContentChangeTimeout=setTimeout(()=>{this.onContentChange()},30)};getPortal=(e,r={})=>{if(e)if(this.portalMap.has(e)){var i=this.portalMap.get(e),n=null;if(i.portalHosts.forEach((o,s)=>{r.component===o&&(n=s)}),n)return n;{let o=document.createElement("div");return this.sR.appendChild(o),i.portalHosts.set(o,r.component),o}}else{let o=document.createElement("div");this.sR.appendChild(o);let s={portalHosts:new Map,rect:{width:0,height:0,top:0,left:0,bottom:0,right:0},extraMargins:r.extraMargins||[]};return o.setAttribute("editor-overlay-tag-name",e.tagName),o._editorBaseNode=e,s.portalHosts.set(o,r.component),this.portalMap.set(e,s),r.trackResize&&this.resizeObserver.observe(e),r.noPointerEvents&&this.noPointerEventsArray.indexOf(e)===-1&&this.noPointerEventsArray.push(e),r.extraMargins&&this.noPointerEventsArray.indexOf(e)===-1&&this.noPointerEventsArray.push(e),o}};removePortal=(e,r)=>{if(this.portalMap.has(e)){let i=this.portalMap.get(e);i.portalHosts.has(r)&&(i.portalHosts.delete(r),r.parentNode.removeChild(r)),i.portalHosts.size===0&&(this.resizeObserver.unobserve(e),this.noPointerEventsArray.indexOf(e)>-1&&this.noPointerEventsArray.splice(this.noPointerEventsArray.indexOf(e),1),this.portalMap.delete(e))}};lock=()=>{this.setState({locked:!0})};unlock=()=>{this.setState({locked:!1})};lockItem=e=>{this.lockedElements.indexOf(e)===-1&&this.lockedElements.push(e)};unlockItem=e=>{let r=this.lockedElements.indexOf(e);r>-1&&this.lockedElements.splice(r,1)};deactivateHoverElement=e=>{e&&this.setState(r=>{let{hoveredElements:i}=r,n=[...i],o=i.indexOf(e);if(o>-1)n=n.splice(o,1);else return null;return{...r,hoveredElements:n}})};activateHoverElement=e=>{e&&this.setState(r=>{let{hoveredElements:i}=r,n=[...i];if(n.indexOf(e)==-1)n.push(e);else return null;return{...r,hoveredElements:n}})};setHoveredElements=e=>{let r=Array.isArray(e)?e:[e];r=r.filter(i=>!!i),Io.default.isEqual(this.state.hoveredElements,r)||this.setState({hoveredElements:r})};testHover=()=>{let{locked:e}=this.state;if(e)return;let r=Array.from(document.elementsFromPoint(this.pointerPosition.x,this.pointerPosition.y))||[],i=Array.from(this.editorOverlayRef.current.shadowRoot.elementsFromPoint(this.pointerPosition.x,this.pointerPosition.y))||[];i=i.map(l=>l.closest("[editor-overlay-tag-name]")?._editorBaseNode).filter(l=>!!l),i=Io.default.difference(i,r),i.forEach(l=>{l&&r.indexOf(l)==-1&&r.push(l)}),this.noPointerEventsArray.forEach(l=>{let p=this.portalMap.get(l);p&&p.rect&&this.pointerPosition.x<=p.rect.left+p.rect.width&&this.pointerPosition.x>=p.rect.left&&this.pointerPosition.y<=p.rect.top+p.rect.height&&this.pointerPosition.y>=p.rect.top&&r.indexOf(l)==-1&&r.push(l)}),r=Io.default.uniq(r);let n=[...this.state.hoveredElements];this.lockedElements.forEach(l=>{let p=n.indexOf(l),f=r.indexOf(l);f===-1&&p>-1?r.push(l):p===-1&&f>-1&&r.splice(f,1)});let o=CargoEditor?.getActiveEditor?.()?.getElement(),s=o?o.closest(".overlay-content"):null,a=s&&r.some(l=>l.tagName==="BODYCOPY"&&s.contains(l));o&&s&&a&&(r=r.filter(l=>s.contains(l))),this.setHoveredElements(r)};onAdminPointerMove=e=>{e.target.tagName==="IFRAME"?(this.pointerPosition.x=e.clientX,this.pointerPosition.y=e.clientY+-40):(this.pointerPosition.x=-9e9,this.pointerPosition.y=-9e9),this.testHover()};onPointerLeave=e=>{this.setState({selecting:!1}),setTimeout(()=>{this.setHoveredElements([])},100)};onFirstSelectionChange=()=>{this.setState({selecting:!0})};onPointerDown=e=>{this.selectionWaitTimeout=setTimeout(()=>{document.addEventListener("selectionchange",this.onFirstSelectionChange,{once:!0})},60)};onPointerUp=e=>{clearTimeout(this.selectionWaitTimeout),document.removeEventListener("selectionchange",this.onFirstSelectionChange,{once:!0}),this.setState({selecting:!1})};onPointerMove=e=>{this.pointerPosition.x=e.clientX,this.pointerPosition.y=e.clientY,this.testHover()}},Bk=Ue((t,e)=>({adminMode:t.frontendState.adminMode,darkMode:t.adminState?.darkMode||!1}))(K0)});var X0,du,Y0,Vf,Zr,Kn=V(()=>{ke();qr();X0=ye(Pe(),1);fe();du=[],Y0=X0.default.debounce(()=>{if(window.removeEventListener("CargoEditor-load",Y0),CargoEditor&&Object.keys(CargoEditor).length>0){var t=CargoEditor.getActiveRange(),e=CargoEditor.helpers.normalizeRangeAroundShadowDom(t);let i=[],n=[];if(t&&!t.collapsed){var r=CargoEditor.helpers.getAllEffectivelyContainedNodes(t);r=r.filter(o=>o.shadowRoot),du.forEach(o=>{r.includes(o.props.baseNode)?i.push(o):n.push(o)})}else n=du;if(n.forEach(o=>{o.setState({selected:!1})}),i.forEach(o=>{o.setState({selected:!0}),CargoEditor.plugins.shadowDom.shadowDomSelectedElements.indexOf(o.props.baseNode)==-1&&CargoEditor.plugins.shadowDom.shadowDomSelectedElements.push(o.props.baseNode)}),e.shadowDomElementAdjacentToCollapsedRange){let o=du.find(s=>s.props.baseNode===e.shadowDomElementAdjacentToCollapsedRange);o&&o.setState({selected:!0,collapseDirection:e.collapseDirection})}du.length=0}},30),Vf=class extends me{constructor(e){super(e),this.state={resetAnimation:!1,selected:!1,collapseDirection:!1,currentColor:"black"},this.uniqueClassName=this.props.overlayMode?"selection-status-"+X0.default.uniqueId():"selection-status"}render(e,r){let i=r.collapseDirection?" "+r.collapseDirection+" collapsed-range":"";return S(ce,{children:[S("style",{id:"selection-status",children:`
		${this.state.selected&&!this.props.onlyAllowCollapsedRange?`
		::slotted(*) {
			--selection-color: transparent;
		}
		`:""}

		${this.props.onlyAllowCollapsedRange?"":`:host(::selection) {
			background-color:transparent;
		}`}

		.${this.uniqueClassName} {
			${this.props.overlayMode?`
				transform: translate3d(${this.props.overlayPosition.x}px, ${this.props.overlayPosition.y}px, 0);
				width: ${this.props.overlayPosition.width}px;
				height: ${this.props.overlayPosition.height}px;
				position: fixed;
				top: 0;
				left: 0;
			`:`
				inset: 0px;
				position: absolute;
			`}
			padding: 0;
			margin: 0;
			opacity: 1;
		    background-color: var(--selection-color);
			overflow:hidden;

			z-index: ${this.props.inFront?"99999":"-1"};
			pointer-events:none;
			display:none;
		}

		.${this.uniqueClassName}.selected {
			display:block;
		}

      
		@keyframes blink-animation {
			0%, 49.99% {
			  visibility: visible;
			}
			50%, 100% {
				visibility: hidden;
			}
		}
		@-webkit-keyframes blink-animation {
			0%, 49.99% {
			  visibility: visible;
			}
			50%, 100% {
				visibility: hidden;
			}			
		}		

		.${this.uniqueClassName}.collapsed-range {
			width: 1px;
		    mix-blend-mode: unset;
			background-color: ${this.props.overlayMode?this.state.currentColor:"currentColor"};

		    ${this.state.resetAnimation?`
		    visibility: visible;
		    -webkit-animation:none;
		    animation: none;`:`-webkit-animation: blink-animation 1s steps(4, start) infinite;
	        animation: blink-animation 1s steps(4, start) infinite;`}
	        z-index: 9999;
		}

		.${this.uniqueClassName}.before.collapsed-range {
			${this.props.overlayMode?`
			transform: translate3d(${this.props.overlayPosition.x+-1}px, ${this.props.overlayPosition.y}px, 0);			
			`:`
			inset: 0 auto 0 -1px;
			`}
				
		}
		.${this.uniqueClassName}.after.collapsed-range {
			${this.props.overlayMode?`
			transform: translate3d(${this.props.overlayPosition.x+this.props.overlayPosition.width+1}px, ${this.props.overlayPosition.y}px, 0);			
			`:`
			inset: 0 -1px 0 auto;
			`}
		}		

		`}),S("div",{className:`${this.uniqueClassName}${this.state.selected?" selected":""}${i}`})]},"selection-status-fragment")}componentDidMount(){CargoEditor?.getActiveEditor?.()?(du.push(this),Y0()):(du.push(this),window.addEventListener("CargoEditor-load",Y0)),this.props.baseNode.__shadow_selection=!0,this.props.baseNode.addEventListener("selected-in-editor",this.select),this.props.baseNode.addEventListener("unselected-in-editor",this.unselect)}componentDidUpdate(e,r){this.state.collapseDirection!==r.collapseDirection&&this.setState({resetAnimation:!0},()=>{this.resetTimeout=setTimeout(()=>{this.setState({resetAnimation:!1})},100)})}componentWillUnmount(){clearTimeout(this.resetTimeout),delete this.props.baseNode.__shadow_selection,this.props.baseNode.removeEventListener("unselected-in-editor",this.unselect),this.props.baseNode.removeEventListener("selected-in-editor",this.select)}select=e=>{if(e.target!==this.props.baseNode)return;this.props.overlayMode&&!this.state.selected&&(Ke.updateElementRect(this.props.baseNode),this.updateCurrentColor());let r=e?.detail?.collapsed||!1,i=!0;this.props.onlyAllowCollapsedRange&&(i=r),this.setState({selected:i,collapseDirection:r}),this.props.onSelectionChange&&(r?this.props.onSelectionChange(!1):this.props.onSelectionChange(!0))};unselect=()=>{this.setState(e=>({selected:!1,collapseDirection:!1})),this.props.onSelectionChange&&this.props.onSelectionChange(!1)};updateCurrentColor=()=>{if(this.props.baseNode.shadowRoot){let e=document.createElement("span");e.style.color="currentColor",e.style.position="absolute",this.props.baseNode.shadowRoot.appendChild(e);let i=window.getComputedStyle(e).getPropertyValue("color");e.remove(),this.setState({currentColor:i})}}};Vf.defaultProps={inFront:!0,overlayMode:!1};Zr=Vf});var $f,Cd,qk,Pd,Uk,Hk=V(()=>{ke();$f=ye(Pe(),1);fe();Cd=new Map,qk=t=>{let e=[],r=[],i=[];Cd.forEach((o,s)=>{o.locateEyeball();let{rect:a}=o.state;if(o.props["roll-independently"]==!0){let l=Math.atan2(t.clientY-(a.top+a.height*.5),t.clientX-(a.left+a.width*.5))*(180/Math.PI)+90;o.setState({eyeRotation:l})}else r.push(a.left+a.width*.5),i.push(a.top+a.height*.5),e.push(o)});let n={x:$f.default.mean(r),y:$f.default.mean(i)};e.forEach(o=>{let s=Math.atan2(t.clientY-n.y,t.clientX-n.x)*(180/Math.PI)+90;o.setState({eyeRotation:s})})},Pd=class extends me{constructor(e){super(e),this.state={eyeRotation:0,rect:{top:0,left:0,width:0,height:0},centerPoint:{x:0,y:0}},this.locateEyeball=$f.default.debounce(this.locateEyeball,120,{leading:!0,trailing:!1})}render(e,r){return S(ce,{children:[e.children,S("style",{children:`
					:host { 
						pointerEvents: ${e.lowestLevel?"auto":"none"};
						transformOrigin: center center;
						--rotate-transform: rotate( ${this.state.eyeRotation}deg);
					}
				`})]})}locateEyeball=()=>{this.setState({rect:this.props.baseNode.getBoundingClientRect()})};componentDidMount(){Cd.size==0&&window.addEventListener("pointermove",qk),Cd.set(this.props.baseNode,this)}componentWillUnmount(){Cd.delete(this.props.baseNode),Cd.size===0&&window.removeEventListener("pointermove",qk)}};Pd.defaultProps={"roll-independently":!0};Pd.transformSlot="--rotate-transform";Uk=Pd});var Wk,Id,Vk,$k=V(()=>{ke();Wk=ye(Pe(),1);fe();Id=class extends me{constructor(e){super(e),this.state={suppressTransition:!1,rotation:parseFloat(this.props.rotation)}}render(e,r){let{animate:i}=e,n=Number(i)!==0,o=n?50/Number(i):1,s="var(--base-translate, translate(0))",a=s;return e.transformSlots.forEach(l=>{l==="--rotate-transform"?(s+=` rotate(${parseFloat(e.rotation)}deg)`,a+=` rotate(${parseFloat(e.rotation)+360}deg)`):(s+=` var(${l}, translate(0))`,a+=` var(${l}, translate(0))`)}),S(ce,{children:[e.children,S("style",{id:"rotating-item",children:n?`
				@keyframes rotate {
                    from {
                        transform: ${s};
                    }
                    to {
                        transform: ${a};
                    }
                }

                :host {
                	animation: rotate ${Math.abs(o)}s linear ${Math.sign(Number(i))===-1?"reverse":""} infinite;
					will-change: transform;
                }
				`:`
				:host { 
					--rotate-transform: rotate( ${e.rotation}deg);
                }
            `})]})}allowTransition=Wk.default.debounce(()=>{this.setState({suppressTransition:!1},()=>{})},120);componentDidUpdate(e){(this.props.animate!==e.animate||this.props.rotation!==e.rotation)&&this.setState({suppressTransition:!0},()=>{this.allowTransition()})}componentWillUnmount(){this.allowTransition.cancel()}};Id.defaultProps={rotation:0,animate:0};Id.transformSlot="--rotate-transform";Vk=Id});var jk,Gk=V(()=>{jk={speed:"90",rotation:"66",scale:"18.4vmax","flight-path":"387",delay:"2"}});var Kk,Yn,Z0,jf,Yk,Xk=V(()=>{Kk=ye(Pe(),1);ke();Ye();Gk();Yr();fe();Z0=new Set,jf=class extends me{constructor(e){super(e),this.flierID="-"+(0,Kk.uniqueId)(),this.flierRef=xe();let r=this.generateRandomIntInclusive(1,1e4);this.state={portalElement:null,currentAnimation:"fly1",flightCount:r,calculatedAnimations:{fly1:this.calculateFlyAnimation(r,1),fly2:this.calculateFlyAnimation(r,2),fly3:this.calculateFlyAnimation(r,3),fly4:this.calculateFlyAnimation(r,4)}}}generateRandomIntInclusive(e,r){return e=Math.ceil(e),r=Math.floor(r),Math.floor(Math.random()*(r-e+1))+e}calculateDuration(e){return 100*(Math.max(100-Math.abs(e),5)*.01)}generateRandomIntFromSeed(e){var r=Math.sin(e)*1e4;return r-Math.floor(r)}shuffleFromSeed(e,r){for(var i=e.length,n,o;i;)o=Math.floor(this.generateRandomIntFromSeed(r)*i--),n=e[i],e[i]=e[o],e[o]=n,++r;return e}calculateFlyAnimation(e,r){let i=e%2==0,n=this.shuffleFromSeed(["ltr","rtl","ttb","btt"],e),o=Number(this.props.scale.replace("vmax","")),s=this.props.rotation/5*180,a=[{x:`calc(0vw - ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(i?0-1.4*o:60,i?40:100+1.4*o)}vh`},{x:`calc(100vw + ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(i?60:0-1.4*o,i?100+1.4*o:40)}vh`}],l=[{x:`calc(100vw + ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(i?60:0-1.4*o,i?100+1.4*o:40)}vh`},{x:`calc(0vw - ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(i?0:60,i?40:100+1.4*o)}vh`}],p=[{x:`${this.generateRandomIntInclusive(i?0-1.4*o:60,i?40:100+1.4*o)}vw`,y:`calc(0vh - ${1.4*o}vmax)`},{x:`${this.generateRandomIntInclusive(i?60:0-1.4*o,i?100+1.4*o:40)}vw`,y:`calc(100vh + ${1.4*o}vmax)`}],f=[{x:`${this.generateRandomIntInclusive(i?60:0-1.4*o,i?100+1.4*o:40)}vw`,y:`calc(100vh + ${1.4*o}vmax)`},{x:`${this.generateRandomIntInclusive(i?0-1.4*o:60,i?40:100+1.4*o)}vw`,y:`calc(0vh - ${1.4*o}vmax)`}],d=n.reduce((m,g)=>{switch(g){case"ltr":return m.concat(a);case"rtl":return m.concat(l);case"ttb":return m.concat(p);case"btt":return m.concat(f);default:return m}},[]);switch(r){case 1:return`
					0% {
						transform: translateX(${d[0].x}) translateY(${d[0].y});
						opacity: 0;
					}
					0.001% {
						transform: translateX(${d[0].x}) translateY(${d[0].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${d[1].x}) translateY(${d[1].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${d[1].x}) translateY(${d[1].y});
						opacity: 0;
					}
				`;case 2:return`
					0% {
						transform: translateX(${d[2].x}) translateY(${d[2].y});
						opacity: 0;
					}
				
					0.001% {
						transform: translateX(${d[2].x}) translateY(${d[2].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${d[3].x}) translateY(${d[3].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${d[3].x}) translateY(${d[3].y});
						opacity: 0;
					}
				`;case 3:return`
					0% {
						transform: translateX(${d[4].x}) translateY(${d[4].y});
						opacity: 0;
					}
		
					0.001% {
						transform: translateX(${d[4].x}) translateY(${d[4].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${d[5].x}) translateY(${d[5].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${d[5].x}) translateY(${d[5].y});
						opacity: 0;
					}
				`;case 4:return`
					0% {
						transform: translateX(${d[6].x}) translateY(${d[6].y});
						opacity: 0;
					}
		
					0.001% {
						transform: translateX(${d[6].x}) translateY(${d[6].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${d[7].x}) translateY(${d[7].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${d[7].x}) translateY(${d[7].y});
						opacity: 0;
					}
				`}}onAnimationEnd(e){let r=Number(e.animationName.substr(3,1)),i=r<4?r+1:1;this.setState({currentAnimation:`fly${i}`,...i===1&&{flightCount:this.state.flightCount+1,calculatedAnimations:{fly1:this.calculateFlyAnimation(this.state.flightCount+1,1),fly2:this.calculateFlyAnimation(this.state.flightCount+1,2),fly3:this.calculateFlyAnimation(this.state.flightCount+1,3),fly4:this.calculateFlyAnimation(this.state.flightCount+1,4)}}})}componentDidMount(){if(Yn||(Yn=document.createElement("media-item"),Yn.setAttribute("no-component",""),Yn.shadowRoot||Yn.attachShadow({mode:"open"}),Yn.shadowRoot.innerHTML=`
			<style>
				:host {
					all:unset!important;
					border:none!important;
					padding: 0!important;
					position: fixed!important;
					z-index: 5000!important;
					pointer-events:none!important;
					background:none!important;
					inset: 0!important;
					overflow: hidden!important;
				}

				.spinner [part="media"] {
					pointer-events: none;
					border-radius:0!important;
					padding: 0!important;
					border: none !important;
					position: absolute;
					width: 100%;
					height: 100%;
					inset: 0;
				}

				.spinner img,
				.spinner video {
					object-fit: contain;
				}
				.spinner .frame,
				.spinner .sizing-frame {
					display: contents;
				}				
			</style>
			`,document.body.appendChild(Yn)),!this.state.portalElement){let e=document.createElement("div");e.style.display="contents",Yn.shadowRoot.appendChild(e),this.setState({portalElement:e},()=>{this.flierRef.current&&this.flierRef.current.addEventListener("animationend",r=>this.onAnimationEnd(r))})}Z0.add(this)}componentWillUnmount(){this.flierRef.current&&this.flierRef.current.removeEventListener("animationend",e=>this.onAnimationEnd(e)),this.state.portalElement&&this.state.portalElement.remove(),Z0.delete(this),Z0.size==0&&Yn&&(Yn.remove(),Yn=null)}render(e,r){let{speed:i,rotation:n,scale:o,delay:s,adminMode:a}=e,{currentAnimation:l,flightCount:p,calculatedAnimations:f,portalElement:d}=r;return d?S(ce,{children:[S("style",{children:":host {display:none!important;}"}),it(S(ce,{children:[S("style",{children:`

					.flier${this.flierID} {
						pointer-events: none !important;
						top: 0;
						left: 0;
						position: absolute;
						z-index:9995;
						transform: translateX(-100%) translateY(-100%);
						animation-delay: ${s}s;
						animation-duration: ${this.calculateDuration(i)/4}s;
						animation-timing-function: linear;
						animation-direction: ${Math.sign(i)===1?"normal":"reverse"};
					}

					.fly1${this.flierID} {
						animation-name: fly1${this.flierID};
					}

					.fly2${this.flierID} {
						animation-name: fly2${this.flierID};
					}

					.fly3${this.flierID} {
						animation-name: fly3${this.flierID};
					}

					.fly4${this.flierID} {
						animation-name: fly4${this.flierID};
					}

					.flier${this.flierID} .spinner {
						${Number(n)!==0?`animation: spin ${this.calculateDuration(n)}s ${Math.sign(Number(n))===-1?"reverse":"normal"} linear infinite;`:""}
						width: ${o};
						height: ${o};
						display: flex;
						align-items: center;
						justify-content: center;
					}

					.flier${this.flierID} .spinner figure {
						padding: 0;
						margin: 0;
						width: ${o};
						height: ${o};
					}

				
					/* Keyframe values control where the element will begin
						and end its trajectory across the screen. Each rule
						represents a path the element follows across the screen. */
					
				
					@keyframes fly1${this.flierID} {
						${f.fly1}
					}

					@keyframes fly2${this.flierID} {
						${f.fly2}
					}

					@keyframes fly3${this.flierID} {
						${f.fly3}
					}

					@keyframes fly4${this.flierID} {
						${f.fly4}
					}

					@keyframes spin {
						0% {
							transform: rotateZ(0deg);
						}
						100% {
							transform: rotateZ(3600deg);
						}
					}
				`}),S("div",{className:`flier${this.flierID} ${l}${this.flierID}`,ref:this.flierRef,children:S("div",{className:"spinner",children:e.children})})]}),d)]}):null}};jf.defaultProps=jk;Yk=jf});function wZ(t){var e=t.getBoundingClientRect(),r=getComputedStyle(t),i=r.transform;if(i){var n;if(i.startsWith("matrix3d(")){var o=i.slice(9,-1).split(/, /);n=+o[13]}else if(i.startsWith("matrix(")){var o=i.slice(7,-1).split(/, /);n=+o[5]}else return 0;return n}else return 0}var Zk,pu,Gf,Yf,J0,Kf,Ad,Jk,Td,Qk,eN=V(()=>{ke();Ye();Zk=ye(Pe(),1);Yr();ft();Br();Be();fe();pu=new Map,Gf=new WeakMap,Yf=.5,J0=!1;Kf=null,Ad=!1;if(!pe){Object.defineProperty(window,"__viewportKeyframeInsertion",{get:()=>Yf,set:e=>{Yf=e,Ad=!0},configurable:!0}),Object.defineProperty(window,"__forceOverlayInteraction",{get:()=>J0,set:e=>{J0=e,Ad=!0},configurable:!0});let t=new MutationObserver((e,r)=>{e.forEach(i=>{if(i.type==="childList"&&i.target.tagName==="STYLE")for(let[n,o]of pu.entries())o.regenerateKeyframes(o.state.initialScrollProgress)})});ot.on("window-resize",()=>{Ad=!0}),t.observe(document.body,{subtree:!0,childList:!0,characterData:!0})}Jk=()=>{Gf=new WeakMap;for(let[t,e]of pu.entries())e.animateScrollProgress(Ad);Ad=!1,Kf=requestAnimationFrame(Jk)},Td=class extends Tr{constructor(e){super(e),this.uid=Zk.default.uniqueId(),this.state={isOverFlowing:!0,inited:!1,viewportIntersection:"neutral",isVisible:!1,hasLayout:!1,allScrollAnimationVariables:{},overrideTransitionWithAnimation:!1,scrollProgressVariables:"",beforeInitialKeyframe:0,afterInitialKeyframe:0,initialScrollProgress:void 0,inTransition:{},suppressTransition:!0,scrollProgress:void 0,customJSX:null},this.isInSlideshow=this.props.baseNode.parentElement.tagName==="GALLERY-SLIDESHOW",this.isSlideshow=this.props.baseNode.tagName==="GALLERY-SLIDESHOW",this.props.baseNode._setCustomScrollJSX=r=>{this.setState(i=>i.customJSX===r?null:{customJSX:r})}}isUsingTransition=()=>!!((typeof this.props.imageSettings?.scroll_animation!="string"||this.props.imageSettings?.scroll_animation.startsWith("fade-up"))&&!this.state.overrideTransitionWithAnimation);render(e,r){if(this.isInSlideshow)return S(ce,{children:[e.children,this.state.customJSX]});let i=this.state.viewportIntersection;if(this.isUsingTransition()){let x=this.props["scroll-variables"].split(" ").filter(I=>I!=="").map(I=>"--scroll-"+I);x.push("--scroll-translate","--scroll-transition","--scroll-opacity"),x=x.map(I=>I+": var("+(I.startsWith("--")?"":"--")+I+"-"+i+"); ").join(" ");let _="1000",E="40",O="cubic-bezier(0.45,0.05,0.33,1)";if(this.props["scroll-animation-duration"]!=null)_=this.props["scroll-animation-duration"]||"1000";else{let I=parseInt(this.props.imageSettings.scroll_animation?.split?.("fade-up-")[1])||1;switch(this.props.imageSettings.scroll_animation===!0&&(I=2),I){case 3:{_="1250",E="50",O="cubic-bezier(0.575, 0.05, 0.34875, 1)";break}case 2:{_="1000",E="40",O="cubic-bezier(0.45,0.05,0.33,1)";break}case 1:{_="850",E="25",O="cubic-bezier(0.24,0.05,0.29,1)";break}default:break}}let L=Object.values(this.state.inTransition).some(I=>I==!0);return S(ce,{children:[e.children,S("style",{id:"scroll-transition",children:`
				:host {

					--scroll-opacity-above: 1;
				    --scroll-opacity-inside: 1;
				    --scroll-opacity-below: 0;
					opacity: var(--scroll-opacity, 1);
					${(L||this.state.waitingForTransition)&&this.props.isLazyLoadable?"will-change: opacity, transform;":""}

					--scroll-transition-above: 0s transform ${O}, 0s opacity ${O};
				    --scroll-transition-inside: ${_}ms transform ${O}, ${_}ms opacity ${O};
				    --scroll-transition-below: 0s transform ${O}, 0s opacity ${O};
					${this.state.suppressTransition?"":"transition: var(--scroll-transition);"}

					--scroll-translate-below: translateY(${E}px);
					--scroll-translate-inside: translateY(0px);
					--scroll-translate-above: translateY(0px);

					${x}

				}`})]})}let o=this.state.scrollProgress||0,{beforeInitialKeyframe:s,afterInitialKeyframe:a,initialScrollProgress:l,allScrollAnimationVariables:p,isOverFlowing:f,prevScrollProgress:d}=this.state,m="neutral";if(d!=null&&(d<o?m="up":d>o&&(m="down")),l>0&&l<1&&o>=s&&o<=a){let x=0,_=Math.abs(l-o);o<l?x=vb(_/(l-s)):x=yb(_/(a-l)),o=x*o+(1-x)*l}let g=this.state.isVisible||this.state.viewportIntersection.position=="below"&&m=="up"||this.state.viewportIntersection.position=="above"&&m=="down",v=f&&!e["disable-scroll-animation"]?S("style",{id:"scroll-transition",children:`
			
			${this.state.keyframeCss||""}
			${this.state.onlyTranslateKeyframes||""}
			${this.state.sansTranslateKeyframes||""}

				${this.isSlideshow?`:host {
					${Object.entries(this.state.allScrollAnimationVariables).filter(([x,_])=>x!=="--scroll-animation").map(([x,_])=>x+": "+_+";").join(`
`)}
					}
					
				`:""}

				:host {
					--scroll-progress: ${o};
				}

				figure {
					animation: scrollAnimation-onlyTranslate 1s both paused; /* Holds both the starting and ending states */
					animation-timing-function: var(--scroll-animation-timing, ease);
					animation-delay: -${o}s;
					${g?"will-change: transform, opacity, animation-delay;":""}
				}
				.sizing-frame {
					backface-visibility: hidden;
					animation: scrollAnimation-sansTranslate 1s both paused; /* Holds both the starting and ending states */
					animation-timing-function: var(--scroll-animation-timing, ease);
					${g?"will-change: transform, opacity, animation-delay;":""}
					animation-delay: -${o}s;
				}


		`}):null;return this.isSlideshow?(Array.from(this.props.baseNode.children).filter(x=>x.tagName=="MEDIA-ITEM").forEach(x=>{x._setCustomScrollJSX?.(v)}),S(ce,{children:e.children})):S(ce,{children:[e.children,v]})}onResize=e=>{(this.cachedHeight==null||Math.abs(this.cachedHeight-e.height)>10)&&this.state.needsKeyFrameUpdateOnResize&&(this.cachedHeight=e.height,this.updateKeyframesNextAnimationLoop=!0)};onViewportIntersectionChange=e=>{this.setState({isVisible:e.visible,viewportIntersection:e.position,hasLayout:e.hasLayout})};onTransitionStart=e=>{e.target===this.props.baseNode&&this.setState(r=>({...r,waitingForTransition:!1,inTransition:{...r.inTransition,[e.propertyName]:!0}}))};onTransitionEnd=e=>{e.target===this.props.baseNode&&this.setState(r=>{let i={...r.inTransition,[e.propertyName]:!1},n=Object.values(i).every(o=>o==!1);return{...r,suppressTransition:n,inTransition:i}})};calculateScrollProgress=e=>{let r=this.props.scrollContext.getScrollPosition(),i=0,n=this.props.scrollContext.scrollingElement,o=n&&n.classList?.contains("overlay-content"),s=0,a=this.props.baseNode.getBoundingClientRect(),l=a.top,p=a.height,f=a.bottom;if(this.props.baseNode.tagName=="MEDIA-ITEM")if(this.props.baseNode._size&&this.props.baseNode._size.mediaSize.height!=0){let _=this.props.baseNode._size;p=_.mediaSize.height+_.mediaSize.vertPadSize,l=l+_.mediaItemSize.vertPadSize/2,f=l+p+_.mediaSize.vertPadSize}else return this._lastScrollProgress=void 0,{scrollProgress:void 0,initialScrollProgress:void 0};if(J0&&o)if(Gf.has(n))i=Gf.get(n);else{let _=n.querySelector(".page-content");i=Math.floor(Math.abs(wZ(_))*100)/100,Gf.set(n,i)}let d=r.h,m=d+p+i*2;l>d?s=0:f<0?s=1:s=(d-l)/m,s=Math.min(s,1),s=Math.max(s,0),s=Math.round(s*1e4)/1e4;let g=1-(l+r.y+p)/m,v=(r.scrollHeight-(l+r.y))/m,x;return g>=1-Yf&&g>=-.1?x=g:v<=Yf&&v>=-.1&&(x=v),x!=null&&(x=Math.round(x*1e4)/1e4),this._lastScrollProgress={scrollProgress:s,initialScrollProgress:x},{scrollProgress:s,initialScrollProgress:x}};getKeyframesFromStyleSheets=e=>{let r=Array.from(document.styleSheets).reverse(),i=null,n=r.some(o=>{let s;try{s=o.cssRules}catch{return!1}if(s){let a=Array.from(o.cssRules).reverse().find(l=>l.type===window.CSSRule.KEYFRAMES_RULE&&l.name===e);return a?(i=a,!0):!1}});return i};getScaleAnimationOffsets=()=>{let e=l=>.004112*l*l-.85196*l+50,r=0,i=this.props.scrollContext.getScrollPosition();if(this.props.baseNode._size&&this.props.baseNode._size.mediaSize.height!=0){let l=this.props.baseNode._size;r=l.mediaSize.height+l.mediaSize.vertPadSize}else r=this.props.baseNode.getBoundingClientRect().height;let n=r/i.h*100,s=(50-e(n)).toFixed(1),a=(50+(50-s)).toFixed(1);return[s,a]};getScrollAnimationVariables=()=>{let e=this.isSlideshow?this.props.baseNode.querySelector("media-item")||this.props.baseNode:this.props.baseNode,r=window.getComputedStyle(e);return{"--scroll-animation":r.getPropertyValue("--scroll-animation").trim(),"--scroll-animation-timing":r.getPropertyValue("--scroll-animation-timing").trim()}};getKeyframeCss=e=>{let i=this.getScrollAnimationVariables()["--scroll-animation"],n="",o=0,s=0;if(i){let a=-1,l=this.getKeyframesFromStyleSheets(i);if(!l)return"";if(e>=-.05&&e<=1.05){let p=Math.min(1,Math.max(0,e)),f="@keyframes "+l.name+` {
`,d=Array.from(l),m=d.findIndex((v,x)=>x==0||x==l.length-1?!1:parseFloat(v.keyText)*.01>p);o=parseFloat(d[m-1]?.keyText)*.01||0,s=parseFloat(d[m]?.keyText)*.01||1,p==o&&(p=p+.01),p==s&&(p=p+-.01);let g=Array.from(l).map(v=>v.cssText);g.splice(m,0,`
					${Math.floor(p*100*100)/100}% {
					transform: rotate(0deg) scale(1) skew(0deg) translateX(0px) translateY(0px) translateZ(0px);
					opacity: 1;
					filter: initial;
				}`.replaceAll(`
`,"").replaceAll("	","")),f+=g.join(`
`)+`
}`,n=f}else n=l.cssText}return{beforeInitialKeyframe:o,afterInitialKeyframe:s,keyframeCss:n}};filterTranslateOnlyKeyframes(e){if(!e)return"";let r=e.split(`
`),i=!1,n=[];for(let o of r){let s=o.trim();if(s.startsWith("@keyframes")){n.push("@keyframes scrollAnimation-onlyTranslate {"),i=!0;continue}if(i){if(s==="}"){n.push("}"),i=!1;continue}let a=s.match(/^([\d.\{1,2}]+%|\w+)\s*\{\s*(.*)\s*\}$/);if(a){let l=a[1],f=a[2].match(/transform\s*:\s*([^;]+);?/),d="translateY(0px)";if(f){let g=(f[1].match(/[a-zA-Z3]*\([^)]*\)/g)||[]).filter(v=>v.startsWith("translate")&&!v.startsWith("translateZ")||v.startsWith("perspective"));g.length>0&&(d=g.join(" "))}n.push(`  ${l} { transform: ${d}; }`);continue}}}return n.join(`
`)}filterOutTranslateKeyframes(e,r=[]){if(!e)return"";let i=e.split(`
`),n=!1,o=[];for(let s of i){let a=s.trim();if(a.startsWith("@keyframes")){o.push("@keyframes scrollAnimation-sansTranslate {"),n=!0;continue}if(n){if(a==="}"){o.push("}"),n=!1;continue}let l=a.match(/^([\d.\{1,2}]+%|\w+)\s*\{\s*(.*)\s*\}$/);if(l){let p=l[1],f=l[2],d=[],m=f.match(/transform\s*:\s*([^;]+);?/);if(m){let v=(m[1].match(/[a-zA-Z3]*\([^)]*\)/g)||[]).filter(_=>!_.startsWith("translate")||_.startsWith("translateZ")||_.startsWith("perspective"));v.length>0&&d.push(`transform: ${v.join(" ")};`);let x=f.replace(/transform\s*:\s*[^;]+;?/,"").trim();x&&d.push(x.replace(/;$/,"")+";")}else f.trim()&&d.push(f.trim().replace(/;$/,"")+";");o.push(`  ${p} { ${d.join(" ")} }`);continue}o.push(s)}}if(r.length>0){let s="0% {  }",a="50% {  }",l="100% {  }",p="",f=[];o.forEach(g=>{let v=parseFloat(g.split("{")[0]);v==0?s=g:v==50?a=g:v==100&&(l=g)}),s.length>0&&(s="{ "+s.split("{")[1]),a.length>0&&(a="{ "+a.split("{")[1]),l.length>0&&(l="{ "+l.split("{")[1]);let d=a.match(/transform\s*:\s*([^;]+);?/),m=null;d&&(m=d[1].match(/scale\s*([^;]+)/)),m&&m[0]&&(p="transform: "+m[0]+";"),[s,l].forEach(g=>{let v=g.match(/transform-origin\s*:\s*([^;]+)/);v&&v[1]?f.push("transform-origin: "+v[1]+";"):f.push("")}),r.forEach((g,v)=>{let x=o.findIndex((_,E,O)=>{let L=parseFloat(_.split("{")[0])??9e9;if(Number.isNaN(L))return!1;let I=O[E+1]?parseFloat(O[E+1].split("{")[0]):999;return g>L&&g<=I})+1;v==0?o.splice(x,0,`${g}% { ${p} ${f[0]} }`):o.splice(x,0,`${g}% { ${p} ${f[1]} }`)})}return o.join(`
`)}regenerateKeyframes=e=>{if(this.isUsingTransition())return;let i=this.getScrollAnimationVariables(),n=i["--scroll-animation"],{keyframeCss:o,beforeInitialKeyframe:s,afterInitialKeyframe:a}=this.getKeyframeCss(e);if(!o){this.setState({beforeInitialKeyframe:void 0,afterInitialKeyframe:void 0,allScrollAnimationVariables:i,needsKeyFrameUpdateOnResize:!1,overrideTransitionWithAnimation:!1,keyframeCss:"",onlyTranslateKeyframes:"",sansTranslateKeyframes:""});return}let l="",p="",f=!1;if(n.startsWith("scrollAnimationScaleInOut-")||n.startsWith("scrollAnimationScaleIn-")||n.startsWith("scrollAnimationScaleOut-")){f=!0;let g=this.getScaleAnimationOffsets();l=this.filterTranslateOnlyKeyframes(o),p=this.filterOutTranslateKeyframes(o,g)}else l=this.filterTranslateOnlyKeyframes(o),p=this.filterOutTranslateKeyframes(o);let m=!!(n&&n.length>0);this.setState({beforeInitialKeyframe:s,afterInitialKeyframe:a,allScrollAnimationVariables:i,needsKeyFrameUpdateOnResize:f,overrideTransitionWithAnimation:m,keyframeCss:o,onlyTranslateKeyframes:l,sansTranslateKeyframes:p})};animateScrollProgress=e=>{if(this.isUsingTransition()){this._lastScrollProgress=void 0;return}if(!this.props.isLazyLoadable)return;let r=this.props.scrollContext.getScrollPosition(),i=r.scrollHeight,n=r.h<=r.scrollHeight-1,{scrollProgress:o,initialScrollProgress:s}=this.calculateScrollProgress(e||this._lastScrollHeight!=i);this.setState(a=>((s!=a.initialScrollProgress||this.updateKeyframesNextAnimationLoop)&&(this.regenerateKeyframes(s),this.updateKeyframesNextAnimationLoop=!1),{isOverFlowing:n,initialScrollProgress:s,scrollProgress:o,prevScrollProgress:a.scrollProgress})),this._lastScrollHeight=i};componentDidMount(){if(pu.size==0&&(cancelAnimationFrame(Kf),Kf=requestAnimationFrame(Jk)),pu.set(this.props.baseNode,this),this.props.baseNode.addEventListener("transitionstart",this.onTransitionStart),this.props.baseNode.addEventListener("transitionend",this.onTransitionEnd),this.props.baseNode.addEventListener("transitioncancel",this.onTransitionEnd),this.props.customElementMode){let e=this.props.visibility?.visible??!1,r=this.props.visibility?.position??"below",i=this.props.visibility?.hasLayout??!1;this.setState({isVisible:e,viewportIntersection:r,hasLayout:i})}else At(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange);At(this.props.baseNode,"elementResize",this.onResize),this.updateKeyframesNextAnimationLoop=!0}componentDidUpdate(e,r){if(this.state.viewportIntersection!==r.viewportIntersection&&(this.state.isVisible?this.setState({waitingForTransition:!0,suppressTransition:!1}):this.state.waitingForTransition||this.setState({suppressTransition:!0})),this.props.customElementMode&&this.props.visibility?.position!==e.visibility?.position){let i=this.props.visibility?.visible?this.props.visibility.visible:!1,n=this.props.visibility?.position||"below",o=this.props.visibility?.hasLayout||!1;this.setState({isVisible:i,viewportIntersection:n,hasLayout:o})}}componentWillUnmount(){clearTimeout(this.initTimeout),this.props.baseNode.removeEventListener("transitionstart",this.onTransitionStart),this.props.baseNode.removeEventListener("transitionend",this.onTransitionEnd),this.props.baseNode.removeEventListener("transitioncancel",this.onTransitionEnd),pu.delete(this.props.baseNode),pu.size==0&&cancelAnimationFrame(Kf),Rt(this.props.baseNode,"elementResize",this.onResize),Rt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange)}};Td.defaultProps={"scroll-variables":""};Td.transformSlot="--scroll-translate";Qk=Ue((t,e)=>({imageSettings:{...t.siteDesign.images}}),null)(Td)});var ybe,Md,Xf,xZ,tN,rN=V(()=>{ke();ft();zr();ybe=ye(Pe(),1);fe();Md=new Map,Xf=class extends me{constructor(e){switch(super(e),this.state={z:0,x:0,y:0,interacted:!1,dragging:!1},this.props.baseNode.tagName){case"DIV":case"SPAN":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"H7":case"H8":case"H9":this.displayInlineBlock=!0;break;default:this.displayInlineBlock=!1;break}this.preventClick=!1,this.inSlideshow=this.props.baseNode.parentElement.tagName==="GALLERY-SLIDESHOW"}render(e,r){if(e.adminMode)return e.children;let{x:i,y:n,z:o}=r;return S(ce,{children:[e.children,this.inSlideshow?null:S("style",{id:"draggable-item",children:`
				:host {
					${this.props.adminMode?"":`
						pointer-events: auto!important;
						-webkit-user-select: none; 
						-webkit-touch-callout: none;
					`}
					${r.dragging?"--scroll-transition: 0s all!important; cursor: grabbing;":"cursor: grab;"}
					${this.displayInlineBlock?"display: inline-block;":""}
					--drag-transform: ${r.interacted?`translate3d(${i}px, ${n}px, ${o+100}px)`:`translate(${i}px, ${n}px)`};
					${!this.props.adminMode&&r.interacted?`z-index: ${o+100};`:""}					
				}
			`})]})}onDragStart=e=>{e.preventDefault(),e.stopPropagation()};onTouchMove=e=>{e.preventDefault()};onPointerDown=e=>{if(this.props.adminMode||e.button==2||this.inSlideshow)return;this.preventClick=!1;let r=this.state.z;Md.forEach((i,n)=>{n!==this.props.baseNode&&i.state.z>r&&i.setState(o=>({z:o.z-1}))}),this.setState({x:this.state.x,y:this.state.y,z:Md.size+10,interacted:!0,dragging:!0}),this.initialPosition={x:e.clientX+-this.state.x,y:e.clientY+-this.state.y},this.mousePosition={x:e.clientX,y:e.clientY},this.accumulatedDelta=0,window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)};onPointerMove=e=>{e.preventDefault();let r=e.clientX,i=e.clientY,n=Math.sqrt(Math.pow(this.mousePosition.x-r,2)+Math.pow(this.mousePosition.y-i,2));this.accumulatedDelta+=n,this.accumulatedDelta>4&&(this.preventClick=!0),this.mousePosition={x:e.clientX,y:e.clientY},this.setState({x:e.clientX-this.initialPosition.x,y:e.clientY-this.initialPosition.y})};onPointerUp=e=>{this.setState({dragging:!1}),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp)};onClickCapture=e=>{this.preventClick&&(e.preventDefault(),e.stopPropagation())};bindListeners=()=>{this.props.adminMode||(this.props.baseNode.addEventListener("dragstart",this.onDragStart),this.props.baseNode.addEventListener("pointerdown",this.onPointerDown),this.props.baseNode.addEventListener("touchmove",this.onTouchMove),this.props.baseNode.addEventListener("click",this.onClickCapture,{capture:!0}))};unbindListeners=()=>{this.props.baseNode.removeEventListener("dragstart",this.onDragStart),this.props.baseNode.removeEventListener("pointerdown",this.onPointerDown),this.props.baseNode.removeEventListener("touchmove",this.onTouchMove),this.props.baseNode.removeEventListener("click",this.onClickCapture,{capture:!0})};componentDidMount(){this.bindListeners(),Md.set(this.props.baseNode,this),this.setState({z:Md.size+10})}componentDidUpdate(e,r){e.adminMode!==this.props.adminMode&&(this.setState({x:0,y:0,z:0,interacted:!1}),this.unbindListeners(),this.bindListeners())}componentWillUnmount(){this.unbindListeners(),Md.delete(this.props.baseNode)}};Xf.transformSlot="--drag-transform";xZ=Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Xf),tN=xZ});var iN,Q0=V(()=>{iN={"dropshadow-offset":"0rem","dropshadow-color":"rgba(0,0,0,.85)","dropshadow-blur-radius":"0rem"}});var Ebe,Zf,nN,oN=V(()=>{ke();Ebe=ye(Pe(),1);Q0();fe();Zf=class extends me{constructor(e){super(e)}render(e,r){let i=this.props["dropshadow-offset"].split(" "),n=i[0],o=i.length>1?i[1]:i[0];return S(ce,{children:[e.baseNode.tagName==="MEDIA-ITEM"?S("style",{children:`
                        img {
                            filter: drop-shadow(${o} ${n} ${this.props["dropshadow-blur-radius"]} ${this.props["dropshadow-color"]});
                        }
                    `}):S("style",{children:`
                        :host {
                            filter: drop-shadow(${o} ${n} ${this.props["dropshadow-blur-radius"]} ${this.props["dropshadow-color"]});
                        }
                    `}),e.children]})}};Zf.defaultProps=iN;nN=Zf});var Mbe,Jf,sN,aN=V(()=>{ke();Mbe=ye(Pe(),1);fe();Jf=class extends me{constructor(e){super(e)}render(e,r){return S(ce,{children:[e.baseNode.tagName==="MEDIA-ITEM"?S("style",{children:`
                        img {
                            background-color: ${this.props["background-color"]};
                        }
                    `}):S("style",{children:`
                        :host {
                            background-color: ${this.props["background-color"]};
                        }
                    `}),e.children]})}};Jf.defaultProps={"background-color":"rgba(0,0,0,0)"};sN=Jf});var Dbe,Qf,lN,uN=V(()=>{ke();Dbe=ye(Pe(),1);Q0();fe();Qf=class extends me{constructor(e){super(e)}render(e,r){let i=Object.keys(e).reduce((n,o)=>{if(o.includes("-style")){let s=o.replace("-style","");n.push({part:s,styles:e[o]?e[o].replaceAll(";","!important;"):""})}return n},[]);return S(ce,{children:[S("style",{children:i.map(({part:n,styles:o})=>`[part*="${n}"] { ${o} }`)}),e.children]})}};Qf.defaultProps={};lN=Qf});var cN=V(()=>{});var Wbe,em,dN,pN=V(()=>{ke();Wbe=ye(Pe(),1);cN();fe();em=class extends me{constructor(e){super(e)}calculateDuration(e){return 5*(Math.max(100-Math.abs(e),5)*.01)}render(e,r){let i=this.calculateDuration(Number(this.props["blink-speed"])),n=Math.max(99.9-this.props["blink-pulse"],.1),o="steps(1)";switch(!0){case(isNaN(Number(this.props["blink-transition"]))&&this.props["blink-transition"]=="linear"):o="linear";break;case(isNaN(Number(this.props["blink-transition"]))&&this.props["blink-transition"]=="ease"):o="ease";break;case Number(this.props["blink-transition"])>0:o="ease";break}return S(ce,{children:[e.children,S("style",{children:`
					:host {
						animation: ${i}s infinite ${o} blink;
						-webkit-animation: ${i}s infinite ${o} blink;
					}
					
					@keyframes blink {
						0% {
							opacity: 0;
						}
						50% {
							opacity: 1;
						}
						100% {
							opacity: 0;
						}
					}
				`})]})}};em.defaultProps={"blink-transition":"0","blink-speed":"75","blink-pulse":"50"};dN=em});function _Z(t){return!!t&&typeof t=="object"}function EZ(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||IZ(t)}function IZ(t){return t.$$typeof===PZ}function AZ(t){return Array.isArray(t)?[]:{}}function tm(t,e){return e.clone!==!1&&e.isMergeableObject(t)?rm(AZ(t),t,e):t}function TZ(t,e,r){return t.concat(e).map(function(i){return tm(i,r)})}function MZ(t,e,r){var i={};return r.isMergeableObject(t)&&Object.keys(t).forEach(function(n){i[n]=tm(t[n],r)}),Object.keys(e).forEach(function(n){!r.isMergeableObject(e[n])||!t[n]?i[n]=tm(e[n],r):i[n]=rm(t[n],e[n],r)}),i}function rm(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||TZ,r.isMergeableObject=r.isMergeableObject||SZ;var i=Array.isArray(e),n=Array.isArray(t),o=i===n;return o?i?r.arrayMerge(t,e,r):MZ(t,e,r):tm(e,r)}var SZ,CZ,PZ,hN=V(()=>{SZ=function(e){return _Z(e)&&!EZ(e)};CZ=typeof Symbol=="function"&&Symbol.for,PZ=CZ?Symbol.for("react.element"):60103;rm.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(i,n){return rm(i,n,r)},{})}});var RZ,im,ew=V(()=>{RZ=typeof global=="object"&&global&&global.Object===Object&&global,im=RZ});var kZ,NZ,Mr,Xn=V(()=>{ew();kZ=typeof self=="object"&&self&&self.Object===Object&&self,NZ=im||kZ||Function("return this")(),Mr=NZ});var OZ,Nn,Rd=V(()=>{Xn();OZ=Mr.Symbol,Nn=OZ});function FZ(t){var e=DZ.call(t,kd),r=t[kd];try{t[kd]=void 0;var i=!0}catch{}var n=LZ.call(t);return i&&(e?t[kd]=r:delete t[kd]),n}var fN,DZ,LZ,kd,mN,gN=V(()=>{Rd();fN=Object.prototype,DZ=fN.hasOwnProperty,LZ=fN.toString,kd=Nn?Nn.toStringTag:void 0;mN=FZ});function qZ(t){return BZ.call(t)}var zZ,BZ,vN,yN=V(()=>{zZ=Object.prototype,BZ=zZ.toString;vN=qZ});function WZ(t){return t==null?t===void 0?HZ:UZ:bN&&bN in Object(t)?mN(t):vN(t)}var UZ,HZ,bN,Zn,hu=V(()=>{Rd();gN();yN();UZ="[object Null]",HZ="[object Undefined]",bN=Nn?Nn.toStringTag:void 0;Zn=WZ});function VZ(t,e){return function(r){return t(e(r))}}var nm,tw=V(()=>{nm=VZ});var $Z,om,rw=V(()=>{tw();$Z=nm(Object.getPrototypeOf,Object),om=$Z});function jZ(t){return t!=null&&typeof t=="object"}var On,Ja=V(()=>{On=jZ});var _N=oe((p0e,SN)=>{"use strict";var wN=Array.isArray,xN=Object.keys,GZ=Object.prototype.hasOwnProperty,KZ=typeof Element<"u";function iw(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=wN(t),i=wN(e),n,o,s;if(r&&i){if(o=t.length,o!=e.length)return!1;for(n=o;n--!==0;)if(!iw(t[n],e[n]))return!1;return!0}if(r!=i)return!1;var a=t instanceof Date,l=e instanceof Date;if(a!=l)return!1;if(a&&l)return t.getTime()==e.getTime();var p=t instanceof RegExp,f=e instanceof RegExp;if(p!=f)return!1;if(p&&f)return t.toString()==e.toString();var d=xN(t);if(o=d.length,o!==xN(e).length)return!1;for(n=o;n--!==0;)if(!GZ.call(e,d[n]))return!1;if(KZ&&t instanceof Element&&e instanceof Element)return t===e;for(n=o;n--!==0;)if(s=d[n],!(s==="_owner"&&t.$$typeof)&&!iw(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}SN.exports=function(e,r){try{return iw(e,r)}catch(i){if(i.message&&i.message.match(/stack|recursion/i)||i.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",i.name,i.message),!1;throw i}}});function YZ(){this.__data__=[],this.size=0}var EN,CN=V(()=>{EN=YZ});function XZ(t,e){return t===e||t!==t&&e!==e}var sm,nw=V(()=>{sm=XZ});function ZZ(t,e){for(var r=t.length;r--;)if(sm(t[r][0],e))return r;return-1}var Zs,Nd=V(()=>{nw();Zs=ZZ});function eJ(t){var e=this.__data__,r=Zs(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():QZ.call(e,r,1),--this.size,!0}var JZ,QZ,PN,IN=V(()=>{Nd();JZ=Array.prototype,QZ=JZ.splice;PN=eJ});function tJ(t){var e=this.__data__,r=Zs(e,t);return r<0?void 0:e[r][1]}var AN,TN=V(()=>{Nd();AN=tJ});function rJ(t){return Zs(this.__data__,t)>-1}var MN,RN=V(()=>{Nd();MN=rJ});function iJ(t,e){var r=this.__data__,i=Zs(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}var kN,NN=V(()=>{Nd();kN=iJ});function fu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}var Js,Od=V(()=>{CN();IN();TN();RN();NN();fu.prototype.clear=EN;fu.prototype.delete=PN;fu.prototype.get=AN;fu.prototype.has=MN;fu.prototype.set=kN;Js=fu});function nJ(){this.__data__=new Js,this.size=0}var ON,DN=V(()=>{Od();ON=nJ});function oJ(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var LN,FN=V(()=>{LN=oJ});function sJ(t){return this.__data__.get(t)}var zN,BN=V(()=>{zN=sJ});function aJ(t){return this.__data__.has(t)}var qN,UN=V(()=>{qN=aJ});function lJ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ao,mu=V(()=>{Ao=lJ});function hJ(t){if(!Ao(t))return!1;var e=Zn(t);return e==cJ||e==dJ||e==uJ||e==pJ}var uJ,cJ,dJ,pJ,am,ow=V(()=>{hu();mu();uJ="[object AsyncFunction]",cJ="[object Function]",dJ="[object GeneratorFunction]",pJ="[object Proxy]";am=hJ});var fJ,lm,HN=V(()=>{Xn();fJ=Mr["__core-js_shared__"],lm=fJ});function mJ(t){return!!WN&&WN in t}var WN,VN,$N=V(()=>{HN();WN=function(){var t=/[^.]+$/.exec(lm&&lm.keys&&lm.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();VN=mJ});function yJ(t){if(t!=null){try{return vJ.call(t)}catch{}try{return t+""}catch{}}return""}var gJ,vJ,ls,sw=V(()=>{gJ=Function.prototype,vJ=gJ.toString;ls=yJ});function PJ(t){if(!Ao(t)||VN(t))return!1;var e=am(t)?CJ:wJ;return e.test(ls(t))}var bJ,wJ,xJ,SJ,_J,EJ,CJ,jN,GN=V(()=>{ow();$N();mu();sw();bJ=/[\\^$.*+?()[\]{}|]/g,wJ=/^\[object .+?Constructor\]$/,xJ=Function.prototype,SJ=Object.prototype,_J=xJ.toString,EJ=SJ.hasOwnProperty,CJ=RegExp("^"+_J.call(EJ).replace(bJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");jN=PJ});function IJ(t,e){return t?.[e]}var KN,YN=V(()=>{KN=IJ});function AJ(t,e){var r=KN(t,e);return jN(r)?r:void 0}var Ki,Qs=V(()=>{GN();YN();Ki=AJ});var TJ,ea,um=V(()=>{Qs();Xn();TJ=Ki(Mr,"Map"),ea=TJ});var MJ,us,Dd=V(()=>{Qs();MJ=Ki(Object,"create"),us=MJ});function RJ(){this.__data__=us?us(null):{},this.size=0}var XN,ZN=V(()=>{Dd();XN=RJ});function kJ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var JN,QN=V(()=>{JN=kJ});function LJ(t){var e=this.__data__;if(us){var r=e[t];return r===NJ?void 0:r}return DJ.call(e,t)?e[t]:void 0}var NJ,OJ,DJ,eO,tO=V(()=>{Dd();NJ="__lodash_hash_undefined__",OJ=Object.prototype,DJ=OJ.hasOwnProperty;eO=LJ});function BJ(t){var e=this.__data__;return us?e[t]!==void 0:zJ.call(e,t)}var FJ,zJ,rO,iO=V(()=>{Dd();FJ=Object.prototype,zJ=FJ.hasOwnProperty;rO=BJ});function UJ(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=us&&e===void 0?qJ:e,this}var qJ,nO,oO=V(()=>{Dd();qJ="__lodash_hash_undefined__";nO=UJ});function gu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}var aw,sO=V(()=>{ZN();QN();tO();iO();oO();gu.prototype.clear=XN;gu.prototype.delete=JN;gu.prototype.get=eO;gu.prototype.has=rO;gu.prototype.set=nO;aw=gu});function HJ(){this.size=0,this.__data__={hash:new aw,map:new(ea||Js),string:new aw}}var aO,lO=V(()=>{sO();Od();um();aO=HJ});function WJ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var uO,cO=V(()=>{uO=WJ});function VJ(t,e){var r=t.__data__;return uO(e)?r[typeof e=="string"?"string":"hash"]:r.map}var ta,Ld=V(()=>{cO();ta=VJ});function $J(t){var e=ta(this,t).delete(t);return this.size-=e?1:0,e}var dO,pO=V(()=>{Ld();dO=$J});function jJ(t){return ta(this,t).get(t)}var hO,fO=V(()=>{Ld();hO=jJ});function GJ(t){return ta(this,t).has(t)}var mO,gO=V(()=>{Ld();mO=GJ});function KJ(t,e){var r=ta(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}var vO,yO=V(()=>{Ld();vO=KJ});function vu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}var Fd,lw=V(()=>{lO();pO();fO();gO();yO();vu.prototype.clear=aO;vu.prototype.delete=dO;vu.prototype.get=hO;vu.prototype.has=mO;vu.prototype.set=vO;Fd=vu});function XJ(t,e){var r=this.__data__;if(r instanceof Js){var i=r.__data__;if(!ea||i.length<YJ-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Fd(i)}return r.set(t,e),this.size=r.size,this}var YJ,bO,wO=V(()=>{Od();um();lw();YJ=200;bO=XJ});function yu(t){var e=this.__data__=new Js(t);this.size=e.size}var xO,SO=V(()=>{Od();DN();FN();BN();UN();wO();yu.prototype.clear=ON;yu.prototype.delete=LN;yu.prototype.get=zN;yu.prototype.has=qN;yu.prototype.set=bO;xO=yu});function ZJ(t,e){for(var r=-1,i=t==null?0:t.length;++r<i&&e(t[r],r,t)!==!1;);return t}var _O,EO=V(()=>{_O=ZJ});var JJ,uw,CO=V(()=>{Qs();JJ=function(){try{var t=Ki(Object,"defineProperty");return t({},"",{}),t}catch{}}(),uw=JJ});function QJ(t,e,r){e=="__proto__"&&uw?uw(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var cm,cw=V(()=>{CO();cm=QJ});function rQ(t,e,r){var i=t[e];(!(tQ.call(t,e)&&sm(i,r))||r===void 0&&!(e in t))&&cm(t,e,r)}var eQ,tQ,dm,dw=V(()=>{cw();nw();eQ=Object.prototype,tQ=eQ.hasOwnProperty;dm=rQ});function iQ(t,e,r,i){var n=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(r[a],t[a],a,r,t):void 0;l===void 0&&(l=t[a]),n?cm(r,a,l):dm(r,a,l)}return r}var ra,zd=V(()=>{dw();cw();ra=iQ});function nQ(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var PO,IO=V(()=>{PO=nQ});function sQ(t){return On(t)&&Zn(t)==oQ}var oQ,pw,AO=V(()=>{hu();Ja();oQ="[object Arguments]";pw=sQ});var TO,aQ,lQ,uQ,MO,RO=V(()=>{AO();Ja();TO=Object.prototype,aQ=TO.hasOwnProperty,lQ=TO.propertyIsEnumerable,uQ=pw(function(){return arguments}())?pw:function(t){return On(t)&&aQ.call(t,"callee")&&!lQ.call(t,"callee")},MO=uQ});var cQ,To,bu=V(()=>{cQ=Array.isArray,To=cQ});function dQ(){return!1}var kO,NO=V(()=>{kO=dQ});var LO,OO,pQ,DO,hQ,fQ,pm,hw=V(()=>{Xn();NO();LO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,OO=LO&&typeof module=="object"&&module&&!module.nodeType&&module,pQ=OO&&OO.exports===LO,DO=pQ?Mr.Buffer:void 0,hQ=DO?DO.isBuffer:void 0,fQ=hQ||kO,pm=fQ});function vQ(t,e){var r=typeof t;return e=e??mQ,!!e&&(r=="number"||r!="symbol"&&gQ.test(t))&&t>-1&&t%1==0&&t<e}var mQ,gQ,FO,zO=V(()=>{mQ=9007199254740991,gQ=/^(?:0|[1-9]\d*)$/;FO=vQ});function bQ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=yQ}var yQ,hm,fw=V(()=>{yQ=9007199254740991;hm=bQ});function VQ(t){return On(t)&&hm(t.length)&&!!dr[Zn(t)]}var wQ,xQ,SQ,_Q,EQ,CQ,PQ,IQ,AQ,TQ,MQ,RQ,kQ,NQ,OQ,DQ,LQ,FQ,zQ,BQ,qQ,UQ,HQ,WQ,dr,BO,qO=V(()=>{hu();fw();Ja();wQ="[object Arguments]",xQ="[object Array]",SQ="[object Boolean]",_Q="[object Date]",EQ="[object Error]",CQ="[object Function]",PQ="[object Map]",IQ="[object Number]",AQ="[object Object]",TQ="[object RegExp]",MQ="[object Set]",RQ="[object String]",kQ="[object WeakMap]",NQ="[object ArrayBuffer]",OQ="[object DataView]",DQ="[object Float32Array]",LQ="[object Float64Array]",FQ="[object Int8Array]",zQ="[object Int16Array]",BQ="[object Int32Array]",qQ="[object Uint8Array]",UQ="[object Uint8ClampedArray]",HQ="[object Uint16Array]",WQ="[object Uint32Array]",dr={};dr[DQ]=dr[LQ]=dr[FQ]=dr[zQ]=dr[BQ]=dr[qQ]=dr[UQ]=dr[HQ]=dr[WQ]=!0;dr[wQ]=dr[xQ]=dr[NQ]=dr[SQ]=dr[OQ]=dr[_Q]=dr[EQ]=dr[CQ]=dr[PQ]=dr[IQ]=dr[AQ]=dr[TQ]=dr[MQ]=dr[RQ]=dr[kQ]=!1;BO=VQ});function $Q(t){return function(e){return t(e)}}var wu,fm=V(()=>{wu=$Q});var UO,Bd,jQ,mw,GQ,cs,mm=V(()=>{ew();UO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Bd=UO&&typeof module=="object"&&module&&!module.nodeType&&module,jQ=Bd&&Bd.exports===UO,mw=jQ&&im.process,GQ=function(){try{var t=Bd&&Bd.require&&Bd.require("util").types;return t||mw&&mw.binding&&mw.binding("util")}catch{}}(),cs=GQ});var HO,KQ,WO,VO=V(()=>{qO();fm();mm();HO=cs&&cs.isTypedArray,KQ=HO?wu(HO):BO,WO=KQ});function ZQ(t,e){var r=To(t),i=!r&&MO(t),n=!r&&!i&&pm(t),o=!r&&!i&&!n&&WO(t),s=r||i||n||o,a=s?PO(t.length,String):[],l=a.length;for(var p in t)(e||XQ.call(t,p))&&!(s&&(p=="length"||n&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||FO(p,l)))&&a.push(p);return a}var YQ,XQ,gm,gw=V(()=>{IO();RO();bu();hw();zO();VO();YQ=Object.prototype,XQ=YQ.hasOwnProperty;gm=ZQ});function QQ(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||JQ;return t===r}var JQ,xu,vm=V(()=>{JQ=Object.prototype;xu=QQ});var eee,$O,jO=V(()=>{tw();eee=nm(Object.keys,Object),$O=eee});function iee(t){if(!xu(t))return $O(t);var e=[];for(var r in Object(t))ree.call(t,r)&&r!="constructor"&&e.push(r);return e}var tee,ree,GO,KO=V(()=>{vm();jO();tee=Object.prototype,ree=tee.hasOwnProperty;GO=iee});function nee(t){return t!=null&&hm(t.length)&&!am(t)}var ym,vw=V(()=>{ow();fw();ym=nee});function oee(t){return ym(t)?gm(t):GO(t)}var Su,bm=V(()=>{gw();KO();vw();Su=oee});function see(t,e){return t&&ra(e,Su(e),t)}var YO,XO=V(()=>{zd();bm();YO=see});function aee(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var ZO,JO=V(()=>{ZO=aee});function cee(t){if(!Ao(t))return ZO(t);var e=xu(t),r=[];for(var i in t)i=="constructor"&&(e||!uee.call(t,i))||r.push(i);return r}var lee,uee,QO,eD=V(()=>{mu();vm();JO();lee=Object.prototype,uee=lee.hasOwnProperty;QO=cee});function dee(t){return ym(t)?gm(t,!0):QO(t)}var _u,wm=V(()=>{gw();eD();vw();_u=dee});function pee(t,e){return t&&ra(e,_u(e),t)}var tD,rD=V(()=>{zd();wm();tD=pee});function fee(t,e){if(e)return t.slice();var r=t.length,i=oD?oD(r):new t.constructor(r);return t.copy(i),i}var sD,iD,hee,nD,oD,aD,lD=V(()=>{Xn();sD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,iD=sD&&typeof module=="object"&&module&&!module.nodeType&&module,hee=iD&&iD.exports===sD,nD=hee?Mr.Buffer:void 0,oD=nD?nD.allocUnsafe:void 0;aD=fee});function mee(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}var xm,yw=V(()=>{xm=mee});function gee(t,e){for(var r=-1,i=t==null?0:t.length,n=0,o=[];++r<i;){var s=t[r];e(s,r,t)&&(o[n++]=s)}return o}var uD,cD=V(()=>{uD=gee});function vee(){return[]}var Sm,bw=V(()=>{Sm=vee});var yee,bee,dD,wee,Eu,_m=V(()=>{cD();bw();yee=Object.prototype,bee=yee.propertyIsEnumerable,dD=Object.getOwnPropertySymbols,wee=dD?function(t){return t==null?[]:(t=Object(t),uD(dD(t),function(e){return bee.call(t,e)}))}:Sm,Eu=wee});function xee(t,e){return ra(t,Eu(t),e)}var pD,hD=V(()=>{zd();_m();pD=xee});function See(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}var Em,ww=V(()=>{Em=See});var _ee,Eee,Cm,xw=V(()=>{ww();rw();_m();bw();_ee=Object.getOwnPropertySymbols,Eee=_ee?function(t){for(var e=[];t;)Em(e,Eu(t)),t=om(t);return e}:Sm,Cm=Eee});function Cee(t,e){return ra(t,Cm(t),e)}var fD,mD=V(()=>{zd();xw();fD=Cee});function Pee(t,e,r){var i=e(t);return To(t)?i:Em(i,r(t))}var Pm,Sw=V(()=>{ww();bu();Pm=Pee});function Iee(t){return Pm(t,Su,Eu)}var gD,vD=V(()=>{Sw();_m();bm();gD=Iee});function Aee(t){return Pm(t,_u,Cm)}var yD,bD=V(()=>{Sw();xw();wm();yD=Aee});var Tee,Im,wD=V(()=>{Qs();Xn();Tee=Ki(Mr,"DataView"),Im=Tee});var Mee,Am,xD=V(()=>{Qs();Xn();Mee=Ki(Mr,"Promise"),Am=Mee});var Ree,Tm,SD=V(()=>{Qs();Xn();Ree=Ki(Mr,"Set"),Tm=Ree});var kee,Mm,_D=V(()=>{Qs();Xn();kee=Ki(Mr,"WeakMap"),Mm=kee});var ED,Nee,CD,PD,ID,AD,Oee,Dee,Lee,Fee,zee,Qa,Cu,Rm=V(()=>{wD();um();xD();SD();_D();hu();sw();ED="[object Map]",Nee="[object Object]",CD="[object Promise]",PD="[object Set]",ID="[object WeakMap]",AD="[object DataView]",Oee=ls(Im),Dee=ls(ea),Lee=ls(Am),Fee=ls(Tm),zee=ls(Mm),Qa=Zn;(Im&&Qa(new Im(new ArrayBuffer(1)))!=AD||ea&&Qa(new ea)!=ED||Am&&Qa(Am.resolve())!=CD||Tm&&Qa(new Tm)!=PD||Mm&&Qa(new Mm)!=ID)&&(Qa=function(t){var e=Zn(t),r=e==Nee?t.constructor:void 0,i=r?ls(r):"";if(i)switch(i){case Oee:return AD;case Dee:return ED;case Lee:return CD;case Fee:return PD;case zee:return ID}return e});Cu=Qa});function Uee(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&qee.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Bee,qee,TD,MD=V(()=>{Bee=Object.prototype,qee=Bee.hasOwnProperty;TD=Uee});var Hee,_w,RD=V(()=>{Xn();Hee=Mr.Uint8Array,_w=Hee});function Wee(t){var e=new t.constructor(t.byteLength);return new _w(e).set(new _w(t)),e}var Pu,km=V(()=>{RD();Pu=Wee});function Vee(t,e){var r=e?Pu(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var kD,ND=V(()=>{km();kD=Vee});function jee(t){var e=new t.constructor(t.source,$ee.exec(t));return e.lastIndex=t.lastIndex,e}var $ee,OD,DD=V(()=>{$ee=/\w*$/;OD=jee});function Gee(t){return FD?Object(FD.call(t)):{}}var LD,FD,zD,BD=V(()=>{Rd();LD=Nn?Nn.prototype:void 0,FD=LD?LD.valueOf:void 0;zD=Gee});function Kee(t,e){var r=e?Pu(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var qD,UD=V(()=>{km();qD=Kee});function fte(t,e,r){var i=t.constructor;switch(e){case ite:return Pu(t);case Yee:case Xee:return new i(+t);case nte:return kD(t,r);case ote:case ste:case ate:case lte:case ute:case cte:case dte:case pte:case hte:return qD(t,r);case Zee:return new i;case Jee:case tte:return new i(t);case Qee:return OD(t);case ete:return new i;case rte:return zD(t)}}var Yee,Xee,Zee,Jee,Qee,ete,tte,rte,ite,nte,ote,ste,ate,lte,ute,cte,dte,pte,hte,HD,WD=V(()=>{km();ND();DD();BD();UD();Yee="[object Boolean]",Xee="[object Date]",Zee="[object Map]",Jee="[object Number]",Qee="[object RegExp]",ete="[object Set]",tte="[object String]",rte="[object Symbol]",ite="[object ArrayBuffer]",nte="[object DataView]",ote="[object Float32Array]",ste="[object Float64Array]",ate="[object Int8Array]",lte="[object Int16Array]",ute="[object Int32Array]",cte="[object Uint8Array]",dte="[object Uint8ClampedArray]",pte="[object Uint16Array]",hte="[object Uint32Array]";HD=fte});var VD,mte,$D,jD=V(()=>{mu();VD=Object.create,mte=function(){function t(){}return function(e){if(!Ao(e))return{};if(VD)return VD(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),$D=mte});function gte(t){return typeof t.constructor=="function"&&!xu(t)?$D(om(t)):{}}var GD,KD=V(()=>{jD();rw();vm();GD=gte});function yte(t){return On(t)&&Cu(t)==vte}var vte,YD,XD=V(()=>{Rm();Ja();vte="[object Map]";YD=yte});var ZD,bte,JD,QD=V(()=>{XD();fm();mm();ZD=cs&&cs.isMap,bte=ZD?wu(ZD):YD,JD=bte});function xte(t){return On(t)&&Cu(t)==wte}var wte,eL,tL=V(()=>{Rm();Ja();wte="[object Set]";eL=xte});var rL,Ste,iL,nL=V(()=>{tL();fm();mm();rL=cs&&cs.isSet,Ste=rL?wu(rL):eL,iL=Ste});function Nm(t,e,r,i,n,o){var s,a=e&_te,l=e&Ete,p=e&Cte;if(r&&(s=n?r(t,i,n,o):r(t)),s!==void 0)return s;if(!Ao(t))return t;var f=To(t);if(f){if(s=TD(t),!a)return xm(t,s)}else{var d=Cu(t),m=d==sL||d==Mte;if(pm(t))return aD(t,a);if(d==aL||d==oL||m&&!n){if(s=l||m?{}:GD(t),!a)return l?fD(t,tD(s,t)):pD(t,YO(s,t))}else{if(!ar[d])return n?t:{};s=HD(t,d,a)}}o||(o=new xO);var g=o.get(t);if(g)return g;o.set(t,s),iL(t)?t.forEach(function(_){s.add(Nm(_,e,r,_,t,o))}):JD(t)&&t.forEach(function(_,E){s.set(E,Nm(_,e,r,E,t,o))});var v=p?l?yD:gD:l?_u:Su,x=f?void 0:v(t);return _O(x||t,function(_,E){x&&(E=_,_=t[E]),dm(s,E,Nm(_,e,r,E,t,o))}),s}var _te,Ete,Cte,oL,Pte,Ite,Ate,Tte,sL,Mte,Rte,kte,aL,Nte,Ote,Dte,Lte,Fte,zte,Bte,qte,Ute,Hte,Wte,Vte,$te,jte,Gte,Kte,ar,Om,Ew=V(()=>{SO();EO();dw();XO();rD();lD();yw();hD();mD();vD();bD();Rm();MD();WD();KD();bu();hw();QD();mu();nL();bm();wm();_te=1,Ete=2,Cte=4,oL="[object Arguments]",Pte="[object Array]",Ite="[object Boolean]",Ate="[object Date]",Tte="[object Error]",sL="[object Function]",Mte="[object GeneratorFunction]",Rte="[object Map]",kte="[object Number]",aL="[object Object]",Nte="[object RegExp]",Ote="[object Set]",Dte="[object String]",Lte="[object Symbol]",Fte="[object WeakMap]",zte="[object ArrayBuffer]",Bte="[object DataView]",qte="[object Float32Array]",Ute="[object Float64Array]",Hte="[object Int8Array]",Wte="[object Int16Array]",Vte="[object Int32Array]",$te="[object Uint8Array]",jte="[object Uint8ClampedArray]",Gte="[object Uint16Array]",Kte="[object Uint32Array]",ar={};ar[oL]=ar[Pte]=ar[zte]=ar[Bte]=ar[Ite]=ar[Ate]=ar[qte]=ar[Ute]=ar[Hte]=ar[Wte]=ar[Vte]=ar[Rte]=ar[kte]=ar[aL]=ar[Nte]=ar[Ote]=ar[Dte]=ar[Lte]=ar[$te]=ar[jte]=ar[Gte]=ar[Kte]=!0;ar[Tte]=ar[sL]=ar[Fte]=!1;Om=Nm});function Xte(t){return Om(t,Yte)}var Yte,Cw,lL=V(()=>{Ew();Yte=4;Cw=Xte});function Zte(t,e){for(var r=-1,i=t==null?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}var Dm,Pw=V(()=>{Dm=Zte});function Qte(t){return typeof t=="symbol"||On(t)&&Zn(t)==Jte}var Jte,Iu,Lm=V(()=>{hu();Ja();Jte="[object Symbol]";Iu=Qte});function Iw(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(ere);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],o=r.cache;if(o.has(n))return o.get(n);var s=t.apply(this,i);return r.cache=o.set(n,s)||o,s};return r.cache=new(Iw.Cache||Fd),r}var ere,uL,cL=V(()=>{lw();ere="Expected a function";Iw.Cache=Fd;uL=Iw});function rre(t){var e=uL(t,function(i){return r.size===tre&&r.clear(),i}),r=e.cache;return e}var tre,dL,pL=V(()=>{cL();tre=500;dL=rre});var ire,nre,ore,hL,fL=V(()=>{pL();ire=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nre=/\\(\\)?/g,ore=dL(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(ire,function(r,i,n,o){e.push(n?o.replace(nre,"$1"):i||r)}),e}),hL=ore});function are(t){if(typeof t=="string"||Iu(t))return t;var e=t+"";return e=="0"&&1/t==-sre?"-0":e}var sre,mL,gL=V(()=>{Lm();sre=1/0;mL=are});function bL(t){if(typeof t=="string")return t;if(To(t))return Dm(t,bL)+"";if(Iu(t))return yL?yL.call(t):"";var e=t+"";return e=="0"&&1/t==-lre?"-0":e}var lre,vL,yL,wL,xL=V(()=>{Rd();Pw();bu();Lm();lre=1/0,vL=Nn?Nn.prototype:void 0,yL=vL?vL.toString:void 0;wL=bL});function ure(t){return t==null?"":wL(t)}var SL,_L=V(()=>{xL();SL=ure});function cre(t){return To(t)?Dm(t,mL):Iu(t)?[t]:xm(hL(SL(t)))}var Aw,EL=V(()=>{Pw();yw();bu();Lm();fL();gL();_L();Aw=cre});function hre(t){return Om(t,dre|pre)}var dre,pre,CL,PL=V(()=>{Ew();dre=1,pre=4;CL=hre});function el(){return el=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},el.apply(this,arguments)}function fre(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function NL(t,e){if(t==null)return{};var r={},i=Object.keys(t),n,o;for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}function IL(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gre(){var t=Lr(Fm);return t||eb(!1),t}function Au(t,e,r,i){i===void 0&&(i=0);for(var n=Aw(e);t&&i<n.length;)t=t[n[i++]];return i!==n.length&&!t||t===void 0?r:t}function Tw(t,e,r){for(var i=Cw(t),n=i,o=0,s=Aw(e);o<s.length-1;o++){var a=s[o],l=Au(t,s.slice(0,o+1));if(l&&(OL(l)||Array.isArray(l)))n=n[a]=Cw(l);else{var p=s[o+1];n=n[a]=vre(p)&&Number(p)>=0?[]:{}}}return(o===0?t:n)[s[o]]===r?t:(r===void 0?delete n[s[o]]:n[s[o]]=r,o===0&&r===void 0&&delete i[s[o]],i)}function DL(t){var e=function(n){return Lt(mre,null,function(o){return o||eb(!1),Lt(t,el({},n,{formik:o}))})},r=t.displayName||t.name||t.constructor&&t.constructor.name||"Component";return e.WrappedComponent=t,e.displayName="FormikConnect("+r+")",(0,kL.default)(e,t)}var RL,kL,Fm,iEe,mre,AL,TL,OL,vre,yre,nEe,bre,wre,xre,Mw,Sre,tl,ML,_re,LL=V(()=>{hN();Ye();RL=ye(_N());eP();lL();EL();kL=ye(Dh());PL();Fm=In(void 0);Fm.displayName="FormikContext";iEe=Fm.Provider,mre=Fm.Consumer;AL=function(e){return Array.isArray(e)&&e.length===0},TL=function(e){return typeof e=="function"},OL=function(e){return e!==null&&typeof e=="object"},vre=function(e){return String(Math.floor(Number(e)))===e},yre=function(e){return Oa.count(e)===0};nEe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Oi:Ft,bre=Di(function(t,e){var r=t.action,i=NL(t,["action"]),n=r??"#",o=gre(),s=o.handleReset,a=o.handleSubmit;return Lt("form",el({onSubmit:a,ref:e,onReset:s,action:n},i))});bre.displayName="Form";wre=function(e,r,i){var n=tl(e),o=n[r];return n.splice(r,1),n.splice(i,0,o),n},xre=function(e,r,i){var n=tl(e),o=n[r];return n[r]=n[i],n[i]=o,n},Mw=function(e,r,i){var n=tl(e);return n.splice(r,0,i),n},Sre=function(e,r,i){var n=tl(e);return n[r]=i,n},tl=function(e){if(e){if(Array.isArray(e))return[].concat(e);var r=Object.keys(e).map(function(i){return parseInt(i)}).reduce(function(i,n){return n>i?n:i},0);return Array.from(el({},e,{length:r+1}))}else return[]},ML=function(e,r){var i=typeof e=="function"?e:r;return function(n){if(Array.isArray(n)||OL(n)){var o=tl(n);return i(o)}return n}},_re=function(t){fre(e,t);function e(i){var n;return n=t.call(this,i)||this,n.updateArrayField=function(o,s,a){var l=n.props,p=l.name,f=l.formik.setFormikState;f(function(d){var m=ML(a,o),g=ML(s,o),v=Tw(d.values,p,o(Au(d.values,p))),x=a?m(Au(d.errors,p)):void 0,_=s?g(Au(d.touched,p)):void 0;return AL(x)&&(x=void 0),AL(_)&&(_=void 0),el({},d,{values:v,errors:a?Tw(d.errors,p,x):d.errors,touched:s?Tw(d.touched,p,_):d.touched})})},n.push=function(o){return n.updateArrayField(function(s){return[].concat(tl(s),[CL(o)])},!1,!1)},n.handlePush=function(o){return function(){return n.push(o)}},n.swap=function(o,s){return n.updateArrayField(function(a){return xre(a,o,s)},!0,!0)},n.handleSwap=function(o,s){return function(){return n.swap(o,s)}},n.move=function(o,s){return n.updateArrayField(function(a){return wre(a,o,s)},!0,!0)},n.handleMove=function(o,s){return function(){return n.move(o,s)}},n.insert=function(o,s){return n.updateArrayField(function(a){return Mw(a,o,s)},function(a){return Mw(a,o,null)},function(a){return Mw(a,o,null)})},n.handleInsert=function(o,s){return function(){return n.insert(o,s)}},n.replace=function(o,s){return n.updateArrayField(function(a){return Sre(a,o,s)},!1,!1)},n.handleReplace=function(o,s){return function(){return n.replace(o,s)}},n.unshift=function(o){var s=-1;return n.updateArrayField(function(a){var l=a?[o].concat(a):[o];return s=l.length,l},function(a){return a?[null].concat(a):[null]},function(a){return a?[null].concat(a):[null]}),s},n.handleUnshift=function(o){return function(){return n.unshift(o)}},n.handleRemove=function(o){return function(){return n.remove(o)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(IL(n)),n.pop=n.pop.bind(IL(n)),n}var r=e.prototype;return r.componentDidUpdate=function(n){this.props.validateOnChange&&this.props.formik.validateOnChange&&!(0,RL.default)(Au(n.formik.values,n.name),Au(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},r.remove=function(n){var o;return this.updateArrayField(function(s){var a=s?tl(s):[];return o||(o=a[n]),TL(a.splice)&&a.splice(n,1),TL(a.every)&&a.every(function(l){return l===void 0})?[]:a},!0,!0),o},r.pop=function(){var n;return this.updateArrayField(function(o){var s=o.slice();return n||(n=s&&s.pop&&s.pop()),s},!0,!0),n},r.render=function(){var n={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},o=this.props,s=o.component,a=o.render,l=o.children,p=o.name,f=o.formik,d=NL(f,["validate","validationSchema"]),m=el({},n,{form:d,name:p});return s?Lt(s,m):a?a(m):l?typeof l=="function"?l(m):yre(l)?null:Oa.only(l):null},e}(me);_re.defaultProps={validateOnChange:!0}});var zL=oe((sEe,FL)=>{var Ere="__lodash_hash_undefined__";function Cre(t){return this.__data__.set(t,Ere),this}FL.exports=Cre});var qL=oe((aEe,BL)=>{function Pre(t){return this.__data__.has(t)}BL.exports=Pre});var HL=oe((lEe,UL)=>{var Ire=ff(),Are=zL(),Tre=qL();function zm(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Ire;++e<r;)this.add(t[e])}zm.prototype.add=zm.prototype.push=Are;zm.prototype.has=Tre;UL.exports=zm});var VL=oe((uEe,WL)=>{function Mre(t,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}WL.exports=Mre});var jL=oe((cEe,$L)=>{function Rre(t,e){return t.has(e)}$L.exports=Rre});var Rw=oe((dEe,GL)=>{var kre=HL(),Nre=VL(),Ore=jL(),Dre=1,Lre=2;function Fre(t,e,r,i,n,o){var s=r&Dre,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var p=o.get(t),f=o.get(e);if(p&&f)return p==e&&f==t;var d=-1,m=!0,g=r&Lre?new kre:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var v=t[d],x=e[d];if(i)var _=s?i(x,v,d,e,t,o):i(v,x,d,t,e,o);if(_!==void 0){if(_)continue;m=!1;break}if(g){if(!Nre(e,function(E,O){if(!Ore(g,O)&&(v===E||n(v,E,r,i,o)))return g.push(O)})){m=!1;break}}else if(!(v===x||n(v,x,r,i,o))){m=!1;break}}return o.delete(t),o.delete(e),m}GL.exports=Fre});var YL=oe((pEe,KL)=>{function zre(t){var e=-1,r=Array(t.size);return t.forEach(function(i,n){r[++e]=[n,i]}),r}KL.exports=zre});var ZL=oe((hEe,XL)=>{function Bre(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}XL.exports=Bre});var r2=oe((fEe,t2)=>{var JL=hd(),QL=i0(),qre=Gl(),Ure=Rw(),Hre=YL(),Wre=ZL(),Vre=1,$re=2,jre="[object Boolean]",Gre="[object Date]",Kre="[object Error]",Yre="[object Map]",Xre="[object Number]",Zre="[object RegExp]",Jre="[object Set]",Qre="[object String]",eie="[object Symbol]",tie="[object ArrayBuffer]",rie="[object DataView]",e2=JL?JL.prototype:void 0,kw=e2?e2.valueOf:void 0;function iie(t,e,r,i,n,o,s){switch(r){case rie:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case tie:return!(t.byteLength!=e.byteLength||!o(new QL(t),new QL(e)));case jre:case Gre:case Xre:return qre(+t,+e);case Kre:return t.name==e.name&&t.message==e.message;case Zre:case Qre:return t==e+"";case Yre:var a=Hre;case Jre:var l=i&Vre;if(a||(a=Wre),t.size!=e.size&&!l)return!1;var p=s.get(t);if(p)return p==e;i|=$re,s.set(t,e);var f=Ure(a(t),a(e),i,n,o,s);return s.delete(t),f;case eie:if(kw)return kw.call(t)==kw.call(e)}return!1}t2.exports=iie});var Nw=oe((mEe,i2)=>{function nie(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}i2.exports=nie});var Ow=oe((gEe,n2)=>{var oie=Nw(),sie=_o();function aie(t,e,r){var i=e(t);return sie(t)?i:oie(i,r(t))}n2.exports=aie});var s2=oe((vEe,o2)=>{function lie(t,e){for(var r=-1,i=t==null?0:t.length,n=0,o=[];++r<i;){var s=t[r];e(s,r,t)&&(o[n++]=s)}return o}o2.exports=lie});var Dw=oe((yEe,a2)=>{function uie(){return[]}a2.exports=uie});var Lw=oe((bEe,u2)=>{var cie=s2(),die=Dw(),pie=Object.prototype,hie=pie.propertyIsEnumerable,l2=Object.getOwnPropertySymbols,fie=l2?function(t){return t==null?[]:(t=Object(t),cie(l2(t),function(e){return hie.call(t,e)}))}:die;u2.exports=fie});var d2=oe((wEe,c2)=>{var mie=n0(),gie=mie(Object.keys,Object);c2.exports=gie});var h2=oe((xEe,p2)=>{var vie=yf(),yie=d2(),bie=Object.prototype,wie=bie.hasOwnProperty;function xie(t){if(!vie(t))return yie(t);var e=[];for(var r in Object(t))wie.call(t,r)&&r!="constructor"&&e.push(r);return e}p2.exports=xie});var Fw=oe((SEe,f2)=>{var Sie=l0(),_ie=h2(),Eie=yd();function Cie(t){return Eie(t)?Sie(t):_ie(t)}f2.exports=Cie});var g2=oe((_Ee,m2)=>{var Pie=Ow(),Iie=Lw(),Aie=Fw();function Tie(t){return Pie(t,Aie,Iie)}m2.exports=Tie});var b2=oe((EEe,y2)=>{var v2=g2(),Mie=1,Rie=Object.prototype,kie=Rie.hasOwnProperty;function Nie(t,e,r,i,n,o){var s=r&Mie,a=v2(t),l=a.length,p=v2(e),f=p.length;if(l!=f&&!s)return!1;for(var d=l;d--;){var m=a[d];if(!(s?m in e:kie.call(e,m)))return!1}var g=o.get(t),v=o.get(e);if(g&&v)return g==e&&v==t;var x=!0;o.set(t,e),o.set(e,t);for(var _=s;++d<l;){m=a[d];var E=t[m],O=e[m];if(i)var L=s?i(O,E,m,e,t,o):i(E,O,m,t,e,o);if(!(L===void 0?E===O||n(E,O,r,i,o):L)){x=!1;break}_||(_=m=="constructor")}if(x&&!_){var I=t.constructor,D=e.constructor;I!=D&&"constructor"in t&&"constructor"in e&&!(typeof I=="function"&&I instanceof I&&typeof D=="function"&&D instanceof D)&&(x=!1)}return o.delete(t),o.delete(e),x}y2.exports=Nie});var x2=oe((CEe,w2)=>{var Oie=$s(),Die=Gn(),Lie=Oie(Die,"DataView");w2.exports=Lie});var _2=oe((PEe,S2)=>{var Fie=$s(),zie=Gn(),Bie=Fie(zie,"Promise");S2.exports=Bie});var C2=oe((IEe,E2)=>{var qie=$s(),Uie=Gn(),Hie=qie(Uie,"Set");E2.exports=Hie});var I2=oe((AEe,P2)=>{var Wie=$s(),Vie=Gn(),$ie=Wie(Vie,"WeakMap");P2.exports=$ie});var D2=oe((TEe,O2)=>{var zw=x2(),Bw=hf(),qw=_2(),Uw=C2(),Hw=I2(),N2=Wa(),Tu=e0(),A2="[object Map]",jie="[object Object]",T2="[object Promise]",M2="[object Set]",R2="[object WeakMap]",k2="[object DataView]",Gie=Tu(zw),Kie=Tu(Bw),Yie=Tu(qw),Xie=Tu(Uw),Zie=Tu(Hw),rl=N2;(zw&&rl(new zw(new ArrayBuffer(1)))!=k2||Bw&&rl(new Bw)!=A2||qw&&rl(qw.resolve())!=T2||Uw&&rl(new Uw)!=M2||Hw&&rl(new Hw)!=R2)&&(rl=function(t){var e=N2(t),r=e==jie?t.constructor:void 0,i=r?Tu(r):"";if(i)switch(i){case Gie:return k2;case Kie:return A2;case Yie:return T2;case Xie:return M2;case Zie:return R2}return e});O2.exports=rl});var W2=oe((MEe,H2)=>{var Ww=mf(),Jie=Rw(),Qie=r2(),ene=b2(),L2=D2(),F2=_o(),z2=xf(),tne=Sf(),rne=1,B2="[object Arguments]",q2="[object Array]",Bm="[object Object]",ine=Object.prototype,U2=ine.hasOwnProperty;function nne(t,e,r,i,n,o){var s=F2(t),a=F2(e),l=s?q2:L2(t),p=a?q2:L2(e);l=l==B2?Bm:l,p=p==B2?Bm:p;var f=l==Bm,d=p==Bm,m=l==p;if(m&&z2(t)){if(!z2(e))return!1;s=!0,f=!1}if(m&&!f)return o||(o=new Ww),s||tne(t)?Jie(t,e,r,i,n,o):Qie(t,e,l,r,i,n,o);if(!(r&rne)){var g=f&&U2.call(t,"__wrapped__"),v=d&&U2.call(e,"__wrapped__");if(g||v){var x=g?t.value():t,_=v?e.value():e;return o||(o=new Ww),n(x,_,r,i,o)}}return m?(o||(o=new Ww),ene(t,e,r,i,n,o)):!1}H2.exports=nne});var Vw=oe((REe,j2)=>{var one=W2(),V2=js();function $2(t,e,r,i,n){return t===e?!0:t==null||e==null||!V2(t)&&!V2(e)?t!==t&&e!==e:one(t,e,r,i,$2,n)}j2.exports=$2});var K2=oe((kEe,G2)=>{var sne=mf(),ane=Vw(),lne=1,une=2;function cne(t,e,r,i){var n=r.length,o=n,s=!i;if(t==null)return!o;for(t=Object(t);n--;){var a=r[n];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++n<o;){a=r[n];var l=a[0],p=t[l],f=a[1];if(s&&a[2]){if(p===void 0&&!(l in t))return!1}else{var d=new sne;if(i)var m=i(p,f,l,t,e,d);if(!(m===void 0?ane(f,p,lne|une,i,d):m))return!1}}return!0}G2.exports=cne});var $w=oe((NEe,Y2)=>{var dne=So();function pne(t){return t===t&&!dne(t)}Y2.exports=pne});var Z2=oe((OEe,X2)=>{var hne=$w(),fne=Fw();function mne(t){for(var e=fne(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,hne(n)]}return e}X2.exports=mne});var jw=oe((DEe,J2)=>{function gne(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}J2.exports=gne});var eF=oe((LEe,Q2)=>{var vne=K2(),yne=Z2(),bne=jw();function wne(t){var e=yne(t);return e.length==1&&e[0][2]?bne(e[0][0],e[0][1]):function(r){return r===t||vne(r,t,e)}}Q2.exports=wne});var qm=oe((FEe,tF)=>{var xne=Wa(),Sne=js(),_ne="[object Symbol]";function Ene(t){return typeof t=="symbol"||Sne(t)&&xne(t)==_ne}tF.exports=Ene});var Um=oe((zEe,rF)=>{var Cne=_o(),Pne=qm(),Ine=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ane=/^\w*$/;function Tne(t,e){if(Cne(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Pne(t)?!0:Ane.test(t)||!Ine.test(t)||e!=null&&t in Object(e)}rF.exports=Tne});var oF=oe((BEe,nF)=>{var iF=ff(),Mne="Expected a function";function Gw(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Mne);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],o=r.cache;if(o.has(n))return o.get(n);var s=t.apply(this,i);return r.cache=o.set(n,s)||o,s};return r.cache=new(Gw.Cache||iF),r}Gw.Cache=iF;nF.exports=Gw});var aF=oe((qEe,sF)=>{var Rne=oF(),kne=500;function Nne(t){var e=Rne(t,function(i){return r.size===kne&&r.clear(),i}),r=e.cache;return e}sF.exports=Nne});var uF=oe((UEe,lF)=>{var One=aF(),Dne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lne=/\\(\\)?/g,Fne=One(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Dne,function(r,i,n,o){e.push(n?o.replace(Lne,"$1"):i||r)}),e});lF.exports=Fne});var Kw=oe((HEe,cF)=>{function zne(t,e){for(var r=-1,i=t==null?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}cF.exports=zne});var gF=oe((WEe,mF)=>{var dF=hd(),Bne=Kw(),qne=_o(),Une=qm(),Hne=1/0,pF=dF?dF.prototype:void 0,hF=pF?pF.toString:void 0;function fF(t){if(typeof t=="string")return t;if(qne(t))return Bne(t,fF)+"";if(Une(t))return hF?hF.call(t):"";var e=t+"";return e=="0"&&1/t==-Hne?"-0":e}mF.exports=fF});var yF=oe((VEe,vF)=>{var Wne=gF();function Vne(t){return t==null?"":Wne(t)}vF.exports=Vne});var qd=oe(($Ee,bF)=>{var $ne=_o(),jne=Um(),Gne=uF(),Kne=yF();function Yne(t,e){return $ne(t)?t:jne(t,e)?[t]:Gne(Kne(t))}bF.exports=Yne});var Mu=oe((jEe,wF)=>{var Xne=qm(),Zne=1/0;function Jne(t){if(typeof t=="string"||Xne(t))return t;var e=t+"";return e=="0"&&1/t==-Zne?"-0":e}wF.exports=Jne});var Hm=oe((GEe,xF)=>{var Qne=qd(),eoe=Mu();function toe(t,e){e=Qne(e,t);for(var r=0,i=e.length;t!=null&&r<i;)t=t[eoe(e[r++])];return r&&r==i?t:void 0}xF.exports=toe});var _F=oe((KEe,SF)=>{var roe=Hm();function ioe(t,e,r){var i=t==null?void 0:roe(t,e);return i===void 0?r:i}SF.exports=ioe});var CF=oe((YEe,EF)=>{function noe(t,e){return t!=null&&e in Object(t)}EF.exports=noe});var IF=oe((XEe,PF)=>{var ooe=qd(),soe=bf(),aoe=_o(),loe=Sd(),uoe=wf(),coe=Mu();function doe(t,e,r){e=ooe(e,t);for(var i=-1,n=e.length,o=!1;++i<n;){var s=coe(e[i]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++i!=n?o:(n=t==null?0:t.length,!!n&&uoe(n)&&loe(s,n)&&(aoe(t)||soe(t)))}PF.exports=doe});var TF=oe((ZEe,AF)=>{var poe=CF(),hoe=IF();function foe(t,e){return t!=null&&hoe(t,e,poe)}AF.exports=foe});var RF=oe((JEe,MF)=>{var moe=Vw(),goe=_F(),voe=TF(),yoe=Um(),boe=$w(),woe=jw(),xoe=Mu(),Soe=1,_oe=2;function Eoe(t,e){return yoe(t)&&boe(e)?woe(xoe(t),e):function(r){var i=goe(r,t);return i===void 0&&i===e?voe(r,t):moe(e,i,Soe|_oe)}}MF.exports=Eoe});var NF=oe((QEe,kF)=>{function Coe(t){return function(e){return e?.[t]}}kF.exports=Coe});var DF=oe((eCe,OF)=>{var Poe=Hm();function Ioe(t){return function(e){return Poe(e,t)}}OF.exports=Ioe});var FF=oe((tCe,LF)=>{var Aoe=NF(),Toe=DF(),Moe=Um(),Roe=Mu();function koe(t){return Moe(t)?Aoe(Roe(t)):Toe(t)}LF.exports=koe});var Yw=oe((rCe,zF)=>{var Noe=eF(),Ooe=RF(),Doe=Ef(),Loe=_o(),Foe=FF();function zoe(t){return typeof t=="function"?t:t==null?Doe:typeof t=="object"?Loe(t)?Ooe(t[0],t[1]):Noe(t):Foe(t)}zF.exports=zoe});var qF=oe((iCe,BF)=>{var Boe="Expected a function";function qoe(t){if(typeof t!="function")throw new TypeError(Boe);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}BF.exports=qoe});var WF=oe((nCe,HF)=>{var Uoe=a0(),Hoe=qd(),Woe=Sd(),UF=So(),Voe=Mu();function $oe(t,e,r,i){if(!UF(t))return t;e=Hoe(e,t);for(var n=-1,o=e.length,s=o-1,a=t;a!=null&&++n<o;){var l=Voe(e[n]),p=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(n!=s){var f=a[l];p=i?i(f,l,a):void 0,p===void 0&&(p=UF(f)?f:Woe(e[n+1])?[]:{})}Uoe(a,l,p),a=a[l]}return t}HF.exports=$oe});var $F=oe((oCe,VF)=>{var joe=Hm(),Goe=WF(),Koe=qd();function Yoe(t,e,r){for(var i=-1,n=e.length,o={};++i<n;){var s=e[i],a=joe(t,s);r(a,s)&&Goe(o,Koe(s,t),a)}return o}VF.exports=Yoe});var GF=oe((sCe,jF)=>{var Xoe=Nw(),Zoe=vf(),Joe=Lw(),Qoe=Dw(),ese=Object.getOwnPropertySymbols,tse=ese?function(t){for(var e=[];t;)Xoe(e,Joe(t)),t=Zoe(t);return e}:Qoe;jF.exports=tse});var YF=oe((aCe,KF)=>{var rse=Ow(),ise=GF(),nse=_f();function ose(t){return rse(t,nse,ise)}KF.exports=ose});var ZF=oe((lCe,XF)=>{var sse=Kw(),ase=Yw(),lse=$F(),use=YF();function cse(t,e){if(t==null)return{};var r=sse(use(t),function(i){return[i]});return e=ase(e),lse(t,r,function(i,n){return e(i,n[0])})}XF.exports=cse});var QF=oe((uCe,JF)=>{var dse=Yw(),pse=qF(),hse=ZF();function fse(t,e){return hse(t,pse(dse(e)))}JF.exports=fse});var e5,t5,Xw,mse,r5=V(()=>{Ye();LL();e5=ye(QF()),t5=ye(Pe()),Xw=class extends ze.Component{render(){return null}componentDidUpdate(e){if(!t5.default.isEqual(e.formik.initialValues,this.props.formik.initialValues))return;let r=(0,e5.default)(this.props.formik.values,function(i,n){return e.formik.values[n]===i});Object.keys(r).length>0&&this.props.onChange(r,this.props.formik)}},mse=DL(Xw)});var gse,i5=V(()=>{gse=ye(Pe())});var Wm=V(()=>{r5();Be();i5();Gs()});var n5=oe((gCe,Zw)=>{(function(){function t(v,x){document.addEventListener?v.addEventListener("scroll",x,!1):v.attachEvent("scroll",x)}function e(v){document.body?v():document.addEventListener?document.addEventListener("DOMContentLoaded",function x(){document.removeEventListener("DOMContentLoaded",x),v()}):document.attachEvent("onreadystatechange",function x(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",x),v())})}function r(v){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(v)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(v,x){v.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+x+";"}function n(v){var x=v.g.offsetWidth,_=x+100;return v.j.style.width=_+"px",v.i.scrollLeft=_,v.h.scrollLeft=v.h.scrollWidth+100,v.l!==x?(v.l=x,!0):!1}function o(v,x){function _(){var O=E;n(O)&&O.g.parentNode!==null&&x(O.l)}var E=v;t(v.h,_),t(v.i,_),n(v)}function s(v,x,_){x=x||{},_=_||window,this.family=v,this.style=x.style||"normal",this.weight=x.weight||"normal",this.stretch=x.stretch||"normal",this.context=_}var a=null,l=null,p=null,f=null;function d(v){return l===null&&(m(v)&&/Apple/.test(window.navigator.vendor)?(v=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!v&&603>parseInt(v[1],10)):l=!1),l}function m(v){return f===null&&(f=!!v.document.fonts),f}function g(v,x){var _=v.style,E=v.weight;if(p===null){var O=document.createElement("div");try{O.style.font="condensed 100px sans-serif"}catch{}p=O.style.font!==""}return[_,E,p?v.stretch:"","100px",x].join(" ")}s.prototype.load=function(v,x){var _=this,E=v||"BESbswy",O=0,L=x||3e3,I=new Date().getTime();return new Promise(function(D,R){if(m(_.context)&&!d(_.context)){var W=new Promise(function(z,$){function q(){new Date().getTime()-I>=L?$(Error(""+L+"ms timeout exceeded")):_.context.document.fonts.load(g(_,'"'+_.family+'"'),E).then(function(J){1<=J.length?z():setTimeout(q,25)},$)}q()}),N=new Promise(function(z,$){O=setTimeout(function(){$(Error(""+L+"ms timeout exceeded"))},L)});Promise.race([N,W]).then(function(){clearTimeout(O),D(_)},R)}else e(function(){function z(){var ae;(ae=se!=-1&&ee!=-1||se!=-1&&Z!=-1||ee!=-1&&Z!=-1)&&((ae=se!=ee&&se!=Z&&ee!=Z)||(a===null&&(ae=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),a=!!ae&&(536>parseInt(ae[1],10)||parseInt(ae[1],10)===536&&11>=parseInt(ae[2],10))),ae=a&&(se==Y&&ee==Y&&Z==Y||se==te&&ee==te&&Z==te||se==re&&ee==re&&Z==re)),ae=!ae),ae&&(ie.parentNode!==null&&ie.parentNode.removeChild(ie),clearTimeout(O),D(_))}function $(){if(new Date().getTime()-I>=L)ie.parentNode!==null&&ie.parentNode.removeChild(ie),R(Error(""+L+"ms timeout exceeded"));else{var ae=_.context.document.hidden;(ae===!0||ae===void 0)&&(se=q.g.offsetWidth,ee=J.g.offsetWidth,Z=X.g.offsetWidth,z()),O=setTimeout($,50)}}var q=new r(E),J=new r(E),X=new r(E),se=-1,ee=-1,Z=-1,Y=-1,te=-1,re=-1,ie=document.createElement("div");ie.dir="ltr",i(q,g(_,"sans-serif")),i(J,g(_,"serif")),i(X,g(_,"monospace")),ie.appendChild(q.g),ie.appendChild(J.g),ie.appendChild(X.g),_.context.document.body.appendChild(ie),Y=q.g.offsetWidth,te=J.g.offsetWidth,re=X.g.offsetWidth,$(),o(q,function(ae){se=ae,z()}),i(q,g(_,'"'+_.family+'",sans-serif')),o(J,function(ae){ee=ae,z()}),i(J,g(_,'"'+_.family+'",serif')),o(X,function(ae){Z=ae,z()}),i(X,g(_,'"'+_.family+'",monospace'))})})},typeof Zw=="object"?Zw.exports=s:(window.FontFaceObserver=s,window.FontFaceObserver.prototype.load=s.prototype.load)})()});var o5,s5,Jw,a5,l5=V(()=>{ke();o5=ye(Pe(),1);Wm();s5=ye(n5(),1);fe();Jw=class extends me{constructor(e){super(e),this.state={parentWidth:{},width:{},scale:1,fontFamily:null},this.observer=null,this.timeout=null}render(e,r){let i=!!e.baseNode?.getAttribute("style")?.includes("line-height"),n=window.getComputedStyle(e.baseNode),o=n.letterSpacing,s=n.direction,a="0px";return o.includes("-")&&(a=o.replace("-","")),S(ce,{children:[S("span",{class:"fit-text",children:e.children}),S("style",{children:`
					:host { 
                        white-space: nowrap!important;
                        display: inline-block!important;
                        --font-scale: ${this.state.scale}!important;
                        ${i?"":"line-height: 1!important;"}
                        animation: none!important;
                        will-change: transform;
                    --rotate-transform: 0deg!important;
                    }
                    .fit-text {
                        padding${s==="ltr"?"-right":"-left"}: ${a}!important;
                    }
				`})]})}locateFitText=()=>{if(!this.props.baseNode||!this.props.baseNode.parentElement)return;let e=this.props.baseNode.parentElement.getBoundingClientRect().width,r=this.props.baseNode.getBoundingClientRect().width;this.setState({parentWidth:e,width:r})};handleResize=()=>{this.locateFitText()};handleFontLoad=()=>{this.timeout=setTimeout(()=>{this.locateFitText()},200)};refreshFontFamily=()=>{let r=window.getComputedStyle(this.props.baseNode).fontFamily.split(",");r=r.map(i=>i.trim()),r=r.map(i=>i.replace(/['"]+/g,"")),r[0]!==this.state.fontFamily&&this.setState({fontFamily:r[0]})};componentDidMount(){this.state.fontFamily||this.refreshFontFamily(),window.addEventListener("resize",this.handleResize),this.observer=new MutationObserver(e=>{o5.default.find(e,r=>{if(r.target.contains(this.props.baseNode||r.target===this.props.baseNode)||r.type==="attributes"&&r.attributeName==="uses"&&r.target?.getAttribute("uses")?.includes("fit-text")===!0)return!0;if(r.target.tagName==="STYLE")return r.target.textContent.includes("font-family")&&this.refreshFontFamily(),!0})&&this.locateFitText()}),this.observer.observe(document,{attributes:!0,childList:!0,subtree:!0}),window.addEventListener("keyup",this.handleKeyup),this.locateFitText()}handleKeyup=e=>{if(!window.CargoEditor?.getActiveEditor?.())return;let r=window.CargoEditor.getActiveRange();(r.startContainer===this.props.baseNode||r.startContainer.parentElement===this.props.baseNode)&&this.locateFitText()};componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.observer.disconnect(),window.removeEventListener("keyup",this.handleKeyup),clearTimeout(this.timeout)}componentDidUpdate(e,r){if(r.fontFamily!==this.state.fontFamily&&new s5.default(this.state.fontFamily).load().then(()=>{this.handleFontLoad()}).catch(()=>{this.handleFontLoad()}),r.scale!==this.state.scale){let i=this.state.scale-r.scale;if(i>.1||i<-.1){this.locateFitText();return}}if(r.parentWidth!==this.state.parentWidth||r.width!==this.state.width){let i=this.state.parentWidth/(this.state.width/this.state.scale);this.setState({scale:i});return}if(e.baseNode!==this.props.baseNode){this.locateFitText();return}}},a5=Jw});var Qw,Ru,Ud,ia,ex,Vm,il=V(()=>{ke();Ye();Qw=ye(Pe(),1);Be();Kn();Yr();ft();Hk();$k();Xk();eN();rN();oN();aN();uN();pN();l5();Co();fe();Ru=new Set,Ud=class extends me{constructor(e){switch(super(e),pe||(this.observer=new MutationObserver(this.onAttributeChange)),this.usesOrder=["blink","dropshadow","drag","fit-text","rotation","eye-roll","scroll-animate","flying-object","inline-part-styles"],this.state={attributes:this.getAttributes()},this.usesKeys={rotation:Vk,"eye-roll":Uk,drag:tN,"scroll-transition":Qk,"flying-object":Yk,dropshadow:nN,background:sN,"inline-part-styles":lN,blink:dN,"fit-text":a5},this.props.baseNode.tagName){case"DIV":case"SPAN":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"H7":case"H8":case"H9":this.displayInlineBlock=!0;break;default:this.displayInlineBlock=!1;break}}render(e,r){let i=e.customElementMode?this.props.children:S("slot",{});if(r.attributes.uses.length==0)return S(ce,{children:[S("style",{id:"uses-host",children:`
			:host {
				transform-origin: center center;
				transform: var(--base-translate, translate(0));
			}
			`}),i]},"uses-fragment");let n=[];r.attributes.uses.forEach((a,l)=>{this.usesKeys[a]&&this.usesKeys[a].transformSlot&&n.push(this.usesKeys[a].transformSlot)}),r.attributes.uses.forEach((a,l)=>{this.usesKeys[a]&&(i=Lt(this.props.customElementMode?this.usesKeys[a]:Eo(this.usesKeys[a]),{...this.state.attributes,...this.props,lowestLevel:l==0,baseNode:this.props.baseNode,children:i,transformSlots:n}))});let o=!!r.attributes.uses.includes("fit-text"),s=S(ce,{children:[this.props.adminMode&&!e.customElementMode&&o===!1&&S(Zr,{baseNode:this.props.baseNode}),S("style",{id:"uses-host",children:`
			:host(span){
				display: inline-block;
			}

			:host {
				position: relative;
				transform-origin: center center;
				transform: var(--base-translate, translate(0)) ${n.map(a=>`var(${a}, translate(0))`).join(" ")};
				${this.displayInlineBlock?"display: inline-block;":""}
			}

			${this.props.adminMode&&!e.customElementMode&&o===!1?`:host::selection {
				background: none;
			}`:""}
			`}),i]},"uses-fragment");return e.customElementMode?s:it(s,this.props.baseNode.shadowRoot)}componentDidMount(){this.observer?.observe(this.props.baseNode,{attributes:!0})}componentDidUpdate(e,r){(e.uses!==this.props.uses||e.forceScrollTransition!==this.props.forceScrollTransition)&&this.setState({attributes:this.getAttributes()})}componentWillUnmount(){this.observer?.disconnect()}getAttributes=()=>{let e={};for(let[i,n]of Object.entries(this.state?.attributes||{}))e[i]=void 0;let r=[...this.props.baseNode.attributes].reduce((i,n)=>(i[n.name]=n.value,i),{});for(let[i,n]of Object.entries(r))n==="false"?r[i]=!1:n==="true"&&(r[i]=!0);return this.props.customElementMode&&(r.uses=(r.uses||"")+" "+this.props.uses),this.props.forceScrollTransition&&!r.uses.includes("scroll-transition")&&r["disable-scroll-animation"]!==!0&&(r.uses+=" scroll-transition"),r.uses=r.uses?.split(" ")||[],r.uses=Qw.default.uniq(r.uses),r.uses.sort((i,n)=>this.usesOrder.indexOf(i)<this.usesOrder.indexOf(n)?-1:1),{...e,...r}};onAttributeChange=e=>{if(!e.some(n=>n.attributeName!=="style"&&n.attributeName!=="class"))return;let i=this.getAttributes();if(i.uses.length===0){if(this.props.removeFromUseList&&!this.props.customElementMode){this.props.removeFromUseList(this.props.baseNode);return}}else Qw.default.isEqual(this.state.attributes,i)||this.setState({attributes:i})}};Ud.defaultProps={uses:[]};ia=Ue((t,e)=>{let r=t?.css?.stylesheet,i=t?.pages?.byId[e?.pageInfo?.pid]?.local_css;return{forceScrollTransition:!!(r?.includes("--scroll-animation:")||i?.includes("--scroll-animation:"))}},null)(Ud),ex=class extends me{constructor(e){super(e),this.mutationsList=[],this.hasRunFirstMutationSummary=!1,!pe&&!this.props.customElementMode&&(this.observer=new MutationObserver(this.onMutation))}render(){return this.props.children}componentDidMount(){this.props.bodycopyRef.current&&(this.onSummary(),this.observer?.observe(this.props.bodycopyRef.current,{attributes:!0,subtree:!0,childList:!0,attributeFilter:["uses"]}))}componentWillUnmount(){this.observer?.disconnect(),cancelAnimationFrame(this.onSummaryAnimationFrame),this.props.bodycopyRef.current&&Array.from(this.props.bodycopyRef.current.querySelectorAll("[uses]")).forEach(this.removeFromUseList)}onMutation=()=>{this.ticking||(this.ticking=!0,this.onSummaryAnimationFrame=requestAnimationFrame(()=>{this.onSummary(),this.ticking=!1}))};onSummary=()=>{if(!this.props.bodycopyRef.current)return;let e=Array.from(this.props.bodycopyRef.current.querySelectorAll("[uses]")),r=e.filter(n=>!Ru.has(n));Array.from(Ru).filter(n=>!n.hasAttribute("uses")||e.includes(n)).forEach(this.removeFromUseList),r.forEach(this.addToUseList)};addToUseList=e=>{if(!(e.nodeType!==Node.ELEMENT_NODE||window.customElements.get(e.tagName.toLowerCase()))){if(!e.shadowRoot)try{e.attachShadow({mode:"open"})}catch{CargoEditor?.mutationManager?.execute(()=>{let i={};e.hasAttribute("uses")&&(i.uses=e.getAttribute("uses")),e.hasAttribute("rotation")&&(i.rotation=e.getAttribute("rotation")),e.hasAttribute("animate")&&(i.animate=e.getAttribute("animate")),e.hasAttribute("scroll-transition")&&(i["scroll-transition"]=e.getAttribute("scroll-transition"));let n=document.createElement("span");for(let s in i)n.setAttribute(s,i[s]);e.parentNode.insertBefore(n,e);let o=CargoEditor?.getActiveRange();CargoEditor.helpers.movePreservingRanges(e,n,-1,o),n.attachShadow({mode:"open"}),e.removeAttribute("scroll-transition"),e.removeAttribute("uses"),e.removeAttribute("animate"),e.removeAttribute("rotation"),e=n});return}if(!Ru.has(e)){Ru.add(e);let r={component:S(Ud,{customElementMode:!1,baseNode:e,adminMode:this.props.adminMode,removeFromUseList:this.removeFromUseList}),element:e,portalHost:null};_t(e,"custom-element-connected",r),this.portalHost=r.portalHost}}};removeFromUseList=e=>{let r=this.props.bodycopyRef.current&&this.props.bodycopyRef.current.contains(e),i=e.hasAttribute("uses");if(!r&&this.props.bodycopyRef.current)_t(this.props.bodycopyRef.current,"custom-element-disconnected",{component:null,element:e,portalHost:this.portalHost}),Ru.delete(e);else if(!i&&(_t(e,"custom-element-disconnected",{component:null,element:e,portalHost:this.portalHost}),Ru.delete(e),r&&e.shadowRoot))if(CargoEditor?.mutationManager)CargoEditor?.mutationManager?.execute(()=>{let n=document.createElement("div");n.innerHTML=e.outerHTML,e.replaceWith(n.childNodes[0])},{preventDraft:!0});else{let n=document.createElement("div");n.innerHTML=e.outerHTML,e.replaceWith(n.childNodes[0])}}},Vm=ex});var Hd={};hr(Hd,{default:()=>yse});var tx,yse,u5=V(()=>{Be();tx={name:"wallpaper",excludeFromShuffle:!0,options:[{labelName:"Image",name:"activeImage",type:"image",value:"default"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"image-fit",type:"radio",value:"fill",values:[{labelName:"Fill Window",value:"fill"},{labelName:"Fit Window",value:"fit"}]},{labelName:"Display as Slideshow",name:"cycle-group",type:"details-menu",toggle:{name:"cycle-images",type:"check-box",value:!1},children:[{labelName:void 0,name:"transition-type",type:"radio",value:"slide",values:[{labelName:"Fade",value:"fade"},{labelName:"Slide",value:"slide"}]},{labelName:"Autoplay",name:"autoplay",type:"check-box",value:!0},{labelName:"Autoplay Delay",name:"autoplay-delay",type:"range-input",value:3,min:0,max:20,step:.1},{labelName:"Transition Speed",name:"transition-speed",type:"range-input",value:.8,min:0,max:10,step:.1},{labelName:"Randomize Order",name:"shuffle",type:"check-box",value:!1},{labelName:"Navigation",name:"navigation",type:"check-box",value:!1}]},{labelName:"Opacity",name:"opacity",type:"range-input",value:1,min:0,max:1,step:.01,excludeFromShuffle:!0},{type:"color",labelName:"Background Color",name:"bg-color",value:"transparent",showField:!0},{labelName:"Margin",name:"margin",type:"scrubber",value:"0",addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",allowedUnits:["px","%","em","rem","vmin","vmax","vw","vh"],excludeFromShuffle:!0,min:0,max:{"%":50,vh:50,vw:50,vmin:100,vmax:50}},{name:"alignments",type:"custom",value:null}]};tx.defaults=pt(tx.options);yse=tx});var Wd={};hr(Wd,{default:()=>bse});var $m,bse,c5=V(()=>{Be();$m={name:"gradient",options:[{type:"custom",name:"gradient-preset"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{name:"gradient-type",type:"radio",value:"linear",values:[{labelName:"Linear",value:"linear"},{labelName:"Radial",value:"radial"}]},{type:"checkbox-color",checkbox:{labelName:"Color One",name:"color-one-active",type:"check-box",value:!0},color:{type:"color",labelName:"Color One",name:"color-one",value:"#f2c409",requirements:[{option:"color-one-active",shouldBe:!0}]}},{type:"checkbox-color",checkbox:{labelName:"Color Two",name:"color-two-active",type:"check-box",value:!1},color:{type:"color",labelName:"Color Two",name:"color-two",value:"#02ff00",requirements:[{option:"color-two-active",shouldBe:!0}]}},{type:"checkbox-color",checkbox:{labelName:"Color Three",name:"color-three-active",type:"check-box",value:!0},color:{type:"color",labelName:"Color Three",name:"color-three",value:"#fe2201",requirements:[{option:"color-three-active",shouldBe:!0}]}},{type:"spacer"},{type:"group",className:"grid-columns-even",requirements:[{option:"gradient-type",shouldBe:"radial"}],children:[{labelName:"X",name:"pos-x",type:"scrubber",numberOnlyMode:!0,suffix:"%",requirements:[{option:"gradient-type",shouldBe:"radial"}],value:0,min:-150,max:150,step:.5},{labelName:"Y",name:"pos-y",type:"scrubber",numberOnlyMode:!0,suffix:"%",requirements:[{option:"gradient-type",shouldBe:"radial"}],value:0,min:-150,max:150,step:.5}]},{labelName:"Rotation",name:"rotation",type:"scrubber",suffix:"\xB0",requirements:[{option:"gradient-type",shouldBe:"linear"}],loopValues:!0,numberOnlyMode:!0,value:0,min:0,max:360,step:1},{labelName:"Smoothness",name:"smoothness",type:"scrubber",numberOnlyMode:!0,suffix:"%",value:50,min:0,max:100,step:.1},{labelName:"Scale",name:"scale",type:"scrubber",numberOnlyMode:!0,suffix:"%",value:50,min:.1,max:100,step:.1},{type:"group",className:"grid-columns-even",children:[{labelName:"Repeat",name:"repeat",type:"check-box",value:!1},{labelName:"Animation",name:"animation-speed",type:"range-input",requirements:[{option:"repeat",shouldBe:!0}],renderWhenDisabled:!0,value:0,min:-100,max:100,step:1}]}]};$m.defaults=pt($m.options);$m.customShuffle=t=>{let e={...t},r=Math.floor(Math.random()*256),i=Math.floor(Math.random()*256),n=Math.floor(Math.random()*256);switch(Math.floor(Math.random()*20)){case 0:r=i=n=0;break;case 1:r=i=n=255;break;case 2:case 3:r=i=n;break}e["color-one"]="rgb("+r+", "+i+", "+n+")";let s=[];if(Math.random()>.3)for(var a=0;a<3;a++)s.push(Math.random()*240+-120);else s[0]=s[1]=s[2]=Math.random()*240+-120;let l=Math.floor(r+s[0]+1024)%256,p=Math.floor(i+s[1]+1024)%256,f=Math.floor(n+s[2]+1024)%256;e["color-two"]="rgb("+l+", "+p+", "+f+")";let d=Math.floor((r+s[0]+1024)*2)%256,m=Math.floor((i+s[1]+1024)*2)%256,g=Math.floor((n+s[2]+1024)*2)%256;return e["color-three"]="rgb("+d+", "+m+", "+g+")",e["color-one-active"]=!0,Math.random()>.4?(e["color-two-active"]=!0,e["color-three-active"]=!0):Math.random()>.4?(e["color-two-active"]=!0,e["color-three-active"]=!1):e["color-three-active"]=!0,Math.random()>.5&&(e["animation-speed"]=0),Math.random()>.5&&(e.rotation=Math.round(e.rotation/45)*45),Math.random()>.5&&(e["pos-x"]=0),Math.random()>.5&&(e["pos-y"]=0),Math.random()>.8&&(e.smoothness=100),e};bse=$m});var ix={};hr(ix,{default:()=>xse,onChangeCustom:()=>wse});var GCe,wse,rx,xse,d5=V(()=>{Be();GCe=ye(Pe()),wse=(t,e,r)=>{let i={};for(let[o,s]of Object.entries(e))t[o]!=s&&(i[o]=s);let n=JSON.parse(e.filters);for(let[o,s]of Object.entries(i))switch(o){case"filters":r.UpdateFilters(n);break;case"rgb":case"film":case"badtv":r.ToggleComponent(n);break;case"image":r.UpdateImage(s);break;default:r.UpdateSettings(e)}},rx={name:"badtv",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Bad TV",name:"badtv-group",type:"details-menu",toggle:{name:"badtv",type:"check-box",value:!0},children:[{name:"distortion",labelName:"Thick Distortion",type:"range-input",value:3,min:.1,max:10,step:.1,interactive:!0,noisePosn:1,randMin:2.8,randMax:3.2,randRange:"low"},{name:"distortion2",labelName:"Fine Distortion",type:"range-input",value:1,min:.1,max:10,step:.1,noisePosn:20,randMin:1,randMax:5,automate:!0},{name:"speed",labelName:"Distortion Speed",type:"range-input",value:.1,min:0,max:.3,step:.01,noisePosn:40,randMin:0,randMax:.1,randRange:"low"},{name:"rollSpeed",labelName:"Roll Speed",type:"range-input",value:.05,min:0,max:.2,step:.01,noisePosn:50,randMin:0,randMax:.6,randRange:"low"}]},{labelName:"RGB Shift",name:"rgb-group",type:"details-menu",toggle:{name:"rgb",type:"check-box",value:!0},children:[{name:"amount",labelName:"Amount",type:"range-input",value:.005,min:0,max:.1,step:.001,interactive:!0,noisePosn:60,randMin:0,randMax:.025,randRange:"low"},{name:"angle",labelName:"Angle",type:"range-input",value:0,min:0,max:6.28,step:.01,noisePosn:80,randMin:0,randMax:6.28,automate:!0}]},{labelName:"Scanlines",name:"film-group",type:"details-menu",toggle:{name:"film",type:"check-box",value:!0},children:[{name:"sCount",labelName:"Amount",value:800,type:"range-input",min:400,max:1e3,step:1,noisePosn:90,randMin:650,randMax:1e3,randRange:"high"},{name:"sIntensity",labelName:"Strength",value:.95,type:"range-input",min:0,max:2,step:.01},{name:"nIntensity",labelName:"Noise",value:.28,type:"range-input",min:0,max:2,step:.01}]},{type:"spacer"},{labelName:"Automate",name:"automate",type:"check-box",value:!1},{labelName:"Interactive",name:"interactive",type:"check-box",value:!1}]};rx.defaults=pt(rx.options);xse=rx});function jm(t){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jm(t)}function He(t,e){if(t=t||"",e=e||{},t instanceof He)return t;if(!(this instanceof He))return new He(t,e);var r=Ese(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}function Ese(t){var e={r:0,g:0,b:0},r=1,i=null,n=null,o=null,s=!1,a=!1;return typeof t=="string"&&(t=Vse(t)),jm(t)=="object"&&(ds(t.r)&&ds(t.g)&&ds(t.b)?(e=Cse(t.r,t.g,t.b),s=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):ds(t.h)&&ds(t.s)&&ds(t.v)?(i=Vd(t.s),n=Vd(t.v),e=Ise(t.h,i,n),s=!0,a="hsv"):ds(t.h)&&ds(t.s)&&ds(t.l)&&(i=Vd(t.s),o=Vd(t.l),e=Pse(t.h,i,o),s=!0,a="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=y5(r),{ok:s,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function Cse(t,e,r){return{r:fr(t,255)*255,g:fr(e,255)*255,b:fr(r,255)*255}}function p5(t,e,r){t=fr(t,255),e=fr(e,255),r=fr(r,255);var i=Math.max(t,e,r),n=Math.min(t,e,r),o,s,a=(i+n)/2;if(i==n)o=s=0;else{var l=i-n;switch(s=a>.5?l/(2-i-n):l/(i+n),i){case t:o=(e-r)/l+(e<r?6:0);break;case e:o=(r-t)/l+2;break;case r:o=(t-e)/l+4;break}o/=6}return{h:o,s,l:a}}function Pse(t,e,r){var i,n,o;t=fr(t,360),e=fr(e,100),r=fr(r,100);function s(p,f,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?p+(f-p)*6*d:d<1/2?f:d<2/3?p+(f-p)*(2/3-d)*6:p}if(e===0)i=n=o=r;else{var a=r<.5?r*(1+e):r+e-r*e,l=2*r-a;i=s(l,a,t+1/3),n=s(l,a,t),o=s(l,a,t-1/3)}return{r:i*255,g:n*255,b:o*255}}function h5(t,e,r){t=fr(t,255),e=fr(e,255),r=fr(r,255);var i=Math.max(t,e,r),n=Math.min(t,e,r),o,s,a=i,l=i-n;if(s=i===0?0:l/i,i==n)o=0;else{switch(i){case t:o=(e-r)/l+(e<r?6:0);break;case e:o=(r-t)/l+2;break;case r:o=(t-e)/l+4;break}o/=6}return{h:o,s,v:a}}function Ise(t,e,r){t=fr(t,360)*6,e=fr(e,100),r=fr(r,100);var i=Math.floor(t),n=t-i,o=r*(1-e),s=r*(1-n*e),a=r*(1-(1-n)*e),l=i%6,p=[r,s,o,o,a,r][l],f=[a,r,r,s,o,o][l],d=[o,o,a,r,r,s][l];return{r:p*255,g:f*255,b:d*255}}function f5(t,e,r,i){var n=[Qn(Math.round(t).toString(16)),Qn(Math.round(e).toString(16)),Qn(Math.round(r).toString(16))];return i&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function Ase(t,e,r,i,n){var o=[Qn(Math.round(t).toString(16)),Qn(Math.round(e).toString(16)),Qn(Math.round(r).toString(16)),Qn(b5(i))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function m5(t,e,r,i){var n=[Qn(b5(i)),Qn(Math.round(t).toString(16)),Qn(Math.round(e).toString(16)),Qn(Math.round(r).toString(16))];return n.join("")}function Tse(t,e){e=e===0?0:e||10;var r=He(t).toHsl();return r.s-=e/100,r.s=Gm(r.s),He(r)}function Mse(t,e){e=e===0?0:e||10;var r=He(t).toHsl();return r.s+=e/100,r.s=Gm(r.s),He(r)}function Rse(t){return He(t).desaturate(100)}function kse(t,e){e=e===0?0:e||10;var r=He(t).toHsl();return r.l+=e/100,r.l=Gm(r.l),He(r)}function Nse(t,e){e=e===0?0:e||10;var r=He(t).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),He(r)}function Ose(t,e){e=e===0?0:e||10;var r=He(t).toHsl();return r.l-=e/100,r.l=Gm(r.l),He(r)}function Dse(t,e){var r=He(t).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,He(r)}function Lse(t){var e=He(t).toHsl();return e.h=(e.h+180)%360,He(e)}function g5(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=He(t).toHsl(),i=[He(t)],n=360/e,o=1;o<e;o++)i.push(He({h:(r.h+o*n)%360,s:r.s,l:r.l}));return i}function Fse(t){var e=He(t).toHsl(),r=e.h;return[He(t),He({h:(r+72)%360,s:e.s,l:e.l}),He({h:(r+216)%360,s:e.s,l:e.l})]}function zse(t,e,r){e=e||6,r=r||30;var i=He(t).toHsl(),n=360/r,o=[He(t)];for(i.h=(i.h-(n*e>>1)+720)%360;--e;)i.h=(i.h+n)%360,o.push(He(i));return o}function Bse(t,e){e=e||6;for(var r=He(t).toHsv(),i=r.h,n=r.s,o=r.v,s=[],a=1/e;e--;)s.push(He({h:i,s:n,v:o})),o=(o+a)%1;return s}function Use(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function y5(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function fr(t,e){Hse(t)&&(t="100%");var r=Wse(t);return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Gm(t){return Math.min(1,Math.max(0,t))}function fn(t){return parseInt(t,16)}function Hse(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function Wse(t){return typeof t=="string"&&t.indexOf("%")!=-1}function Qn(t){return t.length==1?"0"+t:""+t}function Vd(t){return t<=1&&(t=t*100+"%"),t}function b5(t){return Math.round(parseFloat(t)*255).toString(16)}function v5(t){return fn(t)/255}function ds(t){return!!Jn.CSS_UNIT.exec(t)}function Vse(t){t=t.replace(Sse,"").replace(_se,"").toLowerCase();var e=!1;if(nx[t])t=nx[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Jn.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=Jn.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Jn.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=Jn.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Jn.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=Jn.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Jn.hex8.exec(t))?{r:fn(r[1]),g:fn(r[2]),b:fn(r[3]),a:v5(r[4]),format:e?"name":"hex8"}:(r=Jn.hex6.exec(t))?{r:fn(r[1]),g:fn(r[2]),b:fn(r[3]),format:e?"name":"hex"}:(r=Jn.hex4.exec(t))?{r:fn(r[1]+""+r[1]),g:fn(r[2]+""+r[2]),b:fn(r[3]+""+r[3]),a:v5(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=Jn.hex3.exec(t))?{r:fn(r[1]+""+r[1]),g:fn(r[2]+""+r[2]),b:fn(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function $se(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}var Sse,_se,nx,qse,Jn,Mo=V(()=>{Sse=/^\s+/,_se=/\s+$/;He.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,n,o,s,a;return r=e.r/255,i=e.g/255,n=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),.2126*o+.7152*s+.0722*a},setAlpha:function(e){return this._a=y5(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=h5(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h5(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),n=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+n+"%)":"hsva("+r+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=p5(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p5(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),n=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+n+"%)":"hsla("+r+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return f5(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Ase(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(fr(this._r,255)*100)+"%",g:Math.round(fr(this._g,255)*100)+"%",b:Math.round(fr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(fr(this._r,255)*100)+"%, "+Math.round(fr(this._g,255)*100)+"%, "+Math.round(fr(this._b,255)*100)+"%)":"rgba("+Math.round(fr(this._r,255)*100)+"%, "+Math.round(fr(this._g,255)*100)+"%, "+Math.round(fr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:qse[f5(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+m5(this._r,this._g,this._b,this._a),i=r,n=this._gradientType?"GradientType = 1, ":"";if(e){var o=He(e);i="#"+m5(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,n=this._a<1&&this._a>=0,o=!r&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return He(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(kse,arguments)},brighten:function(){return this._applyModification(Nse,arguments)},darken:function(){return this._applyModification(Ose,arguments)},desaturate:function(){return this._applyModification(Tse,arguments)},saturate:function(){return this._applyModification(Mse,arguments)},greyscale:function(){return this._applyModification(Rse,arguments)},spin:function(){return this._applyModification(Dse,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(zse,arguments)},complement:function(){return this._applyCombination(Lse,arguments)},monochromatic:function(){return this._applyCombination(Bse,arguments)},splitcomplement:function(){return this._applyCombination(Fse,arguments)},triad:function(){return this._applyCombination(g5,[3])},tetrad:function(){return this._applyCombination(g5,[4])}};He.fromRatio=function(t,e){if(jm(t)=="object"){var r={};for(var i in t)t.hasOwnProperty(i)&&(i==="a"?r[i]=t[i]:r[i]=Vd(t[i]));t=r}return He(t,e)};He.equals=function(t,e){return!t||!e?!1:He(t).toRgbString()==He(e).toRgbString()};He.random=function(){return He.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};He.mix=function(t,e,r){r=r===0?0:r||50;var i=He(t).toRgb(),n=He(e).toRgb(),o=r/100,s={r:(n.r-i.r)*o+i.r,g:(n.g-i.g)*o+i.g,b:(n.b-i.b)*o+i.b,a:(n.a-i.a)*o+i.a};return He(s)};He.readability=function(t,e){var r=He(t),i=He(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};He.isReadable=function(t,e,r){var i=He.readability(t,e),n,o;switch(o=!1,n=$se(r),n.level+n.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};He.mostReadable=function(t,e,r){var i=null,n=0,o,s,a,l;r=r||{},s=r.includeFallbackColors,a=r.level,l=r.size;for(var p=0;p<e.length;p++)o=He.readability(t,e[p]),o>n&&(n=o,i=He(e[p]));return He.isReadable(t,i,{level:a,size:l})||!s?i:(r.includeFallbackColors=!1,He.mostReadable(t,["#fff","#000"],r))};nx=He.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},qse=He.hexNames=Use(nx);Jn=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}()});var ox={};hr(ox,{default:()=>Gse,onChangeCustom:()=>jse});var ZCe,jse,$d,Gse,w5=V(()=>{Be();ZCe=ye(Pe());Mo();jse=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);i.hasOwnProperty("color_r")&&(r.Update("color_r",i.color_r),delete i.color_r),i.hasOwnProperty("color_g")&&(r.Update("color_g",i.color_g),delete i.color_g),i.hasOwnProperty("color_b")&&(r.Update("color_b",i.color_b),delete i.color_b);for(let[n,o]of Object.entries(i))r.Update(n,o)},$d={name:"parallax",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Knockout Mask",name:"knockout_shape",type:"radio",value:"triangle",values:[{customLabel:"RectangleIcon",value:"rectangle"},{customLabel:"SquareIcon",value:"square"},{customLabel:"TriangleIcon",value:"triangle"},{customLabel:"CircleIcon",value:"circle"}]},{labelName:"Knockout Blur",name:"knockout_blur",type:"range-input",value:0,suffix:"%",min:0,max:100,step:1},{labelName:"Knockout Size",name:"knockout",type:"range-input",value:85,suffix:"%",min:0,max:100,step:1},{labelName:"Knockout Rotation",name:"knockout_rotation",type:"range-input",loopValues:!0,value:171,suffix:"\xB0",min:0,max:360,step:1},{type:"spacer"},{labelName:void 0,name:"movement_direction",type:"radio",value:"xy",values:[{labelName:"X/Y Axes",value:"xy"},{labelName:"Z Axis",value:"z"}]},{labelName:"Movement Direction",name:"xy_direction",type:"range-input",loopValues:!0,value:285,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"movement_direction",shouldBe:"xy"}]},{labelName:"Layers",name:"layers",type:"range-input",value:3,min:2,max:15,step:1,allowUnclampedTextEntry:!1,requirements:[{option:"movement_direction",shouldBe:"xy"}]},{labelName:void 0,name:"z_direction",type:"radio",value:"inwards",values:[{labelName:"Inwards",value:"inwards"},{labelName:"Outwards",value:"outwards"}],requirements:[{option:"movement_direction",shouldBe:"z"}]},{labelName:"Layers",name:"z_layers",type:"range-input",value:4,min:4,max:15,step:1,requirements:[{option:"movement_direction",shouldBe:"z"}]},{labelName:"Speed",name:"speed",type:"range-input",value:30,suffix:"%",min:0,max:100,step:1},{labelName:"Depth",name:"depth",type:"range-input",value:35,suffix:"%",min:0,max:100,step:.5},{labelName:"Base Rotation",name:"base_rotation",type:"range-input",loopValues:!0,value:50,suffix:"\xB0",min:0,max:360,step:1},{labelName:"Skew",name:"skew",type:"range-input",loopValues:!0,value:-50,suffix:"\xB0",min:-1080,max:1080,step:1},{type:"spacer"},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Sensitivity",name:"mouse_speed",type:"range-input",value:68,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]},{labelName:"Scroll Interaction",name:"scroll_interaction",type:"check-box",value:!1},{type:"spacer"},{labelName:"Background Color",name:"background_color",type:"color",value:"#FFFFFF00"},{labelName:"See-Through",name:"see_through",type:"check-box",value:!1},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#FFFFFF00",excludeFromShuffle:!0}]};$d.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.hasOwnProperty("background_color")&&e?.background_color===null&&(e.background_color="rgba(0,0,0,0)"),e.color){let r=He(e.color);e.overlay_hex=r.toHexString(),e.overlay_alpha=r.getAlpha()}if(e.background_color){let r=He(e.background_color),i=r.toRgb();e.color_r=i.r,e.color_g=i.g,e.color_b=i.b,e.alpha=i.a,e.hex_color=r.toHexString()}return e};$d.defaults=pt($d.options);$d.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";Gse=$d});var sx={};hr(sx,{default:()=>Yse,onChangeCustom:()=>Kse});var tPe,Kse,ku,Yse,x5=V(()=>{Be();tPe=ye(Pe());Mo();Kse=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},ku={name:"refraction",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"reflection_type",type:"radio",value:"reflection",values:[{labelName:"Reflection",value:"reflection"},{labelName:"Refraction",value:"refraction"}]},{labelName:"Flip Image",name:"flip",type:"check-box",value:!0},{labelName:"Refraction Ratio",name:"refraction_ratio",type:"range-input",requirements:[{option:"reflection_type",shouldBe:"refraction"}],value:19,min:0,max:100,step:.1},{type:"spacer"},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Movement Range",name:"mouse_speed",type:"range-input",value:63,min:0,max:100,step:.1},{labelName:"Dynamic Image Refraction",name:"refract_interaction",type:"check-box",value:!1,requirements:[{option:"reflection_type",shouldBe:"refraction"}]},{labelName:null,name:"refract_motion",type:"radio",value:"speed",requirements:[{option:"reflection_type",shouldBe:"refraction"},{option:"refract_interaction",shouldBe:!0}],values:[{labelName:"Gather",value:"gather"},{labelName:"Disperse",value:"disperse"},{labelName:"Speed",value:"speed"}]},{type:"spacer"},{labelName:"Geometry: ",name:"geometry",type:"select",values:[{labelName:"Fullerene",value:"buckyball_3"},{labelName:"Compound Eye",value:"compoundeye_2"},{labelName:"Shattered Glass",value:"shattered"},{labelName:"Shard",value:"shard"},{labelName:"Warped Glass",value:"warped_glass_3"},{labelName:"Tube",value:"tube"},{labelName:"Cubic",value:"cubic"},{labelName:"Turbine",value:"turbine"},{labelName:"Icosahedron",value:"icosahedron_small"},{labelName:"Geodesic",value:"icosahedron_2"}]},{labelName:"Geometry Zoom",name:"zoom",type:"range-input",value:100,min:100,max:300,step:1},{labelName:"Rotation X",name:"rot_x",type:"range-input",value:145,min:0,max:360,step:1},{labelName:"Rotation Y",name:"rot_y",type:"range-input",value:195,min:0,max:360,step:1},{labelName:"Rotation Z",name:"rot_z",type:"range-input",value:115,min:0,max:360,step:1},{labelName:"Rotation Speed X",name:"rot_speed_x",type:"range-input",value:3.5,min:-20,max:20,step:.1},{labelName:"Rotation Speed Y",name:"rot_speed_y",type:"range-input",value:-1.5,min:-20,max:20,step:.1},{labelName:"Rotation Speed Z",name:"rot_speed_z",type:"range-input",value:2,min:-20,max:20,step:.1},{type:"spacer"},{labelName:"Color Overlay",name:"color",type:"color",value:"#ffffff00"},{labelName:void 0,name:"overlay_type",type:"radio",value:"multiply_color",values:[{labelName:"Multiply",value:"multiply_color"},{labelName:"Screen",value:"screen_color"}]}]};ku.defaults=pt(ku.options);ku.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";ku.defaults.rgb={value:"rgb(255,255,255)"};ku.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgb(255,255,255)"),e.color){let r=He(e.color);e.rgb=r.toRgbString(),e.color=r.toRgbString(),e.alpha=r.getAlpha()}return e};Yse=ku});var ax={};hr(ax,{default:()=>Zse,onChangeCustom:()=>Xse});var oPe,Xse,Nu,Zse,S5=V(()=>{Be();oPe=ye(Pe());Mo();Xse=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},Nu={name:"ripples",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Distortion X",name:"scaleX",type:"range-input",value:20,min:0,max:100,step:1},{labelName:"Distortion Y",name:"scaleY",type:"range-input",value:20,min:0,max:100,step:1},{labelName:"Scale",name:"scale",type:"range-input",value:1,min:1,max:10,step:.01},{labelName:"Speed",name:"target_speed",type:"range-input",value:9,min:0,max:100,step:.1},{labelName:"Direction",name:"direction",type:"scrubber",numberOnlyMode:!0,value:245,min:0,max:360,loopValues:!0,suffix:"\xB0",step:1},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Sensitivity",requires:"mouse_sensitivity",name:"mouse_sensitivity",type:"range-input",value:100,min:0,max:100,step:1},{labelName:"Overlay Color",name:"color",type:"color",value:"#ffffff00",excludeFromShuffle:!0}]};Nu.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=He(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};Nu.defaults=pt(Nu.options);Nu.defaults.alpha={value:0};Nu.defaults.hex={value:"#fff"};Zse=Nu});var lx={};hr(lx,{default:()=>Qse,onChangeCustom:()=>Jse});var uPe,Jse,Ou,Qse,_5=V(()=>{Be();uPe=ye(Pe());Mo();Jse=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},Ou={name:"slitscan",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"orientation",type:"radio",value:"horizontal",values:[{labelName:"Horizontal",value:"horizontal"},{labelName:"Vertical",value:"vertical"}]},{labelName:"Scan Size",name:"scan_size",type:"range-input",value:90,min:0,max:100,step:.1},{labelName:"Short Wave",name:"scan_cycles",type:"range-input",value:1,min:0,max:20,step:.1},{labelName:"Wiggle",name:"wiggle",type:"range-input",value:20,min:0,max:100,step:.1},{labelName:"Speed",name:"target_speed",type:"range-input",value:17,min:-100,max:100,step:1},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Scroll Interaction",name:"scroll_interaction",type:"check-box",value:!1},{labelName:"Overlay Color",name:"color",type:"color",value:"transparent",excludeFromShuffle:!0}]};Ou.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=He(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};Ou.defaults=pt(Ou.options);Ou.defaults.alpha={value:0};Ou.defaults.hex={value:"#000000"};Qse=Ou});var ux={};hr(ux,{default:()=>tae,onChangeCustom:()=>eae});var hPe,eae,nl,tae,E5=V(()=>{Be();hPe=ye(Pe());Mo();eae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},nl={name:"pixelation",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"layout_mode",type:"radio",value:"grid_mode",values:[{labelName:"Grid",value:"grid_mode"},{labelName:"Rows",value:"row_mode"},{labelName:"Columns",value:"column_mode"}]},{labelName:"Rows",name:"rows",type:"range-input",value:44,min:1,max:64,step:1,allowUnclampedTextEntry:!1,requirements:[{option:"layout_mode",shouldBe:"row_mode"}]},{labelName:"Columns",name:"columns",type:"range-input",value:44,min:1,max:64,step:1,allowUnclampedTextEntry:!1,requirements:[{option:"layout_mode",shouldBe:"column_mode"}]},{labelName:"Subdivisions",name:"grid_size",type:"range-input",value:44,min:1,max:100,step:1,allowUnclampedTextEntry:!1,requirements:[{option:"layout_mode",shouldBe:"grid_mode"}]},{labelName:"Cell Image Zoom",name:"zoom",type:"range-input",value:100,suffix:"%",min:1,max:100,step:1},{labelName:"Flip Alternate Cells",name:"flip_it",type:"check-box",value:!1},{type:"spacer"},{labelName:"Turbulence",name:"stir_grid",type:"check-box",value:!0},{labelName:"Stir Frequency",name:"stir_freq",type:"range-input",value:74,suffix:"%",min:0,max:100,step:1,requirements:[{option:"stir_grid",shouldBe:!0}]},{labelName:"Stir Strength",name:"stir_strength",type:"range-input",value:4,suffix:"%",min:0,max:100,step:1,requirements:[{option:"stir_grid",shouldBe:!0}]},{labelName:"Disorder",name:"stir_disorder",type:"range-input",value:4,suffix:"%",min:0,max:100,step:1,requirements:[{option:"stir_grid",shouldBe:!0}]},{labelName:"Motion Elasticity",name:"elasticity",type:"range-input",value:35,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#ffffff00",excludeFromShuffle:!0},{type:"spacer"},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Movement Force",name:"mouse_sensitivity",type:"range-input",value:6,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]},{labelName:"Mouse Radius",name:"tolerance",type:"range-input",value:50,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]},{labelName:"Mouseover Zoom",name:"mouse_zoom",type:"range-input",value:0,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]}]};nl.defaults=pt(nl.options);nl.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";nl.defaults.rgb={value:"rgb(255,255,255)"};nl.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=He(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};nl.customShuffle=t=>(Math.random()>.5&&(t.zoom=100),t);tae=nl});var cx={};hr(cx,{default:()=>iae,onChangeCustom:()=>rae});var vPe,rae,jd,iae,C5=V(()=>{Be();vPe=ye(Pe());Mo();rae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i)){let s=!0;if(n==="image"&&(o!==void 0&&o?r.obj.loadImage(o):s=!1),n!==void 0&&s===!0){let a={};a[n]=o,r.Update(n,o),r.obj.updateSettings(a)}}},jd={name:"kaleidoscope",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Slices",name:"slices",type:"range-input",value:18,min:2,max:256,step:1},{labelName:"Zoom",name:"zoom",type:"range-input",value:217,suffix:"%",min:1,max:500,step:1},{labelName:"Rotation",name:"baseRotation1",type:"range-input",value:61,suffix:"\xB0",min:-180,max:180,step:1},{labelName:"Rotation Speed",name:"rotationSpeed1",type:"range-input",value:-8,suffix:"\xB0/sec",min:-100,max:100,step:1},{labelName:"Image Rotation",name:"baseRotation2",type:"range-input",value:-148,suffix:"\xB0",min:-180,max:180,step:1},{labelName:"Image Rotation Speed",name:"rotationSpeed2",type:"range-input",value:-8,suffix:"\xB0/sec",min:-100,max:100,step:1},{labelName:"Image Rotation Anchor X",name:"rotationCenterX",type:"range-input",value:21,suffix:"\xB0/sec",min:-300,max:300,step:1},{labelName:"Image Rotation Anchor Y",name:"rotationCenterY",type:"range-input",value:66,suffix:"\xB0/sec",min:-300,max:300,step:1},{type:"spacer"},{labelName:"Mirror Slices",name:"mirrorSlices",type:"check-box",value:!0},{labelName:"Mouse Interaction",name:"hasMouseInteraction",type:"check-box",value:!0}]};jd.transformChanges=(t,e)=>{if(e.color){let r=He(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};jd.defaults=pt(jd.options);jd.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";iae=jd});var dx={};hr(dx,{default:()=>oae,onChangeCustom:()=>nae});var xPe,nae,Gd,oae,P5=V(()=>{Be();xPe=ye(Pe());Mo();nae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},Gd={name:"polygon_engine",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{labelName:"Style:",name:"style",type:"select",value:"delaunay",values:[{labelName:"Random 1",value:"random1"},{labelName:"Random 2",value:"random2"},{labelName:"Iso",value:"iso"},{labelName:"Rectangular 1",value:"straight1"},{labelName:"Rectangular 2",value:"straight2"},{labelName:"Voronoi",value:"voronoi"},{labelName:"Delaunay",value:"delaunay"}]},{labelName:"Cuts",name:"subdivisionCount",type:"range-input",allowUnclampedTextEntry:!1,value:421,min:3,max:500,step:1},{labelName:"Animation Speed",name:"animationSpeed",type:"range-input",value:1,min:0,max:20,step:.1},{type:"spacer"},{labelName:"Mouse Interaction",name:"hasMouseInteraction",type:"check-box",value:!0},{labelName:"Interaction Speed",name:"interactionSpeed",type:"range-input",value:15,min:0,max:20,step:.1,requirements:[{option:"hasMouseInteraction",shouldBe:!0}]},{labelName:"Interaction Radius",name:"interactionRadius",type:"range-input",value:300,suffix:"px",min:0,max:500,step:1,requirements:[{option:"hasMouseInteraction",shouldBe:!0}]},{type:"spacer"},{excludeFromShuffle:!0,labelName:"Overlay Color",name:"color",type:"color",value:"#33333300"}]};Gd.defaults=pt(Gd.options);Gd.defaults.image_url="//static.cargo.site/assets/backdrop/default_256.jpg";Gd.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=He(e.color);e.overlay_hex=r.toHexString(),e.overlay_alpha=r.getAlpha()}return e};oae=Gd});var px={};hr(px,{default:()=>aae,onChangeCustom:()=>sae});var CPe,sae,Kd,aae,I5=V(()=>{Be();CPe=ye(Pe());Mo();sae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},Kd={name:"morphovision",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Transition Duration",name:"transition_time",type:"range-input",value:4,suffix:" sec",min:.5,max:10,step:.1},{labelName:"Intensity",name:"transition_alpha",type:"range-input",value:76,suffix:"%",min:10,max:100,step:1},{labelName:"Zoom",name:"zoom",type:"range-input",value:14,suffix:"%",min:-100,max:100,step:1},{labelName:"Cycle Images",name:"cycle_images",type:"check-box",value:!0},{labelName:"Randomize Order",name:"shuffle",type:"check-box",value:!0,renderWhenDisabled:!0,requirements:[{option:"cycle_images",shouldBe:!0}]},{type:"spacer"},{labelName:"Morph Size",name:"morph_size",type:"range-input",value:85,suffix:"%",min:0,max:100,step:1},{labelName:"Morph Movement",name:"morph_speed",type:"range-input",value:15,suffix:"%",min:0,max:100,step:1},{labelName:"Morph Amplitude",name:"amplitude",type:"range-input",value:22,suffix:"%",min:0,max:100,step:1},{labelName:"Phase Shift",name:"phase",type:"range-input",value:95,suffix:"%",min:0,max:100,step:1},{labelName:"Movement Jitter",name:"jitter",type:"range-input",value:18,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Image Warp",name:"small_warp",type:"range-input",value:40,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#33333300"},{labelName:void 0,name:"blend",type:"radio",value:"MULTIPLY",values:[{labelName:"Normal",value:"NORMAL"},{labelName:"Screen",value:"SCREEN"},{labelName:"Multiply",value:"MULTIPLY"}]}]};Kd.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=He(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};Kd.defaults=pt(Kd.options);Kd.defaults.image_url="/_jsapps/backdrop/morphovision/morph_default.jpeg";aae=Kd});var hx={};hr(hx,{default:()=>uae,onChangeCustom:()=>lae});var TPe,lae,Km,uae,A5=V(()=>{Be();TPe=ye(Pe()),lae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);for(let[n,o]of Object.entries(i))r.Update(n,o)},Km={name:"wave",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Waves",name:"ripples.on",type:"check-box",value:!0},{labelName:"Wave Speed",name:"ripples.noiseSpeed",type:"range-input",value:15,min:0,max:20,step:.1,requirements:[{option:"ripples.on",shouldBe:!0}]}]};Km.defaults=pt(Km.options);Km.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";uae=Km});var fx={};hr(fx,{default:()=>dae,onChangeCustom:()=>cae});var kPe,cae,Du,dae,T5=V(()=>{Be();kPe=ye(Pe());Mo();cae=(t,e,r)=>{let i={};for(let[o,s]of Object.entries(e))t[o]!=s&&(i[o]=s);let n=[];for(let[o,s]of Object.entries(i))r.Update(o,s)},Du={name:"halftone",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Screen Size",name:"dot_scale",type:"range-input",value:53,suffix:"%",min:0,max:100,step:.5},{labelName:"Dot Gain",name:"dot_gain",type:"range-input",value:48,suffix:"%",min:-100,max:200,step:1},{labelName:"Under-Color Removal",name:"dot_gain",type:"range-input",value:95,suffix:"%",min:0,max:100,step:1},{labelName:"Registration Accuracy",name:"color_offset",type:"range-input",value:94,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Cyan",name:"cyan",type:"check-box",value:!0},{labelName:"Halftone",name:"cyan_halftone",type:"check-box",value:!0,requirements:[{option:"cyan",shouldBe:!0}]},{labelName:"Opacity",name:"c_opacity",type:"range-input",value:70,suffix:"%",min:0,max:100,step:1,requirements:[{option:"cyan",shouldBe:!0}]},{labelName:"Rotation",name:"c_rotation",type:"range-input",value:140,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"cyan",shouldBe:!0},{option:"cyan_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"c_rot_speed",type:"range-input",value:-1,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"cyan",shouldBe:!0},{option:"cyan_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Magenta",name:"magenta",type:"check-box",value:!0},{labelName:"Halftone",name:"magenta_halftone",type:"check-box",value:!0,requirements:[{option:"magenta",shouldBe:!0}]},{labelName:"Opacity",name:"m_opacity",type:"range-input",value:69,suffix:"%",min:0,max:100,step:1,requirements:[{option:"magenta",shouldBe:!0}]},{labelName:"Rotation",name:"m_rotation",type:"range-input",value:42,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"magenta",shouldBe:!0},{option:"magenta_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"m_rot_speed",type:"range-input",value:1,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"magenta",shouldBe:!0},{option:"magenta_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Yellow",name:"yellow",type:"check-box",value:!0},{labelName:"Halftone",name:"yellow_halftone",type:"check-box",value:!0,requirements:[{option:"yellow",shouldBe:!0}]},{labelName:"Opacity",name:"y_opacity",type:"range-input",value:99,suffix:"%",min:0,max:100,step:1,requirements:[{option:"yellow",shouldBe:!0}]},{labelName:"Rotation",name:"y_rotation",type:"range-input",value:59,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"yellow",shouldBe:!0},{option:"yellow_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"y_rot_speed",type:"range-input",value:-1,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"yellow",shouldBe:!0},{option:"yellow_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Black",name:"black",type:"check-box",value:!0},{labelName:"Halftone",name:"black_halftone",type:"check-box",value:!0,requirements:[{option:"black",shouldBe:!0}]},{labelName:"Opacity",name:"k_opacity",type:"range-input",value:100,suffix:"%",min:0,max:100,step:1,requirements:[{option:"black",shouldBe:!0}]},{labelName:"Rotation",name:"k_rotation",type:"range-input",value:45,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"black",shouldBe:!0},{option:"black_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"k_rot_speed",type:"range-input",value:0,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"black",shouldBe:!0},{option:"black_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#33333300"},{labelName:void 0,name:"overlay_type",type:"radio",value:"multiply_color",values:[{labelName:"Normal",value:"normal_color"},{labelName:"Screen",value:"screen_color"},{labelName:"Multiply",value:"multiply_color"}]},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0}]};Du.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let r=He(e.color);e.hex=r.toHexString(),e.alpha=r.getAlpha()}return e};Du.customShuffle=t=>{switch(t.overlay_type=Math.random()>.5?"multiply_color":"screen_color",Math.floor(Math.random()*4)){case 0:t.black=!0,t.c_opacity=Math.max(75,t.c_opacity);break;case 1:t.cyan=!0,t.c_opacity=Math.max(75,t.c_opacity);break;case 2:t.yellow=!0,t.y_opacity=Math.max(100,t.y_opacity),t.black=!0,t.c_opacity=Math.max(50,t.c_opacity);break;case 3:t.magenta=!0,t.m_opacity=Math.max(75,t.m_opacity);break}return t};Du.defaults=pt(Du.options);Du.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";dae=Du});var mx={};hr(mx,{default:()=>hae,onChangeCustom:()=>pae});var LPe,M5,pae,Yd,hae,R5=V(()=>{Be();LPe=ye(Pe()),M5={checkerboard:{preset_image:"https://static.cargo.site/assets/backdrop/video/checkerboard_64.png",preset_width:"16px",preset_height:"16px"},hexed:{preset_image:"https://static.cargo.site/assets/backdrop/video/hexed_16.png",preset_width:"8px",preset_height:"8px"},noise:{preset_image:"https://static.cargo.site/assets/backdrop/video/noise.png",preset_width:"512px",preset_height:"512px"},interlace:{preset_image:"https://static.cargo.site/assets/backdrop/video/interlace.png",preset_width:"1px",preset_height:"3px"}},pae=(t,e,r)=>{let i={};for(let[n,o]of Object.entries(e))t[n]!=o&&(i[n]=o);i.hasOwnProperty("color")&&i?.color===null&&(i.color="rgba(0,0,0,0)");for(let[n,o]of Object.entries(i))r.Update(n,o)},Yd={name:"video",excludeFromShuffle:!0,options:[{labelName:"Video URL:",name:"video_url",type:"text-input",value:"",className:"hover",config:"noBars"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"scale_option",type:"radio",value:"cover",values:[{labelName:"Fill Window",value:"cover"},{labelName:"Fit Window",value:"contain"}]},{labelName:"Margin",name:"margin",type:"scrubber",value:"0",addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",allowedUnits:["px","%","em","rem","vmin","vmax","vw","vh"],excludeFromShuffle:!0,min:0,max:{"%":50,vh:50,vw:50,vmin:100,vmax:50}},{type:"spacer"},{labelName:"Overlay",name:"preset_pattern",type:"radio",value:"blank",values:[{labelName:void 0,value:"checkerboard"},{labelName:void 0,value:"hexed"},{labelName:void 0,value:"noise"},{labelName:void 0,value:"interlace"},{labelName:void 0,value:"blank"}]},{labelName:"Video Opacity",name:"alpha",type:"range-input",value:100,min:0,max:100,step:1,excludeFromShuffle:!0},{labelName:"Background Color",name:"color",type:"color",value:"#FFFFFF00"},{type:"spacer"},{labelName:"Display Still Image In Mobile Devices",name:"use_mobile_image",type:"check-box",value:!1},{name:"image",type:"custom",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc",renderWhenDisabled:!1,requirements:[{option:"use_mobile_image",shouldBe:!0}]}]};Yd.transformChanges=(t,e)=>(e.preset_pattern&&(M5[e.preset_pattern]?(e.using_preset=!0,e.image_active=!0,e={...e,...M5[e.preset_pattern]}):(e.using_preset=!1,e.image_active=!1)),e);Yd.defaults=pt(Yd.options);Yd.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";hae=Yd});var Xd={};hr(Xd,{badtv:()=>ix,gradient:()=>Wd,halftone:()=>fx,kaleidoscope:()=>cx,morphovision:()=>px,parallax:()=>ox,pixelation:()=>ux,polygon_engine:()=>dx,refraction:()=>sx,ripple:()=>ax,slitscan:()=>lx,video:()=>mx,wallpaper:()=>Hd,wave:()=>hx});var Ym=V(()=>{u5();c5();d5();w5();x5();S5();_5();E5();C5();P5();I5();A5();T5();R5()});var eo,fae,k5,gx,N5,mae,O5=V(()=>{ke();Pr();Br();Ym();Be();eo=ye(Pe(),1);fe();fae={"legacy/slitscan":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/slitscan/main.js"),"legacy/refraction":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/refraction/main.js"),"legacy/badtv":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/badtv/main.js"),"legacy/gmaps":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/gmaps/main.js"),"legacy/halftone":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/halftone/main.js"),"legacy/kaleidoscope":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/kaleidoscope/main.js"),"legacy/morphovision":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/morphovision/main.js"),"legacy/parallax":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/parallax/main.js"),"legacy/pixelation":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/pixelation/main.js"),"legacy/polygon_engine":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/polygon_engine/main.js"),"legacy/ripple":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/ripple/main.js"),"legacy/video":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/video/main.js"),"legacy/wave":()=>import("https://build.cargo.site/frontend/a16aab/_jsapps/backdrop/wave/main.js")},k5=eo.default.memoize(t=>new Promise(async(e,r)=>{if(pe)return r();await mae();let{default:i}=await fae[t]();e(i)})),gx=class extends me{constructor(e){super(e),this.ref=xe(),k5(this.props.path).catch(r=>{})}componentDidMount(){this.initView()}initView=async()=>{delete this.backboneView;let e=await k5(this.props.path).catch(n=>{});if(!this.ref.current){console.log("No element to render backbone view to...");return}let r=Xd[this.props.path.replace("legacy/","")],i={page_id:this.props.id};eo.default.each(r?.default.defaults,(n,o)=>{i[o]=n.value}),this.onChangeCustom=r?.onChangeCustom?r.onChangeCustom.bind(this):null,this.ref.current.innerHTML="",this.backboneView=new e({el:this.ref.current,model:new Backbone.Model({data:{...i,...this.props.settings}}),...this.props.viewOptions||{}}),this.backboneView.id&&(this.ref.current.id=this.backboneView.id),this.backboneView.className&&(this.ref.current.className=this.backboneView.className),this.backboneView.defaults={...this.backboneView.defaults,...this.props.defaults},this.backboneView.deferredLoadEventName&&(this.backboneView.deferredLoadEventName+="_"+eo.default.uniqueId(),Cargo.Event.once(this.backboneView.deferredLoadEventName,()=>{this.ref.current&&this.ref.current.dispatchEvent(new CustomEvent("legacy-backdrop-loaded",{bubbles:!0,composed:!0,detail:{}}))})),this.backboneView.render(),typeof this.backboneView.Init=="function"&&this.backboneView.Init(),this.backboneView.SetSizeFromMainView?.(this.props.dimensions.width,this.props.dimensions.height),this.props.visibility.visible?(this.backboneView.in_viewport=!0,this.backboneView.Resume?.()):this.backboneView.in_viewport=!1};destroyView=()=>{this.backboneView&&(typeof this.backboneView.destroy=="function"&&this.backboneView.destroy(),this.backboneView.undelegateEvents(),this.backboneView.$el.removeData().unbind(),this.backboneView.remove(),delete this.backboneView)};componentWillUnmount(){this.destroyView()}componentDidUpdate(e){if(this.backboneView&&!eo.default.isEqual(e.settings,this.props.settings)&&(this.onChangeCustom?this.onChangeCustom(e.settings,this.props.settings,this.backboneView):console.log("custom backdrop update failed")),this.props.path!=e.path){this.destroyView(),this.initView();return}this.backboneView&&((e.dimensions.width!=this.props.dimensions.width||e.dimensions.height!=this.props.dimensions.height)&&this.backboneView.SetSizeFromMainView?.(this.props.dimensions.width,this.props.dimensions.height),this.props.visibility.visible!=e.visibility.visible&&(this.props.visibility.visible?(this.backboneView.in_viewport=!0,this.backboneView.Resume?.()):(this.backboneView.in_viewport=!1,this.backboneView.Pause?.())))}render(){let e=this.props.path?.replace("legacy/","")||"";return S("div",{"data-backdrop":e,ref:this.ref,dangerouslySetInnerHTML:{__html:""}})}},N5=gx,mae=eo.default.once(async()=>{if(pe)return;let{Backbone:t,underscore:e,jQuery:r}=await import("https://static.cargo.site/assets/C3/legacy/backbone-packaged.min.js");window.$=r,window.Backbone=t,window._=e,window.Cargo={o:{collection:{},model:{}},Collection:{},Helper:{isMobile:()=>ot.data.mobile.active,IsAdminEdit:()=>Fr},Event:eo.default.extend({},t.Events),Core:{Handlebars:{Render:()=>""}}},window.Backdrop={Data:{}},Cargo.o.collection.images=t.Collection.extend({model:function(i,n){return i&&i.type==="local"?new Cargo.o.model.localImage(i,n):new Cargo.o.model.image(i,n)},fetchImage:function(i,n){let o=window.store.getState(),s=nt.getMediaByHash(o)[i],a=new Cargo.o.model.image({...s});if(s&&a)return a.getImageWithOptions({w:n})},fetchWebGLImage:function(i,n){let o=window.store.getState(),s=nt.getMediaByHash(o)[i];return s?{w:s.width,h:s.height,url:"https://freight.cargo.site/w/"+n+"/t/webgl/i/"+s.hash+"/"+s.name,id:i}:null}}),Cargo.o.model.image=t.Model.extend({initialize:function(){eo.default.bindAll(this,"getImageByWidth")},urlRoot:function(){return"/_api/v0/image"},getImageByWidth:function(i){var n={};return i>this.get("width")&&(i=this.get("width")),n.w=i,this.getImageWithOptions(n).url},getImageByWidth2x:function(i){return this.getImageByWidth(i*2)},getImageWithOptions:function(i){var n={retina:window.devicePixelRatio?window.devicePixelRatio>=1.2:!1,square:!1,url:"",webgl:i.hasOwnProperty("t")&&i.t=="webgl"};if(eo.default.extend(n,i),n.t==="original"&&(n.retina=!1),n.retina===!0&&!n.webgl&&(n.q==null&&(n.q=75),n.hasOwnProperty("w")&&(n.w=Math.min(n.w*2,this.get("width"))),n.hasOwnProperty("h")&&(n.h=Math.min(n.h*2,this.get("height")))),n.w&&n.w>this.get("width")&&(n.webgl?n.w=this.getValidWebGLSize(n.w):n.w=this.get("width")),n.h&&n.h>this.get("height")&&(n.h=this.get("height")),n.square===!0){var o=this.getSquareCrop();n.c={x:o.x,y:o.y,w:o.w,h:o.h}}var s=["t","w","h","q","c"],a=[],l=!1,p=!1;eo.default.each(n,function(d,m){s.indexOf(m)===-1||d===""||(m==="c"?a.push("c/"+d.x+"/"+d.y+"/"+d.w+"/"+d.h):a.push(m+"/"+d),l=m=="w"?d:m=="c"&&d.w?d.w:l,p=m=="h"?d:m=="c"&&d.h?d.h:p)},this);var f=this.getScaleSize(l,p);return n.w=f.w,n.h=f.h,this.get("hash")!==void 0&&this.get("name")!==void 0?n.url="https://freight.cargo.site/"+a.join("/")+"/i/"+this.get("hash")+"/"+this.get("name"):n.url="",n},getSquareCrop:function(){var i=y=w=h=diff=0;return this.get("height")>this.get("width")?(w=h=this.get("width"),diff=this.get("height")-this.get("width"),y=Math.floor(diff/2),i=0):this.get("width")>this.get("height")?(w=h=this.get("height"),diff=this.get("width")-this.get("height"),i=Math.floor(diff/2),y=0):(w=this.get("width"),h=this.get("height"),i=y=0),{w,h,x:i,y}},getOriginalImage:function(){return this.getImageWithOptions({t:"original",retina:!1})},urlBelongsToImage:function(i){return typeof i!="string"?!1:i.indexOf(this.get("hash")+"/"+this.get("name"))!==-1},getValidWebGLSize:function(i){var n=[128,256,512,1024,2048,4096];return i>this.get("width")&&eo.default.each(n,function(o){o<1e3&&(i=o)}),i},getScaleSize:function(i,n){var o,s,a=i,l=n;if(o=parseInt(this.get("width")),s=parseInt(this.get("height")),!(i&&n)){if(o==s)a=i||n||o,l=a;else if(i)var p=o/i,l=Math.floor(s/p),a=i;else if(n)var p=s/n,a=Math.floor(o/p),l=n}return{w:a,h:l}},getFitSize:function(i,n,o,s){if(i=parseInt(i),n=parseInt(n),n>i)var a=i/o,l=Math.floor(n/a),p=o;else if(i>n)var a=n/s,p=Math.floor(i/a),l=s;else var p=i,l=n;return[p,l]}}),Cargo.Collection.Images=new Cargo.o.collection.images})});var Lu,Xm=V(()=>{ke();Lu=function(t,e,r={}){if(t.nodeType===3)return t.data;if(t.nodeType!==1)return null;let i={},n=[],o=0,s=t.attributes,a=t.childNodes;for(o=s.length;o--;)i[s[o].name]=s[o].value;for(r={...i,...r},o=a.length;o--;){let l=Lu(a[o],null);n[o]=l}return Lt(e||t.nodeName,r,n)}});var jPe,vx,Zm,Yi,na=V(()=>{ke();Be();jPe=ye(Pe(),1);Yr();fe();pe||(vx=new ResizeObserver(function(t){t.forEach(function(e){_t(e.target,"reference-resize",{target:e.target,width:e.contentRect.width},{bubbles:!1,cancelable:!0,composed:!0})})}));Zm=class extends me{constructor(e){super(e),this.elementRef=xe(),this.elementRef.current={},this.saveRef=r=>i=>{this.elementRef.current[r]=i}}render(){let{values:e={elWidth:"100%"}}=this.props;return S("div",{tabIndex:"-1","data-nosnippet":!0,style:{height:0,width:"100%",minWidth:"100%",overflow:"hidden",display:"block",alignSelf:"flex-start",visibility:"hidden",pointerEvents:"none",boxSizing:"border-box",zIndex:-1,...this.props.style},children:Object.keys(e).map(r=>{let i=e[r];return S("div",{tabIndex:"-1",ref:this.saveRef(r),style:typeof i=="object"?i:{width:i}})})})}componentDidUpdate(e,r){}onResize=e=>{let r=Object.keys(this.elementRef.current).find(i=>this.elementRef.current[i]===e.target);this.props.onResize&&this.props.onResize(r,e.width)};componentDidMount(){Object.keys(this.elementRef.current).forEach(e=>{let r=this.elementRef.current[e];At(r,"reference-resize",this.onResize),vx?.observe(r)})}componentWillUnmount(){Object.keys(this.elementRef.current).forEach(e=>{let r=this.elementRef.current[e];vx?.unobserve(r),Rt(r,"reference-resize",this.onResize)})}};Zm.defaultProps={values:{elWidth:"100%"}};Yi=Zm});var nIe,Jm,Ei,ps=V(()=>{ke();Ye();Co();qr();nIe=ye(Pe(),1);fe();Jm=class extends me{constructor(e){super(e),this.state={scrollIncrement:0,pointerAttention:!1,shiftButtonX:0,shifted:!1,overlayPosition:{x:0,y:0,width:0,height:0}},this.attachToBaseNode()}render(e,r){return this.renderElement?it(S(ce,{children:e.render({...r,...e})}),this.renderElement):null}pointerIn=e=>{this.requestTick(),this.setState(r=>({pointerAttention:!0,scrollIncrement:r.scrollIncrement+1})),this.props.onPointerIn&&this.props.onPointerIn()};pointerOut=()=>{this.setState({pointerAttention:!1}),this.props.onPointerOut&&this.props.onPointerOut()};updatePosition=e=>{let r=this.props.buttonHeight||0,i=0,n=e.height,o=e.top;this.props.buttonMode=="inside",n=e.height,this.setState({overlayPosition:{x:e.left,y:o,width:e.width,height:n}})};componentWillUnmount(){this.props.baseNode._wasFocused=this.state.pointerAttention,this.props.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),Ke.removePortal(this.props.baseNode,this.renderElement)}requestTick=()=>{this.ticking||(Ke.updateElementRect(this.props.baseNode),this.ticking=!0,requestAnimationFrame(()=>{this.ticking=!1}))};attachToBaseNode(){this.props.baseNode&&(this.renderElement=Ke.getPortal(this.props.baseNode,{noPointerEvents:this.props.noPointerEvents||!1,trackResize:this.props.trackResize||!1,extraMargins:this.props.buttonMode=="inside"?[0,0,0,0]:[0,0,0,0],component:this}))}onScroll=e=>{this.requestTick();let r=this.props.scrollContext.getScrollPosition().y,i=r-this.scrollPos;this.scrollPos=r,this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(i)};componentDidMount(){this.props.baseNode&&this.props.baseNode._wasFocused&&(this.setState({pointerAttention:!0}),this.requestTick()),Ke.testHover()}componentDidUpdate(e,r){this.props.baseNode&&e.baseNode!==this.props.baseNode&&this.attachToBaseNode(),(this.state.pointerAttention!==r.pointerAttention||this.state.noPointerEvents!==r.noPointerEvents||this.props.hasFocus!==e.hasFocus||this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement)&&(this.props.scrollContext.scrollingElement&&(this.props.hasFocus||this.state.pointerAttention||this.state.noPointerEvents)?(this.scrollPos=this.props.scrollContext.getScrollPosition().y,this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll)):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),Ke.testHover(),this.requestTick())}};Jm.defaultProps={buttonMode:"inside",buttonHeight:0};Ei=Eo(Jm)});var Xi,Qm,Ro,Fu=V(()=>{ke();Ye();Bt();ps();qr();Kn();ft();Xi=ye(Pe(),1);Pr();fe();Qm=class extends me{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,galleryIsEmpty:!1,showInsertionIndicator:!1,adjacentIndexes:{above:-1,below:-1,left:-1,right:-1}},this.dragMap=new Map,this.onDragOver=Xi.default.throttle(this.onDragOver,80)}mutationObserverOptions={attributes:!0,childList:!0,subtree:!0,characterData:!0};render(e,r){let{galleryInstance:i}=e,{initialShowOutlines:n,showTransition:o,draggingOver:s,adjacentIndexes:a,showInsertionIndicator:l,galleryIsEmpty:p,buttonHovered:f,UIWindow:d}=r,m=this.props["thumbnail-index"]!==void 0,g=23;return S(ce,{children:[S(Zr,{onlyAllowCollapsedRange:!0,baseNode:i}),S("style",{children:l&&`
					::slotted(media-item) {
						--base-translate: translate(0, 0);						
						transition: .08s transform cubic-bezier(0, 0, 0.01, 1);
					}

					::slotted(media-item:nth-child(${a.left+1})) {
						z-index: 1001;
						--base-translate: translateX(-15px);
					}

					::slotted(media-item:nth-child(${a.right+1})) {
						z-index: 1001;
						--base-translate: translateX(15px);
					}

					::slotted(media-item:nth-child(${a.above+1})) {
						z-index: 1001;
						--base-translate: translateY(-15px);
					}

					::slotted(media-item:nth-child(${a.below+1})) {
						z-index: 1001;
						--base-translate: translateY(15px);
					}
				`}),S(Ei,{...this.props,hasFocus:!!d,onScrollWhileHovered:this.onScrollWhileHovered,trackResize:!0,buttonHeight:g,buttonMode:"inside",baseNode:this.props.galleryInstance,render:v=>{let{pointerAttention:x,overlayPosition:_}=v,E=0;if(_.y<=1&&(E=Math.min(-_.y+1,_.height+-g+1)),!e?.["blog-gallery"])return S(ce,{children:S("div",{className:`editor-overlay editor-outline${x||d?" hover":""}${x||d?" button-hover":""}${d?" focus":""}`,style:{transform:`translate3d(${_.x}px, ${_.y}px, 0)`,width:_.width+"px",height:_.height+"px",display:x||d?"block":"none",minHeight:"27px",zIndex:10},children:[S("div",{className:"in-editor-buttons gallery",style:{transform:`translateY(${E}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:S("button",{onMouseDown:O=>{this.launchUIWindow(O)},ref:this.galleryButtonRef,className:"text",children:m?"Thumbnail Index":"Gallery"})}),e.otherUI]})})}})]})}launchUIWindow=(e,r)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.props.galleryInstance.getBoundingClientRect(),n={x:i.x+-10,y:i.y,left:i.right+-10,right:i.right+-10,top:i.top+0,bottom:i.top+27,width:i.width,height:10};Ce.adminWindow.UIWindowOpener.openUIWindow({windowName:"imagegallery-ineditor",windowAlias:"imagegallery",positionRect:n,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!0,props:{activeGallery:this.props.galleryInstance}})};onMutate=e=>{if(this.props.suppressMutation)return;this.observer.disconnect();let r=[],i=[],n=[],o=!1,s=!1,a=this.props["thumbnail-index"],l=!1;e.forEach(f=>{if(f.target.tagName=="MEDIA-ITEM"){if(r.indexOf(f.target)>-1||f.type!=="attributes"||f.attributeName==="slot"||this.props.disabledMediaItemOptions.indexOf(f.attributeName)>-1)return;a&&r.push(f.target),!(f.attributeName==="style"||f.attributeName==="class")&&this.props.gallerySpecificAttributes&&this.props.gallerySpecificAttributes.includes(f.attributeName)&&r.push(f.target)}else f.target==this.props.galleryInstance&&(f.removedNodes.length>0||f.addedNodes.length>0)?(this.props.allowedElements&&(s=[...Array.from(f.addedNodes),...Array.from(f.removedNodes)].some(this.props.allowedElements)),o=f.addedNodes.length>0||o,i=[...i,...Array.from(f.addedNodes).filter(d=>d.tagName==="MEDIA-ITEM")],n=[...n,...Array.from(f.removedNodes).filter(d=>d.tagName==="MEDIA-ITEM")]):f.type==="characterData"&&(l=f.target)}),i=Xi.default.uniq(i),n=Xi.default.uniq(n),r=Xi.default.uniq(r),n.forEach(f=>{f.itemResize=null,f.itemDragStart=null});let p=Array.from(this.props.galleryInstance.childNodes).filter(f=>f?.nodeName!=="MEDIA-ITEM");this.props.allowedElements&&Xi.default.remove(p,this.props.allowedElements),p.forEach(f=>{f.remove()}),(i.length>0||n.length>0)&&(Array.from(this.props.galleryInstance.children).some(f=>f.tagName==="MEDIA-ITEM")||this.removeEmptyGallery()),(i.length>0||n.length>0||r.length>0||s||this.props["thumbnail-index"]&&l)&&this.props.onCleanUp&&this.props.onCleanUp(i,n,r,l),this.observer.observe(this.props.galleryInstance,this.mutationObserverOptions)};removeEmptyGallery=Xi.default.debounce(()=>{if(!Array.from(this.props.galleryInstance.children).some(e=>e.tagName==="MEDIA-ITEM")){if(this.state.isDraggingInEditor)this.setState({galleryIsEmpty:!0});else if(this.props["thumbnail-index"]===void 0){this.props.galleryInstance.remove();return}}},0);scrollIntoView=()=>{let e=this.props.galleryInstance.getBoundingClientRect();this.props.galleryInstance.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:{transitionTime:120,lazyScroll:!0}}))};onDragOver=(e,r,i)=>{if(!this.props.disableDragOver)if((!i.customDropTarget||i.customDropTarget===this.props.galleryInstance)&&(i.draggedMediaItems.length>0||i.fromOutside)&&!i.inAdmin&&this.props.galleryInstance.contains(i.dropTarget)){this.state.showInsertionIndicator||this.dragMap.clear();let o=this.props.galleryInstance.getBoundingClientRect(),s=60,a=1.033,l=2.399827721492203,p=Array.from(this.props.galleryInstance.children),f=[],d=r.clientX+-o.left,m=r.clientY+-o.top,g=15,v,x=0,_,E=0,O=null;for(v=0;v<s;v++)if(O=null,x=x+l,g=g*a+2,_=r.clientX+Math.cos(x)*g,E=r.clientY+Math.sin(x)*g,O=document.elementFromPoint(_,E),O&&(O=O.closest("MEDIA-ITEM")||null),this.props.galleryInstance.contains(O)||(O=null),O&&f.indexOf(O)===-1)if(this.dragMap.has(O)){let ee=this.dragMap.get(O);_<=ee.x2+o.left&&_>=ee.x1+o.left&&E<=ee.y2+o.top&&E>=ee.y1+o.top&&f.push(O)}else f.push(O);let L=f.map(ee=>{let Z;if(this.dragMap.has(ee))Z=this.dragMap.get(ee);else{let Le=ee.getBoundingClientRect();Z={w:Le.width+-(15*2),h:Le.height+-(15*2),x1:Le.left+-o.left+15,x2:Le.left+Le.width+-o.left+-15,y1:Le.top+-o.top+15,y2:Le.top+Le.height+-o.top+-15},this.dragMap.set(ee,Z)}let Y=!1,te=!1,re=!1,ie=!1,ae=!1,he=!1,de=0,we=0,Re=0;d>=Z.x1&&d<=Z.x2?(te=!0,d<Z.x1+Z.w*.5?he=!0:ae=!0,Re=0):Z.x1>d?(he=!0,Re=Z.x1-d):d>Z.x2&&(Re=Z.x2-d,ae=!0),m>=Z.y1&&m<=Z.y2?(Y=!0,m<Z.y1+Z.h*.5?ie=!0:re=!0,we=0):Z.y1>m?(ie=!0,we=Z.y1-m):m>Z.y2&&(re=!0,we=Z.y2-m),de=Math.sqrt(we*we+Re*Re);let ve=p.indexOf(ee),Ae=ee.getAttribute("slot"),Ve=0,Me=0;return this.props.dragIndicationType==="columns"&&(Ve=Array.from(ee.assignedSlot.parentElement.children).indexOf(ee.assignedSlot)),{inX:te,inY:Y,distance:de,rise:we,run:Re,above:re,below:ie,toRight:he,toLeft:ae,index:ve,slotIndex:Ve,el:ee,rect:Z}}),I={el:null,index:-1},D=I,R=I,W=I,N=I,z=[],$=[],q=[],J=[];L.forEach(ee=>{ee.above&&q.push(ee),ee.below&&J.push(ee),ee.toRight&&$.push(ee),ee.toLeft&&z.push(ee)});let X=null,se=!1;if(this.props.dragIndicationType==="columns"){let ee=Xi.default.minBy(q,re=>Math.abs(re.distance)),Z=Xi.default.minBy(J,re=>Math.abs(re.distance)),Y=Xi.default.minBy(z.filter(re=>re.inY),re=>Math.abs(re.distance)),te=Xi.default.minBy($?.filter(re=>re.inY),re=>Math.abs(re.distance));ee&&Z?Math.abs(Z.run)<Math.abs(ee.run)?(N=Z,W=q.find(re=>re.rect.x1<N.rect.x2&&re.rect.x2>N.rect.x1)||I):(W=ee,N=J.find(re=>re.rect.x1<W.rect.x2&&re.rect.x2>W.rect.x1)||I):ee?W=ee:Z&&(N=Z),Y&&te?se=te.rect.y1!==Y.rect.y1:(Y?.rect?.y1>15||te?.rect?.y1>15||W?.index>-1)&&(se=!0)}if(se){if(D=I,R=I,W=W,N=N,N?.el)X=N.el;else for(X=W.el?.nextElementSibling?.assignedElements?.()[0]||null;X&&X.tagName!=="MEDIA-ITEM";)X=X?.nextElementSibling||null;i.draggedMediaItems.length===1&&p.indexOf(i.draggedMediaItems[0])>-1&&p.indexOf(X)>p.indexOf(i.draggedMediaItems[0])&&(X=X.nextElementSibling)}else{let ee=Xi.default.minBy(z,Y=>Math.abs(Y.distance)),Z=Xi.default.minBy($,Y=>Math.abs(Y.distance));if(ee&&Z?Math.abs(Z.rise)<Math.abs(ee.rise)?(R=Z,D=z.find(Y=>Y.index==R.index+-1)):(D=ee,R=$.find(Y=>Y.index==D.index+1)):ee?D=ee:Z&&(R=Z),W=I,N=I,R=R||I,D=D||I,R?.el)X=R.el;else for(X=D.el?.nextElementSibling;X&&X.tagName!=="MEDIA-ITEM";)X=X.nextElementSibling}this.setState({adjacentIndexes:{left:D.index,right:R.index,above:W.index,below:N.index},insertBeforeTarget:X,showInsertionIndicator:!0}),Ce.globalDragEventController.setCustomDropTarget(this.props.galleryInstance)}else this.state.showInsertionIndicator&&this.props.onDragOut&&this.props.onDragOut(),this.setState({showInsertionIndicator:!1}),Ce.globalDragEventController.releaseCustomDropTarget(this.props.galleryInstance)};onDragStart=(e,r,i)=>{if(!(this.props["thumbnail-index"]&&(!i.draggedMediaItems?.[0]||!this.props.galleryInstance.contains(i.draggedMediaItems[0])))&&(Ke.activateHoverElement(this.props.galleryInstance),this.props.disableDragStart)){r.preventDefault();return}};onAfterDragStart=(e,r,i)=>{this.props.disableDragStart||this.setState({isDraggingInEditor:!0})};onDragEnd=(e,r,i)=>{this.onDragOver.cancel(),this.props.onDragEnd&&this.props.onDragEnd(),this.setState({showInsertionIndicator:!1,isDraggingInEditor:!1},()=>{this.onDragFinish()})};onDragDrop=(e,r,i)=>{if(this.onDragOver.cancel(),this.props.onDragDrop&&this.props.onDragDrop(),!this.props.disableDrop&&!i.inAdmin){if(i.customDropTarget===this.props.galleryInstance){CargoEditor.mutationManager.execute(()=>{i.draggedMediaItems.forEach((s,a)=>{this.props["thumbnail-index"]&&s.setSaveable(!1),this.props.galleryInstance.insertBefore(s,this.state.insertBeforeTarget)}),this.props.onAfterDrop&&this.props.onAfterDrop(i.draggedMediaItems,this.state.insertBeforeTarget,this.state.adjacentIndexes)});let n=i.draggedMediaItems[0],o=i.draggedMediaItems[0]?.getAttribute("href");clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(()=>{let s=CargoEditor.rangy.createRange();this.props["thumbnail-index"]&&(n=Array.from(this.props.galleryInstance.children).find(a=>a.getAttribute("href")==o)),n&&(s.selectNode(n),CargoEditor.helpers.setActiveRange(s))},120)}this.setState({showInsertionIndicator:!1,isDraggingInEditor:!1,insertBeforeTarget:null},()=>{this.onDragFinish()})}};onBeforeDrop=(e,r,i)=>{this.props.disableBeforeDrop};onDragFinish=()=>{Ke.testHover(),this.state.galleryIsEmpty&&(Array.from(this.props.galleryInstance.children).filter(r=>r?.tagName=="MEDIA-ITEM").length==0&&this.props["thumbnail-index"]===void 0?CargoEditor.mutationManager.execute(()=>{this.props.galleryInstance.remove()}):this.setState({galleryIsEmpty:!1}))};setUIWindow=e=>{this.setState({UIWindow:e}),e?typeof this.props.onUIWindowSet=="function"&&this.props.onUIWindowSet(e):typeof this.props.onUIWindowRelease=="function"&&this.props.onUIWindowRelease(e)};onScrollWhileHovered=e=>{this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};componentDidUpdate(e){e.suppressMutation!==this.props.suppressMutation&&(this.observer.disconnect(),this.props.suppressMutation||this.observer.observe(this.props.galleryInstance,this.mutationObserverOptions)),Xi.default.isEqual(e.mediaItemEditorInfo,this.props.mediaItemEditorInfo)||this.setMediaItemEditorInfo()}setMediaItemEditorInfo=()=>{this.props.galleryInstance._mediaItemEditorInfo=this.props.mediaItemEditorInfo||{disableResize:!1,disableButton:!1},Array.from(this.props.galleryInstance.children).filter(r=>r.tagName==="MEDIA-ITEM").forEach(r=>{r._editorInterface?.setState?.({mediaItemEditorInfo:{...this.props.mediaItemEditorInfo}})}),this.props.mediaItemEditorInfo?.afterScaleChange&&(this.props.galleryInstance._mediaItemEditorInfo.afterScaleChange=this.props.mediaItemEditorInfo.afterScaleChange)};flushMutationQueue=()=>{let e=this.observer.takeRecords();e.length>0&&this.onMutate(e)};componentDidMount(){if(this.props.galleryInstance.children.length===0&&this.props["thumbnail-index"]===void 0){this.props.galleryInstance.remove();return}this.setMediaItemEditorInfo(),this.observer=new MutationObserver(this.onMutate),this.observer.observe(this.props.galleryInstance,this.mutationObserverOptions),this.props.galleryInstance._editorInterface=this,Ce.globalDragEventController.on("dragstart",this.onDragStart),Ce.globalDragEventController.on("dragover",this.onDragOver),Ce.globalDragEventController.on("dragend",this.onDragEnd),Ce.globalDragEventController.on("before-drop",this.onBeforeDrop),Ce.globalDragEventController.on("drop",this.onDragDrop),Ce.globalDragEventController.on("after-dragstart",this.onAfterDragStart)}componentWillUnmount(){this.state.UIWindow&&this.state.UIWindow.changingLayout,this.removeEmptyGallery.cancel(),this.onDragOver.cancel(),this.observer?.disconnect(),this.observer=null,clearTimeout(this.showOutlinesTimeout),clearTimeout(this.bindTimeout),Ce.globalDragEventController.off("dragstart",this.onDragStart),Ce.globalDragEventController.off("dragover",this.onDragOver),Ce.globalDragEventController.off("dragend",this.onDragEnd),Ce.globalDragEventController.off("before-drop",this.onBeforeDrop),Ce.globalDragEventController.off("drop",this.onDragDrop),Ce.globalDragEventController.off("after-dragstart",this.onAfterDragStart),this.props.galleryInstance._editorInterface===this&&(this.props.galleryInstance._mediaItemEditorInfo=null,delete this.props.galleryInstance._editorInterface)}};Qm.defaultProps={disabledMediaItemOptions:[],dragIndicationType:"grid"};Ro=Ue((t,e)=>({Editor_PageEditorOutlines:t.adminState?.localStorage?.Editor_PageEditorOutlines}))(Qm)});var yx,bx,D5,L5=V(()=>{ke();yx=ye(Pe(),1);Bt();qr();Fu();fe();bx=class extends me{constructor(e){super(e),this.state={isDragging:!1,thumbnailsVisible:!1,thumbnailsVisibleWhileDragging:!1,hasUIWindow:!1,pointerAttention:!1},this.debouncedCheckRange=yx.default.debounce(this.checkRange,120)}render(e,r){let{isDragging:i,thumbnailsVisible:n}=r,{galleryInstance:o,dragContext:s}=e;return S(ce,{children:[S("style",{children:`
			media-item figcaption.caption {
				${this.state.thumbnailsVisible?"display: block":""}
			}	
		`}),S(Ro,{...e,mediaItemEditorInfo:{disableResize:!0,disableButton:!1},gallerySpecificAttributes:this.props.gallerySpecificAttributes||[],suppressMutation:this.props.suppressMutation,galleryInstance:o,disableDragOver:!n,disableDrop:!n,allowedElements:a=>a.part=="previous-button"||a.part=="next-button",onUIWindowRelease:this.onUIWindowRelease,onPointerIn:this.onPointerIn,onPointerOut:this.onPointerOut})]})}onCleanUp=(e,r,i,n,o,s)=>{this.props.galleryInstance.updateNavigation(),this.props.onCleanUp&&this.props.onCleanUp(e,r,i,n,o,s)};onPointerIn=()=>{this.setState({pointerAttention:!0})};onPointerOut=()=>{this.setState({pointerAttention:!1})};onDragOver=(e,r,i)=>{this.props.galleryInstance.contains(i.dropTarget)&&!this.state.thumbnailsVisible&&(this.setState({thumbnailsVisibleWhileDragging:!0}),this.props.galleryInstance.showThumbnails())};onDragDrop=(e,r,i)=>{this.props.galleryInstance.contains(i.dropTarget)&&this.state.thumbnailsVisible?setTimeout(()=>{this.state.thumbnailsVisibleWhileDragging&&(this.setState({thumbnailsVisibleWhileDragging:!1}),this.debouncedCheckRange())},500):this.state.thumbnailsVisibleWhileDragging&&(this.setState({thumbnailsVisibleWhileDragging:!1}),this.props.galleryInstance?.hideThumbnails?.())};updateThumbStatus=e=>{let r=this.props.galleryInstance.thumbnailsVisible;this.setState({thumbnailsVisible:r}),r&&requestAnimationFrame(()=>{let i=CargoEditor?.rangy?.createRange(),n=this.props.galleryInstance.querySelector(".sizing-frame");n&&i&&(i.setStartBefore(n),i.setEndAfter(n),CargoEditor.helpers.setActiveRange(i),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor()))})};onUIWindowRelease=()=>{this.props.galleryInstance.thumbnailsVisible&&this.debouncedCheckRange(),this.setState({hasUIWindow:!1})};onUIWindowSet=e=>{this.setState({hasUIWindow:e})};checkRange=()=>{let e=CargoEditor.getActiveRange();CargoEditor.events.off("cursor-activity",this.debouncedCheckRange),this.state.hasUIWindow||this.props.childArray.some(r=>r._editorInterface?.state?.UIWindow)||e&&this.props.galleryInstance.contains(e.commonAncestorContainer)||!e?CargoEditor.events.on("cursor-activity",this.debouncedCheckRange):this.props.galleryInstance?.hideThumbnails?.()};onClick=e=>{this.props.galleryInstance.thumbnailsVisible};bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),CargoEditor.events.on("cursor-activity",this.captionCursorActivity)};captionCursorActivity=yx.default.throttle(()=>{var e=CargoEditor.getActiveRange();e&&this.props.galleryInstance.contains(e.commonAncestorContainer)&&Array.from(this.props.galleryInstance.children).filter(i=>i.tagName==="MEDIA-ITEM").forEach((i,n)=>{i.contains(e.commonAncestorContainer)&&this.props.onItemResize(null,i,n)})},120);componentDidUpdate(e){if(e.inTransition!==this.props.inTransition){let r=Array.from(this.props.galleryInstance.children).filter(i=>i.tagName==="MEDIA-ITEM");if(this.props.inTransition)r.forEach(i=>{Ke.deactivateHoverElement(i),Ke.lockItem(i)});else if(this.state.pointerAttention){r.forEach(n=>{Ke.deactivateHoverElement(n),Ke.unlockItem(n)});let i=Array.from(this.props.galleryInstance.children).find(n=>n.nodeName==="MEDIA-ITEM"&&n.assignedSlot?.parentElement?.hasAttribute("data-active-slide"));i&&Ke.activateHoverElement(i)}}}componentDidMount(){CargoEditor&&Object.keys(CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents),Ce.globalDragEventController.on("dragover",this.onDragOver),Ce.globalDragEventController.on("drop",this.onDragDrop),this.props.galleryInstance.addEventListener("click",this.onClick),this.props.galleryInstance.addEventListener("show-thumbnails",this.updateThumbStatus),this.props.galleryInstance.addEventListener("hide-thumbnails",this.updateThumbStatus),this.updateThumbStatus()}componentWillUnmount(){window.removeEventListener("CargoEditor-load",this.bindEditorEvents),this.captionCursorActivity.cancel(),CargoEditor&&Object.keys(CargoEditor||{}).length>0&&CargoEditor.events.off("cursor-activity",this.captionCursorActivity),this.props.galleryInstance.removeEventListener("click",this.onClick),this.props.galleryInstance.removeEventListener("show-thumbnails",this.updateThumbStatus),this.props.galleryInstance.removeEventListener("hide-thumbnails",this.updateThumbStatus),Ce.globalDragEventController.off("drop",this.onDragDrop),Ce.globalDragEventController.off("dragover",this.onDragOver)}},D5=bx});var F5,z5,wx=V(()=>{F5="http://www.w3.org/2000/svg",z5=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i});function B5(t,e,r,i){let n,o,s;for(;e=e._parent;)if((n=e._component)&&!n._processingException)try{if(o=n.constructor,o&&o.getDerivedStateFromError!=null&&(n.setState(o.getDerivedStateFromError(t)),s=n._dirty),n.componentDidCatch!=null&&(n.componentDidCatch(t,i||{}),s=n._dirty),s)return n._pendingError=n}catch(a){t=a}throw t}var q5=V(()=>{wx()});var gae,xx,U5=V(()=>{q5();gae={_catchError:B5},xx=gae});function H5(t,e,r){e[0]=="-"?t.setProperty(e,r==null?"":r):r==null?t[e]="":typeof r!="number"||z5.test(e)?t[e]=r:t[e]=r+"px"}function Sx(t,e,r,i,n){let o;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)r&&e in r||H5(t.style,e,"");if(r)for(e in r)(!i||r[e]!==i[e])&&H5(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(vae,"$1")),e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e=e.toLowerCase().slice(2):e=e.slice(2),t._listeners||(t._listeners={}),t._listeners[e+o]=r,r?i?r._attached=i._attached:(r._attached=$5,t.addEventListener(e,o?V5:W5,o)):t.removeEventListener(e,o?V5:W5,o);else{if(n==F5)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r==null?"":r;break e}catch{}typeof r=="function"||(r!=null&&(r!==!1||e[4]=="-")?t.setAttribute(e,e=="popover"&&r==!0?"":r):t.removeAttribute(e))}}function j5(t){return function(e){if(this._listeners){let r=this._listeners[e.type+t];if(e._dispatched==null)e._dispatched=$5++;else if(e._dispatched<r._attached)return;return r(xx.event?xx.event(e):e)}}}var vae,$5,W5,V5,G5=V(()=>{wx();U5();vae=/(PointerCapture)$|Capture$/i,$5=0;W5=j5(!1),V5=j5(!0)});function ko(t,e,r,i,n){let o;for(o in r)o!=="children"&&o!=="key"&&!(o in e)&&Sx(t,o,null,r[o],i);for(o in e)(!n||typeof e[o]=="function")&&o!=="children"&&o!=="key"&&o!=="value"&&o!=="checked"&&r[o]!==e[o]&&Sx(t,o,e[o],r[o],i)}var zu=V(()=>{G5()});var K5,Y5=V(()=>{K5=(t,e={})=>{let r=t.replace(/["#$%<>&=\?\\\/:]/g,"").replace(/(\s|\.)/g,"-").replace(/-{2,}/g,"-").toLowerCase(),i=r.length>0?r:"_";if(e.inUse){let n=i,o=1;for(;e.inUse.includes(n);)n=i+`-${o++}`;return n}return i}});function X5(t){let e=t.split(":"),r=e[0],i="all";switch(r){case"set":i=ol.default.tail(e).map(n=>n).join(":");break;case"tag":i=ol.default.tail(e)[0]?.split(",").map(n=>K5(n.trim()));break;case"img":i="all";break;case"all":i="all";break}return{type:r,value:i}}function wae(t){class e extends Tr{constructor(i){super(i),this.fixBadNullValue(),this.state={layoutIncrement:0,initialLoad:!1,attributeMap:this.getMapFromAttribute(),thumbnails:[],renderLimit:150},this.preactRendering=!1}getMapFromAttribute=()=>{let i={};try{let n=unescape(this.props["thumbnail-index-metadata"]||"{}");i=JSON.parse(n)}catch(n){i={},console.error("failed to load saved thumbnail map: ",n)}return i};fixBadNullValue=()=>{this.props["thumbnail-index"]==="null"&&this.props.baseNode&&this.props.baseNode.removeAttribute("thumbnail-index"),this.props.baseNode&&this.props.baseNode.hasAttribute("tag")&&this.props.baseNode.removeAttribute("tag")};isActiveLink=i=>{if(this.props.inAdminFrame&&this.props.adminMode===!0)return!1;let n=i.purl.replace(/^#/,"");return i.id===this.props.PIDBeingEdited||n===this.props.activePURL||this.props.hashPurl&&n===this.props.hashPurl};render(i){if(!i["thumbnail-index"]||i["thumbnail-index"]==="null"){let l={...i,"thumbnail-index":void 0};return S(t,{...l})}let n=this.state.thumbnails.length>0,o=n&&i["show-tags"],s=n&&i["show-title"],a=n||!this.state.initialLoad?this.state.thumbnails:this.props.adminMode?bae:[];return this.props.baseNode.tagName==="GALLERY-FREEFORM"&&(a=ol.default.sortBy(a,l=>{let p=this.state.attributeMap?.[l.id];return p!=null?p.sort+1:0})),a=a.slice(0,this.state.renderLimit),this.renderedItemCount=a.length,S(t,{...i,onCleanUp:this.onCleanUp,disableDragOver:!0,children:a.map((l,p)=>{let f=l.thumbnail?.is_video||l.thumbnail?.is_url||null;return Lt("media-item",{...this.state.attributeMap[l.id]?.attributes,saveable:!1,model:l.thumbnail,autoplay:f,loop:f,muted:f,href:l.purl,rel:"history",itemDragStart:this.onDragStart,key:"thumb id"+l.id,"disable-zoom":!0,className:`thumbnail linked ${l.tags.map(d=>"tag-"+d.url).join(" ").toLowerCase()}${this.isActiveLink(l)?" active":""}`,...l.attributes},S("figcaption",{class:`caption${!s&&!o?" empty":""}`,slot:"caption",children:[s?S("div",{className:"page-title",children:l.title},"title-"+l.url+"-"+l.title+"-"+this.state.layoutIncrement):null,l.tags.length>0&&o?S("div",{className:"tags",children:l.tags.map((d,m)=>S(ce,{children:[S("a",{href:d.url,className:"tag-link",rel:i["links-filter-index"]?"filter-index":"history","data-tag":d.tag,children:d.tag+""}),m<l.tags.length-1?S("span",{className:"tag-separator"}):null]},"tag-link-"+d.url+"-"+this.state.layoutIncrement))}):null]}))})})}onDragStart=i=>{!this.props["thumbnail-index"]||this.props["thumbnail-index"]==="null"||this.props.adminMode&&this.props.baseNode.tagName!=="GALLERY-FREEFORM"&&(i.preventDefault(),i.stopPropagation())};componentDidUpdate(i,n){this.fixBadNullValue(),this.props["thumbnail-index"]&&(i["thumbnail-index"]!==this.props["thumbnail-index"]||this.props.thumbCollection!==i.thumbCollection||this.props.sort!==i.sort||this.props.lastPublishedAt!==i.lastPublishedAt)&&this.setThumbnails(),this.state.thumbnails!==n.thumbnails&&this.props.baseNode.dispatchEvent(new CustomEvent("new-thumbnails-rendered",{bubbles:!0,cancelable:!0,composed:!0,detail:{}})),this.props["thumbnail-index-metadata"]!==i["thumbnail-index-metadata"]&&this.setState({attributeMap:this.getMapFromAttribute()}),this.ticking||(this.ticking=!0,setTimeout(()=>{this.renderedItemCount>=this.state.renderLimit&&this.setState({renderLimit:this.state.renderLimit+250}),delete this.ticking},200)),this.props["thumbnail-index"]!==i["thumbnail-index"]&&this.props["thumbnail-index"]&&this.props["thumbnail-index"]!=="null"&&(this.props.pageInfo.setPageData({filter:this.props["thumbnail-index"]},this.props.baseNode),this.emitFilterEvent())}emitFilterEvent=()=>{this.props["thumbnail-index"]&&!this.props.adminMode&&(this.emitFilterDebounce=requestAnimationFrame(()=>{var i=new CustomEvent("filter-thumbnail-index",{bubbles:!0,cancelable:!0,composed:!0,detail:{filter:this.props["thumbnail-index"]}});this.props.baseNode.dispatchEvent(i)}))};updateOldThumbMetaData=ol.default.debounce(()=>{let i=this.props.baseNode.querySelector('script[type="text/thumbnail-metadata"]');if(i){try{CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.setAttribute("thumbnail-index-metadata",escape(i.textContent))},{preventDraft:!0})}catch{}CargoEditor?.mutationManager?.execute?.(()=>{i.remove()},{preventDraft:!0})}},2e3);onPreactRenderComplete=()=>{this.preactRendering=!1,this.childListObserver.takeRecords()};onPreactRenderStart=()=>{this.onChildListMutation(this.childListObserver.takeRecords()),this.preactRendering=!0};onChildListMutation=i=>{if(!this.props["thumbnail-index"]||this.preactRendering||i.length===0)return;i.reverse();let n=!1;for(let o of i)o.type==="childList"&&(o.addedNodes.length>0||o.removedNodes.length>0)&&(n||(console.log("[DOM] Enforced Preact ownership of component tree"),n=!0),Array.from(o.addedNodes).forEach(s=>o.target.removeChild(s)),Array.from(o.removedNodes).forEach(s=>{o.target.insertBefore(s,o.nextSibling)}));this.childListObserver.takeRecords()};componentDidMount(){this.fixBadNullValue(),this.updateOldThumbMetaData(),this.setThumbnails(),this.props["thumbnail-index"]&&this.props["thumbnail-index"]!=="null"&&this.emitFilterEvent(),this.props.baseNode.addEventListener("keydown",this.onKeyDown),this.props.baseNode.addEventListener("filter-thumbnail-index",this.setThumbnails),document.addEventListener("filter-thumbnail-index",this.setThumbnails),this.props.baseNode.addEventListener("refresh-thumbnail-index",this.setThumbnails),this.childListObserver=new MutationObserver(this.onChildListMutation),this.childListObserver.observe(this.props.baseNode,{subtree:!0,childList:!0}),At(document,"preact-render-start",this.onPreactRenderStart),At(document,"preact-render-complete",this.onPreactRenderComplete)}componentWillUnmount(){Rt(document,"preact-render-start",this.onPreactRenderStart),Rt(document,"preact-render-complete",this.onPreactRenderComplete),this.childListObserver.disconnect(),cancelAnimationFrame(this.emitFilterDebounce),this.props.baseNode.removeEventListener("refresh-thumbnail-index",this.setThumbnails),this.props.baseNode.removeEventListener("keydown",this.onKeyDown),this.props.baseNode.removeEventListener("filter-thumbnail-index",this.setThumbnails),document.removeEventListener("filter-thumbnail-index",this.setThumbnails)}onKeyDown=i=>{i.metaKey||i.ctrlKey||!this.props["thumbnail-index"]||(/^.$/u.test(i.key)||i.key==="Enter"||i.key==="Delete"||i.key==="Backspace")&&(i.preventDefault(),i.stopPropagation())};setThumbnails=async()=>{if(!this.props["thumbnail-index"])return;let i=X5(this.props["thumbnail-index"]),n=this.props.lastPublishedAt,o=[];switch(i.type){case"set":try{({data:o}=await Zd.default.get(`${cr}/pages/${this.props.siteId}/thumbs/set/${i.value}?limit=999&timestamp=${n}`,{use_cache:!0}))}catch{}break;case"tag":try{({data:o}=await Zd.default.get(`${cr}/pages/${this.props.siteId}/thumbs/tag/${i.value.join(",")}?limit=999&timestamp=${n}`,{use_cache:!0}))}catch{}break;case"img":try{({data:o}=await Zd.default.get(`${cr}/sites/${this.props.siteId}/media/images?with-pages=true`,{use_cache:!0}))}catch{}o=o.filter(l=>l.media.length>0&&l.password_enabled==!1),o=ol.default.flatMap(o,l=>l.media.map(p=>({display:!0,id:p.id,purl:l.purl,url:l.purl,sort:0,tags:[],thumbnail:p,title:S(ce,{children:[S("a",{href:l.purl,rel:"noopener nofollow",target:"_blank",className:"page-link",children:l.title}),S("br",{}),S("a",{target:"_blank",rel:"noopener nofollow",href:"https://freight.cargo.site/o/i/"+p.hash+"/"+p.name,children:p.name})]}),attributes:{"disable-scroll-animation":!0,href:null,"force-quick-view":!0,hash:p.hash}})));break;default:try{({data:o}=await Zd.default.get(`${cr}/pages/${this.props.siteId}/thumbs/all?limit=999`,{use_cache:!0}))}catch{}break}let s=store.getState();o=o.filter(l=>{let p=s.pages.byId[l.id];return!(p&&p.crdt_state!==er.Published||p&&i.type==="set"&&s.structure.byParent[i.value]&&!s.structure.byParent[i.value].some(f=>f===p.id))});let a=ol.default.unionBy(this.props.thumbCollection,o,"id");switch(a=a.filter(l=>l.pin!==!0&&l.display!==!1&&l.id!==this.props.homepageID&&l.id!==this.props.mobileHomepageID&&l.crdt_state!==er.Deleted&&l.thumb_meta?.hide_from_index!==!0&&this.props.pageInfo.pid!==l.id),this.props.sort){case"reverse":a.sort((l,p)=>p.sort-l.sort);break;case"shuffle":a.sort(l=>Math.random()-.5);break;default:a.sort((l,p)=>l.sort-p.sort);break}a.forEach(l=>{l.purl.startsWith("#")||(l.purl="#"+l.purl)}),this.setState({initialLoad:!0,thumbnails:a})};onCleanUp=(i,n,o,s)=>{if(!this.props["thumbnail-index"]||!this.props.adminMode)return;let a={},l="",p=store.getState();if(Array.from(this.props.baseNode.children).filter(d=>d.tagName==="MEDIA-ITEM").forEach((d,m)=>{let g=d.getAttribute("href"),v={},x=d.attributes,_=0;for(_=x.length;_--;)x[_].name==="saveable"||x[_].name==="limit-by"||x[_].name==="class"||x[_].name==="hash"||x[_].name==="href"||x[_].name==="rel"||x[_].name==="slot"||x[_].name==="width"||x[_].name==="height"||x[_].name==="disable-zoom"||(v[x[_].name]=x[_].value);let E=nt.getContentByPurl(p,g)?.id||null;E&&(a[E]={sort:m,attributes:v})}),a={...this.state.attributeMap,...a},l=JSON.stringify(a),l=escape(l),l!==this.props["thumbnail-index-metadata"])CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.setAttribute("thumbnail-index-metadata",l)},{preventDraft:!0}),this.setState({attributeMap:a||{}});else if(s){if(CargoEditor&&CargoEditor?.getActiveEditor?.()){let d=CargoEditor.rangy.createRange();d.selectNode(this.props.baseNode),d.collapse(),CargoEditor.helpers.setActiveRange(d)}this.setState({layoutIncrement:this.state.layoutIncrement+1})}}}return Ut(Ue((r,i)=>{let n=yae(i["thumbnail-index"],r.structure,r.pages),o=(r.pages.byId[r.frontendState.activePID]||r.sets.byId[r.frontendState.activePID])?.purl;return{lastPublishedAt:r.adminState?.crdt?.publishedAt??"000",thumbCollection:n,activePURL:o,hashPurl:r.frontendState.activeHashPurl,adminMode:r.frontendState.adminMode,PIDBeingEdited:r.frontendState.PIDBeingEdited,inAdminFrame:r.frontendState.inAdminFrame,siteId:r.site.id,homepageID:r.site.homepage_id,mobileHomepageID:r.site.mobile_homepage_id}})(e))}var Zd,ol,yae,bae,No,Bu=V(()=>{ke();Ye();ft();Bt();Be();Gs();Zd=ye(Mn(),1);zr();_i();Pr();Y5();Yr();ol=ye(Pe(),1);fe();ke();yae=hn((t,e,r)=>{let i=[];if(!t)return i;let n=X5(t);switch(n.type){case"set":i=(e.byParent[n.value]||[]).map(o=>r.byId[o]).filter(o=>o!==void 0);break;case"tag":i=Object.values(r.byId).filter(o=>o.tags&&o.tags.find(s=>n.value?.includes(s.url)));break;case"img":i=[];break;default:i=Object.values(r.byId);break}return i.map(o=>{let s=null;return o.thumb_media_id&&o.media?s=o.media.find(a=>a.id===o.thumb_media_id)||null:o.thumbnail&&(s=o.thumbnail),{id:o.id,title:o.title,purl:o.purl,thumb_meta:o.thumb_meta||{},display:o.display,sort:e.bySort[o.id],tags:o.tags||[],pin:o.pin,crdt_state:o.crdt_state,thumbnail:s}})}),bae=[null,null,null].fill({attributes:{href:null,hash:"placeholder"},purl:null,thumbnail:null,tags:[],title:null});No=wae});var ez,br,Z5,_x,J5,Q5,xae,Sae,_ae,Eae,sl,Ex,Cx,eg,Cae,tg=V(()=>{ke();Ye();Xm();ft();Br();na();L5();zu();Xr();Bu();Yr();Co();zr();Be();il();ez=ye(Pe(),1);fe();ke();br={name:"slideshow",displayName:"Slideshow",tagName:"GALLERY-SLIDESHOW",disabledMediaItemOptions:["scale","sticker","limit-by"],mobileOptions:[{labelName:"",name:"mobile-transition-type",type:"radio",value:"slide",values:[{labelName:"Fade",value:"fade"},{labelName:"Slide",value:"slide"},{labelName:"Scrub",value:"scrub"}]},{labelName:"Transition Speed",name:"mobile-transition-speed",type:"scrubber",numberOnlyMode:!0,value:.8,min:0,max:10,step:.1,requirements:[{option:"transition-type",shouldBe:t=>t==="slide"||t==="fade"}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Navigation",name:"mobile-navigation",type:"check-box",value:!0},{labelName:"Captions",name:"mobile-show-captions",type:"check-box",value:!0}]},{labelName:"Autoplay",name:"mobile-autoplay",type:"check-box",value:!0},{labelName:"Autoplay Delay",name:"mobile-autoplay-delay",type:"scrubber",value:3,step:.1,min:.1,max:30,numberOnlyMode:!0,requirements:[{option:"autoplay",shouldBe:!0}]},{type:"spacer"},{type:"group",className:"slideshow-size-group grid-columns-template-1-auto",children:[{type:"custom",name:"widthTextLabel",requirements:[{option:"mobile-limit-by",shouldBe:"width"}]},{name:"mobile-scale",value:"50rem",allowCalc:!0,allowVar:!0,type:"scrubber",allowOutOfRangeTextInput:!1,labelName:"Scale: Height",allowedUnits:["px","%","rem","em","vmin","vmax","vw","vh"],min:{px:8,rem:.5,em:.5,etc:1},max:{"%":100,vmin:100,vmax:100,vh:100,vw:100,etc:void 0},addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",requirements:[{option:"mobile-limit-by",shouldBe:"height"}]},{type:"custom",name:"fitTextLabel",requirements:[{option:"mobile-limit-by",shouldBe:"fit"}]},{name:"mobile-limit-by",type:"radio",value:"width",values:[{name:"width",customLabel:"widthLabel",value:"width"},{name:"height",customLabel:"heightLabel",value:"height"},{name:"fit",customLabel:"fitLabel",value:"fit"}]}]},{labelName:"Horizontal Align",name:"mobile-horizontal-align",type:"radio",value:"center",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]},{labelName:"Vertical Align",name:"mobile-vertical-align",type:"radio",value:"center",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{labelName:"Shuffle",name:"mobile-shuffle",type:"check-box",value:!1},{type:"more-actions",children:[{labelName:"Slides",name:"toggle-thumbs",type:"button",className:"text-button remove",onClick:function(t){t.preventDefault(),this.state.activeGallery.thumbnailsVisible?this.state.activeGallery.hideThumbnails():this.state.activeGallery.showThumbnails()}}]}],options:[{labelName:"",name:"transition-type",type:"radio",value:"slide",values:[{labelName:"Fade",value:"fade"},{labelName:"Slide",value:"slide"},{labelName:"Scrub",value:"scrub"}]},{labelName:"Transition Speed",name:"transition-speed",type:"scrubber",numberOnlyMode:!0,value:.8,min:0,max:10,step:.1,requirements:[{option:"transition-type",shouldBe:t=>t==="slide"||t==="fade"}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Navigation",name:"navigation",type:"check-box",value:!0},{labelName:"Captions",name:"show-captions",type:"check-box",value:!0}]},{labelName:"Autoplay",name:"autoplay",type:"check-box",value:!0},{labelName:"Autoplay Delay",name:"autoplay-delay",type:"scrubber",value:3,step:.1,min:.1,max:30,numberOnlyMode:!0,requirements:[{option:"autoplay",shouldBe:!0}]},{labelName:"Pause On Hover",name:"pause-on-hover",type:"check-box",value:!1,requirements:[{option:"autoplay",shouldBe:!0}]},{type:"spacer"},{type:"group",className:"slideshow-size-group grid-columns-template-1-auto",children:[{type:"custom",name:"widthTextLabel",requirements:[{option:"limit-by",shouldBe:"width"}]},{name:"scale",value:"50rem",allowCalc:!0,allowVar:!0,type:"scrubber",allowOutOfRangeTextInput:!1,labelName:"Scale: Height",allowedUnits:["px","%","rem","em","vmin","vmax","vw","vh"],min:{px:8,rem:.5,em:.5,etc:1},max:{"%":100,vmin:100,vmax:100,vh:100,vw:100,etc:void 0},addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",requirements:[{option:"limit-by",shouldBe:"height"}]},{type:"custom",name:"fitTextLabel",requirements:[{option:"limit-by",shouldBe:"fit"}]},{name:"limit-by",type:"radio",value:"width",values:[{name:"width",customLabel:"widthLabel",value:"width"},{name:"height",customLabel:"heightLabel",value:"height"},{name:"fit",customLabel:"fitLabel",value:"fit"}]}]},{labelName:"Horizontal Align",name:"horizontal-align",type:"radio",value:"center",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]},{labelName:"Vertical Align",name:"vertical-align",type:"radio",value:"center",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{type:"group",className:"grid-columns-even",children:[{type:"group",className:"grid-columns-even",children:[{labelName:"Disable Zoom",name:"disable-zoom",type:"check-box",value:!1},{labelName:"Shuffle",name:"shuffle",type:"check-box",value:!1}]}]},{labelName:()=>{let t=store.getState().user?.id;return pb(t)||!1&&localStorage.getItem("simulateProductionAcct")!=="true"?"Disable Scroll Animation":"Disable Scroll Transition"},name:"disable-scroll-animation",type:"check-box",value:!1,requirements:[{option:"imageSettingsScrollAnimation",shouldBe:t=>t===!0||typeof t=="string"}]},{name:"auto-height",value:"custom"},{name:"height-limit",value:"60%"},{name:"adjust-for-captions",value:!1},{type:"more-actions",children:[{labelName:"Slides",name:"toggle-thumbs",type:"button",className:"text-button remove",onClick:function(t){t.preventDefault(),this.state.activeGallery.thumbnailsVisible?this.state.activeGallery.hideThumbnails():this.state.activeGallery.showThumbnails()}}]}]};br.defaults=pt(br.options);br.mobileDefaults=pt(br.mobileOptions);Z5=.04,_x=.25,J5=.085,Q5=.1,xae=.08,Sae=2,_ae=3,Eae=15,sl=0,Ex=1,Cx=2,eg=class extends Tr{constructor(e){super(e);let r=pe?{hasLayout:!1,visible:!1,position:"unknown"}:{hasLayout:!0,visible:!0,position:"inside"};this.state={captionHeightMap:[],showThumbnails:this.props.thumbnails===!0||this.props.thumbnails==="true",hasLoaded:pe,visible:!1,viewportIntersection:r,layoutIncrement:0,pointerOver:!1,initialShowNavigation:!0,destinationIndex:0,activeIndex:0,initialActiveIndex:0,inTransition:!1,elWidth:0,hasSizes:{slideHeightPx:!1,elWidth:!1},slideHeightPx:0,tallestSlide:{index:0,height:0},...this.getNavigation(),isDragging:!1,isPointerDown:!1,scrubAnimating:!1,scrubStatus:sl},this.loadedItems=new Set,this.shuffleSeed=Math.random()*100,this.lastPointerFrameDeltaX=0,this.pointerFrameDeltaX=0,this.scrubCounter=0,this.lastPointerX=0,this.firstPointerX=0,this.pointerX=0,this.xTransform=0,this.slideListRef=xe(),this.scrubAnimationRequest=null,this.autoplayInterval=null,this.updateOptions(),this.lastTimestamp=0,this.styleRef=xe(),Object.defineProperty(this.props.baseNode,"thumbnailsVisible",{get:()=>this.state.showThumbnails,set:i=>this.setState({showThumbnails:!!i}),configurable:!0}),this.props.baseNode.pause=this.pause,this.props.baseNode.resume=this.startAutoplay,this.props.baseNode.nextSlide=this.nextSlide,this.props.baseNode.prevSlide=this.prevSlide,this.props.baseNode.showThumbnails=this.showThumbnails,this.props.baseNode.hideThumbnails=this.hideThumbnails,this.props.baseNode.goToSlide=this.goToSlide,this.props.baseNode.getActiveSlide=this.getActiveSlide,this.props.baseNode.updateNavigation=()=>{let{prevNavigation:i,nextNavigation:n}=this.getNavigation();(this.state.prevNavigation!==i||this.state.nextNavigation!==n)&&this.setState({nextNavigation:n,prevNavigation:i})}}render(e,r){this.updateOptions();let{baseNode:i,adminMode:n,pageInfo:o,usesScrollAnimation:s}=e,{showThumbnails:a,activeIndex:l,destinationIndex:p,inTransition:f,isPointerDown:d,scrubAnimating:m,hasLoaded:g,pointerOver:v,hasSizes:x,initialShowNavigation:_,captionHeightMap:E,viewportIntersection:O,lazyloadable:L}=r,{showCaptions:I,autoPlayDelay:D,limitBy:R,adjustForCaptions:W}=this.options,{elWidth:N}=r;x.elWidth||(this.cachedElWidth=this.props.baseNode.offsetWidth,N=this.cachedElWidth);let z=R==="fit"?"var(--fit-height)":lr(this.options.scale,R=="width"?"%":"rem").join(""),$=this.renderSlides(),q=this.getSlideListStyles(),J=S("div",{ref:this.slideListRef,style:{transform:q.transform},className:"slide-list",draggable:!1,tabIndex:0,children:$}),X={};a||(X.onKeyDown=this.handleKeyDown,X.onClickCapture=this.onClickCapture,X.className="slideshow-wrapper",f&&(X.className+=" in-transition"),d&&(X.className+=" pointer-down"),m&&this.isScrub&&(X.className+=" scrubbing"));let se=R==="width"?this.state.tallestSlide.height:this.state.slideHeightPx,ee=this.makeMediaItemAttributes(),Z=this.mediaItems.map((ie,ae)=>{let he=ee[ae].slot,de=ie._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}},we="100%",Re=de.width,ve=de.height,Ae=null,Ve=this.options.showCaptions&&this.state.captionHeightMap[ae]||0;if(a)we=null;else if(typeof Re=="string"&&Re.indexOf("%")>-1)we=Re;else if(R!=="width"){W?Ae=se+-Ve:Ae=se;let Me=ve/Re,Le=Ae+-de.mediaItemSize.padSize+-de.mediaSize.padSize,We=Le*(1/Me),Fe=(Le+de.mediaSize.padSize)/(We+de.mediaSize.padSize),st=(Ae+-de.mediaItemSize.padSize)*(1/Fe);Math.abs(st+de.mediaItemSize.padSize-N)<1?we="100%":we=`${Math.min(100,100*(st+de.mediaItemSize.padSize)/N)}%`}return{captionHeight:Ve,customSlideHeight:Ae,figureWidth:we,slot:he}}),Y=Math.min(this.options.speed/2,.1),te=Math.max(Math.floor(N/200),2);this.setMediaElementProperties(ee);let re=s&&!this.props["disable-scroll-animation"]?" scroll-transition":"";return S(ce,{children:[it(S(ce,{children:S(ia,{scrollContext:this.props.scrollContext,uses:re,visibility:O,onLazyLoadChange:null,adminMode:n,customElementMode:!0,baseNode:i,isLazyLoadable:L,pageInfo:o,children:[this.options.showCaptions?S("style",{id:"gallery-slideshow-captions",ref:this.styleRef,children:`
					::slotted(media-item) {
						--slideshow-caption-transform: ${q["--slideshow-caption-transform"]||"translateX(0px)"};
						z-index: 9;
					}
				`}):null,S("style",{id:"gallery-slideshow",children:`
* {
	box-sizing: border-box;
}

:host([hidden]) {
	display: none;
}

:host {
	position: relative;
	transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: .2s;
	opacity: ${g||a?1:0};

	width: var(--resize-parent-width, 100%);
	max-width: 100%;
    --navigation-opacity: ${v||_?1:0};
    --slide-height: ${se}px;

	--slideshow-horizontal-align: ${this.options.hAlign==="left"?"flex-start":this.options.hAlign==="right"?"flex-end":"center"};

	--slideshow-caption-align: ${this.options.hAlign==="left"?"left":this.options.hAlign==="right"?"right":"center"};	

	--slideshow-vertical-align: ${this.options.vAlign==="top"?"flex-start":this.options.vAlign==="bottom"?"flex-end":"center"};

    ${a?`
	    display: grid;
		grid-template-columns: repeat(${te}, 1fr);
		column-gap: 2rem;
		row-gap: 2rem;
		align-items: start;
		overflow:hidden;
		--display-slideshow-captions: block;
		--slideshow-caption-opacity: 1;	

	`:`
		--slideshow-caption-transition-duration: ${Y}s;	
		--display-slideshow-captions: ${I?"block":"none"}!important;
	    display: flex;
    	flex-direction: column;
	`}
}

${a?"":Z.map((ie,ae)=>`
::slotted(media-item[slot="${ie.slot}"]){
	--item-width: ${ie.figureWidth};
	--slide-height: ${ie.customSlideHeight||se}px; 
	--caption-height: ${ie.captionHeight}px;
}`).join("")}

${a?`
::slotted(media-item){
	min-width: 0;
	max-width: 100%;
	--item-width: 100%;	
	--resize-parent-width: 100%;
	--slide-height: auto;

    --display-slideshow-captions: block;
    --slideshow-caption-transform: translateX(0px);
    --slideshow-caption-opacity: 1;
    --slideshow-caption-align: left;
    --slideshow-caption-transition-duration: 0;	
}`:`
::slotted(media-item) {
    transition: none!important;
    display:block;
	min-width: ${N}px;
	flex-shrink: 0;
}


	`}

.slide { 
    -webkit-user-select:none;
    user-select:none;
    flex-shrink: 0;
    width: ${N}px;
}

.navigation-wrapper {

	order: 1;
	position: relative;
}

.slideshow-wrapper {
	--resize-parent-width: ${N}px;
	order: 3;
	margin-bottom: ${Math.max(...this.state.captionHeightMap.filter(ie=>ie!==void 0))}px;
}


.slide-list {
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
	transform:translateX(0);
    height: var(--slide-height, auto);		
    touch-action: manipulation;
    position: relative;
    display: flex;
    flex-wrap: nowrap;
    flex-direction: row;
    justify-content: flex-start;
}

.slide-list:focus {
    outline: 0;
}


/*
slide transition type 
default transition is slide
*/
${this.isSlide?`
.slide {
    visibility:hidden;
	--base-translate: none!important;    
}

.pointer-down .adjacent-slide.slide,
.in-transition .adjacent-slide.slide,
.active-slide.slide {
    visibility: visible;
}

.slideshow-wrapper {
	overflow-y: visible;
	overflow-x: clip;
}


`:""}

${this.isFade?`


.slide {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    display: flex;
    z-index: 0;

    ${this.state.cancelFadeTransition?`
	  -webkit-transition: none !important;
	  -moz-transition: none !important;
	  -o-transition: none !important;
	  transition: none !important;
    `:`
		transition-timing-function: var(--slideshow-fade-transition-out, cubic-bezier(0.68, 0, 0.68, 0.19));
	    transition-property: opacity;
		transition-duration: ${this.options.speed}s;	
    `}
}

.adjacent-slide.slide {
    display: flex;
}

.active-slide.slide {
    position: relative;
    z-index: 3;
}

.destination-slide.slide {
    ${this.state.cancelFadeTransition?"":"transition-timing-function: var(--slideshow-fade-transition-in, cubic-bezier(0.3, 0, 0.4, 1));"}
	opacity: 1!important;
}

	`:""}


${this.isScrub?`
.slide {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    display: flex;
    z-index: 0;
	transition: opacity .08s cubic-bezier(0.5, 0, 1, 0.5);						


    visibility: hidden;
}

.adjacent-slide.slide {
    visibility: visible;
}

.active-slide.slide {
    position: relative;
    z-index: 3;
}

.destination-slide.slide {
	transition: opacity .08s cubic-bezier(0, 0.5, 0.5, 1);
    opacity: 1!important;
}

.slide {
    cursor: ew-resize;
}
	`:""}

/* captions */

.slide {
	--slideshow-caption-opacity: 0;	
}

.in-transition .slide{
    --slideshow-caption-opacity: 0;
}

${this.state.hideCaptionDuringTransition?"":`
.destination-slide.active-slide.slide {
    --slideshow-caption-opacity: 1;
}
`}

${Y==0?`
.destination-slide.slide,
.active-slide.slide {
    --slideshow-caption-opacity: 1;
}	
`:""}

.scrubbing .slide {
    --slideshow-caption-opacity: 0;
}

/** default navigation **/
.navigation-wrapper {

    position: absolute;
    left:0;
    right: 0;
    
    z-index: 2;
    height: var(--slide-height, auto);
    opacity: var(--navigation-opacity, 1);

}


 				`}),n&&o.isEditing&&!pe&&S(D5,{...e,onItemResize:this.onItemResize,inTransition:this.state.inTransition||this.state.isDragging,suppressMutation:this.state.isDragging,gallerySpecificAttributes:s?["disable-scroll-animation"]:[],galleryInstance:i}),!a&&this.options.navigation&&this.len>1&&S("div",{className:"navigation-wrapper",part:`slideshow-nav ${v||_?"navigation-active":""}`,children:[this.state.prevNavigation,this.state.nextNavigation]}),a?S("slot",{name:"thumbnails",onClick:this.onThumbnailClick}):S("div",{part:"slides",...X,onPointerDown:this.onPointerDown,children:J}),S(Yi,{values:{slideHeightPx:z,elWidth:"100%"},style:a?{gridColumn:`1 / span ${te}`}:null,onResize:this.onResize})]},"slideshow-host")},"slideshow-fragment"),this.props.baseNode.shadowRoot),this.props.children]})}getNavigation=()=>{let e=Array.from(this.props.baseNode.children),r=e.find(n=>n.getAttribute("part")=="previous-button"),i=e.find(n=>n.getAttribute("part")=="next-button");return r?r=Lu(r,null,{onClick:this.prevSlide,onPointerDown:n=>this.startScrubDelta(n,Cx),key:"previous-button",part:"previous-button"}):r=S("div",{part:"slideshow-nav-previous-button",class:"slideshow-navigation previous-button",onClick:this.prevSlide,onPointerDown:n=>this.startScrubDelta(n,Cx),children:S("svg",{part:"slideshow-nav-prev",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})}),i?i=Lu(i,null,{onClick:this.nextSlide,onPointerDown:n=>this.startScrubDelta(n,Ex),key:"next-button",part:"next-button"}):i=S("div",{part:"slideshow-nav-next-button",class:"slideshow-navigation next-button",onClick:this.nextSlide,onPointerDown:n=>this.startScrubDelta(n,Ex),children:S("svg",{part:"slideshow-nav-next",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})}),{prevNavigation:r,nextNavigation:i}};updateOptions(){let{"adjust-for-captions":e=br.defaults["adjust-for-captions"].value,"limit-by":r=br.defaults["limit-by"].value,scale:i=br.defaults.scale.value,autoplay:n=br.defaults.autoplay.value,"autoplay-delay":o=br.defaults["autoplay-delay"].value,"transition-speed":s=br.defaults["transition-speed"].value,"transition-type":a=br.defaults["transition-type"].value,navigation:l=br.defaults.navigation.value,"vertical-align":p=br.defaults["vertical-align"].value,"horizontal-align":f=br.defaults["horizontal-align"].value,shuffle:d=br.defaults.shuffle.value,"show-captions":m=br.defaults["show-captions"].value,"disable-zoom":g=br.defaults["disable-zoom"].value,"disable-scroll-animation":v=br.defaults["disable-scroll-animation"].value,"pause-on-hover":x=br.defaults["pause-on-hover"].value,"mobile-limit-by":_,"mobile-scale":E,"mobile-adjust-for-captions":O,"mobile-autoplay":L,"mobile-autoplay-delay":I,"mobile-transition-speed":D,"mobile-transition-type":R,"mobile-navigation":W,"mobile-vertical-align":N,"mobile-horizontal-align":z,"mobile-shuffle":$,"mobile-show-captions":q,"mobile-pause-on-hover":J,"auto-height":X=br.defaults["auto-height"].value,"height-limit":se=br.defaults["height-limit"].value,"mobile-auto-height":ee,"mobile-height-limit":Z}=this.props;this.props["limit-by"]===void 0&&this.props["auto-height"]!==void 0&&(X==="custom"?(r="height",this.props.scale==null&&this.props["height-limit"]!==void 0&&(i=se)):X==="fit"?(r="fit",this.props.scale==null&&(i=100)):(r="width",this.props.scale==null&&(i=100))),a=a=="fade"||a=="scrub"?a:"slide";let Y=this.props.isMobile,te={adjustForCaptions:Y&&O!==void 0?O:e,shuffle:Y&&$!==void 0?$:d,autoplay:Y&&L!==void 0?L:n,autoPlayDelay:Y&&I!==void 0?I:o,speed:Y&&D!==void 0?D:s,type:Y&&R!==void 0?R:a,navigation:Y&&W!==void 0?W:l,disableScrollAnimation:v,disableZoom:g,limitBy:Y&&_!==void 0?_:r,scale:Y&&E!==void 0?E:i,vAlign:Y&&N!==void 0?N:p,hAlign:Y&&z!==void 0?z:f,showCaptions:Y&&q!==void 0?q:m,pauseOnHover:Y&&J!==void 0?J:x};te.speed==0&&te.type==="slide"&&(te.type="fade"),this.options=te,this.isScrub=te.type==="scrub",this.isSlide=te.type==="slide",this.isFade=te.type==="fade";let re=Array.from(this.props.baseNode.children);if(this.mediaItems=Array.from(this.props.baseNode.children).filter(he=>he.tagName=="MEDIA-ITEM"),this.len=this.mediaItems.length,this.len>0){if(this.shuffleList=[],this.options.shuffle){for(let we=0;we<this.len;we++)this.shuffleList.push(we);let he=this.shuffleSeed,de=0;this.shuffleList=this.shuffleList.sort(we=>(de++,he=(he+9)%10,(Math.sin(de+2.4)*5+5)%10>he?-1:1))}}else this.shuffleList=[];let ie=this.isScrub?Math.min(Eae,(this.len-1)/2):Math.min(_ae,(this.len-1)/2),ae=ie;ae=Math.max(1,Math.floor(ae)),ie=Math.max(1,Math.ceil(ie)),this.len==3?(ae=1,ie=1):this.len==2?ae=0:this.len==1&&(ae=0,ie=0),this.lazyloadPrev=ae,this.lazyloadNext=ie}setMediaElementProperties=e=>{if(this.len==0)return;let r=[...this.mediaItems],i=this.state.viewportIntersection.position!=="inside"?this.state.viewportIntersection.position:"outside";r.forEach((n,o)=>{let s=e[o]||{},a=s.visibility||!1;delete s.isAdjacent,delete s.visibility,this.state.hasLoaded?s.itemLoad=null:s.itemLoad=this.onMediaLoad;let l=n._props||{};ko(n,{...l,...s},l,!1,!1),n._disableZoom?.(this.options.disableZoom),this.props.usesScrollAnimation&&!this.props["disable-scroll-animation"]&&!this.options.disableScrollAnimation&&n._disableScrollTransition?.(!0),n.assignedSlot?((this.state.lazyloadable||this.state.visible)&&_t(n,"lazyLoadIntersectionChange",{visible:!0,position:"inside"},{bubbles:!1}),this.state.visible&&n.slot.replace("slot-","")==this.state.destinationIndex?_t(n,"viewportIntersectionChange",{visible:!0,position:"inside"},{bubbles:!1}):_t(n,"viewportIntersectionChange",{visible:!1,position:i},{bubbles:!1})):_t(n,"viewportIntersectionChange",{visible:!1,position:i},{bubbles:!1})})};componentDidMount(){Array.from(this.props.baseNode.children).filter(i=>{let n=i.assignedSlot;return i.tagName==="MEDIA-ITEM"&&n!==null&&i.getAttribute("hash")==="placeholder"}).forEach(this.onMediaLoad);let r=this.props.pageInfo.getPageData(this.props.baseNode);r.activeSlide!==void 0&&(this.waitingToGoToSlide=void 0,r.activeSlide>=this.len?this.waitingToGoToSlide=r.activeSlide:this.goToSlide(r.activeSlide)),pe||(At(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyLoadIntersectionChange),At(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),this.props.baseNode.addEventListener("pointerenter",this.onPointerEnter),this.props.baseNode.addEventListener("pointerleave",this.onPointerLeave),window.addEventListener("touchstart",this.onWindowTouchStart))}componentWillUnmount(){this.loadedItems.clear(),clearTimeout(this.scrollRestore),pe||(cancelAnimationFrame(this.updateSlideTransformAnimationFrame),Rt(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyLoadIntersectionChange),Rt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),window.removeEventListener("touchstart",this.onWindowTouchStart),this.props.baseNode.removeEventListener("pointerenter",this.onPointerEnter),this.props.baseNode.removeEventListener("pointerleave",this.onPointerLeave))}onViewportIntersectionChange=e=>{this.setState({visible:e.visible,viewportIntersection:e})};onLazyLoadIntersectionChange=e=>{this.setState(r=>({lazyloadable:r.lazyloadable||e.visible}))};componentDidUpdate(e,r){e.childArray.length!==this.props.childArray.length&&this.waitingToGoToSlide!==void 0&&this.props.childArray.length>=this.len&&(this.goToSlide(this.waitingToGoToSlide),this.waitingToGoToSlide=void 0),e.slideshowLoad!==this.props.slideshowLoad&&this.state.hasLoaded&&this.props.slideshowLoad&&this.props.slideshowLoad(),(r.layoutIncrement!==this.state.layoutIncrement||r.elWidth!==this.state.elWidth||r.slideHeightPx!==this.state.slideHeightPx||r.hasSizes.elWidth!==this.state.hasSizes.elWidth||r.hasSizes.slideHeightPx!==this.state.hasSizes.slideHeightPx)&&this.updateSlideSizes(),r.cancelFadeTransition!==this.state.cancelFadeTransition&&this.state.cancelFadeTransition&&requestAnimationFrame(()=>{this.slideListRef.current&&Array.from(this.slideListRef.current.querySelectorAll(".slide")).forEach(n=>{n.offsetHeight}),this.setState({cancelFadeTransition:!1})});let i=!1;this.props.thumbnails!=e.thumbnails&&(i=!0,this.onPointerUp(),this.onSlideEnd()),this.props["transition-type"]!==e["transition-type"]&&(this.setState(n=>({destinationIndex:n.activeIndex,cancelFadeTransition:!0})),i=!0,this.onPointerUp(),this.onSlideEnd()),(this.props["show-captions"]!==e["show-captions"]||this.props["mobile-show-captions"]!==e["mobile-show-captions"]&&this.props.isMobile)&&(this.options.showCaptions?(this.onSlideEnd(),this.setState(n=>({...n,layoutIncrement:n.layoutIncrement+1}))):this.setState({captionHeightMap:[]})),(e.isMobile!=this.props.isMobile||e.autoplay!=this.props.autoplay||e["mobile-autoplay"]!=this.props["mobile-autoplay"]&&this.props.isMobile)&&(i=!0),r.pointerOver!==this.state.pointerOver&&this.options.pauseOnHover&&(i=!0),r.visible!=this.state.visible&&(i=!0),r.hasLoaded!==this.state.hasLoaded&&(i=!0),i&&clearTimeout(this.autoplayInterval),i&&this.startAutoplay(),this.isScrub&&(!r.isDragging&&this.state.isDragging?document.body.classList.add("slideshow-scrub-dragging"):!this.state.isDragging&&r.isDragging&&document.body.classList.remove("slideshow-scrub-dragging")),e.adminMode!==this.props.adminMode&&(this.state.inTransition&&this.onSlideEnd(),this.setState({showThumbnails:!1})),this.state.activeIndex!==r.activeIndex&&this.state.activeIndex==this.state.destinationIndex&&(clearTimeout(this.showCaptionsAfterTransitionTimeout),this.showCaptionsAfterTransitionTimeout=setTimeout(()=>{this.setState({hideCaptionDuringTransition:!1})},80)),(this.state.inTransition!==r.inTransition||this.state.isPointerDown!==r.isPointerDown||this.state.isDragging!==r.isDragging)&&((this.state.inTransition||this.state.isDragging)&&!this.state.hideCaptionDuringTransition&&(clearTimeout(this.showCaptionsAfterTransitionTimeout),this.setState({hideCaptionDuringTransition:!0})),this.progress=0,cancelAnimationFrame(this.updateSlideTransformAnimationFrame),this.updateSlideTransform())}pause=()=>{this.setState(e=>({inTransition:!1,destinationIndex:e.activeIndex}),()=>{this.onSlideEnd(),clearTimeout(this.autoplayInterval)})};startAutoplay=()=>{this.options.autoplay&&this.state.visible&&this.state.hasLoaded&&!this.options.showThumbnails&&(this.options.pauseOnHover&&!this.state.pointerOver||!this.options.pauseOnHover)&&(clearInterval(this.autoplayInterval),this.autoplayInterval=setTimeout(this.nextSlide,this.options.autoPlayDelay*1e3))};onItemResize=(e,r,i)=>{this.setState(n=>{let o=Array.from(r.children).find(p=>p.getAttribute("slot")==="caption"),s=[...n.captionHeightMap],a=n.captionHeightMap[i],l=0;if(o&&this.options.showCaptions){let p=window.getComputedStyle(o),f=p.getPropertyValue("position");f==="fixed"||f==="absolute"?l=0:p.getPropertyValue("box-sizing")==="content-box"?(l=parseFloat(p.getPropertyValue("height"))||0,l+=parseFloat(p.getPropertyValue("margin-top"))||0,l+=parseFloat(p.getPropertyValue("margin-bottom"))||0,l+=parseFloat(p.getPropertyValue("padding-top"))||0,l+=parseFloat(p.getPropertyValue("padding-bottom"))||0,l+=parseFloat(p.getPropertyValue("border-top"))||0,l+=parseFloat(p.getPropertyValue("border-bottom"))||0):(l=parseFloat(p.getPropertyValue("height"))||0,l+=parseFloat(p.getPropertyValue("margin-top"))||0,l+=parseFloat(p.getPropertyValue("margin-bottom"))||0)}else l=0;return l!==a?(s[i]=l,{captionHeightMap:s,layoutIncrement:n.layoutIncrement+1}):{layoutIncrement:n.layoutIncrement+1}})};updateSlideSizes=()=>{if(this.len==0)return;let{hasSizes:e}=this.state,{elWidth:r}=this.state;!e.elWidth&&this.cachedElWidth&&(r=this.cachedElWidth);let i=this.mediaItems.map((s,a)=>{let l=s._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}},p=l.width,f=l.height,d=f;if(typeof p=="string"&&p.indexOf("%")>-1)d=parseFloat(f)+l.mediaItemSize.padSize+l.mediaSize.padSize||150+l.mediaItemSize.padSize+l.mediaSize.padSize;else{let m=f/p;if(l.mediaSize.padSize>0){let g=((r-l.mediaSize.padSize)*m+l.mediaSize.padSize)/r;d=(r-l.mediaItemSize.padSize)*g+l.mediaItemSize.padSize}else d=(r-l.mediaItemSize.padSize)*m+l.mediaItemSize.padSize}return d}),n=ez.default.maxBy(i,s=>s||0)||0,o={index:i.indexOf(n),height:n};this.setState({tallestSlide:o})};onResize=(e,r)=>{this.setState(i=>({hasSizes:{...i.hasSizes,[e]:!0},[e]:r}))};handleKeyDown=e=>{switch(e.keyCode){case 39:e.preventDefault(),this.nextSlide();break;case 37:e.preventDefault(),this.prevSlide();break}};onPointerEnter=e=>{this.setState({pointerOver:!0})};onPointerLeave=e=>{this.setState({pointerOver:!1})};scrubAnimate=()=>{let{elWidth:e}=this.state,r=Z5===0?1/this.len:Z5,i=this.pointerX;if(this.state.isPointerDown){this.scrubCounter=0;let o=this.lastPointerX-this.pointerX;this.pointerFrameDeltaX!=0&&(this.lastPointerFrameDeltaX=this.pointerFrameDeltaX),this.pointerFrameDeltaX=o,this.lastPointerFrameDeltaX>0&&this.pointerFrameDeltaX<0?this.firstPointerX=this.pointerX:this.lastPointerFrameDeltaX<0&&this.pointerFrameDeltaX>0&&(this.firstPointerX=this.pointerX)}else this.state.scrubStatus===Cx?(this.scrubCounter=0,this.pointerFrameDeltaX=this.pointerFrameDeltaX+-Q5):this.state.scrubStatus===Ex?(this.scrubCounter=0,this.pointerFrameDeltaX=this.pointerFrameDeltaX+Q5):this.state.scrubStatus===sl&&(this.pointerFrameDeltaX<0?this.pointerFrameDeltaX=Math.min(0,this.pointerFrameDeltaX+J5):this.pointerFrameDeltaX=Math.max(0,this.pointerFrameDeltaX+-J5));if(Math.abs(this.pointerFrameDeltaX)>_x*r*e&&(this.pointerFrameDeltaX>0?this.pointerFrameDeltaX=_x*r*e:this.pointerFrameDeltaX=-(_x*r)*e),this.state.isPointerDown){let o=this.lastPointerX-this.pointerX,s=this.lastPointerX-(this.lastPointerX+this.pointerFrameDeltaX);this.firstPointerX=this.firstPointerX-(o-s)}else this.pointerX=this.lastPointerX+this.pointerFrameDeltaX,i=this.pointerX;if(this.lastPointerX=this.pointerX,this.xDrag=i-this.firstPointerX,Math.abs(this.xDrag/e)>r&&this.len>1){let o=this.xDrag>0?(this.state.activeIndex+1)%this.len:(this.state.activeIndex+-1+this.len)%this.len;this.setState({destinationIndex:o,activeIndex:o}),this.xDrag=9e9,this.scrubCounter=0,this.firstPointerX=this.pointerX}clearTimeout(this.autoplayInterval),this.state.scrubStatus==sl&&this.scrubCounter>=30&&!this.state.isPointerDown?(this.setState({scrubAnimating:!1}),this.scrubCounter=0,this.options.autoplay&&(this.autoplayInterval=setTimeout(this.nextSlide,Math.max(100,this.options.autoPlayDelay*1e3-1e3)))):(this.scrubCounter++,this.scrubAnimationRequest=requestAnimationFrame(this.scrubAnimate))};startScrubDelta=(e,r)=>{if(e){if(e.button==2)return;e.preventDefault()}!this.isScrub||this.len<2||(this.setState({scrubStatus:r}),this.scrubCounter=0,this.firstPointerX=this.lastPointerX=this.pointerX=0,this.lastPointerFrameDeltaX=this.pointerFrameDeltaX=0,this.xDrag=0,this.setState({scrubAnimating:!0}),cancelAnimationFrame(this.scrubAnimationRequest),this.scrubAnimationRequest=requestAnimationFrame(this.scrubAnimate),window.addEventListener("pointerup",this.onScrubPointerUp),window.addEventListener("pointercancel",this.onScrubPointerUp))};onScrubPointerUp=e=>{this.setState({scrubStatus:sl}),window.removeEventListener("pointerup",this.onScrubPointerUp),window.removeEventListener("pointercancel",this.onScrubPointerUp)};onClickCapture=e=>{this.cancelClick&&e.preventDefault()};onPointerDown=e=>{if(this.cancelClick=!1,e.defaultPrevented)return;let r=e.target.closest(".caption");r&&this.props.baseNode.contains(r)||!this.slideListRef.current||e.button==2||(clearTimeout(this.autoplayInterval),this.firstPointerX=this.lastPointerX=this.pointerX=e.clientX,this.pointerFrameDeltaX=0,this.xDrag=0,this.initialXTransform=this.isSlide?this.xTransform:0,this.setState(i=>({isPointerDown:!0,initialActiveIndex:i.activeIndex})),window.cancelAnimationFrame(this.scrubAnimationRequest),this.isScrub&&(this.scrubAnimationRequest=window.requestAnimationFrame(this.scrubAnimate)),window.addEventListener("pointermove",this.onWindowPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerUp))};getSlideListStyles=()=>{let e="translateX(0)",r="translateX(0)";return this.isSlide&&(e=`translateX(${Math.round((this.state.elWidth*(-1+(1-this.lazyloadPrev))+this.xTransform)*2)/2}px)`,r=`translateX(${-Math.round(this.xTransform*2)/2}px)`),{"--slideshow-caption-transform":r,transform:e}};updateSlideTransform=e=>{let{destinationIndex:r,activeIndex:i,elWidth:n}=this.state,o="";if(this.progress===void 0&&(this.progress=0),this.isSlide&&(this.state.inTransition||this.state.isPointerDown||this.state.isDragging)){o="transform";let a=this.xDrag+this.initialXTransform,l=0,p=a,f=n;r>i?f=-n:r<i?f=n:f=0;let d=0;if((!e||e==0)&&(e=0,this.lastTimestamp=0,d=0),this.lastTimestamp==0&&(this.lastTimestamp=e||0),d=e-this.lastTimestamp,this.lastTimestamp=e,this.state.isDragging||this.state.isPointerDown){if(this.state.isDragging){this.dragPxPerSecond===void 0&&(this.dragPxPerSecond=0),this.lastDragX===void 0&&(this.lastDragX=this.pointerX);let m=(this.pointerX-this.lastDragX)*d;m!=0&&(m>0&&this.dragPxPerSecond>0?m<this.dragPxPerSecond&&(m=this.dragPxPerSecond*.95+m*.05):m<0&this.dragPxPerSecond<0&&m>this.dragPxPerSecond&&(m=this.dragPxPerSecond*.95+m*.05),this.dragPxPerSecond=m),this.lastDragX=this.pointerX}this.progress=0}else{if(this.state.isPointerDown||(this.progress=this.progress+d),this.dragPxPerSecond!==void 0&&this.dragPxPerSecond!==0){this.dragPxPerSecond<0?this.dragPxPerSecond=Math.min(-800,this.dragPxPerSecond):this.dragPxPerSecond=Math.max(800,this.dragPxPerSecond);let m=n/Math.abs(this.dragPxPerSecond);l=wb(this.progress/(Math.min(m,this.options.speed)*1e3))}else l=bb(this.progress/(this.options.speed*1e3));a=l*f+(1-l)*p}a=Math.min(Math.max(-n,a),n),this.xTransform=a,l>=1&&!(this.state.isPointerDown||this.state.isDragging)?(this.dragPxPerSecond=void 0,this.lastDragX=void 0,this.onSlideEnd()):this.updateSlideTransformAnimationFrame=requestAnimationFrame(this.updateSlideTransform)}else this.isScrub?(this.xTransform=0,this.progress=0):this.isFade&&(this.xTransform=0,this.progress=0);let s=this.getSlideListStyles();this.slideListRef.current&&s.transform!==this.slideListRef.current.style.transform&&(this.slideListRef.current.style.transform=s.transform,this.styleRef.current&&(this.styleRef.current.sheet?.cssRules?.[0]?.style.setProperty("--slideshow-caption-transform",s["--slideshow-caption-transform"]||"translateX(0px)"),cn()&&Array.from(this.props.baseNode.children).forEach(a=>{a.nodeName==="MEDIA-ITEM"&&a.assignedSlot&&a._forceRedraw?.()})),this.slideListRef.current.style.willChange=o)};onPointerUp=e=>{window.removeEventListener("pointercancel",this.onPointerUp),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointermove",this.onWindowPointerMove),clearTimeout(this.autoplayInterval),cancelAnimationFrame(this.scrubPointerAnimationRequest);let r=!1,i=!1,n=!1;if(e){let a=Array.from(e.composedPath()).some(l=>l.getAttribute?.("part")?.includes("media"));if(a&&e.target.tagName==="MEDIA-ITEM"&&e.target.getAttribute("browser-default")=="true"){let l=e.target.getFileType?.()??"";(l.startsWith("vimeo")||l.startsWith("youtube")||l=="video")&&(n=!0)}e.target?.closest("a, [href]")&&(r=!0),e.target?.closest("media-item.zoomable")&&a&&(i=!0),!r&&!i&&e?.preventDefault()}e?.pointerType==="touch"&&!r&&e.type!=="pointercancel"&&e.target.nodeName==="MEDIA-ITEM"&&e.target?.shadowRoot?.querySelector(".sizing-frame")?.click();let o=!1,s=!1;this.setState(a=>{let{elWidth:l,scrubStatus:p,isPointerDown:f,isDragging:d,inTransition:m,finishingTransition:g,scrubAnimating:v,activeIndex:x,destinationIndex:_}=a;return!a.isDragging&&(r||i||n)?o=!1:this.isScrub?(m=!1,g=!1,a.isDragging?v=!0:Math.abs(this.xDrag)<8&&(v=!1,o=!0)):this.isSlide&&this.options.speed!=0?a.isDragging?(g=!0,m=!0,o=!1):a.inTransition||a.finishingTransition?(o=!1,g=!0,m=!0):(o=!0,g=!1,m=!1):this.isFade&&this.options.speed!=0?a.isDragging?o=!1:o=!0:this.options.speed==0&&(a.isDragging?(m=!1,o=!1):(m=!1,o=!0),x=_),o&&e&&(this.cancelClick=!0),{elWidth:l,scrubStatus:sl,isPointerDown:!1,isDragging:!1,inTransition:m,destinationIndex:_,activeIndex:x,scrubAnimating:v}},()=>{this.isFade&&s&&this.setState({cancelFadeTransition:!0}),o&&(this.onSlideEnd(),this.nextSlide())})};onWindowTouchStart=e=>{if(e.target.closest("gallery-slideshow")!==this.props.baseNode){if(e.target.hasAttribute("href")){this.pause();let r=()=>{xb(this.props.baseNode)&&this.startAutoplay(),window.removeEventListener("touchend",r)};window.addEventListener("touchend",r)}this.setState({pointerOver:!1})}};onWindowPointerMove=e=>{this.pointerX=e.clientX,this.xDrag=this.pointerX-this.firstPointerX,this.setState(r=>{let{activeIndex:i,destinationIndex:n,isDragging:o,initialActiveIndex:s}=r,a=Math.abs(this.xDrag/r.elWidth),l=r.elWidth*(-2+(1-this.lazyloadNext)),p=r.elWidth*(1-this.lazyloadPrev);if(!r.isDragging&&r.isPointerDown&&Math.abs(this.xDrag)>Sae&&(o=!0,this.isSlide&&r.inTransition&&this.len>1&&(r.destinationIndex>r.activeIndex&&this.xDrag<0?(s++,i++,n++,this.xTransform=this.xTransform+r.elWidth,this.initialXTransform=this.initialXTransform+r.elWidth):r.destinationIndex<r.activeIndex&&this.xDrag>0&&(s--,i--,n--,this.xTransform=this.xTransform-r.elWidth,this.initialXTransform=this.initialXTransform-r.elWidth),s=(i+this.len*3)%this.len,i=(i+this.len*3)%this.len,n=(n+this.len*3)%this.len),this.cancelClick=!0),o){let f=this.xDrag<0?i+1:i-1;a>xae&&this.len>1?(Math.abs(f-r.initialActiveIndex)<2||this.isScrub)&&(n=f):this.isScrub||(n=r.initialActiveIndex),n<-1&&(n=n+this.len)}if(r.activeIndex!==i||r.destinationIndex!==n||r.isDragging!==o||r.initialActiveIndex!==s)return{...r,activeIndex:i,destinationIndex:n,initialActiveIndex:s,isDragging:o};{let f=this.getSlideListStyles();return this.slideListRef.current&&(this.slideListRef.current.style.transform=f.transform,this.styleRef.current&&this.styleRef.current.sheet?.cssRules?.[0]?.style.setProperty("--slideshow-caption-transform",f["--slideshow-caption-transform"]||"translateX(0px)")),null}})};nextSlide=e=>{if(e){if(e.defaultPrevented||e.button==2)return;e.stopPropagation(),e.preventDefault()}if(!(this.len<2)){if(this.state.inTransition){this.onSlideEnd();return}cancelAnimationFrame(this.scrubAnimate),this.setState(r=>{let i={...r},n=r.activeIndex+1;return i.inTransition=!(this.isScrub||this.options.speed==0),this.xTransform=0,this.initialXTransform=0,this.isScrub?(i.destinationIndex=n,i.scrubStatus=sl):i.destinationIndex=n,this.xDrag=0,i}),(this.options.speed==0||this.isScrub)&&this.onSlideEnd()}};prevSlide=e=>{if(e){if(e.defaultPrevented||e.button==2)return;e.stopPropagation(),e.preventDefault()}if(!(this.len<2)){if(this.state.inTransition){this.onSlideEnd();return}cancelAnimationFrame(this.scrubAnimate),this.setState(r=>{let i={...r},n=r.activeIndex-1;return n<-1&&(n=n+this.len),i.inTransition=!(this.isScrub||this.options.speed==0),this.xTransform=0,this.initialXTransform=0,this.isScrub?(i.destinationIndex=n,i.scrubStatus=sl):i.destinationIndex=n,this.xDrag=0,i}),(this.options.speed==0||this.isScrub)&&this.onSlideEnd()}};onThumbnailClick=e=>{if(this.props.adminMode)return;e.preventDefault(),e.stopPropagation();let r=e?.target?.closest?.("media-item")||null;if(r){let i=Array.from(this.props.baseNode.children).indexOf(r);this.setState({destinationIndex:i,activeIndex:i},this.hideThumbnails)}};onSlideEnd=()=>{clearTimeout(this.autoplayInterval),this.isFade&&this.slideListRef.current&&this.state.inTransition&&this.setState({cancelFadeTransition:!0}),this.setState(e=>{this.xTransform=0;let r=(e.destinationIndex+this.len+this.len+this.len)%this.len;return{...e,activeIndex:r,destinationIndex:r,inTransition:!1}},()=>{if(this.isSlide&&this.slideListRef.current&&(this.slideListRef.current.style.willChange=""),this.props.afterSlideChange){let r=this.props.baseNode.shadowRoot?.querySelector(".active-slide slot")?.assignedElements()?.[0]||null;this.props.afterSlideChange(this.state.activeIndex,r)}}),this.startAutoplay()};onSlideOpacityTransitionStart=(e,r)=>{e.propertyName==="opacity"&&r==0&&e.target.classList.contains("slide")};onSlideOpacityTransitionEnd=(e,r)=>{e.propertyName==="opacity"&&r==0&&e.target.classList.contains("slide")&&this.onSlideEnd()};getWrapAroundDistanceFromIndex=(e,r,i)=>{let n=i*.5,o=n-Math.abs((e+-r)%(2*n)-n);return o<-n&&o<0&&(o=o+i),o};makeMediaItemAttributes=()=>{if(this.len==0)return;let{showThumbnails:e,elWidth:r,slideHeightPx:i,activeIndex:n,actualCardSize:o,destinationIndex:s}=this.state,{shuffle:a,limitBy:l,scale:p,adjustForCaptions:f}=this.options,d=a&&!e,m=[];for(let g=0;g<this.len;g++){let v=(g+this.len)%this.len,x=v;d&&(x=this.shuffleList[v]);let _=`slot-${x}`,E=Math.abs(this.getWrapAroundDistanceFromIndex((x+this.len)%this.len,n,this.len))<3,O={itemDragStart:this.onDragStart,itemResize:(L,I)=>{this.onItemResize(L,I,x)},drag:!1,rotation:"0",scale:"100","limit-by":"width",isAdjacent:E,visibility:n==v,slot:e?"thumbnails":_};m.push(O)}return m};onDragStart=e=>{this.state.showThumbnails||(e.preventDefault(),e.stopPropagation())};onMediaLoad=e=>{let r=Array.from(this.props.baseNode.children).filter(n=>{let o=n.assignedSlot;return n.tagName==="MEDIA-ITEM"&&o!==null});this.loadedItems.has(e)||this.loadedItems.add(e);var i=this.isFade?Math.min(r.length,3):r.length;this.loadedItems.size>=i&&!this.state.hasLoaded&&(this.setState({hasLoaded:!0}),setTimeout(()=>{this.setState({initialShowNavigation:!1})},this.props?.["navigation-hide-delay"]*1e3||1500),this.props.slideshowLoad&&this.props.slideshowLoad())};renderSlides=()=>{let{elWidth:e,destinationIndex:r,activeIndex:i,inTransition:n,showThumbnails:o}=this.state,{xDrag:s,initialXTransform:a}=this,l=[],f=(a%e+s>0||r<i)&&this.isSlide&&this.len==2;for(let d=-this.lazyloadPrev;d<this.lazyloadNext+1;d++){let m=d;f&&(m=m+-1);let g=(m+i+this.len*2)%this.len,v="slot-"+g,x=!1,_=!1,E={};E.className=`slide ${this.options.type}-transition`,(r+this.len)%this.len==g&&(_=!0,E.className+=" destination-slide"),(i+this.len)%this.len==g&&(x=!0,E.className+=" active-slide"),E.part="slide",E.style={},o||(E.style={width:`${e}px`,transform:f?"translateX("+-e+"px)":null}),this.isFade&&(E.onTransitionStart=O=>{this.onSlideOpacityTransitionStart(O,m)},E.onTransitionEnd=O=>{this.onSlideOpacityTransitionEnd(O,m)}),m==-1&&(E.part+=" "+this.options.type+"-slide-previous"),m==1&&(E.part+=" "+this.options.type+"-slide-next"),m>=-1&&m<=1?(E.className+=" adjacent-slide",E.part+=" "+this.options.type+"-slide-adjacent"):E.className+=" non-adjacent-slide",E.slot=v,l.push(Lt("div",{...E,key:"slot_"+v},S("slot",{name:v})))}return l};goToSlide=e=>{e=e%this.len||0,!(isNaN(e)||this.state.destinationIndex===e)&&this.setState({showThumbnails:!1,destinationIndex:e,activeIndex:e,inTransition:!1},()=>{this.updateSlideTransform()})};getActiveSlide=()=>{let r=this.props.baseNode.shadowRoot?.querySelector(".active-slide slot")?.assignedElements()?.[0]||null;return[this.state.activeIndex,r]};showThumbnails=()=>{let e=this.props.scrollContext.getScrollPosition().y;this.setState({showThumbnails:!0,inTransition:!1},()=>{this.scrollRestore=setTimeout(()=>{this.props.scrollContext.updateScrollPosition({x:null,y:e})},60),this.props.baseNode.dispatchEvent(new CustomEvent("show-thumbnails",{composed:!0,bubbles:!1}))})};hideThumbnails=()=>{let e=this.props.scrollContext.getScrollPosition().y;if(window.getSelection().rangeCount>0){var i=window.getSelection()?.getRangeAt?.(0)?.intersectsNode(this.props.baseNode);i&&window.getSelection()?.removeAllRanges()}this.initialXTransform=0,this.xTransform=0,this.setState(n=>({destinationIndex:n.activeIndex,showThumbnails:!1,inTransition:!1,finishingTransition:!1}),()=>{this.scrollRestore=setTimeout(()=>{this.props.scrollContext.updateScrollPosition({x:null,y:e})},60),this.props.baseNode.dispatchEvent(new CustomEvent("hide-thumbnails",{composed:!0,bubbles:!1}))})}};eg.defaultProps={"show-tags":!0,"show-title":!0,"thumbnail-index":void 0};Cae=Ut(No(Ue((t,e)=>({isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,usesScrollAnimation:t.siteDesign.images.scroll_animation}))(eg)));sr(Cae,"gallery-slideshow",["thumbnail-index","thumbnail-index-metadata","links-filter-index","show-tags","show-title","slideshowLoad","afterSlideChange","thumbnails","transition-type","autoplay","autoplay-delay","transition-speed","navigation","shuffle","height-limit","auto-height","vertical-align","horizontal-align","adjust-for-captions","show-captions","pause-on-hover","disable-scroll-animation","mobile-adjust-for-captions","mobile-thumbnails","mobile-transition-type","mobile-autoplay","mobile-autoplay-delay","mobile-transition-speed","mobile-navigation","mobile-shuffle","mobile-height-limit","mobile-auto-height","mobile-vertical-align","mobile-horizontal-align","mobile-show-captions","mobile-pause-on-hover"])});var tz,Px,Ix,rz,iz=V(()=>{ke();Ye();tz=ye(Pe(),1);tg();ft();Pr();Ym();Be();Br();Yr();fe();Px={hash:"F1332270929626196865795426877515",id:1234,name:"scape.jpg",width:4e3,height:2250,file_type:"jpg",mime_type:"image/jpg",is_image:!0,is_video:!1,is_url:!1},Ix=class extends me{constructor(e){super(e),this.state={isMobile:ot.data.mobile.active,loaded:!1,showNavigation:!0,navigationContainer:null,backdropShadowRoot:null,navigationElement:null},this.containerRef=xe(),this.wallpaperRef=xe(),this.slideshowRef=xe(),this.navigationRef=xe()}getSettings=()=>{let e={};for(let[r,i]of Object.entries(Hd.default.defaults))this.props.settings?.hasOwnProperty(r)?e[r]=this.props.settings[r]:e[r]=i.value;return e};render(){let{showNavigation:e,navigationContainer:r,isMobile:i}=this.state,{modelArray:n,singleModel:o,visibility:s,wrapperDimensions:a}=this.props,l=this.getSettings(),p=lr(l.margin,"%"),f="";p[1]==="%"?(p[0]=Math.min(this.props.dimensions.width,this.props.dimensions.height)*parseFloat(p[0])*.01,p[1]="px"):p[1].includes("rem")&&i&&(p[0]="calc( var(--mobile-padding-offset, 1) * "+p[0]+"rem )",p[1]="");let d;p[1]==="px"?d=this.props.dimensions.height+.5-p[0]*2+"px":p[0]?.indexOf?.("calc(")>-1?d=`calc( ${this.props.dimensions.height+.5}px - ( 2 *  ( ${p[0].replace("calc(","")} ) )`:d=`calc( ${this.props.dimensions.height+.5}px - ${p[0]*2+p[1]} )`;let m=l["image-fit"]=="fit",g={autoplay:l.autoplay,"transition-speed":l["transition-speed"],"transition-type":l["transition-type"],"autoplay-delay":l["autoplay-delay"],"pause-on-hover":!1,"limit-by":"height",shuffle:l.shuffle,navigation:!1,scale:d,"show-captions":!1,slideshowLoad:this.onFirstLoad,afterSlideChange:this.onAfterSlideChange,"disable-scroll-animation":!0},v=this.props.settings.alignments||{},x="";for(let[O,L]of Object.entries(v))x+=` media-item[hash="${O}"] { --position-image: ${L.x}% ${L.y}% }`;let _=null,E=null;return n.length>0&&(E=l.navigation&&l["cycle-images"]&&n.length>1?S(ce,{children:[S("div",{className:`backdrop ${this.props.settings.clipScroll?"clip":""}`,children:S("div",{className:"wallpaper-slideshow",ref:this.navigationRef,children:this.state.navigationElement?it(S(ce,{children:[S("style",{children:`
:host {
	width: ${this.props.dimensions.width}px;
}

[part="slideshow-nav"] {
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none; 

    pointer-events: none;
    position: absolute;
    inset: 0;
    z-index: 1001;
    

    opacity: ${this.state.loaded&&e?"1":"0"};

    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
}


							`}),S("div",{part:"slideshow-nav",children:[S("div",{part:"slideshow-nav-previous-button",onClick:this.prevSlide,children:S("svg",{part:"slideshow-nav-prev",class:"left-arrow",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",class:"arrow",d:"M22.3,28l-10-10l10-10"})]})}),S("div",{part:"slideshow-nav-next-button",onClick:this.nextSlide,children:S("svg",{part:"slideshow-nav-next",class:"next",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",class:"arrow",d:"M22.3,28l-10-10l10-10"})]})})]})]}),this.state.navigationElement.shadowRoot):null})}),S("div",{className:"page-layout",children:S("div",{className:"page-content"})})]}):null,_=l["cycle-images"]&&n.length>1?S("gallery-slideshow",{...g,className:"image-container multiple-item",ref:this.slideshowRef,children:n.map((O,L)=>S("media-item",{"image-fit":m?"fit":"fill","disable-zoom":!0,"disable-scroll-animation":!0,hash:O.hash,muted:"true",autoplay:O.is_video||O.is_url,loop:!0,part:"media-item"},"slide-"+L))}):S("div",{className:"image-container single-item",children:S("media-item",{"image-fit":m?"fit":"fill","disable-zoom":!0,"disable-scroll-animation":!0,hash:o?.hash||"placeholder",model:o,part:"media-item",muted:"true",autoplay:o.is_video,loop:"true","force-visible":this.props.visibility.visible,itemLoad:this.onFirstLoad,"limit-by":m?"height":"width",scale:m?d:"100%"})})),S("div",{className:"wallpaper",ref:this.wallpaperRef,children:this.state.backdropShadowRoot&&it(S(ce,{children:[S("style",{children:`:host {
						background-color: ${l["bg-color"]||"transparent"};
					    position: absolute;
					    inset: 0;
					}

					gallery-slideshow media-item figcaption.caption {
					    display: none!important;
					}

					gallery-slideshow media-item::part(sizing-frame) {
					    margin: auto 0;
					    flex-grow: 0;
					}

					gallery-slideshow media-item::part(frame) {
					    display: flex;
					    flex-wrap: wrap;
					    width: ${m?"var(--item-width)":"100%"}; 
					    height: var(--slide-height);
					    align-content: center;
					    align-self: center;
					}					

					.inner {
					    position: absolute;
					    inset: ${p.join("")};
					}

					.image-container {
						opacity: ${l.opacity};
						inset: 0;
					    width: 100%;
					    height: 100%;
					    position: absolute;
					    text-align: center;
					    z-index: 2;
					}

					.image-container.single-item {
						display: flex;
						align-content: center;
						justify-content: center;
						position: absolute; 
						margin: auto;
						inset: 0;
					}

					.image-container.single-item media-item {
						margin: auto;
						max-width: auto;
					}

					.image-container.single-item media-item::part(figure){
						height: 100%;
					}				

					gallery-slideshow, media-item {
						transform: translateX(0)!important;
					}

			

					${m?`


						`:`			

						media-item::part(sizing-frame),
						media-item::part(frame) {
						    margin: 0;
						    width: 100%;
						    height: ${d};
						    pointer-events:none;
						    display: block;
						    padding: 0;
						}		

						media-item::part(media),
						media-item::part(video) {
						    object-position: var(--position-image, center center);                  
						    pointer-events: auto;
						    display: block;
						    margin: 0;
						    width: 100%;
						    height: 100%;
						    position: absolute;					    
						    top: 0;
						    left: 0;
						}						
					`}


					${x}`}),E&&r&&it(E,r),S("div",{className:"overlay"}),S("div",{className:"inner",ref:this.containerRef,children:_})]}),this.state.backdropShadowRoot)})}prevSlide=e=>{this.hideNavigation.cancel(),e?.preventDefault(),this.slideshowRef.current?.prevSlide()};nextSlide=e=>{e?.preventDefault(),this.hideNavigation.cancel(),this.slideshowRef.current?.nextSlide()};onPointerMove=e=>{!this.state.showNavigation&&this.props.inViewport&&this.setState({showNavigation:!0}),e&&e.target&&this.state.navigationContainer?.contains(e.target)?this.hideNavigation.cancel():this.hideNavigation()};hideNavigation=tz.default.debounce(()=>{this.setState({showNavigation:!1})},1500);onMobileChange=e=>{this.setState({isMobile:e})};renderNavigation(){if(!this.props.backdropRef.current)return;if(this.props.modelArray.length>1&&this.props.settings["cycle-images"]&&!this.state.navigationContainer&&this.props.settings.navigation){let r=document.createElement("div");r.classList.add("wallpaper-navigation"),this.props.backdropRef.current.closest(".page").appendChild(r),this.setState({navigationContainer:r})}else this.state.navigationContainer&&this.state.navigationContainer.remove(),this.setState({navigationContainer:null,navigationElement:null})}componentDidMount(){ot.on("mobile-change",this.onMobileChange),this.wallpaperRef.current&&!this.wallpaperRef.current.shadowRoot&&this.wallpaperRef.current.attachShadow({mode:"open"}),this.setState({backdropShadowRoot:this.wallpaperRef.current?.shadowRoot}),this.renderNavigation(),window.addEventListener("pointermove",this.onPointerMove),setTimeout(()=>{this.setMediaElementProperties()},100)}componentWillUnmount(){ot.off("mobile-change",this.onMobileChange),this.hideNavigation.cancel(),this.state.navigationContainer&&this.state.navigationContainer.remove(),window.removeEventListener("pointermove",this.onPointerMove)}componentDidUpdate(e,r){let i=this.getSettings();if((this.props.settings.navigation!==e.settings.navigation||this.props.settings["cycle-images"]!==e.settings["cycle-images"]||e.modelArray?.length==1&&this.props.modelArray?.length>1)&&(this.renderNavigation(),this.onPointerMove()),this.props.settings.activeImage!==e.settings.activeImage&&this.props.settings["cycle-images"]&&this.slideshowRef.current){let n=this.slideshowRef.current.querySelector('[hash="'+this.props.settings.activeImage+'"]');if(n){let o=Array.from(this.slideshowRef.current.children).indexOf(n);this.slideshowRef.current.goToSlide(o)}}this.props.visibility.visible&&this.containerRef.current&&(e.visibility.visible!==this.props.visibility.visible||this.props.settings["cycle-images"]!==e.settings["cycle-images"])&&this.setMediaElementProperties(),this.navigationRef.current!==this.state.navigationElement&&(this.navigationRef.current&&!this.navigationRef.current.shadowRoot&&this.navigationRef.current.attachShadow({mode:"open"}),this.setState({navigationElement:this.navigationRef.current}))}setMediaElementProperties=()=>{this.slideshowRef.current&&_t(this.slideshowRef.current,"viewportIntersectionChange",{visible:this.props.visibility.visible,position:this.props.visibility.position},{bubbles:!1})};onFirstLoad=e=>{if(this.slideshowRef.current){let r=this.slideshowRef.current.getActiveSlide();this.wallpaperRef.current.dispatchEvent(new CustomEvent("afterSlideChange",{detail:{slideIndex:r[0],mediaItem:r[1]},composed:!1,bubbles:!1}))}this.state.loaded||(this.setState({loaded:!0,showNavigation:!0}),this.props.onLoad&&this.props.onLoad())};onAfterSlideChange=(e,r)=>{this.wallpaperRef.current.dispatchEvent(new CustomEvent("afterSlideChange",{detail:{slideIndex:e,mediaItem:r},composed:!1,bubbles:!1}))}},rz=Ue((t,e)=>{let r=nt.getMediaByParent(t)[e.id],i=r.some(s=>s.loading);r=r.filter(s=>!s.loading&&!s.is_deleted&&(s.is_video||s.is_image));let n=null,o=e.settings?.activeImage||null;return o===Px.hash?(n=Px,r.push(n)):(o&&(n=r.find(s=>s.hash==o)),n||(n=r[0])),!n&&!i&&r.length==0&&(n=Px,r.push(n)),e.settings.excluded&&(r=r.filter(s=>e.settings.excluded.indexOf(s.hash)==-1),r.length==1&&e.settings["cycle-images"]&&(n=r[0])),e.settings.order&&r.sort(function(s,a){return e.settings.order.indexOf(s.hash)<e.settings.order.indexOf(a.hash)?-1:1}),{singleModel:n,modelArray:r}})(Ix)});var YAe,Ax,nz,oz=V(()=>{ke();Ye();YAe=ye(Pe(),1);ft();Pr();Ym();fe();Ax=class extends me{constructor(e){super(e),this.state={loaded:!1,counter:0,shadowRootRef:null},this.gradientElementRef=xe()}render(){let{visibility:e,dimensions:r}=this.props,{counter:i}=this.state,n={};for(let[ae,he]of Object.entries(Wd.default.defaults))this.props.settings?.hasOwnProperty(ae)?n[ae]=this.props.settings[ae]:n[ae]=he.value;let{repeat:o,rotation:s,scale:a,smoothness:l,"animation-speed":p,"pos-x":f,"pos-y":d,"gradient-type":m,"color-one":g,"color-two":v,"color-three":x,"color-one-active":_,"color-two-active":E,"color-three-active":O}=n;g=g||"transparent",v=v||"transparent",x=x||"transparent",d=d+50,f=f+50,a=parseFloat(a)/100,l=parseFloat(l)/100,s=parseInt(s);let L=p>0;p=Math.abs(p/100),p=p*p,p=L?p:-p;let I=p!==0,D=I&&m=="linear"&&o,R=I&&m=="radial"&&o,W=p>0?p*120+(1-p)*2400:Math.abs(p)*120+(1-Math.abs(p))*2400,N=(1-Math.abs(p))*40+Math.abs(p)*4,z=i%W/W;p>0&&(z=1-z);let $=0,q=R?z*100*a:0,J=[];_&&J.push(g),E&&J.push(v),O&&J.push(x);let X="",se="",ee="",Z=0,Y=0,te="",re="",ie=[];if(J.length!=0)if(J.length==1)X+=`background-color: ${J[0]}`;else if(J.length==2)if(o){a=(1-l)*a+a*l;let ae=(100/4*1+-l*(100/4))*a-(1-l)*(100/5)*a;ie[0]=0+q,ie[1]=(100/4*1+l*(100/4))*a-(1-l)*(100/5)*a+-ae+q,ie[2]=(100/4*3+-l*(100/4))*a-(1-l)*(100/5)*a+-ae+q,ie[3]=(100/4*3+l*(100/4))*a-(1-l)*(100/5)*a+-ae+q,ie[4]=100*a+q}else ie[0]=0,ie[1]=a*100+-(a*100)*l,ie[2]=a*100+(1-a)*100*l,ie[3]=100;else if(o){a=(1-l)*a+a*l;let ae=(100/6*1+-l*(100/6))*a-(1-l)*(100/7)*a;ie[0]=0+q,ie[1]=(100/6*1+l*(100/6))*a-(1-l)*(100/7)*a+-ae+q,ie[2]=(100/6*3+-l*(100/6))*a-(1-l)*(100/7)*a+-ae+q,ie[3]=(100/6*3+l*(100/6))*a-(1-l)*(100/7)*a+-ae+q,ie[4]=(100/6*5+-l*(100/6))*a-(1-l)*(100/7)*a+-ae+q,ie[5]=(100/6*5+l*(100/6))*a-(1-l)*(100/7)*a+-ae+q,ie[6]=100*a+q}else a=(1-l)*3*a+a*l,ie[0]=100/6*0+l*(100/6)*0,ie[1]=100/6*2+-l*(100/6)*2,ie[2]=100/6*2+l*(100/6)*1,ie[3]=100/6*4+-l*(100/6)*1,ie[4]=100/6*4+l*(100/6)*2,ie[5]=100/6*6+-l*(100/6)*0,ie[0]=Math.max(ie[0]*a+50*(1-a),0),ie[1]=Math.max(ie[1]*a+50*(1-a),0),ie[2]=ie[2]*a+50*(1-a),ie[3]=ie[3]*a+50*(1-a),ie[4]=Math.min(ie[4]*a+50*(1-a),100),ie[5]=Math.min(ie[5]*a+50*(1-a),100);if(J.length>1){X="background-image: ",X+=o?"repeating-":"",X+=m=="linear"?`linear-gradient( ${s+180}deg`:`radial-gradient( circle at ${f}% ${d}%`,se=ee="background-position: ";let ae=[];if(J.length==2?o?ae=[0,1,1,0,0]:ae=[0,0,1,1]:o?ae=[0,1,1,2,2,0,0]:ae=[0,0,1,1,2,2],D?ie.forEach((he,de)=>{let we=J[ae[de]]||J[0];X+=`, ${we} ${he/2}%`}):ie.forEach((he,de)=>{let we=J[ae[de]]||J[0];X+=`, ${we} ${he}%`}),X+=")",D){let he=(s+90)*(Math.PI/180),de=r.width/r.height,we=Math.cos(he),Re=Math.sin(he),ve=ie[ie.length-1]+"%";we<0?(ee+="0% ",se+=ve+" "):(ee+=ve+" ",se+="0% "),Re<0?(Re*=-1,ee+="0%;",se+=ve+";"):(ee+=ve+";",se+="0%;")}}return S("div",{className:"gradient",ref:this.gradientElementRef,children:this.state.shadowRoot&&it(S("style",{children:`:host {
						${X};
					    position: absolute;
					    top: 0;
					    left: 0;
					    right: 0;
					    bottom: 0;
					    margin: auto;
					    background-position: 0 0;
					    background-size: ${D?"200% 200%;":"100% 100%;"}
					    ${D&&"will-change: background-position, background-image;"}
					    ${D&&"animation: slideAnimation "+N+"s linear infinite "+(p<0?"reverse":"normal")+";"}
					}

					${D?`
					@keyframes slideAnimation {
						0% {
							${se}
						}

						100% {
							${ee}
						}
					}
					`:""}
					`}),this.state.shadowRoot)})}componentDidUpdate(e,r){(this.props.settings.repeat!==e.settings.repeat||this.props["animation-speed"]!==e["animation-speed"])&&(cancelAnimationFrame(this.animFrame),this.props.settings.repeat&&this.props["animation-speed"]!==0&&(this.animFrame=requestAnimationFrame(this.draw)))}componentWillUnmount(){cancelAnimationFrame(this.animFrame)}draw=()=>{this.setState(e=>({counter:e.counter+1}),()=>{this.animFrame=requestAnimationFrame(this.draw)})};componentDidMount(){this.gradientElementRef.current&&!this.gradientElementRef.current.shadowRoot&&this.gradientElementRef.current.attachShadow({mode:"open"}),this.setState({shadowRoot:this.gradientElementRef.current?.shadowRoot}),this.props.settings.repeat&&this.props["animation-speed"]!==0&&(this.animFrame=requestAnimationFrame(this.draw)),this.props.onLoad&&this.props.onLoad()}onFirstLoad=e=>{}},nz=Ax});var nTe,Jd,Tx,Qd,Pae,Iae,Mx,Rx,sz,kx=V(()=>{ke();nTe=ye(Pe(),1);Be();Xr();O5();iz();oz();Yr();fe();pe||(Tx=new IntersectionObserver(function(t){t.forEach(function(e){let r="inside";e.boundingClientRect.top-e.boundingClientRect.height<0&&!e.isIntersecting?r="above":e.boundingClientRect.top>0&&!e.isIntersecting&&(r="below"),_t(e.target,"backdropContentViewportChange",{detail:{visible:e.isIntersecting,position:r},target:e.target})})},{root:document,rootMargin:"0px",threshold:[0,1]}),Jd=new IntersectionObserver(function(t){t.forEach(function(e){let r="inside";e.boundingClientRect.top-e.boundingClientRect.height<0&&!e.isIntersecting?r="above":e.boundingClientRect.top>0&&!e.isIntersecting&&(r="below"),_t(e.target,"backdropWrapperViewportChange",{detail:{visible:e.isIntersecting,position:r},target:e.target})})},{root:document,rootMargin:window.screen.height+"px 0px",threshold:[0,1]}),Qd=new ResizeObserver(t=>{t.forEach(e=>{_t(e.target,"backdropContentResize",{detail:{width:e.contentRect.width,height:e.contentRect.height},target:e.target})})}));Pae=["wallpaper","gradient","legacy/ripple","legacy/slitscan","legacy/badtv","legacy/gmaps","legacy/halftone","legacy/kaleidoscope","legacy/morphovision","legacy/parallax","legacy/pixelation","legacy/polygon_engine","legacy/refraction","legacy/ripple","legacy/slitscan","legacy/video","legacy/wave"],Iae={wallpaper:rz,gradient:nz},Mx={};Pae.forEach(t=>{t.startsWith("legacy")?Mx[t]=N5:Mx[t]=Iae[t]});Rx=class extends me{constructor(e){super(e),this.backdropRef=xe(),this.backdropWrapperRef=xe(),this.state={loaded:0,wrapperDimensions:{width:800,height:800},dimensions:{width:800,height:800},visibility:{visible:!1,position:"inside"},innerVisibility:{visible:!1,position:"inside"},wrapperVisibility:{visible:!1,position:"inside"},viewportVisibility:{visible:!1,position:"inside"}}}onViewportIntersectionChange=e=>{this.setState({viewportVisibility:e.detail})};onIntersectionChange=e=>{e.target==this.backdropRef.current?this.setState({innerVisibility:e.detail}):this.setState({wrapperVisibility:e.detail})};onResize=e=>{e.target==this.backdropRef.current?this.setState({dimensions:e.detail}):this.setState({wrapperDimensions:e.detail})};render(e,r){let{settings:i,id:n}=this.props,o=Mx[i.activeBackdrop];if(!o)return i.activeBackdrop!=="none"&&console.warn(`Error: Selected Backdrop mode "${i.activeBackdrop}" not found`),null;let s=i.backdropSettings?.[i.activeBackdrop]||{},a=s.clipScroll==!0;return S("div",{className:`backdrop ${a?"clip":""}`,ref:this.backdropWrapperRef,children:[S("div",{className:`backdrop-contents ${this.state.visibility.visible?"visible":""} ${this.state.visibility.position} ${this.state.loaded>0?"loaded":""}`,ref:this.backdropRef,style:{"--backdrop-width":this.state.wrapperDimensions.width+"px","--backdrop-height":this.state.wrapperDimensions.height+"px"},children:S(o,{...this.props,wrapperDimensions:this.state.wrapperDimensions,backdropRef:this.backdropRef,id:this.props.id,path:i.activeBackdrop,settings:s,dimensions:this.state.dimensions,visibility:this.state.visibility,inViewport:this.state.viewportVisibility.visible,onLoad:this.onLoad})}),S(Po,{baseNodeRef:this.backdropWrapperRef})]})}onLoad=e=>{let r=this.backdropRef.current.querySelector("[data-backdrop]");r&&r.removeAttribute("style"),e&&(e.preventDefault(),e.stopPropagation()),this.setState(i=>({loaded:i.loaded+1})),setTimeout(()=>{this.fireBackdropLoadComplete()})};fireBackdropLoadComplete=()=>{this.backdropLoadCompleteFired||(this.backdropLoadCompleteFired=!0,window.dispatchEvent(new CustomEvent("backdrop-load-complete",{bubbles:!0,composed:!0,detail:{}})))};componentDidUpdate(e,r){if(this.state.innerVisibility!==r.innerVisibility||this.state.wrapperVisibility!==r.wrapperVisibility){let n=(this.props.settings.backdropSettings?.[this.props.settings.activeBackdrop]||{}).clipScroll==!0;this.setState({visibility:n?{...this.state.wrapperVisibility}:{...this.state.innerVisibility}})}e.settings?.activeBackdrop!==this.props.settings?.activeBackdrop&&this.setState(i=>({loaded:i.loaded-1}))}componentDidMount(){this.backdropRef.current&&(window.dispatchEvent(new CustomEvent("backdrop-load-start",{bubbles:!0,composed:!0,detail:{}})),setTimeout(()=>{this.fireBackdropLoadComplete()},3e3),this.backdropWrapperRef.current.addEventListener("legacy-backdrop-loaded",this.onLoad),At(this.backdropRef.current,"backdropContentResize",this.onResize),At(this.backdropRef.current,"backdropWrapperViewportChange",this.onIntersectionChange),At(this.backdropWrapperRef.current,"backdropContentResize",this.onResize),At(this.backdropWrapperRef.current,"backdropWrapperViewportChange",this.onIntersectionChange),At(this.backdropRef.current,"backdropContentViewportChange",this.onViewportIntersectionChange),Qd.observe(this.backdropRef.current),Qd.observe(this.backdropWrapperRef.current),Jd.observe(this.backdropWrapperRef.current),Jd.observe(this.backdropRef.current),Tx.observe(this.backdropRef.current))}componentWillUnmount(){this.backdropRef.current&&(this.backdropWrapperRef.current.removeEventListener("legacy-backdrop-loaded",this.onLoad),Rt(this.backdropRef.current,"backdropContentResize",this.onResize),Rt(this.backdropRef.current,"backdropWrapperViewportChange",this.onIntersectionChange),Rt(this.backdropWrapperRef.current,"backdropContentResize",this.onResize),Rt(this.backdropWrapperRef.current,"backdropWrapperViewportChange",this.onIntersectionChange),Rt(this.backdropRef.current,"backdropContentViewportChange",this.onViewportIntersectionChange),Qd.unobserve(this.backdropRef.current),Qd.unobserve(this.backdropWrapperRef.current),Jd.unobserve(this.backdropWrapperRef.current),Jd.unobserve(this.backdropRef.current),Tx.unobserve(this.backdropRef.current))}},sz=Rx});var si,Oe,ep,az=V(()=>{si=ye(Pe(),1);Be();Oe={handledEmbeds:[],embedsIniting:[],embedScriptsCache:{},songKickWidgets:{},embedInitAttempts:new WeakMap,embedChangeObserver:pe?null:new MutationObserver(t=>{t.forEach(e=>{e.removedNodes.length>0&&e.target.children.length===0&&Oe.add(e.target);let r=Array.from(e.addedNodes).filter(i=>i?.nodeName==="IFRAME");r.length>0&&(Array.from(e.target.querySelectorAll("iframe")).forEach(i=>{r.includes(i)||i.remove()}),e.target.getAttribute?.("data-type")==="tixtree"&&requestAnimationFrame(()=>{window.iFrameResize?.()}))})}),loadEmbedScript:(t,e)=>{if(Oe.embedScriptsCache[t])return Oe.embedScriptsCache[t];let r=new Promise(i=>{let n=document.createElement("script");n.setAttribute("src",t),n.onload=i,document.head.appendChild(n)});return Oe.embedScriptsCache[t]=r,r},initializeBandsInTown:function(t,e){var r="https://widget.bandsintown.com/main.min.js";e==="v3"&&(r="https://widgetv3.bandsintown.com/main.min.js"),Oe.loadEmbedScript(r).then(function(){BIT.widgetInitializer?t():BIT.onReady=t})},findEmbedsIn:function(t){t&&(si.default.each(t.querySelectorAll("cargo-embed"),Oe.add,Oe),si.default.each(t.querySelectorAll("#tixtree-wrapper"),e=>{e.setAttribute("data-type","tixtree"),Oe.add(e)}),si.default.each(t.querySelectorAll(".tt-widget"),e=>{e.setAttribute("data-type","ticket-tailor"),Oe.add(e)}),si.default.each(t.querySelectorAll(".shopify-buy-frame"),e=>{e.setAttribute("data-type","shopify-buy-frame"),Oe.add(e)}))},add:function(t){if(!(!t||t.nodeType!==Node.ELEMENT_NODE)){var e=t.getAttribute("data-type");if(!(!e||Oe.handledEmbeds.includes(t)&&t.children.length>0)){if(Oe.embedInitAttempts.get(t)===void 0?Oe.embedInitAttempts.set(t,0):Oe.embedInitAttempts.set(t,Oe.embedInitAttempts.get(t)+1),Oe.embedInitAttempts.get(t)>10){console.log("Exceeded max init attempts");return}switch(e){case"tweet":Oe.handleTwitterEmbed(t);break;case"twitter-timeline":Oe.handleTwitterTimelineEmbed(t);break;case"bandsintown":Oe.handleBandsIntownEmbed(t);break;case"songkick":Oe.handleSongkickEmbed(t);break;case"opentable":Oe.handleOpentableEmbed(t);break;case"typeform":Oe.handleTypeFormEmbed(t);break;case"shoprocket":Oe.handleShopRocketEmbed(t);break;case"tixtree":Oe.handleTixTreeEmbed(t);break;case"ticket-tailor":Oe.handleTicketTailorEmbed(t);break;case"shopify-buy-frame":Oe.handleShopifyEmbed(t);break;default:console.log("No method for handling",e,"embed")}}}},handleTwitterEmbed:function(t){var e=t.getAttribute("data-id");!e||e===""||Oe.embedsIniting.includes(t)||(Oe.embedsIniting.push(t),Oe.loadEmbedScript("https://platform.twitter.com/widgets.js").then(()=>{t.innerHTML="",twttr.widgets.createTweet(e,t).then(function(r){r&&(r.setAttribute("contenteditable","false"),Oe.embedChangeObserver?.observe(t,{childList:!0,attributes:!0})),Oe.embedsIniting=Oe.embedsIniting.filter(i=>i!==t)})}),Oe.handledEmbeds.push(t))},handleTwitterTimelineEmbed:function(t){if(!Oe.embedsIniting.includes(t)){Oe.embedsIniting.push(t);try{var e=JSON.parse(t.getAttribute("data-source"))}catch{return}typeof e=="number"&&(e=t.getAttribute("data-source"));var r;if(t.hasAttribute("data-options"))try{r=JSON.parse(t.getAttribute("data-options"))}catch{}Oe.loadEmbedScript("https://platform.twitter.com/widgets.js").then(()=>{t.innerHTML="",twttr.widgets.createTimeline(e,t,r).then(function(i){i&&(i.setAttribute("contenteditable","false"),Oe.embedChangeObserver?.observe(t,{childList:!0,attributes:!0})),Oe.embedsIniting=Oe.embedsIniting.filter(n=>n!==t)})}),Oe.handledEmbeds.push(t)}},handleOpentableEmbed:function(t){if(!t.ownerDocument.contains(t)||Oe.embedsIniting.includes(t))return;Oe.embedsIniting.push(t);let e=document.createElement("opentable-embed-anchor");e.src=t.getAttribute("data-src"),t.appendChild(e),fetch(t.getAttribute("data-src")).then(r=>r.text()).then(r=>{if(Oe.embedsIniting=Oe.embedsIniting.filter(i=>i!==t),!e.ownerDocument.contains(e)){Oe.handleOpentableEmbed(t);return}e.id=si.default.uniqueId("opentable-"),r=r.replaceAll('getElementsByTagName("script")','querySelectorAll("opentable-embed-anchor#'+e.id+'")'),window.eval(r),e.remove(),Oe.embedChangeObserver?.observe(t,{childList:!0,attributes:!0}),Oe.handledEmbeds.push(t)})},handleBandsIntownEmbed:function(t){Oe.initializeBandsInTown(()=>{t.innerHTML="";var e={},r={};si.default.each(t.attributes,function(o){if(/^data-/.test(o.name)&&o.name!=="data-type"){var s=o.name.substr(5).replace(/-/g,"_");e[s]=o.value;var a=s.split("_").map(function(l,p){return p>0?l.charAt(0).toUpperCase()+l.slice(1):l}).join("");r[a]=o.value}});var i=document.createElement("a");if(i.setAttribute("id","bit-widget-"+si.default.uniqueId()),i.setAttribute("class","bit-widget-initializer"),si.default.each(e,function(o,s){i.setAttribute("data-"+s.replace(/_/g,"-"),o)}),t.appendChild(i),Fr){var n=new MutationObserver(function(o){si.default.each(o,function(s){s.type=="childList"&&s.addedNodes.forEach(function(a){a&&a.nodeType===Node.ELEMENT_NODE&&(a.setAttribute("contenteditable",!1),a.classList.contains("bit-widget-container")&&(a.style.pointerEvents="none",n.disconnect()))})})});n.observe(t,{childList:!0})}BIT.widgetInitializer.append(i,r),Oe.embedChangeObserver?.observe(t,{childList:!0}),Oe.handledEmbeds.push(t)},t.getAttribute("data-bit-widget-version"))},handleSongkickEmbed:function(t){if(!Oe.embedsIniting.includes(t)){Oe.embedsIniting.push(t);var e={};si.default.each(t.attributes,function(n){if(/^data-/.test(n.name)&&n.name!=="data-type"){var o=n.name.substr(5).replace(/-/g,"_");e[o]=n.value}});var r=document.createElement("a");r.setAttribute("class","songkick-widget"),r.setAttribute("href","https://www.songkick.com/artists/"+e.id),r.setAttribute("contenteditable","false"),si.default.each(e,function(n,o){r.setAttribute("data-"+o.replace(/_/g,"-"),n)}),t.appendChild(r);var i="https://widget-app.songkick.com/injector/"+e.id;Oe.songKickWidgets[e.id]===void 0?Oe.songKickWidgets[e.id]=0:i=i+"?"+ ++Oe.songKickWidgets[e.id],Oe.loadEmbedScript(i).then(()=>{Oe.embedsIniting=Oe.embedsIniting.filter(n=>n!==t),t.children.length===0&&Oe.add(t)}),Oe.embedChangeObserver?.observe(t,{childList:!0}),Oe.handledEmbeds.push(t)}},handleTypeFormEmbed:function(t){Oe.embedsIniting.includes(t)||(Oe.embedsIniting.push(t),Oe.loadEmbedScript("https://embed.typeform.com/next/embed.js").then(()=>{if(t.dataset.embed)t.innerHTML=si.default.unescape(t.dataset.embed),window.tf.load();else{let e={};si.default.each(t.attributes,function(r){r.name.startsWith("data-tf")&&(e[si.default.camelCase(r.name.replace("data-tf",""))]=r.value)}),e.container=t,delete e.iframeProps,t.innerHTML="",window.tf.createWidget(e.widget||e.live,e),t.children[0]?.setAttribute("style",t.getAttribute("data-style")),setTimeout(()=>{t.children[0]?.setAttribute("style",t.getAttribute("data-style"))},100),setTimeout(()=>{t.children[0]?.setAttribute("style",t.getAttribute("data-style"))},1e3)}Oe.embedsIniting=Oe.embedsIniting.filter(e=>e!==t)}),Oe.embedChangeObserver?.observe(t,{childList:!0}),Oe.handledEmbeds.push(t))},handleShopRocketEmbed:function(t){Oe.embedsIniting.includes(t)||!t.dataset.embed||(Oe.embedsIniting.push(t),Oe.loadEmbedScript("https://cdn.shoprocket.io/loader.js").then(()=>{if(Fr){var e=new MutationObserver(function(r){si.default.each(r,function(i){i.type=="childList"&&i.addedNodes.forEach(function(n){n&&n.nodeType===Node.ELEMENT_NODE&&(n.setAttribute("contenteditable",!1),n.classList.contains("sr-embed")&&(n.style.pointerEvents="none",e.disconnect()))})})});e.observe(t,{childList:!0})}t.innerHTML=si.default.unescape(t.dataset.embed),window.Shoprocket?.init(),Oe.embedsIniting=Oe.embedsIniting.filter(r=>r!==t)}),Oe.embedChangeObserver?.observe(t,{childList:!0}),Oe.handledEmbeds.push(t))},handleTixTreeEmbed:function(t){Oe.handledEmbeds.push(t),Oe.embedChangeObserver?.observe(t,{childList:!0,attributes:!0})},handleTicketTailorEmbed:function(t){Oe.handledEmbeds.push(t),Array.from(t.querySelectorAll(".tt-widget-wrapper")).forEach(e=>e.remove())},handleShopifyEmbed:function(t){t.setAttribute("contenteditable","false"),Oe.embedChangeObserver?.observe(t,{childList:!0,attributes:!0}),Oe.handledEmbeds.push(t)},remove:function(){}},ep=Oe});var lz,wTe,Nx,qu,rg=V(()=>{ke();lz=ye(Mn(),1);Gs();xr();ft();tr();wTe=ye(Pe(),1);fe();Nx=class extends me{constructor(e){super(e),this.state={error:!1}}render(e){return S(ce,{children:[S("style",{children:`
					.pages > .page:only-child,
					.pages :has(.page-password) > .page:only-child {
						min-height: var(--viewport-height);
					}
					
					.pages > .page:only-child .page-content,
					.pages :has(.page-password) > .page:only-child .page-content {
						align-items: center;
					}

					.site-password,
					.page-password {
						text-align: center;
						margin: auto;
						height: 0;
						width: 340px;
						display: table;
					}

					.site-password {
						position: fixed;
						top: 0;
						bottom: 0;
						left: 0;
						right: 0;
					}

					.error {
					    transform: translate(0, 20px);
					    position: absolute;
					    width: 100%;
					    text-align: center;
					    left: 0;
					    color: rgba(0,0,0,0.75);
					    user-select: none;
					}

					.submit-wrapper {
						display: grid;
						grid-template-columns: auto 40px;
						border-radius: 100px;
					    border: 1px solid rgba(0,0,0,0.75);
						grid-gap: 5px;
						background: #fff;
					}

					.button-area {
						position: relative;
						width: 40px;
						justify-content: center;
						align-items: center;
						display: flex;
						cursor: pointer;
					}

					.submit-button {
						display: block;
						width: 36px;
						height: 36px;
						border-radius: 50%;
						background: #000;
						transform-origin: 50% 50%;
						transform: scale(1);
						border: none;
						background-image: url("data:image/svg+xml,%3Csvg width='21' height='19' viewBox='0 0 21 19' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11.8438 1.9375L19.3438 9.4375L11.8438 16.9375' stroke='%23fff' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M19.3437 9.4375L1.40625 9.4375' stroke='%23fff' stroke-width='2.5' stroke-linecap='round'/%3E%3C/svg%3E%0A");
						background-position: 46% 50%;
						background-repeat: no-repeat;
						background-size: 17px 17px;
						pointer-events: auto;
						cursor: pointer;
						margin-right: 1px;
						padding: 0;
					}

					.submit-button:active {
						opacity: 0.7;
					}


					input[type="password"] {
						border-radius: 100px;
					    border: none;
						padding: 10px 0px 10px 20px;
					    font-size: 14px;
					    font-family: Helvetica;
					    font-size: 18px;
					    font-style: normal;
					    font-weight: 400;
					    line-height: 21px;
					    letter-spacing: -0.004em;
					    text-align: left;
						width: auto;
					}

					input[type="password"]:placeholder {
		                color: rgba(0,0,0,0.75);
		            }
		            input[type="password"]::-webkit-input-placeholder {
		                color: rgba(0,0,0,0.75);
		            }
		            input[type="password"]::-moz-placeholder {
		                color: rgba(0,0,0,0.75);
		            }
		            input[type="password"]:-moz-placeholder {
		                color: rgba(0,0,0,0.75);
		            }
	            `}),S("div",{className:this.props.target==="site"?"site-password":"page-password",children:[S("form",{onSubmit:this.submit,class:"submit-wrapper",children:[S("input",{name:"pw",type:"password",placeholder:"Enter password...",autofocus:"true",onKeyDown:this.onKeyDown}),S("div",{className:"button-area",children:S("button",{className:"submit-button",type:"submit"})})]}),this.state.error&&S("span",{class:"error",children:"Invalid password"})]})]})}onKeyDown=e=>{this.state.error&&this.setState({error:!1})};submit=e=>{e.preventDefault();let r;this.props.target==="site"?r=`/sites/${this.props.siteId}/validatepassword`:r=`/pages/${this.props.siteId}/id/${this.props.target}/validatepassword`,lz.default.post(cr+r,{[this.props.target==="site"?"site_password":"password"]:e.target.elements.pw.value}).then(({data:i})=>{if(!i.token){this.setState({error:!0});return}this.setState({error:!1}),this.props.setAuthentication({authenticated:!0,data:{access_token:i.token,id:null}}),this.props.onSucces?.()}).catch(i=>{console.error(i),this.setState({error:!0})})}},qu=Ue((t,e)=>({siteId:t.site.id}),t=>zt({setAuthentication:Ge.setAuthentication},t))(Nx)});var Ox,uz,cz=V(()=>{ke();Ye();ps();qr();Bt();Bt();fe();Ox=class extends me{constructor(e){super(e),this.state={hover:!1,buttonHovered:!1},this.editPageButtonRef=xe(),this.layoutButtonRef=xe(),CargoEditor&&Object.keys(CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents)}editorIsEmpty=(e,r)=>{requestAnimationFrame(()=>{this.setState({showEmpty:this.props.isEditingPage})})};editorHasContent=(e,r)=>{this.setState({showEmpty:!1})};bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),this.CargoEditor=CargoEditor,this.CargoEditor.events.on("editor-no-content",this.editorIsEmpty),this.CargoEditor.events.on("editor-has-content",this.editorHasContent)};componentWillUnmount=()=>{this.CargoEditor&&(this.CargoEditor.events.off("editor-no-content",this.editorIsEmpty),this.CargoEditor.events.off("editor-has-content",this.editorHasContent))};onButtonEnter=()=>{this.setState({hover:!0})};onButtonLeave=()=>{this.setState({hover:!1})};launchUIWindow=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let r=this.layoutButtonRef.current.getBoundingClientRect(),i={x:r.x+0,y:r.y+-212,left:r.left+0,right:r.right+0,top:r.top+0+-212,bottom:r.top+27+-212,width:r.width,height:r.height};Ce.adminWindow.UIWindowOpener.openUIWindow({windowName:"layouttemplate",supportsMobile:!0,positionRect:i,closeButton:!1,closeOnAllClickout:!1})};render(e){let r=this.props.isEditingPage,i=this.props.pageIsPin,n=this.state.showEmpty,o=23;return S(Ei,{isEditingPage:r,name:"EditPageButton",trackResize:!0,noPointerEvents:!0,buttonHeight:o,buttonMode:"outside",baseNode:this.props.bodycopyRef.current,render:s=>{let{pointerAttention:a,overlayPosition:l,shiftButtonX:p,shifted:f}=s,d=-o,m=-2;return l.y<=o&&(d=Math.max(0,-l.y),m=0,d>l.height&&(m=-2,d=l.height+1)),r&&n||r?null:S(ce,{children:[S("div",{className:`in-editor-buttons page${a?" hover button-hover":""} ${f?"shifted":""}`,style:{transform:`translate3d(${m+l.x}px, ${d+l.y}px, 0)`},children:S("div",{className:"pointer-mask",style:{transform:`translateX(${p}px)`},children:S("button",{className:"edit-page text",onMouseDown:g=>{g.button==2||g.metaKey||this.props.editPage(g)},ref:this.editPageButtonRef,children:[S("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 16H6V4H10.9875V8.09705H15V16ZM16 7.64491L11.4226 3H5V17H16V7.64491Z",fill:"black"})}),this.props.pageTitle]})})}),S("div",{className:`editor-overlay editor-outline page-outline${a?" hover button-hover":""}${this.state.showEmpty?" hover":""}`,style:{width:l.width+"px",height:l.height+"px",transform:`translate3d(${l.x}px, ${l.y}px, 0)`}})]})}})}},uz=Ox});function Mae(t,e){let r={};for(let i in e)r[i]=t.style.getPropertyValue(i),t.style.setProperty(i,"unset");t.offsetHeight;for(let i in e)t.style.setProperty(i,r[i])}function hz(){let t=document.querySelectorAll(".page");for(let e of t){let r=window.getComputedStyle(e),i=r.getPropertyValue("--page-layout-mix"),n=r.getPropertyValue("--page-mix");(n.length||i.length)&&Mae(e,{"--page-mix":n,"--page-layout-mix":i})}}function Rae(t){return zt({pageMounted:Ge.pageMounted,pageUnMounted:Ge.pageUnMounted,updateFrontendState:Ge.updateFrontendState,fetchContent:Ge.fetchContent,fetchCommerceProducts:Ge.fetchCommerceProducts},t)}var Ci,sa,ig,tp,ng,hs,Dx,og,Lx,dz,Uu,pz,Aae,Tae,sg,kae,aa,ag=V(()=>{ke();xr();ft();tr();Ci=ye(Pe(),1);Pr();Ed();zr();Co();Xr();il();Br();kx();az();Be();rg();cz();_i();Ya();fe();sa=new WeakMap,ig=new WeakMap,tp=new WeakMap,ng=new WeakMap,dz=null,Uu=null,pz=t=>{t.forEach(function(e){sa.has(e.target)&&sa.get(e.target).onAboveViewPort(e)})},Aae=Ci.default.once(()=>{let t=document.implementation.createDocument("http://www.w3.org/1999/xhtml","body",null),e=document.createElement("style");return t.children[0].appendChild(e),e}),Tae=t=>{let e=Aae();return t!==dz&&(e.innerHTML=t,dz=t),e};pe||(hs=new ResizeObserver(function(t){cn()&&(Uu===null?Uu=window.innerWidth:Uu!==window.innerWidth&&(Uu<2050&&window.innerWidth>=2050&&hz(),Uu>=2050&&window.innerWidth<2050&&hz(),Uu=window.innerWidth));let e={};pz(og.takeRecords()),t.forEach(function(r){let i=sa.get(r.target);if(i&&(i.onResize(r.target.getBoundingClientRect()),e[i.props.id]=r.contentRect.height),ig.has(r.target)&&ig.get(r.target).onBodyCopyResize(r.contentRect.width),tp.has(r.target)||ng.has(r.target)){var n=window.getComputedStyle(r.target);let o=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top")),s=parseFloat(n.getPropertyValue("margin-bottom"))+parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("border-bottom"));if(tp.has(r.target)){let a=tp.get(r.target);(a.state.pageContentPad.top!==o||a.state.pageContentPad.bottom!==s)&&a.setState({pageContentPad:{top:o,bottom:s}})}else{let a=ng.get(r.target);(a.state.pageLayoutPad.top!==o||a.state.pageLayoutPad.bottom!==s)&&a.setState({pageLayoutPad:{top:o,bottom:s}})}}}),B0(e)}),og=new IntersectionObserver(pz,{root:document,rootMargin:"0px 0px 0px 0px",threshold:[0,1]}),Lx=new IntersectionObserver((t,e)=>{t.forEach(function(r){sa.has(r.target)&&sa.get(r.target).onViewportBoundaryIntersection(r)})},{root:document,rootMargin:Math.max(screen.height*6,2500)+"px",threshold:[0,1]}),Dx=new MutationObserver(function(t){Ci.default.each(t,function(e){e.type=="childList"&&e.addedNodes.forEach(function(r){r.nodeName==="CARGO-EMBED"&&ep.add(r)})})}));sg=class extends me{constructor(e){super(e),this.overlayContentRef=xe(),this.bodycopyRef=xe(),this.pageContentRef=xe(),this.pageRef=xe(),this.pageLayoutRef=xe(),this.lastBodycopyRef=xe(),this.lastPageContentRef=xe(),this.lastPageRef=xe(),this.lastPageLayoutRef=xe(),this.lastHeight=0,this.state={resizeParentWidth:"100%",mobileOffsetsString:null,pageContentPad:{top:0,bottom:0},pageLayoutPad:{top:0,bottom:0},windowHeight:null,fullyRender:!0,lastPageContainerHeight:100,overlayContentFromTransformValue:null,overlayContentToTransformValue:null},this.localStyleRef=xe()}setOverlayContentTransformValues=()=>{let e=this.overlayContentRef.current?.getBoundingClientRect();if(!e)return;let r=this.pageContentRef.current?.getBoundingClientRect();if(!r)return;let i=0,n=0,o=this.props.overlayOptions?.animateOnOpen?.slideAmount/100,s=this.props.overlayOptions?.animateOnClose?.slideAmount/100;if(this.props.overlayOptions?.animateOnOpen?.speed!==0)switch(this.props.overlayOptions?.animateOnOpen?.slideDirection){case"bottom":i=(r.height+(e.height-r.bottom))*o;break;case"top":i=-r.bottom*o;break;case"right":i=(r.width+(e.width-r.right))*o;break;case"left":i=-r.right*o;break}if(this.props.overlayOptions?.animateOnClose?.speed!==0)switch(this.props.overlayOptions?.animateOnClose?.slideDirection){case"bottom":n=(r.height+(e.height-r.bottom))*s;break;case"top":n=-r.bottom*s;break;case"right":n=(r.width+(e.width-r.right))*s;break;case"left":n=-r.right*s;break}if(this.state.overlayContentFromTransformValue!==i&&this.state.overlayContentToTransformValue!==n){this.setState({overlayContentFromTransformValue:i,overlayContentToTransformValue:n});return}if(this.state.overlayContentFromTransformValue!==i){this.setState({overlayContentFromTransformValue:i});return}if(this.state.overlayContentToTransformValue!==n){this.setState({overlayContentToTransformValue:n});return}};setMobileOffsets=()=>{if(!this.props.isMobile){this.setState({mobileOffsetsString:null});return}let e=["ul","ol","li","h1","h2","h3","h4","h5","h6","sub","sup","small-caps"];if(!this.localStyleRef.current)return;let r=Tae(this.props.globalStylesheet),i=!1;r.sheet&&Ci.default.each(r.sheet.rules,o=>{o?.selectorText===".mobile [id] .page-layout"&&o?.style?.getPropertyValue("padding")==="0px"&&(i=!0)}),i&&e.push(`[id="${this.props.pid}"] .page-layout`);let n=nu(this.localStyleRef.current.sheet,[{properties:["padding-top","padding-right","padding-bottom","padding-left"],denyList:e}]);this.setState({mobileOffsetsString:n})};onBodyCopyResize=e=>{this.lastWidth!==e&&(this.setState({resizeParentWidth:e+"px"}),this.lastWidth=e)};onWindowResize=e=>{this.setState(r=>r.windowHeight===ot.data.window.h?null:{windowHeight:ot.data.window.h})};onResize=e=>{if(!e)return;let r=0;if(this.isAboveViewport&&this.lastHeight!==e.height&&(r+=e.height-this.lastHeight),this.lastHeight=e.height,r!==0){let i=document.scrollingElement.scrollTop+r;document.scrollingElement.scrollTo({top:i,behavior:"instant"})}};onAboveViewPort=e=>{e.rootBounds.height!==0&&(this.isAboveViewport=e.boundingClientRect.bottom<0)};onViewportBoundaryIntersection=e=>{if(e.rootBounds.height===0)return;let r=e.isIntersecting;(pe||this.props.isPin||this.props.isEditingPage)&&(r=!0),this.setFullRenderState(r)};setFullRenderState=e=>{let r={fullyRender:e,renderSparseHeightDiv:!e};e?this.state.fullyRender!==!0&&(r.renderSparseHeightDiv=!0,setTimeout(()=>{this.state.fullyRender===!0&&this.setState({renderSparseHeightDiv:!1})},100)):r.lastPageContainerHeight=this.pageRef.current?.getBoundingClientRect().height||100,this.setState(r)};updateAdminState=e=>{this.props.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:e})};zIndexLayerPosition=e=>e?.toString().padStart(2,"0");findPageAdjusteeStatus=e=>{let r={top:null,bottom:null},i=Ci.default.pickBy(this.context?.adjustPairs,n=>n.adjusts.indexOf(this.props.pid)!==-1);return Ci.default.keys(i).length>0&&Ci.default.each(i,function(n){r[n.location]=n.adjustedHeight}),r};determinePinCSS=()=>{if(pe||this.props.isOverlay||Ci.default.isEmpty(this.context.levelData))return;let e=1,r={},i=this.context?.renderedPins&&this.props.isPin,n=this.findPageAdjusteeStatus(this.props.pid);if(r.paddingTop=n.top,r.paddingBottom=n.bottom,i){let o=this.context?.renderedPins[this.props.pid];if(o){let s=o.depth,a=Ci.default.keys(this.context.levelData?.levels)?.length+e,l=a-s+e,p=l+this.zIndexLayerPosition(100-o?.pinSort);if(r.zIndex=o.type!=="adjust"?p??null:null,localStorage.getItem("pin_testing")==="true"){let d={old_zIndex:l+this.zIndexLayerPosition(100-o?.sort),new_zIndex:p,pid:this.props.pid,pageList_sort:o?.sort,renderedPageSort:o?.pinSort};console.log(d)}let f=this.context.levelData?.levels[s][o.location];o.type==="overlay"?r[o.location]=f.startingHeight-n[o.location]:o.type==="adjust"&&n[o.location]!==null&&(r[o.location]=f.adjustsSelf?null:f.startingHeight-n[o.location])}}return r["--pin-padding-top"]=(r.paddingTop||0)+"px",r["--pin-padding-bottom"]=(r.paddingBottom||0)+"px",Ci.default.isEmpty(r)?null:r};getAdjustOnlyPinStartHeight=(e,r,i)=>{let n=0;return Ci.default.each(this.context.renderedPins,(o,s)=>{o.depth===e&&o.location===i&&(i==="top"?o.sort<r:o.sort>r)&&o.type==="adjust"&&(n+=this.context.pageHeights[s])}),n};determinePinClassList(e){if(!e||this.props.isOverlay)return"";let r=null;if(this.props.isMobile){let n=this.props?.local_css?.match(/--mobile-pin-options: (.*);/);r=n?n[1].replace(/['"]+/g,"").split(" "):null}let i="";return i+=" pinned pinned-"+e.position,r?i+=r.includes("fixed")?" fixed":r.includes("overlay")?" overlay":"":i+=e.fixed?" fixed":e.overlay?" overlay":"",i}editPage=e=>{if(e.preventDefault(),parent.window.Cargo?.Ecommerce?.View?.currentView?.saveButton?.saveEnabled===!0||parent.window.Cargo?.Ecommerce?.View?.currentView?.SaveButton?.saveEnabled===!0){parent.window.dispatchEvent(new CustomEvent("navigate-after-commerce-save",{detail:{pid:this.props.pid}}));return}parent.editorActivationEvent=e,parent.navigateAdmin("/"+this.props.pid),this.updateAdminState({pageTitleBarTransition:!0}),setTimeout(()=>{this.updateAdminState({pageTitleBarTransition:!1})},600)};getPageInfoContextValue(){return(this.props.isEditingPage!==this.lastProps?.isEditingPage||this.props.pid!==this.lastProps?.pid)&&(this.pageInfoContextValue={isEditing:this.props.isEditingPage,pid:this.props.pid}),this.lastProps=this.props,this.pageInfoContextValue}render(){if(!this.props.hasPage||pe&&this.props.access_level!=="public")return null;let e=this.props.backdrops?.activeBackdrop&&this.props.backdrops?.activeBackdrop!="none",r=this.props.isPin&&this.props.pin_options,i=r?this.props.pin_options:null,n=null,o=null,s=this.determinePinCSS(),a=this.determinePinClassList(i),l={};this.props?.local_css?.includes("--page-layout-mix:")&&!this.props?.local_css?.includes("--page-layout-mix: normal")?l["--page-content-backdrop-filter"]="none":l["--page-content-backdrop-filter"]="";let p={},f="";if(this.props.isOverlay===!0){let m="translate3d(0, 0, 0)";switch(this.props.overlayOptions?.animateOnOpen?.slideDirection){case"bottom":m=`translate3d(0, ${this.state.overlayContentFromTransformValue}px, 0)`;break;case"top":m=`translate3d(0, ${this.state.overlayContentFromTransformValue}px, 0)`;break;case"right":m=`translate3d(${this.state.overlayContentFromTransformValue}px, 0, 0)`;break;case"left":m=`translate3d(${this.state.overlayContentFromTransformValue}px, 0, 0)`;break}if(this.props.overlayOptions?.animateOnOpen?.scaleAmount){let R=1-Number(this.props.overlayOptions?.animateOnOpen?.scaleAmount)/100;m+=` scale(${R})`}this.props.overlayOptions?.animateOnOpen?.rotateAmount&&(m+=` rotate(${Number(this.props.overlayOptions?.animateOnOpen?.rotateAmount)*-1}deg)`);let g="translate3d(0, 0, 0)";switch(this.props.overlayOptions?.animateOnClose?.slideDirection){case"top":g=`translate3d(0, ${this.state.overlayContentToTransformValue}px, 0)`;break;case"bottom":g=`translate3d(0, ${this.state.overlayContentToTransformValue}px, 0)`;break;case"left":g=`translate3d(${this.state.overlayContentToTransformValue}px, 0, 0)`;break;case"right":g=`translate3d(${this.state.overlayContentToTransformValue}px, 0, 0)`;break}if(this.props.overlayOptions?.animateOnClose?.scaleAmount){let R=1-Number(this.props.overlayOptions?.animateOnClose?.scaleAmount)/100*-1;g+=` scale(${R})`}this.props.overlayOptions?.animateOnClose?.rotateAmount&&(g+=` rotate(${this.props.overlayOptions?.animateOnClose?.rotateAmount}deg)`);let v="none";switch(this.props.overlayOptions?.animateOnOpen?.wipeShape){case"right":v="inset(0 0 0 100%)";break;case"left":v="inset(0 100% 0 0)";break;case"top":v="inset(0 0 100% 0)";break;case"bottom":v="inset(100% 0 0 0)";break;case"circle":v="circle(0%)";break;case"diamond":v="polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%)";break;case"square":v="inset(100% 100% 100% 100%)";break}let x="none";switch(this.props.overlayOptions?.animateOnClose?.wipeShape){case"right":case"left":case"top":case"bottom":x="inset(0 0 0 0)";break;case"circle":x="circle(125%)";break;case"diamond":x="polygon(-50% 50%, 50% -50%, 150% 50%, 50% 150%)";break;case"square":x="inset(0 0 0 0)";break}let _="none";switch(this.props.overlayOptions?.animateOnOpen?.wipeShape){case"right":case"left":case"top":case"bottom":_="inset(0 0 0 0)";break;case"circle":_="circle(125%)";break;case"diamond":_="polygon(-50% 50%, 50% -50%, 150% 50%, 50% 150%)";break;case"square":_="inset(0 0 0 0)";break}let E="none";switch(this.props.overlayOptions?.animateOnClose?.wipeShape){case"left":E="inset(0 0 0 100%)";break;case"right":E="inset(0 100% 0 0)";break;case"bottom":E="inset(0 0 100% 0)";break;case"top":E="inset(100% 0 0 0)";break;case"circle":E="circle(0%)";break;case"diamond":E="polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%)";break;case"square":E="inset(100% 100% 100% 100%)";break}let O="linear";switch(this.props.overlayOptions?.animateOnOpen?.easing){case"ease-in":O="ease-in";break;case"ease-out":O="ease-out";break;case"ease-in-out":O="ease-in-out";break;case"bounce":O="cubic-bezier(.47,1.64,.41,.8)";break;case"elastic":O="cubic-bezier(.2,.69,.41,1.12)";break;case"hesitate":O="cubic-bezier(0,.8,1,0)";break;case"smooth":O="cubic-bezier(.240,1,.290,1.0)";break;case"linear":default:O="linear";break}let L="linear";switch(this.props.overlayOptions?.animateOnClose?.easing){case"ease-in":L="ease-in";break;case"ease-out":L="ease-out";break;case"ease-in-out":L="ease-in-out";break;case"smooth":L="cubic-bezier(.240,1,.290,1.0)";break;case"bounce":L="cubic-bezier(.47,1.64,.41,.8)";break;case"elastic":L="cubic-bezier(.2,.69,.41,1.12)";break;case"hesitate":L="cubic-bezier(0,.8,1,0)";break;case"linear":default:L="linear";break}p={"--overlay-open-duration":this.props.overlayOptions?.animateOnOpen?.speed?`${this.props.overlayOptions?.animateOnOpen?.speed}s`:"0s","--overlay-open-from-opacity":this.props.overlayOptions?.animateOnOpen?.fade?0:1,"--overlay-open-from-background-color":this.props.overlayOptions?.animateOnOpen?.fade?"inherit":"transparent","--overlay-open-content-from-transform":m,"--overlay-open-content-from-clip-mask":v,"--overlay-open-content-to-clip-mask":_,"--overlay-close-duration":this.props.overlayOptions?.animateOnClose?.speed?`${this.props.overlayOptions?.animateOnClose?.speed}s`:"0s","--overlay-close-to-opacity":this.props.overlayOptions?.animateOnClose?.fade?0:1,"--overlay-close-to-background-color":this.props.overlayOptions?.animateOnClose?.fade?"inherit":"transparent","--overlay-close-content-to-transform":g,"--overlay-close-content-from-clip-mask":x,"--overlay-close-content-to-clip-mask":E,"--overlay-open-easing":O,"--overlay-close-easing":L,opacity:this.state.overlayContentFromTransformValue!==null?void 0:0,zIndex:999}}if(this.state.fullyRender){let m=this.props.contentPad.top+this.state.pageLayoutPad.top+this.state.pageContentPad.top+this.state.pageContentPad.bottom+this.state.pageLayoutPad.bottom+this.props.contentPad.bottom;s&&(s.paddingTop&&(m+=s.paddingTop),s.paddingBottom&&(m+=s.paddingBottom));let g=Math.max(10,this.state.windowHeight-m),v=null;this.props.access_level==="password"?v=S(qu,{target:this.props.pid,onSucces:()=>{this.props.fetchContent(this.props.pid,{force:!0})}}):this.hasOwnProperty("lockedContent")?v=this.lockedContent:v=this.lockedContent=this.props.content,this.maxFitHeight=g;let x=S("bodycopy",{style:{"--fit-height":g+"px","--resize-parent-width":this.state.resizeParentWidth},ref:this.bodycopyRef,dangerouslySetInnerHTML:typeof v=="string"?{__html:v}:void 0,children:Dc(v)?v:null});o=S(zf,{pageRef:this.pageRef,value:this.getPageInfoContextValue(),children:S("div",{className:"page-layout",ref:this.pageLayoutRef,children:S("div",{className:`page-content${this.props?.local_css?.includes("--page-content-backdrop-filter")?" has-content-backdrop-filter":""}`,ref:this.pageContentRef,style:l,children:[this.props.adminMode&&this.props.Editor_PageEditorOutlines!==!1&&S(uz,{bodycopyRef:this.bodycopyRef,pageTitle:this.props.title,pageContent:this.props.content,pageIsPin:this.isPinned,isEditingPage:this.props.isEditingPage,editPage:this.editPage}),S(Vm,{pageInfo:this.getPageInfoContextValue(),adminMode:this.props.adminMode,bodycopyRef:this.bodycopyRef,children:[S(Po,{portalHost:x}),x]})]})})})}let d=!0;return(i?.fixed||this.props.isOverlay)&&(d=!1),this.state.renderSparseHeightDiv&&(s=s||{},s.height=this.state.lastPageContainerHeight+"px",s.overflow="hidden"),n=S("div",{id:this.props.pid,"page-url":this.props.purl?.toLowerCase(),className:`page${a!==null?a:""}${this.props.stackedPage?" stacked-page":""}${this.props?.local_css?.includes("--page-backdrop-filter")?" has-backdrop-filter":""}`,ref:this.pageRef,style:{...s},editing:this.props.isEditingPage,children:[e&&S(sz,{id:this.props.pid,settings:this.props.backdrops}),S("a",{id:this.props.purl}),S(uu,{passthrough:d,scrollingElement:this.props.isOverlay?this.overlayContentRef:this.pageContentRef,children:[this.state.renderSparseHeightDiv&&S("div",{style:{height:this.state.lastPageContainerHeight+"px"}}),o]}),S("style",{ref:this.localStyleRef,children:this.props.local_css}),S("style",{id:`mobile-offset-styles-${this.props.pid}`,children:this.state.mobileOffsetsString})]}),this.props.isOverlay===!0?S("div",{ref:this.overlayContentRef,className:"overlay-content "+f,style:p,children:n}):n}componentDidUpdate=(e,r)=>{this.bindObservers(),this.setPinProperties(e),this.props.isOverlay===!0&&(this.setOverlayScrollability(),this.state.overlayContentFromTransformValue!==null&&this.overlayContentRef?.current?.classList.contains("overlay-open")===!1&&this.props.overlayOptions?.animateOnOpen!==!1&&this.props.overlayOptions?.animateOnOpen?.speed!==0&&(this.overlayContentRef?.current?.classList.add("overlay-open"),this.overlayContentRef?.current?.classList.add("overlay-animating"))),e.content===void 0&&this.props.content!==e.content&&(this.checkAndSetActiveLinks(),this.fetchCommerceProductsByLink(),ep.findEmbedsIn(this.pageRef.current)),this.state.fullyRender===!0&&r.fullyRender===!1?this.onFullComponentRender():this.state.fullyRender===!1&&r.fullyRender===!0&&this.onSparseComponentRender(),(e.activePURL!==this.props.activePURL||e.hashPurl!==this.props.hashPurl||e.activePID!==this.props.activePID||e.adminMode!==this.props.adminMode)&&(this.checkAndSetActiveLinks(),this.temporarySafariRenderingFix()),this.props.local_css!==e.local_css&&this.setMobileOffsets(),this.props.globalStylesheet!==e.globalStylesheet&&this.setMobileOffsets(),e.isMobile!==this.props.isMobile&&this.setMobileOffsets(),this.props.position!==e.position&&(this.isAboveViewport=this.props.position==="above",this.onResize(this.pageRef.current.getBoundingClientRect()))};shouldComponentUpdate(e,r,i){return!(this.props===e&&this.state===r&&this.context===i||this.hasOwnProperty("lockedContent")&&this.props.content!==e.content&&Lf({...this.props,content:null},{...e,content:null})&&this.state===r&&this.context===i)}setPinProperties=e=>{if(this.props.isPin&&this.pageRef.current){if(this.props.adminMode&&Ci.default.isEqual(this.props.pin_options,e.pin_options)===!1&&(this.pageRef.current.scrollIntoView(),this.props.pin_options.position==="bottom")){let r=this.context.adjustPairs[this.props.pid];if(r&&r.adjusts){let i=document.body.querySelector("[id='"+r.adjusts[0]+"']");requestAnimationFrame(()=>{i.scrollIntoView({block:"end"})})}}this.props.pin_options.fixed===!0&&this.setFixedPinScrollability(),this.props.pin_options.overlay===!0&&this.props.local_css!==""&&this.checkBackgroundColor()}};checkBackgroundColor=Ci.default.debounce(()=>{if(!this.pageRef.current)return;!(this.props.backdrops?.activeBackdrop&&this.props.backdrops?.activeBackdrop!="none")&&this.hasNoBackgroundColor(this.pageRef.current)?this.pageRef.current.classList.remove("accepts-pointer-events"):this.pageRef.current.classList.add("accepts-pointer-events");let r=this.pageRef.current?.querySelector(".page-content");this.hasNoBackgroundColor(r)?r.classList.remove("accepts-pointer-events"):r.classList.add("accepts-pointer-events")},100);hasNoBackgroundColor=e=>{if(e==null)return!1;let r=window.getComputedStyle(e,null),i=r.getPropertyValue("background-color"),n=i.match("rgba")?i.replace(/^.*,(.+)\)/,"$1"):null;return i==null||i=="transparent"||i=="initial"||n==0};setFixedPinScrollability=()=>{if(!this.pageRef.current)return;let e=this.pageContentRef.current,r=this.bodycopyRef.current;e&&r&&r.clientHeight>e.clientHeight?this.pageRef.current.classList.add("allow-scroll"):this.pageRef.current.classList.remove("allow-scroll")};setOverlayScrollability=()=>{this.overlayContentRef.current&&(this.overlayContentRef.current.scrollHeight>this.overlayContentRef.current.offsetHeight+1?this.overlayContentRef.current.classList.add("overlay-allow-scroll"):this.overlayContentRef.current.classList.remove("overlay-allow-scroll"))};checkAndSetActiveLinks=e=>{if(!this.pageRef.current)return;let r=e?.detail?.filter;r?.startsWith("tag:")?r=r.replace("tag:","").trim():r?r="all":r=null;let i=this.props.inAdminFrame&&this.props.adminMode===!0;if(this.props.isEditingPage&&!i)return;let n=this.pageRef.current.querySelectorAll('[rel="history"], [rel="filter-index"], [rel="home-page"]'),o=this.props.activePURL===this.props.homepagePURL||this.props.activePID==="root";Ci.default.each(n,s=>{let a=s.getAttribute("href")?.toLowerCase().replace(/^#/,""),l=this.props.homepagePURL===a||s.getAttribute("rel")==="home-page",p=this.props.activePURL&&a===this.props.activePURL||this.props.hashPurl&&a===this.props.hashPurl||this.props.activePurlParents?.includes(a);!i&&p&&!l?s.classList.add("active"):s.classList.remove("active"),!i&&l&&this.props.enableHomeLinkActiveStates&&(o?s.classList.add("active"):s.classList.remove("active"))})};bindObservers=(e=!1)=>{(this.pageRef.current!==this.lastPageRef.current||e)&&(this.lastPageRef.current&&(sa.delete(this.lastPageRef.current),hs.unobserve(this.lastPageRef.current),og.unobserve(this.lastPageRef.current),Lx.unobserve(this.lastPageRef.current)),this.pageRef.current&&!e&&(sa.set(this.pageRef.current,this),hs.observe(this.pageRef.current),og.observe(this.pageRef.current),Lx.observe(this.pageRef.current)),this.lastPageRef.current=this.pageRef.current),(this.pageLayoutRef.current!==this.lastPageLayoutRef.current||e)&&(this.lastPageLayoutRef.current&&(ng.delete(this.lastPageLayoutRef.current),hs.unobserve(this.lastPageLayoutRef.current)),this.pageLayoutRef.current&&!e&&(ng.set(this.pageLayoutRef.current,this),hs.observe(this.pageLayoutRef.current)),this.lastPageLayoutRef.current=this.pageLayoutRef.current),(this.pageContentRef.current!==this.lastPageContentRef.current||e)&&(this.lastPageContentRef.current&&(tp.delete(this.lastPageContentRef.current),hs.unobserve(this.lastPageContentRef.current)),this.pageContentRef.current&&!e&&(tp.set(this.pageContentRef.current,this),hs.observe(this.pageContentRef.current)),this.lastPageContentRef.current=this.pageContentRef.current),(this.bodycopyRef.current!==this.lastBodycopyRef.current||e)&&(this.lastBodycopyRef.current&&(this.lastBodycopyRef.current.removeEventListener("filter-thumbnail-index",this.checkAndSetActiveLinks),this.lastBodycopyRef.current.removeEventListener("new-thumbnails-rendered",this.checkAndSetActiveLinks),ig.delete(this.lastBodycopyRef.current),hs.unobserve(this.lastBodycopyRef.current)),this.bodycopyRef.current&&!e&&(ig.set(this.bodycopyRef.current,this),hs.observe(this.bodycopyRef.current),this.bodycopyRef.current.addEventListener("filter-thumbnail-index",this.checkAndSetActiveLinks),this.bodycopyRef.current.addEventListener("new-thumbnails-rendered",this.checkAndSetActiveLinks)),this.lastBodycopyRef.current=this.bodycopyRef.current)};componentDidMount(){this.isAboveViewport=this.props.position==="above",this.onWindowResize(),ot.on("window-resize",this.onWindowResize),this.state.fullyRender===!0&&this.onFullComponentRender(),this.pageRef.current&&(this.onResize(this.pageRef.current.getBoundingClientRect()),this.context.onPageMount(this.pageRef.current),ep.findEmbedsIn(this.pageRef.current),Dx&&Dx.observe(this.pageRef.current,{childList:!0,subtree:!0}),this.pageRef.current.addEventListener("dom-binding-initialized",()=>{ep.findEmbedsIn(this.pageRef.current)}),this.props.isOverlay&&(window.setTimeout(this.setOverlayContentTransformValues,100),this.calculateOverlayPassthroughClasses(),this.pageRef.current.addEventListener("animationend",this.calculateOverlayPassthroughClasses)),this.temporarySafariRenderingFix())}calculateOverlayPassthroughClasses=()=>{if(!this.pageRef.current||!this.pageContentRef.current)return;let e=window.getComputedStyle(this.pageRef.current,null),r=window.getComputedStyle(this.pageContentRef.current,null),i=e.getPropertyValue("background-color"),n=r.getPropertyValue("background-color"),o=this.props.isOverlay&&(i==="transparent"||i==="initial"||i==="rgba(0, 0, 0, 0)"),s=this.props.isOverlay&&(n==="transparent"||n==="initial"||n==="rgba(0, 0, 0, 0)")&&i.startsWith("rgba(");o?this.overlayContentRef.current.classList.add("is-passthrough-overlay"):this.overlayContentRef.current.classList.remove("is-passthrough-overlay"),s?this.overlayContentRef.current.classList.add("is-content-passthrough-overlay"):this.overlayContentRef.current.classList.remove("is-content-passthrough-overlay")};temporarySafariRenderingFix=()=>{this.props.adminMode||setTimeout(()=>{!pe&&cn()&&this.props?.pin_options?.position==="bottom"&&(this.pageRef?.current?.classList.add("loading"),setTimeout(()=>{this.pageRef?.current?.classList.remove("loading")},1200))},10)};onFullComponentRender(){if(this.pageLayoutRef.current){let e=function(r){r.childNodes.forEach(i=>i.setSaveable(!0));for(let i of r.childNodes)e(i)};e(this.pageLayoutRef.current)}this.pageRef.current&&(this.initializeScriptTags(),this.props.pageMounted(this.pageRef.current).then(()=>{this.checkAndSetActiveLinks(),this.fetchCommerceProductsByLink()})),this.props.isPin&&this.props.pin_options?.fixed===!0&&this.setFixedPinScrollability(),this.props.isOverlay===!0&&this.setOverlayScrollability(),this.props.isMobile&&this.setMobileOffsets(),this.bindObservers()}componentWillUnmount(){this.pageRef.current&&this.pageRef.current.removeEventListener("animationend",this.calculateOverlayPassthroughClasses),ot.off("window-resize",this.onWindowResize),sa.delete(this.pageRef.current),this.onSparseComponentRender(!0),this.onResize({height:0}),this.context.onPageUnmount(this.pageRef.current)}onSparseComponentRender(e=!1){this.bindObservers(e),this.pageRef.current&&this.props.pageUnMounted(this.pageRef.current)}fetchCommerceProductsByLink=()=>{if(!this.pageRef.current||!this.props.has_shop)return;let e=this.pageRef.current.querySelectorAll('[rel="add-to-cart"], [rel="add_to_cart"]'),r=[];Ci.default.each(e,i=>{let n=i.getAttribute("data-product");n&&r.push(n)}),this.props.fetchCommerceProducts({idArray:r,onlyNew:!0})};initializeScriptTags=()=>{let e=!1,r=function(i){e=!0};window.addEventListener("error",r,!1),Ci.default.each(this.bodycopyRef.current?.querySelectorAll("script"),i=>{if(i.getAttribute("type")==="text/thumbnail-metadata")return;e=!1;let n=document.createElement("script");[...i.attributes].forEach(o=>{n.setAttribute(o.nodeName,o.nodeValue)}),n.innerHTML=i.textContent,i.replaceWith(n),e&&(e=!1,n.parentNode.insertBefore(document.createComment(n.outerHTML),n),n.remove(),this.props.adminMode&&this.props.store.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{message:"One or more scripts on this page are broken and were disabled.",type:"notice"}}}))}),window.removeEventListener("error",r)}};sg.contextType=as;kae=hn((t,e)=>t.map(r=>e[r]?.purl).filter(r=>r&&typeof r=="string").map(r=>r.toLowerCase())),aa=Rn(Ue((t,e)=>{let r=nt.getContentById(t,e.id),i=t.pages.byId[t.frontendState.activePID]||t.sets.byId[t.frontendState.activePID],n,o;return i&&(n=i.purl?.toLowerCase(),o=kae(nt.getParentSetList(t,i.id),t.sets.byId)),!pe&&!n&&(n=window.location.pathname.replace(/^\//,"").toLowerCase()),{inAdminFrame:t.frontendState.inAdminFrame,isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,isEditingPage:r?.id&&t.frontendState.PIDBeingEdited===r?.id,hasPage:r!==void 0,homepagePURL:nt.getHomepagePurl(t),pid:r?.id,purl:r?.purl,isPin:r?.pin,title:r?.title,backdrops:r?.backdrops,content:r?.content,access_level:r?.access_level,local_css:r?.local_css,pin_options:r?.pin_options,PIDBeingEdited:t.frontendState.PIDBeingEdited,hashPurl:t.frontendState.activeHashPurl,globalStylesheet:t.css?.stylesheet,enableHomeLinkActiveStates:t.siteDesign?.site?.enableHomeLinkActiveStates,activePID:t.frontendState.activePID,activePURL:n,activePurlParents:o,pageDepth:nt.getParentSetList(t,e.id).length-1,has_shop:t.site.shop_id!==null,Editor_PageEditorOutlines:t.adminState?.localStorage?.Editor_PageEditorOutlines}},Rae)(sg))});var Fx,fz,mz=V(()=>{ke();ag();fe();Fx=class t extends me{constructor(e){super(e)}render=()=>{let e=this.props.childNodes.filter(i=>i.parent===this.props.id),r=e.filter(i=>i.content.page_type=="page").length>1;return S("div",{"data-container":"set","data-id":this.props.id,children:e.map((i,n)=>i.content.page_type==="set"?S(t,{id:i.content.id,childNodes:this.props.childNodes,contentPad:this.props.contentPad},i.content.id):S(aa,{id:i.content.id,position:i.position,contentPad:this.props.contentPad,stackedPage:r},i.content.id))})}},fz=Fx});var sMe,zx,lg,Bx=V(()=>{ke();sMe=ye(Pe(),1);fe();zx=class extends me{constructor(e){super(e)}render=()=>S(ce,{children:[S("style",{children:`
					body {
						letter-spacing: 0;
						padding: 30px;
						color: rgba(0,0,0,.85);
						font-size: 18px;
						line-height: 1;
						font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons;
					}
				`}),this.props.message]})},lg=zx});var gz,vz=V(()=>{gz={closeOnClickout:!1,closeOnNavigate:!1,animateOnOpen:{fade:!1,speed:0,slideAmount:0,slideDirection:"default",wipeShape:"default",easing:"linear",scaleAmount:0,rotateAmount:0},animateOnClose:{fade:!1,speed:0,slideAmount:0,slideDirection:"default",wipeShape:"default",easing:"linear",scaleAmount:0,rotateAmount:0}}});function Lae(t,e){return{adminMode:t.frontendState.adminMode,PIDToEdit:t.frontendState.PIDToEdit,overlayBeingPreviewed:t.frontendState.overlayBeingPreviewed,overlayOptionsByPID:Dae(t.pages.byId),sortMap:t.structure.bySort,autoRenderableOverlays:nt.getAutoRenderableOverlaysForSet(t,e.pinContextPID,e.match?.params?.page)}}function Fae(t){return zt({fetchContent:Ge.fetchContent},t)}var pMe,fs,Nae,$x,Qr,jx,Oae,Dae,qx,Jr,ug,Zi,cg,Ux,Hx,yz,bz,Wx,Vx,dg,wz,pg=V(()=>{ke();pMe=ye(Mn(),1);ft();xr();tr();is();fs=ye(Pe(),1);Be();Pr();ag();vz();_i();Br();Ya();fe();Nae={top:0,bottom:0},$x=new Array,Qr={closeOverlay:()=>{},openOverlay:()=>{},getOverlay:()=>{},toggleOverlay:()=>{},handleGlobalClick:()=>{},getAllOverlays:()=>{}},jx=class extends me{constructor(e){super(e),this.state={activeOverlays:[]},this.intermediateActiveOverlays=this.state.activeOverlays,Qr.openOverlay=this.openOverlay,Qr.closeOverlay=this.closeOverlay,Qr.toggleOverlay=this.toggleOverlay,Qr.getOverlay=this.getOverlay,Qr.handleGlobalClick=this.handleGlobalClick,Qr.getAllOverlays=this.getAllOverlays}componentDidMount(){requestAnimationFrame(()=>{this.autoRenderOverlays()})}autoRenderOverlays=(e=[])=>{if(this.props.adminMode){let s=this.props.store.getState(),a=[this.props.PIDToEdit,this.props.overlayBeingPreviewed].filter(l=>!!l&&s.pages.byId[l]?.overlay===!0);a.includes(this.props.PIDToEdit)&&this.openOverlay(this.props.PIDToEdit),this.state.activeOverlays.forEach(l=>{a.includes(l.pid)||this.closeOverlay(l?.pid)});return}let r=this.props.autoRenderableOverlays.map(s=>s.id),i=e.map(s=>s.id),n=fs.default.difference(i,r),o=fs.default.difference(r,i);n.forEach(s=>{this.closeOverlay(s)}),o.sort((s,a)=>this.props.sortMap[a]-this.props.sortMap[s]),o.forEach(s=>{this.openOverlay(s)})};componentDidUpdate=(e,r)=>{if((this.props.autoRenderableOverlays!==e.autoRenderableOverlays||this.props.adminMode&&!e.adminMode)&&this.autoRenderOverlays(e.autoRenderableOverlays),this.props.adminMode!==e.adminMode&&this.autoRenderOverlays([]),this.state.activeOverlays!==r.activeOverlays){let i=fs.default.difference(this.state.activeOverlays,r.activeOverlays),n=fs.default.difference(r.activeOverlays,this.state.activeOverlays);if($x=[...this.state.activeOverlays],dg(),i.length>0)for(let o of i)(o.getOverlayOptions().animateOnOpen||o.getOverlayOptions().animateOnClose)&&o.ref?.current?.base.addEventListener("animationend",this.handleAnimationEnd)}};componentWillUnmount=()=>{};handleGlobalClick=(e,r)=>{if(this.props.adminMode||r.closest(".quick-view")||document.querySelector(".alert-window"))return;let o=r.closest(".page-content")?.closest(".page")?.getAttribute("id"),s=this.state.activeOverlays.find(g=>g.pid===o),a=this.state.activeOverlays[this.state.activeOverlays.length-1],l=this.props.store.getState(),p=!!(this.target&&this.target.closest(".overlay-content")),f=Object.keys(l?.pages?.byId).some(g=>{let v=l.pages.byId[g];if(!v.overlay)return!1;let x=e.getAttribute("href")?.replace(/\//,"");return v.purl===x}),d=l.pages.byId[a?.pid]?.purl,m=e?.getAttribute("href")?.replace(/\//,"");if(this.state.activeOverlays.some(g=>g.getOverlayOptions().closeOnNavigate)&&e.hasAttribute("href")&&(e.getAttribute("rel")==="history"||e.getAttribute("rel")==="home-page")&&e.getAttribute("href").replace(/\//,"").toLowerCase()!=="contact-form"&&!l.frontendState.contactForm.inited&&!l.frontendState.cartOpen&&f===!1){requestAnimationFrame(()=>{window.__deferred_page_load_promise__?window.__deferred_page_load_promise__.then(()=>{requestAnimationFrame(()=>{this.state.activeOverlays.forEach(g=>{g.getOverlayOptions().closeOnNavigate&&this.closeOverlay(g.pid)})})}):s?this.closeOverlay(s.pid):this.state.activeOverlays.forEach(g=>{g.getOverlayOptions().closeOnNavigate&&this.closeOverlay(g.pid)})});return}if(a&&a.getOverlayOptions().closeOnClickout===!0&&!l.frontendState.contactForm.inited&&!l.frontendState.cartOpen&&o!==a?.pid&&e.tagName!=="A"){this.closeOverlay(a?.pid);return}};handleAnimationEnd=e=>{if(e.target.classList.contains("page"))switch(e.animationName){case"overlayOpen":case"overlayOpenWithoutOpacity":{let r=e.target.closest(".overlay-animating");r&&r?.classList?.remove("overlay-animating"),e.target.classList.remove("overlay-open");break}case"overlayClose":case"overlayCloseWithoutOpacity":{setTimeout(()=>{let i=e.target.closest(".overlay-animating");i&&i?.classList?.remove("overlay-animating")},101),e.target.classList.remove("overlay-close");let r=e.target.getAttribute("id");this.closeOverlay(r,!0);break}}};openOverlay=(e,r={})=>{!e||this.getOverlay(e)||(this.intermediateActiveOverlays=[...this.intermediateActiveOverlays,{pid:e,ref:xe(),getOverlayOptions:()=>Oae(e,this.props.overlayOptionsByPID[e],r)}],this.setState({activeOverlays:this.intermediateActiveOverlays}))};closeOverlay=(e,r=!1)=>{if(e){if(r===!1){let i=this.getOverlay(e);if(!i)return;let n=i.getOverlayOptions();if(i.ref?.current?.base&&n?.animateOnClose?.speed>0){i.ref.current.base.classList.add("overlay-close"),i.ref.current.base.classList.add("overlay-animating");return}}this.intermediateActiveOverlays=this.intermediateActiveOverlays.filter(i=>i.pid!==e),this.setState({activeOverlays:this.intermediateActiveOverlays})}};toggleOverlay=(e,r)=>{this.getOverlay(e)?this.closeOverlay(e):this.openOverlay(e,r)};getAllOverlays=()=>this.intermediateActiveOverlays;getOverlay=e=>this.intermediateActiveOverlays.find(r=>r.pid===e);render(){return this.state.activeOverlays.map(({pid:e,getOverlayOptions:r,ref:i})=>S(aa,{id:e,contentPad:Nae,isOverlay:!0,overlayOptions:r(),ref:i},e))}},Oae=hn((t,e,r)=>fs.default.merge({},gz,e,r)),Dae=hn(t=>t=fs.default.mapValues(t,e=>e.overlay_options));if(!pe){qx=null,Jr=null,ug=!1,Zi=!1,cg=null,Ux=m=>{if(clearTimeout(qx),qx=setTimeout(()=>{ug=!1,Zi=!1},200),!ug){let g=[...$x].reverse().map(x=>document.getElementById(x.pid)?.closest(".overlay-content:not(.overlay-animating)")),v=g.find(x=>x?.contains(m));if(Jr=null,v)if(v.classList.contains("overlay-allow-scroll"))Jr=v,Zi=!0;else{let x=g[0].classList?.contains("overlay-allow-scroll")?g[0]:null;if(x)Jr=x,Zi=!0;else{let _=v.querySelector(".page-content")?.contains(m),E=v.querySelector(".backdrop");!_&&!v.classList.contains("is-passthrough-overlay")||E||_&&!v.classList.contains("is-content-passthrough-overlay")?(Zi=!0,Jr=null):(Zi=!1,Jr=null)}}else{let x=g.find((_,E)=>_?.classList?.contains("overlay-allow-scroll")??!1);x?(Jr=x,Zi=!0):(Zi=!1,Jr=null)}ug=!0}};let t=0,e=0,r=null,i=null,n,o=null,s=0,a=null,l=!1,p=!1,f=!1,d=0;Hx=m=>{t=cg-m.touches[0].clientY,e=e*.8+t*.2,cg=m.touches[0].clientY,clearTimeout(r),r=setTimeout(()=>{t=0},300),Jr&&(Jr.scrollTop=Jr.scrollTop+t),(Zi||l)&&(Zi=!0,m.preventDefault(),m.stopPropagation()),Zi&&(document.scrollingElement.scrollTop=s)},yz=m=>{t=m.deltaY,Ux(m.target),Zi&&m.preventDefault(),Jr&&(Jr.scrollTop=Jr.scrollTop+t)},bz=()=>{f||(f=!0,s=document.scrollingElement.scrollTop,document.scrollingElement.style.overflow="hidden",document.scrollingElement.style.overscrollBehavior="none",document.scrollingElement.scrollTop=s)},Wx=fs.default.debounce(()=>{f&&(f=!1,document.scrollingElement.style.overflow="",document.scrollingElement.style.overscrollBehavior="",document.scrollingElement.scrollTop=s)},150),Vx=m=>{if(!i){Wx();return}let g=n==0?16:m-n;n=m,e=e*.97;let v=i.scrollTop;i.scrollTop=i.scrollTop+e*(g/16.667),i.scrollTop-v!=0?d=0:d++,o=requestAnimationFrame(Vx),(Math.abs(e)<.5||d>15)&&(i=null)},window.addEventListener("wheel",yz,{passive:!1}),window.addEventListener("touchstart",m=>{if(d=0,p=!1,i=null,cancelAnimationFrame(o),Ux(m.touches[0].target),e=0,t=0,a=m.touches[0].clientY,l=m.touches[0].target.closest(".overlay-content"),l){let g=l.querySelector(".page-content")?.contains(m.touches[0].target),v=l.querySelector(".backdrop");(!g&&l.classList.contains("is-passthrough-overlay")&&!v||g&&l.classList.contains("is-content-passthrough-overlay"))&&(l=null)}(Jr||l)&&(bz(),cg=m.touches[0].clientY,document.body.addEventListener("touchmove",Hx,{passive:!1}))}),document.body.addEventListener("click",m=>{p=!0}),document.body.addEventListener("touchend",m=>{document.body.removeEventListener("touchmove",Hx,{passive:!1}),Jr&&Math.abs(e)>2?(i=Jr,clearTimeout(r),n=window?.performance?.now?.()??0,e=t*.8+e*.2,o=requestAnimationFrame(Vx)):Wx();let g=a-m.changedTouches[0].clientY;if(!i&&Math.abs(g)<10&&Zi){let v=m.changedTouches[0].target;setTimeout(()=>{p||Qr.handleGlobalClick(v,v)},330)}},{passive:!1}),ot.on("window-resize",()=>{dg()}),dg=fs.default.debounce(()=>{let m=[...$x].reverse(),g=m.findIndex(v=>{let x=v.ref?.current?.base.closest(".overlay-content");return x?x.classList.contains("overlay-allow-scroll")&&!x.classList.contains("overlay-close"):!1});m.forEach((v,x)=>{let _=v.ref?.current?.base.closest(".overlay-content");_&&(x==0?_.classList.add("top-overlay"):_.classList.remove("top-overlay"),g==-1?(_.classList.remove("top-scrollable-overlay"),_.classList.remove("behind-top-scrollable-overlay")):x>g?(_.classList.remove("top-scrollable-overlay"),_.classList.add("behind-top-scrollable-overlay")):x==g?(_.classList.add("top-scrollable-overlay"),_.classList.remove("behind-top-scrollable-overlay")):(_.classList.remove("top-scrollable-overlay"),_.classList.remove("behind-top-scrollable-overlay")))}),g>-1?document.body.classList.add("has-scrollable-overlay"):document.body.classList.remove("has-scrollable-overlay")},30),dg()}wz=Rn(Wn(Ue(Lae,Fae)(jx)))});function qae(t,e){let r=e.idType==="purl"?nt.getContentByPurl(t,e.id):nt.getContentById(t,e.id),i,n=null,o=null;if(!r){let s=!1;if(t.frontendState.networkErrors.find(a=>a.id===e.id&&a.idType===e.idType&&a)!==void 0||t.frontendState.inAdminFrame){if(e.idType==="purl"&&(i=t.site.tags.find(a=>a.url===e.id),!i)){for(let a in t.pages.byId)if(i=t.pages.byId[a].tags.find(l=>l.url===e.id),i)break}i||(s=!0)}if(s)return{content:null,pageNotFound:s}}if(r)if(r.page_type==="set"){n=r.id;let s=nt.getContentByPurl(t,e.hashPurl),a=t.structure.indexById[s?.id]||0,l=t.sets.byId[nt.getItemParentId(t,s?.id)]||r;o=Bae(t.structure,t.pages,t.sets,l,a,Yx(nt.getSetsByParent(t),n))}else n=nt.getItemParentId(t,r.id);else i&&(n="root",o=Object.values(t.pages.byId).filter(s=>t.structure.indexById[s.id]===null||s.crdt_state===er.Deleted?!1:s.tags.some(a=>a.tag===i.tag)).map(s=>({content:s,position:"below"})),o.sort((s,a)=>t.structure.bySort[s.content.id]-t.structure.bySort[a.content.id]));return{tag:i,hasContent:r!==void 0,contentId:r?.id,contentType:r?.page_type,contentTitle:r?.title,contentPurl:r?.purl,contentIsStack:r?.stack,contentIsPin:r?.pin,contentIsOverlay:r?.overlay,contentCRDTState:r?.crdt_state,children:o,parentSetPID:n,isFeed:t.sets.byId.root.stack,topPins:nt.getPinsForSet(t,n,"top",r?.id),bottomPins:nt.getPinsForSet(t,n,"bottom",r?.id),adminMode:t.frontendState.adminMode}}function Uae(t){return zt({fetchContent:Ge.fetchContent,fetchPagesByTag:Ge.fetchPagesByTag,fetchSitePackage:Ge.fetchSitePackage,updateFrontendState:Ge.updateFrontendState},t)}var xz,Oo,zae,Gx,Kx,hg,Yx,Sz,Bae,Xx,Zx=V(()=>{ke();xr();ft();xz=ye(Uh(),1);Ya();Oo=ye(Pe(),1);la();tr();Be();Pr();Bt();ag();mz();Bx();Ed();_i();pg();fe();zae=async t=>{let e=[];if(!t.hasContent){let r=t.fetchContent(t.id,{idType:t.idType});e.push(r)}pe&&e.push(Sz(t,{up:!1,down:!0})),await Promise.allSettled(e).catch(r=>{})},Gx={top:0,bottom:0},Kx=10,hg=class extends me{constructor(e){super(e),this.contentRef=xe(),this.contentParentRef=xe(),this.topPaginationWatcherRef=xe(),this.bottomPaginationWatcherRef=xe(),this.paginationLimitsTriggered={up:!1,down:!1},this.state={contentPad:Gx,pageRenderLimits:{above:this.props.hashPurl?25:0,below:25},completedPaginationAbove:!1,completedPaginationBelow:!1},pe||(this.paginationObserver=new IntersectionObserver(this.onPaginationObserverCallback,{root:document,rootMargin:screen.height*2+"px",threshold:[0,1]}),this.resizeObserver=new ResizeObserver(r=>{r.forEach(i=>{var n=window.getComputedStyle(i.target);let o=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top")),s=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top"));(o!==this.state.contentPad.top||s!==this.state.contentPad.bottom)&&this.setState({contentPad:{top:o,bottom:s}})})})),this.props.hasContent&&this.props.updateFrontendState({activePID:this.props.contentId,activeTag:void 0,activeHashPurl:this.props.hashPurl})}getContentByPosition(e){return this.props.children?.filter(r=>r.position===e)||[]}getPageStack(){let e=this.getPageContainerPinOffsets(),r=[];return this.props.topPins.forEach(i=>{r.push(S(aa,{id:i.id,contentPad:Gx,stackedPage:this.props.topPins.length>1},i.id))}),this.renderedChildren=[...Oo.default.takeRight(this.getContentByPosition("above"),this.state.pageRenderLimits.above),...Oo.default.take(this.getContentByPosition("below"),this.state.pageRenderLimits.below)],r.push(S("div",{className:"pages",ref:this.contentRef,style:e,children:this.props.contentType==="set"||this.props.tag?!this.props.tag&&this.props.isFeed!==!0&&this.props.contentIsStack!==!0?null:S(ce,{children:[S("div",{className:`pagination-watcher ${this.state.completedPaginationAbove?"pagination-complete":""}`,"data-direction":"up",ref:this.topPaginationWatcherRef},"pagination_watcher_up"),S(fz,{id:this.props.contentId,childNodes:this.renderedChildren,contentPad:this.state.contentPad},this.props.contentId),S("div",{className:`pagination-watcher ${this.state.completedPaginationBelow?"pagination-complete":""}`,"data-direction":"down",ref:this.bottomPaginationWatcherRef},"pagination_watcher_down")]},"page_container_fragment"):this.props.contentIsPin||this.props.contentIsOverlay?null:S(aa,{id:this.props.contentId,contentPad:this.state.contentPad,stackedPage:!1},this.props.contentId)},"page_container")),this.props.bottomPins.forEach(i=>{r.push(S(aa,{id:i.id,contentPad:Gx,stackedPage:this.props.bottomPins.length>1},i.id))}),r}render(){if(this.props.pageNotFound)return S(lg,{message:"Page not found."});if((!this.props.hasContent||this.props.contentCRDTState===er.Deleted)&&!this.props.tag)return null;let e=this.getPageStack();return S("div",{className:"content",ref:this.contentParentRef,children:[S(wz,{pinContextPID:this.props.parentSetPID}),e]})}bindContentParent=()=>{this.resizeObserver&&this.contentParentRef.current&&!this.state.contentParentRef&&(this.resizeObserver.observe(this.contentParentRef.current),this.setState({contentParentRef:this.contentParentRef.current}))};componentDidMount(){this.bindContentParent(),this.attachPaginationWatchers(),this.props.hasContent&&this.props.updateFrontendState({activePID:this.props.contentId,activeTag:void 0,activeHashPurl:this.props.hashPurl})}shouldComponentUpdate(e,r,i){if(this.props===e&&this.state===r&&this.context===i)return!1;if(this.props.contentId!==e.contentId||this.props.hashPurl!==e.hashPurl||this.props.tag!==e.tag){let n=e.hashPurl&&this.props.hashPurl!==e.hashPurl;this.setState({pageRenderLimits:{above:n?25:0,below:25}})}return!0}componentDidUpdate(e,r,i){this.bindContentParent(),!this.props.adminMode&&e.contentCRDTState!==er.Deleted&&this.props.contentCRDTState===er.Deleted&&(this.props.updateFrontendState({alertModal:{message:"Page not found",type:"notice"}}),to.replace("/"+e.contentPurl||"/")),this.props.id&&e.id!==this.props.id&&this.props.fetchContent(this.props.id,{idType:this.props.idType}),this.props.tag&&e.tag!==this.props.tag&&(this.props.updateFrontendState({activePID:void 0,activeTag:this.props.tag}),this.requestPagination()),this.props.hashPurl!==e.hashPurl&&this.props.updateFrontendState({activeHashPurl:this.props.hashPurl}),this.props.hasContent&&this.props.contentId!==e.contentId&&(this.props.updateFrontendState({activePID:this.props.contentId,activeTag:void 0}),this.requestPagination()),this.attachPaginationWatchers(),this.props.pageNotFound!==e.pageNotFound&&this.props.updateFrontendState({pageNotFound:this.props.pageNotFound})}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.unobserve(this.contentParentRef.current),this.paginationObserver&&this.paginationObserver.disconnect(),this.props.updateFrontendState({activePID:void 0,activeTag:void 0,activeHashPurl:""})}attachPaginationWatchers(){this.paginationObserver&&this.topPaginationWatcherRef.current&&this.bottomPaginationWatcherRef.current?(this.topPaginationWatcherRef.current!==this.topPaginationWatcherEl&&(this.topPaginationWatcherEl&&this.paginationObserver.unobserve(this.topPaginationWatcherEl),this.paginationObserver.observe(this.topPaginationWatcherRef.current),this.topPaginationWatcherEl=this.topPaginationWatcherRef.current),this.bottomPaginationWatcherRef.current!==this.bottomPaginationWatcherEl&&(this.bottomPaginationWatcherEl&&this.paginationObserver.unobserve(this.bottomPaginationWatcherEl),this.paginationObserver.observe(this.bottomPaginationWatcherRef.current),this.bottomPaginationWatcherEl=this.bottomPaginationWatcherRef.current)):(delete this.topPaginationWatcherEl,delete this.bottomPaginationWatcherEl)}onPaginationObserverCallback=e=>{let r=!1;e.forEach(i=>{let n=i.target.dataset.direction;i.isIntersecting?(this.paginationLimitsTriggered[n]=!0,r=!0):this.paginationLimitsTriggered[n]=!1}),r&&this.requestPagination()};requestPagination=async()=>{if(this.isPaginating)return;this.isPaginating=!0;let e=0;for(;this.isPaginating;){if(e++>25){console.log("Exceeded max consecutive pagination attempts...");break}(this.paginationLimitsTriggered.up||this.paginationLimitsTriggered.down)&&this.setState({pageRenderLimits:{above:(this.state.pageRenderLimits.above||0)+(this.paginationLimitsTriggered.up?Kx:0),below:(this.state.pageRenderLimits.below||0)+(this.paginationLimitsTriggered.down?Kx:0)}}),await Sz(this.props,this.paginationLimitsTriggered).then(r=>{let i=r.length===0&&!(this.paginationLimitsTriggered.up&&this.state.pageRenderLimits.above<this.getContentByPosition("above").length),n=r.length===0&&!(this.paginationLimitsTriggered.down&&this.state.pageRenderLimits.below<this.getContentByPosition("below").length);this.setState({completedPaginationAbove:i,completedPaginationBelow:n}),i&&n&&(this.isPaginating=!1)}).catch(r=>{console.error(r),this.isPaginating=!1}),this.props.tag&&(this.isPaginating=!1,this.setState({pageRenderLimits:{above:9e9,below:9e9}})),await new Promise(r=>setTimeout(r,250))}};getPageContainerPinOffsets=()=>{let e={marginTop:0,marginBottom:0};if(pe)return e;let r=i=>(i.hasOverlayPins&&!i.adjustsSelf&&i.adjusterId!==null?i.totalHeight:0)-(i.adjustedLevel==="content"?i.adjusterHeight:0);return Oo.default.each(this.context.levelData.levels,(i,n)=>{e.marginTop+=r(i.top),e.marginBottom+=r(i.bottom)}),e}},Yx=(t,e,r=[])=>(r.push(e),t[e]?.forEach(i=>{Yx(t,i,r)}),r),Sz=(t,e,r={})=>new Promise((i,n)=>{if(!t||!e)return n("Missing pagination parameters");if(t.tag)return t.fetchPagesByTag(t.tag.url).then(i).catch(n);let o=t.store.getState(),s=[];if(Oo.default.each(e,(a,l)=>{if(!a)return;let p,f;if(l==="up"){let g=Oo.default.first(t.children);g&&(f=g.index,p=g.parent)}else if(l==="down"){let g=Oo.default.last(t.children);g?(f=g.index,p=g.parent):t.contentType==="set"&&(f=0,p=t.contentId)}if(p===void 0||f===void 0)return;let d=0,m=Yx(nt.getSetsByParent(o),t.parentSetPID);ss(o.structure,o.pages,o.sets,o.sets.byId[p],f,{reverse:l==="up",callback:(g,v,x)=>{if(!x&&m.includes(g)&&(s.push({parent:g,index:v}),d++),d>=Kx)return"break"}})}),s.length>0){let a=Oo.default.groupBy(s,"parent"),l=Oo.default.map(a,(p,f)=>t.fetchContent(f,{indexes:Oo.default.map(p,"index"),idType:"pid"}));Promise.all(l).then(i).catch(n)}else i([])}),Bae=hn((t,e,r,i,n,o)=>{let s=[],a=[],l=r.byId.root.stack;return ss(t,e,r,i,n-1,{reverse:!0,traverseUp:!0,includeSets:!0,callback:(p,f,d)=>{if(!d||!o.includes(p))return"break";d&&(s.unshift({parent:p,index:f,content:d,position:"above"}),a.push(d))}}),ss(t,e,r,i,n,{reverse:!1,traverseUp:!0,includeSets:!0,callback:(p,f,d)=>{if(!d||!o.includes(p))return"break";d&&!a.includes(d)&&s.push({parent:p,index:f,content:d,position:"below"})}}),s});hg.contextType=as;Xx=Rn(Ue(qae,Uae)((0,xz.frontloadConnect)(zae,{onMount:!0,onUpdate:!1})(hg)))});function Hae(t){return zt({pageMounted:Ge.pageMounted,pageUnMounted:Ge.pageUnMounted,updateFrontendState:Ge.updateFrontendState,fetchContent:Ge.fetchContent,fetchCommerceProducts:Ge.fetchCommerceProducts},t)}var ms,al,fg,rp,mg,gs,gg,Jx,_z,Hu,ip,Ez,Cz=V(()=>{ke();xr();ft();tr();ms=ye(Pe(),1);Pr();Ed();zr();Co();Xr();il();Br();kx();Be();rg();_i();fe();al=new WeakMap,fg=new WeakMap,rp=new WeakMap,mg=new WeakMap,_z=t=>{t.forEach(function(e){al.has(e.target)&&al.get(e.target).onAboveViewPort(e)})},Hu=0;pe||(gs=new ResizeObserver(function(t){let e={};_z(gg.takeRecords()),t.forEach(function(r){let i=al.get(r.target);if(i&&(i.onResize(r.contentRect),e[i.props.id]=r.contentRect.height),fg.has(r.target)&&fg.get(r.target).onBodyCopyResize(r.contentRect.width),rp.has(r.target)||mg.has(r.target)){var n=window.getComputedStyle(r.target);let o=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top")),s=parseFloat(n.getPropertyValue("margin-bottom"))+parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("border-bottom"));if(rp.has(r.target)){let a=rp.get(r.target);(a.state.pageContentPad.top!==o||a.state.pageContentPad.bottom!==s)&&a.setState({pageContentPad:{top:o,bottom:s}})}else{let a=mg.get(r.target);(a.state.pageLayoutPad.top!==o||a.state.pageLayoutPad.bottom!==s)&&a.setState({pageLayoutPad:{top:o,bottom:s}})}}}),Hu!==0&&(document.scrollingElement.scrollTop+=Hu,Hu=0)}),gg=new IntersectionObserver(_z,{root:document,rootMargin:"0px 0px 0px 0px",threshold:[0,1]}),Jx=new IntersectionObserver((t,e)=>{t.forEach(function(r){al.has(r.target)&&al.get(r.target).onViewportBoundaryIntersection(r)})},{root:document,rootMargin:Math.max(screen.height*6,2500)+"px",threshold:[0,1]}));ip=class extends me{constructor(e){super(e),this.bodycopyRef=xe(),this.pageContentRef=xe(),this.pageRef=xe(),this.pageLayoutRef=xe(),this.galleryRef=xe(),this.lastBodycopyRef=xe(),this.lastPageContentRef=xe(),this.lastPageRef=xe(),this.lastPageLayoutRef=xe(),this.currentHeight=0,this.state={resizeParentWidth:"100%",mobileOffsetsString:null,pageContentPad:{top:0,bottom:0},pageLayoutPad:{top:0,bottom:0},authorized:pe?null:localStorage.getItem("images-include-offline"),imageSort:"forward",windowHeight:ot.data.window.h,fullyRender:!0,lastPageLayoutHeight:100},this.localStyleRef=xe(),this.scrollingElement={current:pe?null:window}}setMobileOffsets=()=>{if(!this.props.isMobile){this.setState({mobileOffsetsString:null});return}if(!this.localStyleRef.current)return;let e=nu(this.localStyleRef.current.sheet,[{properties:["padding-top","padding-right","padding-bottom","padding-left"],denyList:["ul","ol","li","h1","h2","h3","h4","h5","h6","sub","sup","small-caps"]}]);this.setState({mobileOffsetsString:e})};onBodyCopyResize=e=>{e=parseInt(e),this.lastWidth!==e&&(this.setState({resizeParentWidth:e+"px"}),this.lastWidth=e)};onWindowResize=()=>{this.setState(e=>this.state.windowHeight===ot.data.window.h?null:{windowHeight:ot.data.window.h})};onResize=(e,r=!0)=>{((this.isAboveViewport??this.pageRef.current?.getBoundingClientRect().bottom<1)||this.props.position==="above"&&this.firstResizeOccurred!==!0)&&(Hu+=e.height-this.currentHeight,r||(document.scrollingElement.scrollTop+=Hu,Hu=0)),this.currentHeight=e.height,this.firstResizeOccurred=!0};onAboveViewPort=e=>{e.rootBounds.height!==0&&(this.isAboveViewport=e.boundingClientRect.bottom<0)};onViewportBoundaryIntersection=e=>{let r=e.isIntersecting;pe&&(r=!0),this.setFullRenderState(r)};setFullRenderState=(e,r)=>{this.setState({fullyRender:e,lastPageLayoutHeight:this.pageLayoutRef.current?.getBoundingClientRect().height||100},r)};updateAdminState=e=>{store.dispatch({type:"UPDATE_ADMIN_STATE",payload:e})};zIndexLayerPosition=e=>e?.toString().padStart(2,"0");findPageAdjusteeStatus=e=>{let r={top:null,bottom:null},i=ms.default.pickBy(this.context?.adjustPairs,n=>n.adjusts.indexOf(this.props.pid)!==-1);return ms.default.keys(i).length>0&&ms.default.each(i,function(n){r[n.location]=n.adjustedHeight}),r};getPageInfoContextValue(){return(this.props.isEditingPage!==this.lastProps?.isEditingPage||this.props.pid!==this.lastProps?.pid)&&(this.pageInfoContextValue={isEditing:this.props.isEditingPage,pid:this.props.pid}),this.lastProps=this.props,this.pageInfoContextValue}onItemClick=e=>{if(e.button!==2||!this.state.zoomedOut)return;let r=e?.target.closest("media-item");r&&(e.preventDefault(),this.setState({zoomedOut:!1},()=>{setTimeout(()=>{r?.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:{transitionTime:0,preventQuickViewClose:!0,lazyScroll:!1}})),r.classList.add("hey-listen"),this.flashInterval=setInterval(()=>{r.classList.contains("hey-listen")?r.classList.remove("hey-listen"):r.classList.add("hey-listen")},300),setTimeout(()=>{r.classList.remove("hey-listen"),clearInterval(this.flashInterval)},1200)},0)}),console.log(e))};render(){if(!this.props.hasPage)return null;let e=null,r=!1;if(this.state.fullyRender){let i=this.props.contentPad.top+this.state.pageLayoutPad.top+this.state.pageContentPad.top+this.state.pageContentPad.bottom+this.state.pageLayoutPad.bottom+this.props.contentPad.bottom,n=Math.max(10,this.state.windowHeight-i),o=null;this.props.access_level==="password"?o=S(qu,{target:this.props.pid,onSucces:()=>{this.props.fetchContent(this.props.pid,{force:!0})}}):this.hasOwnProperty("lockedContent")?o=this.lockedContent:o=this.lockedContent=this.props.content,e=S(ce,{children:S(zf,{pageRef:this.pageRef,value:this.getPageInfoContextValue(),children:[S("style",{id:"img-style",children:`
							body.mobile .page-content{
								${this.state.zoomedOut?"padding: 1px 1px 8rem 1px;":"padding: 2rem 2rem 8rem 2rem;"}
							}
							.page-content {
								${this.state.zoomedOut?"padding: 1px;":"padding: 3rem 3rem 8rem 3rem;"}
							}
							body.mobile .caption {
								font-size: 3rem;
							}
							.caption {

							    margin-top: 1rem;
							    font-size: .75rem;
							    font-weight: 400;
							    color: rgba(0, 0, 0, 0.35);
							    font-style: normal;
							    line-height: 1.3;
							}

							.caption a {
							    color: rgba(0, 0, 0, 0.35);
								text-decoration:none;
							}

							.hey-listen::part(media){
			                	opacity: 0.3;
							}
									

							media-item::part(media){
								transition: opacity ease-in-out 0.1s;								
								outline: 1px solid rgba(0,0,0,0.08);
								outline-offset: -1px;
							}

							media-item:hover a.original {
								display: block;
							}
							.caption a.original {
								padding: 8px;
								margin: -8px;
								display:none;
								float: right;
							}

							.quick-view-background {
								background-color: rgba(21,21,21, 0.8);
							}

							body.mobile .sort-controls text-icon {
								height: 5rem;
								border: 1rem solid white;								
							}

							.sort-controls {
								display: grid;
								position: fixed;
								bottom: 1.8rem;
								left: 1.4rem;
								z-index: 1000;
								column-gap: 1px;
								grid-template-columns: 1fr 1fr 1fr 1fr;
								filter: drop-shadow(0px 1px 2px rgba(0,0,0, 0.2));
							}

							.sort-controls text-icon.active {
								color: black;
							}

							.sort-controls text-icon:active {
								transform: translate3d(0px, 2px, 0px);
							}

							.sort-controls text-icon {
								user-select:none;
								transform: translate3d(0px, 0px, 0px);
								transition: .05s transform linear;
								color: #ccc;
								background-color: white;
								border: .5rem solid white;
								border-radius: 100%;
								height: 2.5rem;
								cursor: pointer;
							}

							.sort-controls text-icon.zoom {
								color: black;
							}

							${this.state.zoomedOut?`
							media-item:hover .caption a.page-link {
								display: block;
							}

							media-item .caption {
								margin: 0;
								padding: 0;
								position: absolute;
								inset: 0;
								pointer-events:none;
							}
							media-item .caption a {
								display: none;
								color: transparent;
								pointer-events:auto;
							}

							media-item .caption a.page-link {
								pointer-events: auto;
								overflow: hidden;
								font-size: 0;

								border-style: solid;
								position: absolute;
								top: 0px;
								right: 0px;
								z-index: 99;
							}

							media-item .caption a.page-link::after {
								display: block;
								padding: 5px;
								content: '\u{1F517}';
								font-size: 14px;
								font-family:monospace;
								color: black;
								filter:saturate(0);
							}

							`:""}
						`}),S("div",{className:"page-layout",ref:this.pageLayoutRef,children:S("div",{className:"page-content",ref:this.pageContentRef,children:[this.state.authorized?S("div",{className:"sort-controls",children:[S("text-icon",{icon:"downwards-arrow",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.setState({imageSort:"forward"})},className:this.state.imageSort==="forward"?"active":""}),S("text-icon",{icon:"upwards-arrow",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.setState({imageSort:"reverse"})},className:this.state.imageSort==="reverse"?"active":""}),S("text-icon",{icon:"shuffle",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.state.imageSort==="shuffle"?this.galleryRef.current.dispatchEvent(new Event("refresh-thumbnail-index")):this.setState({imageSort:"shuffle"})},className:this.state.imageSort==="shuffle"?"active":""}),S("text-icon",{icon:this.state.zoomedOut?"expand-arrows":"collapse-arrows",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.setState({zoomedOut:!this.state.zoomedOut})},className:"zoom"})]}):null,S(Vm,{pageInfo:this.getPageInfoContextValue(),adminMode:this.props.adminMode,bodycopyRef:this.bodycopyRef,children:[S(Po,{portalHost:this.bodycopyRef}),S("bodycopy",{style:{"--fit-height":n+"px","--resize-parent-width":this.state.resizeParentWidth},ref:this.bodycopyRef,children:this.state.authorized?S("gallery-justify",{onContextMenu:this.onItemClick,ref:this.galleryRef,"thumbnail-index":"img:all",sort:this.state.imageSort,"row-height":this.state.zoomedOut?"10vw":"15vw","mobile-row-height":this.state.zoomedOut?"200px":"100vh","show-title":!0,gutter:this.state.zoomedOut?"1px":"2rem 3rem"}):null})]})]})})]})})}else e=S("div",{style:{height:this.state.lastPageLayoutHeight+"px"}});return S("div",{"page-url":this.props.purl?.toLowerCase(),className:"page",ref:this.pageRef,editing:!1,children:[S("a",{id:this.props.purl}),S(uu,{passthrough:!1,scrollingElement:this.scrollingElement,children:e})]})}componentDidUpdate=(e,r,i)=>{this.bindObservers(),this.state.fullyRender===!0&&r.fullyRender===!1?this.onFullComponentRender():this.state.fullyRender===!1&&r.fullyRender===!0&&this.onSparseComponentRender(),(e.activePURL!==this.props.activePURL||e.adminMode!==this.props.adminMode)&&this.updateShowCartLinkCounts(),this.props.local_css!==e.local_css&&this.setMobileOffsets(),e.isMobile!==this.props.isMobile&&this.setMobileOffsets(),this.props.hashPurl!==e.hashPurl&&this.runHashScroll()};shouldComponentUpdate(e,r,i){return!(this.props===e&&this.state===r&&this.context===i||this.hasOwnProperty("lockedContent")&&this.props.content!==e.content&&Lf({...this.props,content:null},{...e,content:null})&&this.state===r&&this.context===i)}bindObservers=(e=!1)=>{(this.pageRef.current!==this.lastPageRef.current||e)&&(this.lastPageRef.current&&(al.delete(this.lastPageRef.current),gs.unobserve(this.lastPageRef.current),gg.unobserve(this.lastPageRef.current),Jx.unobserve(this.lastPageRef.current)),this.pageRef.current&&!e&&(al.set(this.pageRef.current,this),gs.observe(this.pageRef.current),gg.observe(this.pageRef.current),Jx.observe(this.pageRef.current)),this.lastPageRef.current=this.pageRef.current),(this.pageLayoutRef.current!==this.lastPageLayoutRef.current||e)&&(this.lastPageLayoutRef.current&&(mg.delete(this.lastPageLayoutRef.current),gs.unobserve(this.lastPageLayoutRef.current)),this.pageLayoutRef.current&&!e&&(mg.set(this.pageLayoutRef.current,this),gs.observe(this.pageLayoutRef.current)),this.lastPageLayoutRef.current=this.pageLayoutRef.current),(this.pageContentRef.current!==this.lastPageContentRef.current||e)&&(this.lastPageContentRef.current&&(rp.delete(this.lastPageContentRef.current),gs.unobserve(this.lastPageContentRef.current)),this.pageContentRef.current&&!e&&(rp.set(this.pageContentRef.current,this),gs.observe(this.pageContentRef.current)),this.lastPageContentRef.current=this.pageContentRef.current),(this.bodycopyRef.current!==this.lastBodycopyRef.current||e)&&(this.lastBodycopyRef.current&&(fg.delete(this.lastBodycopyRef.current),gs.unobserve(this.lastBodycopyRef.current)),this.bodycopyRef.current&&!e&&(fg.set(this.bodycopyRef.current,this),gs.observe(this.bodycopyRef.current)),this.lastBodycopyRef.current=this.bodycopyRef.current)};runHashScroll(){this.props.hashPurl===this.props.purl&&(this.state.fullyRender!==!0?this.setFullRenderState(!0,()=>{this.pageRef.current.scrollIntoView()}):this.pageRef.current.scrollIntoView())}checkLocalStorage=()=>{localStorage.getItem("images-include-offline")&&!this.state.authorized&&(this.setState({authorized:!0}),clearInterval(this.checkStorageInterval))};onKeyDown=e=>{e.keyCode===27&&!store.getState().frontendState.quickView.inited&&(e.preventDefault(),window.location=window.location.origin)};componentDidMount(){window.addEventListener("keydown",this.onKeyDown),this.checkStorageInterval=setInterval(()=>{this.checkLocalStorage()},180);var e=document.body.querySelectorAll("style");e.forEach(r=>{r.id!=="img-style"&&(r.disabled=!0)}),setTimeout(()=>{e.forEach(r=>{r.id!=="img-style"&&(r.disabled=!0)})},100),this.runHashScroll(),ot.on("window-resize",this.onWindowResize),this.state.fullyRender===!0&&this.onFullComponentRender()}onFullComponentRender(){if(this.pageLayoutRef.current){let e=function(r){r.childNodes.forEach(i=>i.setSaveable(!0));for(let i of r.childNodes)e(i)};e(this.pageLayoutRef.current)}this.pageRef.current&&(this.initializeScriptTags(),this.props.pageMounted(this.pageRef.current).then(()=>{this.updateShowCartLinkCounts(),this.fetchCommerceProductsByLink()})),this.props.isMobile&&this.setMobileOffsets(),this.bindObservers()}componentWillUnmount(){document.body.removeEventListener("request-scroll",this.onScrollRequest,{passive:!1}),window.removeEventListener("keydown",this.onKeyDown),clearInterval(this.checkStorageInterval);var e=document.body.querySelectorAll("style");e.forEach(r=>{r.disabled=!1}),ot.off("window-resize",this.onWindowResize),this.onSparseComponentRender(!0),this.onResize({height:0},!1)}onSparseComponentRender(e=!1){this.bindObservers(e),this.pageRef.current&&this.props.pageUnMounted(this.pageRef.current)}fetchCommerceProductsByLink=()=>{if(!this.pageRef.current||!this.props.has_shop)return;let e=this.pageRef.current.querySelectorAll('[rel="add-to-cart"], [rel="add_to_cart"]'),r=[];ms.default.each(e,i=>{let n=i.getAttribute("data-product");n&&r.push(n)}),this.props.fetchCommerceProducts({idArray:r,onlyNew:!0})};updateShowCartLinkCounts=()=>{if(!this.pageRef.current||!this.props.has_shop||!this.props.cartData||ms.default.isEmpty(this.props.cartData)||this.props.adminFrame)return;let e=ms.default.keys(this.props.cartData).length,r=this.pageRef.current.querySelectorAll('a[rel="show-cart"], a[rel="show_cart"]');ms.default.each(r,i=>{if(i.hasAttribute("show-count")){let n=i.innerHTML.replace(/ *\([^)]*\) */g,"");i.innerText=n+" ("+e+")"}})};initializeScriptTags=()=>{let e=!1,r=function(i){e=!0};window.addEventListener("error",r,!1),ms.default.each(this.bodycopyRef.current?.querySelectorAll("script"),i=>{if(i.getAttribute("type")==="text/thumbnail-metadata")return;e=!1;let n=document.createElement("script");[...i.attributes].forEach(o=>{n.setAttribute(o.nodeName,o.nodeValue)}),n.innerHTML=i.textContent,i.replaceWith(n),e&&(e=!1,n.parentNode.insertBefore(document.createComment(n.outerHTML),n),n.remove(),this.props.adminMode&&window.store.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{message:"One or more scripts on this page are broken and were disabled.",type:"notice"}}}))}),window.removeEventListener("error",r)}};ip.defaultProps={contentPad:{top:0,left:0,bottom:0,right:0}};ip.contextType=as;Ez=Ue((t,e)=>{let r={id:"img",purl:"/img",pin:!1,title:"Images",backdrops:{},content:"",access_level:"public"},i=(t.pages.byId[t.frontendState.activePID]||t.sets.byId[t.frontendState.activePID])?.purl;return!pe&&!i&&(i=window.location.pathname.replace(/^\//,"").toLowerCase()),typeof i=="string"&&(i=i.toLowerCase()),{inAdminFrame:!1,isMobile:t.frontendState.isMobile,adminMode:!1,isEditingPage:!1,hasPage:r!==void 0,pid:r?.id,purl:r?.purl,isPin:r?.pin,title:r?.title,backdrops:r?.backdrops,content:r?.content,access_level:r?.access_level,local_css:r?.local_css,pin_options:r?.pin_options,PIDBeingEdited:t.frontendState.PIDBeingEdited,activePID:t.frontendState.activePID,activePURL:i,pageDepth:nt.getParentSetList(t,e.id).length-1,has_shop:t.site.shop_id!==null,cartData:t.commerce?.cart,Editor_PageEditorOutlines:t.adminState?.localStorage?.Editor_PageEditorOutlines}},Hae)(ip)});var Pz,pRe,Qx,Iz,Az=V(()=>{ke();Pz=ye(Mn(),1);Gs();Be();pRe=ye(Pe(),1);fe();Qx=class extends me{constructor(e){super(e),this.state={error:!1},this.inputRef=xe()}submit=e=>{e.preventDefault(),this.setState({error:!1,downloadStarted:!1});let r=this.inputRef.current?.value;if(!r)return this.setState({error:"Email address is not valid."});Pz.default.post(`https://${Jh?tu:"dev.cargo.site"}/c3filedownload/validate/${r}/${this.props.hash}`).then(i=>{if(i?.data?.jdata?.valid)return this.setState({error:!1,downloadStarted:!0}),window.location.href=`https://${Jh?tu:"dev.cargo.site"}/c3filedownload/download/${r}/${this.props.hash}`;this.setState({error:i?.data?.error||"Email address is not valid."})}).catch(i=>{this.setState({error:"Email address is not valid."})})};onKeyDown=e=>{this.setState({error:!1})};render(){return S(ce,{children:[S("style",{children:`

					body {
						letter-spacing: 0;
						padding: 30px;
						color: rgba(0,0,0,.85);
						font-size: 18px;
						line-height: 1;
						font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons;
					}

					.message {
						margin-bottom: 15px;
					}

					.error {
						color: #f00;
					}

					input[type="email"] {
						border-radius: 100px;
						border: 1px solid rgba(0,0,0,0.75);
						padding: 10px 20px;
						font-family: Helvetica;
						font-size: 18px;
						font-style: normal;
						font-weight: 400;
						line-height: 21px;
						letter-spacing: -0.004em;
						text-align: left;
						width: 340px;
					}

					input[type="email"]:placeholder {
						color: rgba(0,0,0,0.75);
					}
					input[type="email"]::-webkit-input-placeholder {
						color: rgba(0,0,0,0.75);
					}
					input[type="email"]::-moz-placeholder {
						color: rgba(0,0,0,0.75);
					}
					input[type="email"]:-moz-placeholder {
						color: rgba(0,0,0,0.75);
					}
					
					.submit {
						-webkit-appearance: none;
						border: none;
						cursor: pointer;
						font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
						font-size: 14.5px;
						white-space: nowrap;
						display: flex;
						margin: 0;
						width: 130px;
						justify-content: flex-start;
						padding: 6.5px 12px 7.5px 15px;
						font-weight: 500;
						flex: 1 1;
						text-align: center;
						height: auto;
						min-height: 28.5px;
						line-height: 1;
						border-radius: 100px;
						user-select: none;
						position: relative;
						background: #262626;
						color: #fff;
						padding-right: 5px;
						margin-top: 10px;
					}
					.submit:active {
						opacity: .7;
					}
				`}),this.state.downloadStarted?S("span",{className:"message",children:"Your download will begin shortly..."}):S(ce,{children:[S("span",{className:"message",children:"Please verify your email address:"}),S("form",{noValidate:!0,onSubmit:this.submit,children:[S("input",{name:"email",type:"Email",placeholder:"Email address...",autofocus:"true",onKeyDown:this.onKeyDown,ref:this.inputRef,formNoValidate:!0}),S("button",{className:"submit",type:"submit",children:"Submit"})]}),this.state.error&&S(ce,{children:[S("br",{}),S("span",{class:"error",children:this.state.error})]})]})]})}},Iz=Qx});var Rz={};hr(Rz,{default:()=>Gae});function Vae(t,e){return{siteId:t.site.id,contactForm:t.frontendState.contactForm,colorTheme:t.siteDesign?.contact_form?.theme||"auto",adminMode:Fr}}function $ae(t){return zt({updateFrontendState:Ge.updateFrontendState},t)}var Tz,Mz,vg,r1,e1,SRe,t1,Wae,jae,Gae,kz=V(()=>{ke();Ye();Bs();Tz=ye(Mn(),1);ft();xr();tr();Mz=ye(Pe(),1);Be();fe();vg={},r1=window.matchMedia("(max-aspect-ratio: 1/1)"),e1=r1.matches,SRe=r1.addEventListener("change",t=>{e1=t.matches,vg[1]&&vg[1].setState({isMobile:e1})}),t1=class extends me{constructor(e){super(e),this.state={loaded:!1,showContents:!1,animate:!1,sent:!1,loading:!1,emailValue:"",messageValue:"",emailError:!1,messageError:!1,isMobile:e1,shadowRoot:null,systemTheme:window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light",transitioningTheme:!1},this.cssLinkRef=xe(),this.contactFormRef=xe(),this.startTime=null,this.inputRef=xe(),this.throttledResize=Mz.default.throttle(this.resizeHandler,200)}componentDidMount(){this.contactFormRef.current&&!this.contactFormRef.current.shadowRoot&&this.contactFormRef.current.attachShadow({mode:"open"}),this.setState({shadowRoot:this.contactFormRef.current?.shadowRoot}),this.props.contactForm.inited||this.props.updateFrontendState({contactForm:{transition:!1,inited:!0}}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.darkModeMediaQueryCallback),this.props.adminMode&&window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!0}})}darkModeMediaQueryCallback=e=>{let r=window.matchMedia("(prefers-color-scheme: dark)");this.setState({systemTheme:r.matches?"dark":"light"})};resizeHandler=()=>{let e=(window.innerHeight-30)*.01,r=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--contact-form-vh",`${e}px`),document.documentElement.style.setProperty("--contact-form-vw",`${r}px`)};handleEmailChange=e=>{this.setState({emailValue:e.target.value,emailError:!1})};handleMessageChange=e=>{this.setState({messageValue:e.target.value,messageError:!1})};submitForm=()=>{this.validate()&&this.setState({loading:!0},()=>{this.startTime=new Date;let e={from:this.state.emailValue,site_id:this.props.siteId,message:this.state.messageValue};Tz.default.post("https://cargo.site/dispatch/notifications/sendContactMessage",e,{headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(i=>{let o=new Date-this.startTime;if(this.startTime=null,o<=2500){let s=2500-o;setTimeout(()=>{this.closeForm(null,"submit")},s)}else this.closeForm(null,"submit")}).catch(i=>{window.store.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{message:"Message failed to send, please try again.",type:"notice"}}}),this.startTime=null,this.handleFormError()})})};closeForm=(e,r)=>{this.startTime===null&&(document.body.style.overflow="",window.removeEventListener("resize",this.throttledResize),r?window.requestAnimationFrame(()=>{this.setState({sent:!0},()=>{this.resetForm()})}):window.requestAnimationFrame(()=>{this.setState({animate:!1},()=>{this.resetForm()})}))};resetForm=()=>{delete vg[1],setTimeout(()=>{this.props.closeOverlay()},280)};componentDidUpdate=e=>{this.props.contactForm.transition!==e.contactForm.transition&&!e.contactForm.transition&&this.props.contactForm.transition&&this.startTime===null&&this.state.animate&&this.closeForm(),this.props.colorTheme!==e.colorTheme&&this.setState({transitioningTheme:!0},()=>{setTimeout(()=>{this.setState({transitioningTheme:!1})},500)})};componentWillUnmount=()=>{this.props.contactForm.inited&&this.props.updateFrontendState({contactForm:{transition:!1,inited:!1}}),this.props.adminMode&&window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!1}}),document.body.style.overflow="",document.documentElement.style.removeProperty("--contact-form-vh"),document.documentElement.style.removeProperty("--contact-form-vw")};handleFormError=()=>{this.setState({loading:!1})};handleTransitionEnd=()=>{};focusInput=()=>{this.inputRef?.current?.focus()};validate=()=>{let e=/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+$/i,r=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)+$/i,i=!0,n=!0,o=this.state.emailValue,s=this.state.messageValue;o.length<=0&&(i=!1),s.length<=0&&(n=!1);let a=o.split("@");return a.length!==2&&(i=!1),e.test(a[0])||(i=!1),r.test(a[1])||(i=!1),i||this.setState({emailError:!0}),n||this.setState({messageError:!0}),!(!i||!n)};onCSSLoad=()=>{this.setState({showContents:!0,isMobile:r1.matches},()=>{let e=(window.innerHeight-30)*.01,r=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--contact-form-vh",`${e}px`),document.documentElement.style.setProperty("--contact-form-vw",`${r}px`),window.addEventListener("resize",this.throttledResize),document.body.style.overflow="hidden",vg[1]=this,setTimeout(()=>{this.setState({animate:!0})},33)})};render(){let e=this.props.colorTheme==="auto"||!this.props.colorTheme?this.state.systemTheme:this.props.colorTheme;return S("div",{className:"contact-form",ref:this.contactFormRef,children:[" ",this.state.shadowRoot&&it(S(ce,{children:[S("link",{rel:"stylesheet",onLoad:this.onCSSLoad,ref:this.cssLinkRef,type:"text/css",href:"https://build.cargo.site/frontend/a16aab/css/front-end/contact-form.css"}),this.state.showContents===!0?S("div",{className:`background${this.state.animate?" active":""}${this.state.sent?" sent":""}${e?" "+e:""}${this.state.transitioningTheme?" transitioning-theme":""}`,children:S("div",{className:`modal${this.state.animate?" active":""}${this.state.sent?" sent":""}${this.state.isMobile?" mobile":""}`,onTransitionEnd:r=>{this.state.sent===!0&&this.handleTransitionEnd(r)},children:S("div",{className:"modal-inner",children:[S("div",{className:"header",children:[S("div",{className:"title"}),S("div",{className:"exit",onPointerUp:r=>{this.closeForm(r)},children:S("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[S("circle",{opacity:"var(--contact-form-close-circle-opacity)",cx:"10",cy:"10",r:"10",fill:"var(--contact-form-color-flat-reverse)"}),S("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0002 11.0607L14.3099 15.3703L15.3705 14.3096L11.0609 10L15.3705 5.69036L14.3099 4.6297L10.0002 8.93934L5.69054 4.62964L4.62988 5.6903L8.93958 10L4.62988 14.3097L5.69054 15.3704L10.0002 11.0607Z",fill:"var(--contact-form-color-flat)"})]})})]}),S("hr",{}),S("div",{onPointerUp:r=>{this.focusInput(r)},className:"email",children:[S("label",{htmlfor:"email",children:["From:","\xA0"]}),S("div",{className:`text-input${this.state.emailError?" error":""}`,children:S("input",{ref:this.inputRef,type:"email",name:"email",autocomplete:"email",value:this.state.emailValue,onChange:r=>{this.handleEmailChange(r)},placeholder:"(enter your email address)..."})})]}),S("hr",{}),S("div",{className:`text-area${this.state.messageError?" error":""}`,children:S("textarea",{name:"message",type:"text",placeholder:"Write your message...",rows:"1",resize:"false",value:this.state.messageValue,onChange:r=>{this.handleMessageChange(r)}})}),S("hr",{}),S("div",{className:"button-area",children:this.state.loading?S(ce,{children:S("button",{className:"send",children:["Sending",S(Wae,{})]})}):S(ce,{children:[S("button",{className:"cancel",onPointerUp:r=>{this.closeForm(r)},children:"Cancel"}),S("button",{className:"send",onPointerUp:r=>{this.submitForm(r)},children:"Send"})]})})]})})}):null]}),this.state.shadowRoot)]})}},Wae=()=>S("div",{className:"caution-processing"});jae=Ue(Vae,$ae)(t1),Gae=jae});var Nz={};hr(Nz,{default:()=>Xae,validateShopModel:()=>wg});function Kae(t){return zt({updateFrontendState:Ge.updateFrontendState,fetchCommerceProducts:Ge.fetchCommerceProducts,fetchContent:Ge.fetchContent,fetchShopModel:Ge.fetchShopModel,addCommerceProductToCart:Ge.addCommerceProductToCart,resetCommerceCart:Ge.resetCommerceCart},t)}var RRe,bg,yg,np,i1,wg,n1,Yae,Xae,o1=V(()=>{ke();Ye();is();ft();xr();tr();la();Be();RRe=ye(Mn(),1),bg=ye(Pe(),1);fe();pe||(yg=window.matchMedia("(prefers-color-scheme: dark)"),np=window.matchMedia("(max-aspect-ratio: 1/1)"),np.addEventListener("change",()=>{i1?.setState({isMobile:np.matches})}));wg=async()=>{if(Ht.getState().site.shop_id===null)throw"site does not have shop setup";let e=await Ht.dispatch(Ge.fetchShopModel());if(bg.default.isEmpty(e))throw"no model data";if(Fr===!1&&e.has_valid_config===!1&&!Ht.getState().site?.is_template)throw Ht.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{header:"Coming Soon",type:"notice"}}}),"shop modal contains invalid config";return e},n1=class extends me{constructor(e){super(e),wg().then(r=>{this.setState({shopModel:r},()=>{this.openOverlay()})}).catch(r=>{console.warn(r),this.closeOverlay()}),this.state={shopModel:null,loaded:!1,animate:!1,isMobile:np.matches,shadowRoot:null,theme:this.getTheme()},this.cartElementRef=xe(),this.iframeRef=xe(),this.startTime=null,this.inputRef=xe(),this.throttledResize=bg.default.throttle(this.resizeHandler,200)}closeOverlay=()=>{Ht.getState().frontendState.cartOpen!==!0?this.props.closeOverlay({replaceHistory:!0}):window.requestAnimationFrame(()=>{this.setState({closing:!0},()=>{setTimeout(this.props.closeOverlay,280)}),document.querySelector('[name="viewport"]')?.setAttribute("content","width=device-width, initial-scale=1, shrink-to-fit=no")})};onKeyDown=e=>{if(e.key==="Escape"||e.keyCode===9){let i=window.store?.getState()?.frontendState.alertModal!==!1,n=document.querySelector(".alert-window")!==null;if(i||n)return;this.closeOverlay(e)}};openOverlay(){this.cartElementRef.current&&!this.cartElementRef.current.shadowRoot&&this.cartElementRef.current.attachShadow({mode:"open"}),this.setState({shadowRoot:this.cartElementRef.current?.shadowRoot}),this.props.updateFrontendState({cartOpen:!0}),window.addEventListener("keydown",this.onKeyDown,!0),requestAnimationFrame(()=>{this.iframeRef.current&&(document.querySelector('[name="viewport"]')?.setAttribute("content","width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1"),this.iframeRef.current.src="/following_frame.html")})}onBeforeCartInit=()=>{this.iframeRef.current.contentWindow.__fetchCommerceProducts__=this.props.fetchCommerceProducts,this.iframeRef.current.contentWindow.__fetchContent__=this.props.fetchContent,this.iframeRef.current.contentWindow.__frontend_history__=this.props.history,this.iframeRef.current.contentWindow.__add_to_cart__=this.props.addCommerceProductToCart,this.iframeRef.current.contentWindow.__reset_cart__=this.props.resetCommerceCart,this.iframeRef.current.contentWindow.__close_overlay__=()=>{this.closeOverlay()}};onCartReady=()=>{this.proxyRoute(),this.proxyTheme()};onCSSLoad=()=>{this.setState({loaded:!0,isMobile:np.matches},()=>{let e=(window.innerHeight-30)*.01,r=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--cart-vh",`${e}px`),document.documentElement.style.setProperty("--cart-vw",`${r}px`),window.addEventListener("resize",this.throttledResize),document.body.style.overflow="hidden",requestAnimationFrame(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.setState({animate:!0})})})})})})})};resizeHandler=()=>{let e=(window.innerHeight-30)*.01,r=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--cart-vh",`${e}px`),document.documentElement.style.setProperty("--cart-vw",`${r}px`)};componentWillUnmount=()=>{this.props.updateFrontendState({cartOpen:!1}),i1=null,yg.removeEventListener("change",this.onThemeChange),window.removeEventListener("cart-before-init",this.onBeforeCartInit),window.removeEventListener("cart-ready",this.onCartReady),document.body.style.overflow="",window.removeEventListener("resize",this.throttledResize),window.removeEventListener("keydown",this.onKeyDown,!0),document.documentElement.style.removeProperty("--cart-vh"),document.documentElement.style.removeProperty("--cart-vw"),document.querySelector('[name="viewport"]')?.setAttribute("content","width=device-width, initial-scale=1, shrink-to-fit=no")};componentDidMount(){i1=this,yg.addEventListener("change",this.onThemeChange),window.addEventListener("cart-before-init",this.onBeforeCartInit,!1),window.addEventListener("cart-ready",this.onCartReady,!1)}componentDidUpdate(e,r){this.props.requestedTheme!==e.requestedTheme&&this.onThemeChange(),this.state.theme!==r.theme&&this.proxyTheme(),this.proxyRoute()}onThemeChange=()=>{this.setState({theme:this.getTheme()})};getTheme=()=>this.props.requestedTheme==="auto"?yg.matches?"dark":"light":this.props.requestedTheme;proxyRoute(){!this.iframeRef||!this.iframeRef.current||bg.default.isEqual(this.props.match,this.currentMatch)||this.iframeRef.current.contentWindow.renderRoute&&(this.currentMatch=this.props.match,this.iframeRef.current.contentWindow.renderRoute?.(this.currentMatch))}proxyTheme(){try{this.iframeRef.current.contentWindow.dispatchEvent(new CustomEvent("colorScheme",{detail:this.state.theme}))}catch{}}render(){return this.state.shopModel?S("div",{className:"cart",ref:this.cartElementRef,children:[" ",this.state.shadowRoot&&it(S(ce,{children:[S("link",{rel:"stylesheet",onLoad:this.onCSSLoad,type:"text/css",href:"https://build.cargo.site/frontend/a16aab/css/front-end/cart.css"}),S("div",{className:`background${this.state.animate?" active":""}${this.state.closing?" closing ":" "}${this.state.theme}`,onMouseDown:()=>{this.currentMatch&&!this.currentMatch.url.match("checkout")&&this.closeOverlay()},style:{height:this.state.loaded?"":"0"},children:S("div",{className:`modal${this.state.animate?" active":""}${this.state.closing?" closing":""}${this.state.isMobile?" mobile":""}`,style:{visibility:this.state.loaded?"":"hidden"},children:S("div",{className:"modal-inner",children:S("iframe",{ref:this.iframeRef,src:"about:blank"})})})})]}),this.state.shadowRoot)]}):null}};Yae=Wn(Ue(t=>({requestedTheme:t.siteDesign.cart?.theme||"light"}),Kae)(n1)),Xae=Yae});function Zae(t){return zt({fetchContent:Ge.fetchContent,updateFrontendState:Ge.updateFrontendState},t)}var op,ll,xg,Oz,Dz,s1,Lz,Fz=V(()=>{ke();is();xr();vk();ft();Be();tr();Ya();Pr();Ed();Zx();Cz();Az();op=ye(Pe(),1);_i();fe();ll={ROOT_PATH:"/",IMG_PATH:"/siteimages",SITE_PREVIEW_PROXY_PATH:"/site.preview/*",ADMIN_CLIENT_SIDE_RENDERING_PATH:"/client-side-rendering.html",PAGE_PATH:"/:page",PAGE_BY_ID_PATH:"/pid/:pid/:args?",DIGITAL_PRODUCT_DOWNLOAD:"/filedownload/:hash"},xg={CART:"/cart/:section?/:order_id?",CONTACT:"/contact-form"};pe||(Oz=(kz(),Rc(Rz)).default,Dz=(o1(),Rc(Nz)).default);s1=class extends me{constructor(e){super(e),this.currentHashPurl="",this.checkForOverlayPath(this.props.location),this.hashPurlLoadsInProgress=[],this.contentLoadsInProgress=[],this.currentAnchorScrollAttempt=0,this.fixedPinScrollOffset=0,pe||window.addEventListener("click",r=>{let i=r.target;i.shadowRoot?i=r.composedPath().find(n=>n.tagName==="A")||i:i.closest("a")&&(i=i.closest("a")),i.nodeName==="A"&&i.hash&&i.hash===window.location.hash&&(r.preventDefault(),this.runAnchorScroll(this.getAnchorForHash(i.hash.substring(1).toLowerCase())))})}shouldComponentUpdate(e){return this.props.location!==e.location&&this.checkForOverlayPath(e.location),!0}checkForOverlayPath=e=>{for(let r in xg){let i=xg[r],n=za(e.pathname,{path:i});if(n){if(op.default.isEqual(n,this.lastMatch))return;this.lastMatch=n,this.lockedUnderlayLocation||(this.lockedUnderlayLocation={...this.props.location},this.lockedUnderlayLocation.pathname===n.url&&(this.lockedUnderlayLocation.pathname="/"));return}else delete this.lastMatch}this.lockedUnderlayLocation&&(this.lockedUnderlayLocation=null)};getAnchorForHash=e=>{let r=null;try{r=document.querySelector(`a#${e}`)}catch{}if(!r){let i=document.getElementById(e);i&&i.nodeName==="A"&&(r=i)}return r};runAnchorScroll=(e,r={})=>{if(!e)throw"Unable to scroll to anchor";let i=document.documentElement.clientHeight,n=e.closest(".fixed.page.allow-scroll")||document.scrollingElement,o=n.scrollHeight,s=n.scrollTop,a=e.getBoundingClientRect(),l=o-i-(s+a.top);r.snapScrollDistance||(a.top>i*1.5?r.snapScrollDistance=-200:a.top<-i*1.5&&(r.snapScrollDistance=200)),l<200&&delete r.snapScrollDistance;let p={transitionTime:300,callback:null,verticalAlign:"top",windowAlign:"top",easing:"easeOutExponential",offset:{x:0,y:this.fixedPinScrollOffset},preventQuickViewClose:!1,lazyScroll:!1};r.hasOwnProperty("snapScrollDistance")&&(p.offset.y=r.snapScrollDistance+this.fixedPinScrollOffset,p.easing="linear",p.transitionTime=0,p.callback=()=>{requestAnimationFrame(()=>{e.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:{...p,offset:{x:0,y:this.fixedPinScrollOffset},callback:null,easing:"easeOutExponential",transitionTime:350}}))})}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:p}))})})};deferredContentRenderer(e,r){let i=(this.lockedUnderlayLocation||this.props.location).hash.substring(1).toLowerCase(),n=this.props.store.getState(),o=r==="purl"?nt.getContentByPurl(n,e):nt.getContentById(n,e);if(!this.currentId&&o?.overlay&&(e=Sb(n,nt,o.id),r="pid"),pe)return S(Xx,{id:e,idType:r});if(this.lastRequestedId=e,this.lastRequestedIdType=r,this.lastRequestedHashPurl=i,!this.currentId)this.currentId=this.lastRequestedId,this.currentIdType=this.lastRequestedIdType;else if(this.currentId!==this.lastRequestedId||this.currentIdType!==this.lastRequestedIdType){let s=this.lastRequestedId+"/"+this.lastRequestedIdType;this.contentLoadsInProgress.includes(s)||(this.contentLoadsInProgress.push(s),window.__deferred_page_load_promise__=new Promise(a=>{((l,p)=>{this.props.fetchContent(l,{idType:p}).catch(()=>{}).finally(()=>{this.contentLoadsInProgress=this.contentLoadsInProgress.filter(f=>f!==s),this.lastRequestedId===l&&this.lastRequestedIdType===p&&(this.currentId=l,this.currentIdType=p,this.forceUpdate()),delete window.__deferred_page_load_promise__,a()})})(this.lastRequestedId,this.lastRequestedIdType)}))}return this.lastRequestedHashPurl&&this.currentHashPurl!==this.lastRequestedHashPurl?(s=>{if(!this.hashPurlLoadsInProgress.includes(s)){if(this.hashPurlLoadsInProgress.push(s),o?.purl!==s)try{if(this.getAnchorForHash(s)){this.currentHashPurl=s,this.forceUpdate(()=>{this.hashPurlLoadsInProgress=this.hashPurlLoadsInProgress.filter(l=>l!==s),this.runAnchorScroll(this.getAnchorForHash(s))});return}}catch(a){console.error(a),this.hashPurlLoadsInProgress=this.hashPurlLoadsInProgress.filter(l=>l!==s)}this.props.fetchContent(s,{idType:"purl"}).finally(()=>{if(this.hashPurlLoadsInProgress=this.hashPurlLoadsInProgress.filter(g=>g!==s),this.lastRequestedHashPurl!==s)return;let a=this.props.store.getState(),l=nt.getContentByPurl(a,s);if(!l||l.page_type!=="page"||l.pin){console.log("No valid target found. Just scroll to an anchor if it exists"),this.currentHashPurl=s;try{this.getAnchorForHash(s)?.scrollIntoView()}catch(g){console.error(g)}return}if(!o||o.stack!==!0||nt.getParentSetList(a,l.id).includes(o.id)!==!0){if(this.props.adminMode){this.currentHashPurl=s,this.forceUpdate();return}let v=nt.getParentSetList(a,l.id).map(x=>a.sets.byId[x]).find(x=>x.stack);v?(this.props.history.replace(`/${v.id==="root"?"":v.purl}#${s}`),document.scrollingElement.scrollTo({top:0,left:0,behavior:"instant"})):(this.currentHashPurl="",this.props.history.replace(`/${s}`),document.scrollingElement.scrollTo({top:0,left:0,behavior:"instant"}));return}let p=[],f=a.sets.byId[nt.getItemParentId(a,l.id)],d=5;ss(a.structure,a.pages,a.sets,f,a.structure.indexById[l.id]-1,{reverse:!0,traverseUp:!!this.props.isFeed,callback:(g,v,x)=>{if(x||p.push({parent:g,index:v}),d--===0)return"break"}}),d=5,ss(a.structure,a.pages,a.sets,f,a.structure.indexById[l.id]+1,{reverse:!1,traverseUp:!!this.props.isFeed,callback:(g,v,x)=>{if(x||p.push({parent:g,index:v}),d--===0)return"break"}});let m=op.default.map(op.default.groupBy(p,"parent"),(g,v)=>this.props.fetchContent(v,{indexes:op.default.map(g,"index"),idType:"pid"}));Promise.all(m).finally(()=>{if(this.lastRequestedHashPurl!==s)return;this.currentHashPurl=s;let g=this.props.store.getState(),v=document.querySelector("body > .content > .pages .page"),x=!1;v&&g.structure.bySort[l.id]<g.structure.bySort[v.id]&&(x=!0),this.forceUpdate(()=>{if(this.lastRequestedHashPurl!==s)return;let _=this.getAnchorForHash(s);_&&this.runAnchorScroll(_,{snapScrollDistance:x?200:-200})})})})}})(this.lastRequestedHashPurl):this.lastRequestedHashPurl||(this.currentHashPurl=""),S(Sk,{children:[S(as.Consumer,{children:s=>{this.fixedPinScrollOffset=(s.totalTopFixedPinsHeight||0)*-1}}),S(Xx,{id:this.currentId,idType:this.currentIdType,hashPurl:this.currentHashPurl})]})}setHomepageClass=()=>{this.props.location?.pathname==="/"||this.props.location?.pathname.includes(this.props.homepageId)?document.querySelector("body").classList.add("home"):document.querySelector("body").classList.remove("home")};componentDidUpdate=()=>{this.setHomepageClass()};componentDidMount=()=>{this.setHomepageClass()};render(){if(this.props.adminMode&&this.props.adminInitialized===!1||!this.props.hasSite)return null;let e=null,r=null,i=this.props.location;return this.lockedUnderlayLocation&&(i=this.lockedUnderlayLocation,r=this.props.location,e=S("div",{class:"overlay",children:S(Yh,{location:r,children:[S(Tn,{exact:!0,path:xg.CART,render:({match:n})=>S(Dz,{closeOverlay:(o={})=>{this.props.history[o.replaceHistory?"replace":"push"](this.lockedUnderlayLocation.pathname+this.lockedUnderlayLocation.hash,{preventScrollReset:!0})}})}),S(Tn,{exact:!0,path:xg.CONTACT,render:({match:n})=>S(Oz,{closeOverlay:()=>{this.props.history.push(this.lockedUnderlayLocation.pathname+this.lockedUnderlayLocation.hash,{preventScrollReset:!0})}})})]})})),S(ce,{children:[e,S(Yh,{location:i,children:[S(Tn,{exact:!0,path:ll.ROOT_PATH,render:({match:n})=>this.props.isFeed?this.deferredContentRenderer("root","pid"):this.deferredContentRenderer(this.props.homepageId||"root","pid")}),S(Tn,{exact:!0,path:ll.DIGITAL_PRODUCT_DOWNLOAD,render:({match:n})=>S(Iz,{hash:n.params.hash})}),S(Tn,{exact:!0,path:ll.IMG_PATH,render:({match:n})=>S(Ez,{})}),S(Tn,{exact:!0,path:ll.SITE_PREVIEW_PROXY_PATH,render:({match:n})=>this.props.isFeed?this.deferredContentRenderer("root","pid"):this.deferredContentRenderer(this.props.homepageId||"root","pid")}),S(Tn,{exact:!0,path:ll.ADMIN_CLIENT_SIDE_RENDERING_PATH,render:({match:n})=>null}),S(Tn,{exact:!0,path:ll.PAGE_PATH,render:({match:n})=>this.deferredContentRenderer(n.params.page.toLowerCase(),"purl")}),S(Tn,{exact:!0,path:ll.PAGE_BY_ID_PATH,render:({match:n})=>this.deferredContentRenderer(n.params.pid,"pid")}),S(Tn,{path:"*",render:({location:n})=>this.deferredContentRenderer(n.pathname.substring(1),"purl")})]})]})}};Lz=Rn(Wn(Ue((t,e)=>({hasSite:!!t.site,homepageId:nt.getHomepageId(t),isFeed:t.sets.byId.root.stack,adminInitialized:t.adminState?.initialized||!1,adminMode:t.frontendState.adminMode}),Zae)(s1)))});var zz=oe((exports,module)=>{"use strict";var numeric=typeof exports>"u"?function(){}:exports;typeof global<"u"&&(global.numeric=numeric);numeric.version="1.2.6";numeric.bench=function(e,r){var i,n,o,s;for(typeof r>"u"&&(r=15),o=.5,i=new Date;;){for(o*=2,s=o;s>3;s-=4)e(),e(),e(),e();for(;s>0;)e(),s--;if(n=new Date,n-i>r)break}for(s=o;s>3;s-=4)e(),e(),e(),e();for(;s>0;)e(),s--;return n=new Date,1e3*(3*o-1)/(n-i)};numeric._myIndexOf=function(e){var r=this.length,i;for(i=0;i<r;++i)if(this[i]===e)return i;return-1};numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf;numeric.Function=Function;numeric.precision=4;numeric.largeArray=50;numeric.prettyPrint=function(e){function r(o){if(o===0)return"0";if(isNaN(o))return"NaN";if(o<0)return"-"+r(-o);if(isFinite(o)){var s=Math.floor(Math.log(o)/Math.log(10)),a=o/Math.pow(10,s),l=a.toPrecision(numeric.precision);return parseFloat(l)===10&&(s++,a=1,l=a.toPrecision(numeric.precision)),parseFloat(l).toString()+"e"+s.toString()}return"Infinity"}var i=[];function n(o){var s;if(typeof o>"u")return i.push(Array(numeric.precision+8).join(" ")),!1;if(typeof o=="string")return i.push('"'+o+'"'),!1;if(typeof o=="boolean")return i.push(o.toString()),!1;if(typeof o=="number"){var a=r(o),l=o.toPrecision(numeric.precision),p=parseFloat(o.toString()).toString(),f=[a,l,p,parseFloat(l).toString(),parseFloat(p).toString()];for(s=1;s<f.length;s++)f[s].length<a.length&&(a=f[s]);return i.push(Array(numeric.precision+8-a.length).join(" ")+a),!1}if(o===null)return i.push("null"),!1;if(typeof o=="function"){i.push(o.toString());var d=!1;for(s in o)o.hasOwnProperty(s)&&(d?i.push(`,
`):i.push(`
{`),d=!0,i.push(s),i.push(`: 
`),n(o[s]));return d&&i.push(`}
`),!0}if(o instanceof Array){if(o.length>numeric.largeArray)return i.push("...Large Array..."),!0;var d=!1;for(i.push("["),s=0;s<o.length;s++)s>0&&(i.push(","),d&&i.push(`
 `)),d=n(o[s]);return i.push("]"),!0}i.push("{");var d=!1;for(s in o)o.hasOwnProperty(s)&&(d&&i.push(`,
`),d=!0,i.push(s),i.push(`: 
`),n(o[s]));return i.push("}"),!0}return n(e),i.join("")};numeric.parseDate=function(e){function r(i){if(typeof i=="string")return Date.parse(i.replace(/-/g,"/"));if(!(i instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n=[],o;for(o=0;o<i.length;o++)n[o]=r(i[o]);return n}return r(e)};numeric.parseFloat=function(e){function r(i){if(typeof i=="string")return parseFloat(i);if(!(i instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n=[],o;for(o=0;o<i.length;o++)n[o]=r(i[o]);return n}return r(e)};numeric.parseCSV=function(e){var r=e.split(`
`),i,n,o=[],s=/(([^'",]*)|('[^']*')|("[^"]*")),/g,a=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,l=function(m){return m.substr(0,m.length-1)},p=0;for(n=0;n<r.length;n++){var f=(r[n]+",").match(s),d;if(f.length>0){for(o[p]=[],i=0;i<f.length;i++)d=l(f[i]),a.test(d)?o[p][i]=parseFloat(d):o[p][i]=d;p++}}return o};numeric.toCSV=function(e){var r=numeric.dim(e),i,n,o,s,a,l;for(o=r[0],s=r[1],l=[],i=0;i<o;i++){for(a=[],n=0;n<o;n++)a[n]=e[i][n].toString();l[i]=a.join(", ")}return l.join(`
`)+`
`};numeric.getURL=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(),r};numeric.imageURL=function(e){function r(O){var L=O.length,I,D,R,W,N,z,$,q,J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",X="";for(I=0;I<L;I+=3)D=O[I],R=O[I+1],W=O[I+2],N=D>>2,z=((D&3)<<4)+(R>>4),$=((R&15)<<2)+(W>>6),q=W&63,I+1>=L?$=q=64:I+2>=L&&(q=64),X+=J.charAt(N)+J.charAt(z)+J.charAt($)+J.charAt(q);return X}function i(O,L,I){typeof L>"u"&&(L=0),typeof I>"u"&&(I=O.length);var D=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],R=-1,W=0,N=O.length,z;for(z=L;z<I;z++)W=(R^O[z])&255,R=R>>>8^D[W];return R^-1}var n=e[0].length,o=e[0][0].length,s,a,l,p,f,d,m,g,v,x,_,E=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,o>>24&255,o>>16&255,o>>8&255,o&255,n>>24&255,n>>16&255,n>>8&255,n&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(_=i(E,12,29),E[29]=_>>24&255,E[30]=_>>16&255,E[31]=_>>8&255,E[32]=_&255,s=1,a=0,g=0;g<n;g++){for(g<n-1?E.push(0):E.push(1),d=3*o+1+(g===0)&255,m=3*o+1+(g===0)>>8&255,E.push(d),E.push(m),E.push(~d&255),E.push(~m&255),g===0&&E.push(0),v=0;v<o;v++)for(p=0;p<3;p++)d=e[p][g][v],d>255?d=255:d<0?d=0:d=Math.round(d),s=(s+d)%65521,a=(a+s)%65521,E.push(d);E.push(0)}return x=(a<<16)+s,E.push(x>>24&255),E.push(x>>16&255),E.push(x>>8&255),E.push(x&255),f=E.length-41,E[33]=f>>24&255,E[34]=f>>16&255,E[35]=f>>8&255,E[36]=f&255,_=i(E,37),E.push(_>>24&255),E.push(_>>16&255),E.push(_>>8&255),E.push(_&255),E.push(0),E.push(0),E.push(0),E.push(0),E.push(73),E.push(69),E.push(78),E.push(68),E.push(174),E.push(66),E.push(96),E.push(130),"data:image/png;base64,"+r(E)};numeric._dim=function(e){for(var r=[];typeof e=="object";)r.push(e.length),e=e[0];return r};numeric.dim=function(e){var r,i;return typeof e=="object"?(r=e[0],typeof r=="object"?(i=r[0],typeof i=="object"?numeric._dim(e):[e.length,r.length]):[e.length]):[]};numeric.mapreduce=function(e,r){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+r+`;
if(typeof x === "number") { var xi = x; `+e+`; return accum; }
if(typeof _s === "undefined") _s = numeric.dim(x);
if(typeof _k === "undefined") _k = 0;
var _n = _s[_k];
var i,xi;
if(_k < _s.length-1) {
    for(i=_n-1;i>=0;i--) {
        accum = arguments.callee(x[i],accum,_s,_k+1);
    }    return accum;
}
for(i=_n-1;i>=1;i-=2) { 
    xi = x[i];
    `+e+`;
    xi = x[i-1];
    `+e+`;
}
if(i === 0) {
    xi = x[i];
    `+e+`
}
return accum;`)};numeric.mapreduce2=function(e,r){return Function("x",`var n = x.length;
var i,xi;
`+r+`;
for(i=n-1;i!==-1;--i) { 
    xi = x[i];
    `+e+`;
}
return accum;`)};numeric.same=function t(e,r){var i,n;if(!(e instanceof Array)||!(r instanceof Array)||(n=e.length,n!==r.length))return!1;for(i=0;i<n;i++)if(e[i]!==r[i])if(typeof e[i]=="object"){if(!t(e[i],r[i]))return!1}else return!1;return!0};numeric.rep=function(e,r,i){typeof i>"u"&&(i=0);var n=e[i],o=Array(n),s;if(i===e.length-1){for(s=n-2;s>=0;s-=2)o[s+1]=r,o[s]=r;return s===-1&&(o[0]=r),o}for(s=n-1;s>=0;s--)o[s]=numeric.rep(e,r,i+1);return o};numeric.dotMMsmall=function(e,r){var i,n,o,s,a,l,p,f,d,m,g,v,x,_;for(s=e.length,a=r.length,l=r[0].length,p=Array(s),i=s-1;i>=0;i--){for(f=Array(l),d=e[i],o=l-1;o>=0;o--){for(m=d[a-1]*r[a-1][o],n=a-2;n>=1;n-=2)g=n-1,m+=d[n]*r[n][o]+d[g]*r[g][o];n===0&&(m+=d[0]*r[0][o]),f[o]=m}p[i]=f}return p};numeric._getCol=function(e,r,i){var n=e.length,o;for(o=n-1;o>0;--o)i[o]=e[o][r],--o,i[o]=e[o][r];o===0&&(i[0]=e[0][r])};numeric.dotMMbig=function(e,r){var i=numeric._getCol,n=r.length,o=Array(n),s=e.length,a=r[0].length,l=new Array(s),p,f=numeric.dotVV,d,m,g,v;for(--n,--s,d=s;d!==-1;--d)l[d]=Array(a);for(--a,d=a;d!==-1;--d)for(i(r,d,o),m=s;m!==-1;--m)v=0,p=e[m],l[m][d]=f(p,o);return l};numeric.dotMV=function(e,r){var i=e.length,n=r.length,o,s=Array(i),a=numeric.dotVV;for(o=i-1;o>=0;o--)s[o]=a(e[o],r);return s};numeric.dotVM=function(e,r){var i,n,o,s,a,l,p,f,d,m,g,v,x,_,E,O,L,I,D;for(s=e.length,a=r[0].length,p=Array(a),o=a-1;o>=0;o--){for(m=e[s-1]*r[s-1][o],n=s-2;n>=1;n-=2)g=n-1,m+=e[n]*r[n][o]+e[g]*r[g][o];n===0&&(m+=e[0]*r[0][o]),p[o]=m}return p};numeric.dotVV=function(e,r){var i,n=e.length,o,s=e[n-1]*r[n-1];for(i=n-2;i>=1;i-=2)o=i-1,s+=e[i]*r[i]+e[o]*r[o];return i===0&&(s+=e[0]*r[0]),s};numeric.dot=function(e,r){var i=numeric.dim;switch(i(e).length*1e3+i(r).length){case 2002:return r.length<10?numeric.dotMMsmall(e,r):numeric.dotMMbig(e,r);case 2001:return numeric.dotMV(e,r);case 1002:return numeric.dotVM(e,r);case 1001:return numeric.dotVV(e,r);case 1e3:return numeric.mulVS(e,r);case 1:return numeric.mulSV(e,r);case 0:return e*r;default:throw new Error("numeric.dot only works on vectors and matrices")}};numeric.diag=function(e){var r,i,n,o=e.length,s=Array(o),a;for(r=o-1;r>=0;r--){for(a=Array(o),i=r+2,n=o-1;n>=i;n-=2)a[n]=0,a[n-1]=0;for(n>r&&(a[n]=0),a[r]=e[r],n=r-1;n>=1;n-=2)a[n]=0,a[n-1]=0;n===0&&(a[0]=0),s[r]=a}return s};numeric.getDiag=function(t){var e=Math.min(t.length,t[0].length),r,i=Array(e);for(r=e-1;r>=1;--r)i[r]=t[r][r],--r,i[r]=t[r][r];return r===0&&(i[0]=t[0][0]),i};numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))};numeric.pointwise=function(e,r,i){typeof i>"u"&&(i="");var n=[],o,s=/\[i\]$/,a,l="",p=!1;for(o=0;o<e.length;o++)s.test(e[o])?(a=e[o].substring(0,e[o].length-3),l=a):a=e[o],a==="ret"&&(p=!0),n.push(a);return n[e.length]="_s",n[e.length+1]="_k",n[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+l+`);
if(typeof _k === "undefined") _k = 0;
var _n = _s[_k];
var i`+(p?"":", ret = Array(_n)")+`;
if(_k < _s.length-1) {
    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(`+e.join(",")+`,_s,_k+1);
    return ret;
}
`+i+`
for(i=_n-1;i!==-1;--i) {
    `+r+`
}
return ret;`,Function.apply(null,n)};numeric.pointwise2=function(e,r,i){typeof i>"u"&&(i="");var n=[],o,s=/\[i\]$/,a,l="",p=!1;for(o=0;o<e.length;o++)s.test(e[o])?(a=e[o].substring(0,e[o].length-3),l=a):a=e[o],a==="ret"&&(p=!0),n.push(a);return n[e.length]="var _n = "+l+`.length;
var i`+(p?"":", ret = Array(_n)")+`;
`+i+`
for(i=_n-1;i!==-1;--i) {
`+r+`
}
return ret;`,Function.apply(null,n)};numeric._biforeach=function t(e,r,i,n,o){if(n===i.length-1){o(e,r);return}var s,a=i[n];for(s=a-1;s>=0;s--)t(typeof e=="object"?e[s]:e,typeof r=="object"?r[s]:r,i,n+1,o)};numeric._biforeach2=function t(e,r,i,n,o){if(n===i.length-1)return o(e,r);var s,a=i[n],l=Array(a);for(s=a-1;s>=0;--s)l[s]=t(typeof e=="object"?e[s]:e,typeof r=="object"?r[s]:r,i,n+1,o);return l};numeric._foreach=function t(e,r,i,n){if(i===r.length-1){n(e);return}var o,s=r[i];for(o=s-1;o>=0;o--)t(e[o],r,i+1,n)};numeric._foreach2=function t(e,r,i,n){if(i===r.length-1)return n(e);var o,s=r[i],a=Array(s);for(o=s-1;o>=0;o--)a[o]=t(e[o],r,i+1,n);return a};numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="};numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"];numeric.mathfuns2=["atan2","pow","max","min"];numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""};numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]};(function(){var t,e;for(t=0;t<numeric.mathfuns2.length;++t)e=numeric.mathfuns2[t],numeric.ops2[e]=e;for(t in numeric.ops2)if(numeric.ops2.hasOwnProperty(t)){e=numeric.ops2[t];var r,i,n="";numeric.myIndexOf.call(numeric.mathfuns2,t)!==-1?(n="var "+e+" = Math."+e+`;
`,r=function(o,s,a){return o+" = "+e+"("+s+","+a+")"},i=function(o,s){return o+" = "+e+"("+o+","+s+")"}):(r=function(o,s,a){return o+" = "+s+" "+e+" "+a},numeric.opseq.hasOwnProperty(t+"eq")?i=function(o,s){return o+" "+e+"= "+s}:i=function(o,s){return o+" = "+o+" "+e+" "+s}),numeric[t+"VV"]=numeric.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),n),numeric[t+"SV"]=numeric.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),n),numeric[t+"VS"]=numeric.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),n),numeric[t]=Function(`var n = arguments.length, i, x = arguments[0], y;
var VV = numeric.`+t+"VV, VS = numeric."+t+"VS, SV = numeric."+t+`SV;
var dim = numeric.dim;
for(i=1;i!==n;++i) { 
  y = arguments[i];
  if(typeof x === "object") {
      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);
      else x = numeric._biforeach2(x,y,dim(x),0,VS);
  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);
  else `+i("x","y")+`
}
return x;
`),numeric[e]=numeric[t],numeric[t+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],i("ret[i]","x[i]"),n),numeric[t+"eqS"]=numeric.pointwise2(["ret[i]","x"],i("ret[i]","x"),n),numeric[t+"eq"]=Function(`var n = arguments.length, i, x = arguments[0], y;
var V = numeric.`+t+"eqV, S = numeric."+t+`eqS
var s = numeric.dim(x);
for(i=1;i!==n;++i) { 
  y = arguments[i];
  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);
  else numeric._biforeach(x,y,s,0,S);
}
return x;
`)}for(t=0;t<numeric.mathfuns2.length;++t)e=numeric.mathfuns2[t],delete numeric.ops2[e];for(t=0;t<numeric.mathfuns.length;++t)e=numeric.mathfuns[t],numeric.ops1[e]=e;for(t in numeric.ops1)numeric.ops1.hasOwnProperty(t)&&(n="",e=numeric.ops1[t],numeric.myIndexOf.call(numeric.mathfuns,t)!==-1&&Math.hasOwnProperty(e)&&(n="var "+e+" = Math."+e+`;
`),numeric[t+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+e+"(ret[i]);",n),numeric[t+"eq"]=Function("x",'if(typeof x !== "object") return '+e+`x
var i;
var V = numeric.`+t+`eqV;
var s = numeric.dim(x);
numeric._foreach(x,s,0,V);
return x;
`),numeric[t+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+e+"(x[i]);",n),numeric[t]=Function("x",'if(typeof x !== "object") return '+e+`(x)
var i;
var V = numeric.`+t+`V;
var s = numeric.dim(x);
return numeric._foreach2(x,s,0,V);
`));for(t=0;t<numeric.mathfuns.length;++t)e=numeric.mathfuns[t],delete numeric.ops1[e];for(t in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(t)&&(e=numeric.mapreducers[t],numeric[t+"V"]=numeric.mapreduce2(e[0],e[1]),numeric[t]=Function("x","s","k",e[1]+`if(typeof x !== "object") {    xi = x;
`+e[0]+`;
    return accum;
}if(typeof s === "undefined") s = numeric.dim(x);
if(typeof k === "undefined") k = 0;
if(k === s.length-1) return numeric.`+t+`V(x);
var xi;
var n = x.length, i;
for(i=n-1;i!==-1;--i) {
   xi = arguments.callee(x[i]);
`+e[0]+`;
}
return accum;
`))})();numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;");numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;");numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;");numeric.trunc=function(e,r){return typeof e=="object"?typeof r=="object"?numeric.truncVV(e,r):numeric.truncVS(e,r):typeof r=="object"?numeric.truncSV(e,r):Math.round(e/r)*r};numeric.inv=function(x){var r=numeric.dim(x),i=Math.abs,n=r[0],o=r[1],s=numeric.clone(x),a,l,p=numeric.identity(n),f,d,m,g,v,x;for(g=0;g<o;++g){var _=-1,E=-1;for(m=g;m!==n;++m)v=i(s[m][g]),v>E&&(_=m,E=v);for(l=s[_],s[_]=s[g],s[g]=l,d=p[_],p[_]=p[g],p[g]=d,x=l[g],v=g;v!==o;++v)l[v]/=x;for(v=o-1;v!==-1;--v)d[v]/=x;for(m=n-1;m!==-1;--m)if(m!==g){for(a=s[m],f=p[m],x=a[g],v=g+1;v!==o;++v)a[v]-=l[v]*x;for(v=o-1;v>0;--v)f[v]-=d[v]*x,--v,f[v]-=d[v]*x;v===0&&(f[0]-=d[0]*x)}}return p};numeric.det=function(e){var r=numeric.dim(e);if(r.length!==2||r[0]!==r[1])throw new Error("numeric: det() only works on square matrices");var i=r[0],n=1,o,s,a,l=numeric.clone(e),p,f,d,m,g,v,x;for(s=0;s<i-1;s++){for(a=s,o=s+1;o<i;o++)Math.abs(l[o][s])>Math.abs(l[a][s])&&(a=o);for(a!==s&&(m=l[a],l[a]=l[s],l[s]=m,n*=-1),p=l[s],o=s+1;o<i;o++){for(f=l[o],d=f[s]/p[s],a=s+1;a<i-1;a+=2)g=a+1,f[a]-=p[a]*d,f[g]-=p[g]*d;a!==i&&(f[a]-=p[a]*d)}if(p[s]===0)return 0;n*=p[s]}return n*l[s][s]};numeric.transpose=function(e){var r,i,n=e.length,o=e[0].length,s=Array(o),a,l,p;for(i=0;i<o;i++)s[i]=Array(n);for(r=n-1;r>=1;r-=2){for(l=e[r],a=e[r-1],i=o-1;i>=1;--i)p=s[i],p[r]=l[i],p[r-1]=a[i],--i,p=s[i],p[r]=l[i],p[r-1]=a[i];i===0&&(p=s[0],p[r]=l[0],p[r-1]=a[0])}if(r===0){for(a=e[0],i=o-1;i>=1;--i)s[i][0]=a[i],--i,s[i][0]=a[i];i===0&&(s[0][0]=a[0])}return s};numeric.negtranspose=function(e){var r,i,n=e.length,o=e[0].length,s=Array(o),a,l,p;for(i=0;i<o;i++)s[i]=Array(n);for(r=n-1;r>=1;r-=2){for(l=e[r],a=e[r-1],i=o-1;i>=1;--i)p=s[i],p[r]=-l[i],p[r-1]=-a[i],--i,p=s[i],p[r]=-l[i],p[r-1]=-a[i];i===0&&(p=s[0],p[r]=-l[0],p[r-1]=-a[0])}if(r===0){for(a=e[0],i=o-1;i>=1;--i)s[i][0]=-a[i],--i,s[i][0]=-a[i];i===0&&(s[0][0]=-a[0])}return s};numeric._random=function t(e,r){var i,n=e[r],o=Array(n),s;if(r===e.length-1){for(s=Math.random,i=n-1;i>=1;i-=2)o[i]=s(),o[i-1]=s();return i===0&&(o[0]=s()),o}for(i=n-1;i>=0;i--)o[i]=t(e,r+1);return o};numeric.random=function(e){return numeric._random(e,0)};numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))};numeric.linspace=function(e,r,i){if(typeof i>"u"&&(i=Math.max(Math.round(r-e)+1,1)),i<2)return i===1?[e]:[];var n,o=Array(i);for(i--,n=i;n>=0;n--)o[n]=(n*r+(i-n)*e)/i;return o};numeric.getBlock=function(e,r,i){var n=numeric.dim(e);function o(s,a){var l,p=r[a],f=i[a]-p,d=Array(f);if(a===n.length-1){for(l=f;l>=0;l--)d[l]=s[l+p];return d}for(l=f;l>=0;l--)d[l]=o(s[l+p],a+1);return d}return o(e,0)};numeric.setBlock=function(e,r,i,n){var o=numeric.dim(e);function s(a,l,p){var f,d=r[p],m=i[p]-d;if(p===o.length-1)for(f=m;f>=0;f--)a[f+d]=l[f];for(f=m;f>=0;f--)s(a[f+d],l[f],p+1)}return s(e,n,0),e};numeric.getRange=function(e,r,i){var n=r.length,o=i.length,s,a,l=Array(n),p,f;for(s=n-1;s!==-1;--s)for(l[s]=Array(o),p=l[s],f=e[r[s]],a=o-1;a!==-1;--a)p[a]=f[i[a]];return l};numeric.blockMatrix=function(e){var r=numeric.dim(e);if(r.length<4)return numeric.blockMatrix([e]);var i=r[0],n=r[1],o,s,a,l,p;for(o=0,s=0,a=0;a<i;++a)o+=e[a][0].length;for(l=0;l<n;++l)s+=e[0][l][0].length;var f=Array(o);for(a=0;a<o;++a)f[a]=Array(s);var d=0,m,g,v,x,_;for(a=0;a<i;++a){for(m=s,l=n-1;l!==-1;--l)for(p=e[a][l],m-=p[0].length,v=p.length-1;v!==-1;--v)for(_=p[v],g=f[d+v],x=_.length-1;x!==-1;--x)g[m+x]=_[x];d+=e[a][0].length}return f};numeric.tensor=function(e,r){if(typeof e=="number"||typeof r=="number")return numeric.mul(e,r);var i=numeric.dim(e),n=numeric.dim(r);if(i.length!==1||n.length!==1)throw new Error("numeric: tensor product is only defined for vectors");var o=i[0],s=n[0],a=Array(o),l,p,f,d;for(p=o-1;p>=0;p--){for(l=Array(s),d=e[p],f=s-1;f>=3;--f)l[f]=d*r[f],--f,l[f]=d*r[f],--f,l[f]=d*r[f],--f,l[f]=d*r[f];for(;f>=0;)l[f]=d*r[f],--f;a[p]=l}return a};numeric.T=function(e,r){this.x=e,this.y=r};numeric.t=function(e,r){return new numeric.T(e,r)};numeric.Tbinop=function(e,r,i,n,o){var s=numeric.indexOf;if(typeof o!="string"){var a;o="";for(a in numeric)numeric.hasOwnProperty(a)&&(e.indexOf(a)>=0||r.indexOf(a)>=0||i.indexOf(a)>=0||n.indexOf(a)>=0)&&a.length>1&&(o+="var "+a+" = numeric."+a+`;
`)}return Function(["y"],`var x = this;
if(!(y instanceof numeric.T)) { y = new numeric.T(y); }
`+o+`
if(x.y) {  if(y.y) {    return new numeric.T(`+n+`);
  }
  return new numeric.T(`+i+`);
}
if(y.y) {
  return new numeric.T(`+r+`);
}
return new numeric.T(`+e+`);
`)};numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)");numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)");numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))");numeric.T.prototype.reciprocal=function(){var e=numeric.mul,r=numeric.div;if(this.y){var i=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(r(this.x,i),r(numeric.neg(this.y),i))}return new T(r(1,this.x))};numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var r=numeric.div;return this.y?new numeric.T(r(this.x,e.x),r(this.y,e.x)):new numeric.T(r(this.x,e.x))};numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))");numeric.T.prototype.transpose=function(){var e=numeric.transpose,r=this.x,i=this.y;return i?new numeric.T(e(r),e(i)):new numeric.T(e(r))};numeric.T.prototype.transjugate=function(){var e=numeric.transpose,r=this.x,i=this.y;return i?new numeric.T(e(r),numeric.negtranspose(i)):new numeric.T(e(r))};numeric.Tunop=function(e,r,i){return typeof i!="string"&&(i=""),Function(`var x = this;
`+i+`
if(x.y) {  `+r+`;
}
`+e+`;
`)};numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;");numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));");numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;");numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));");numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);");numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;");numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));",`var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();
return new numeric.T(numeric.log(r.x),theta.x);`);numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);",`var f = numeric.norm2Squared;
return Math.sqrt(f(x.x)+f(x.y));`);numeric.T.prototype.inv=function(){var e=this;if(typeof e.y>"u")return new numeric.T(numeric.inv(e.x));var r=e.x.length,x,_,E,i=numeric.identity(r),n=numeric.rep([r,r],0),o=numeric.clone(e.x),s=numeric.clone(e.y),a,l,p,f,d,m,g,v,x,_,E,O,L,I,D,R,W,N;for(x=0;x<r;x++){for(I=o[x][x],D=s[x][x],O=I*I+D*D,E=x,_=x+1;_<r;_++)I=o[_][x],D=s[_][x],L=I*I+D*D,L>O&&(E=_,O=L);for(E!==x&&(N=o[x],o[x]=o[E],o[E]=N,N=s[x],s[x]=s[E],s[E]=N,N=i[x],i[x]=i[E],i[E]=N,N=n[x],n[x]=n[E],n[E]=N),a=o[x],l=s[x],d=i[x],m=n[x],I=a[x],D=l[x],_=x+1;_<r;_++)R=a[_],W=l[_],a[_]=(R*I+W*D)/O,l[_]=(W*I-R*D)/O;for(_=0;_<r;_++)R=d[_],W=m[_],d[_]=(R*I+W*D)/O,m[_]=(W*I-R*D)/O;for(_=x+1;_<r;_++){for(p=o[_],f=s[_],g=i[_],v=n[_],I=p[x],D=f[x],E=x+1;E<r;E++)R=a[E],W=l[E],p[E]-=R*I-W*D,f[E]-=W*I+R*D;for(E=0;E<r;E++)R=d[E],W=m[E],g[E]-=R*I-W*D,v[E]-=W*I+R*D}}for(x=r-1;x>0;x--)for(d=i[x],m=n[x],_=x-1;_>=0;_--)for(g=i[_],v=n[_],I=o[_][x],D=s[_][x],E=r-1;E>=0;E--)R=d[E],W=m[E],g[E]-=I*R-D*W,v[E]-=I*W+D*R;return new numeric.T(i,n)};numeric.T.prototype.get=function(e){var r=this.x,i=this.y,n=0,o,s=e.length;if(i){for(;n<s;)o=e[n],r=r[o],i=i[o],n++;return new numeric.T(r,i)}for(;n<s;)o=e[n],r=r[o],n++;return new numeric.T(r)};numeric.T.prototype.set=function(e,r){var i=this.x,n=this.y,o=0,s,a=e.length,l=r.x,p=r.y;if(a===0)return p?this.y=p:n&&(this.y=void 0),this.x=i,this;if(p){for(n||(n=numeric.rep(numeric.dim(i),0),this.y=n);o<a-1;)s=e[o],i=i[s],n=n[s],o++;return s=e[o],i[s]=l,n[s]=p,this}if(n){for(;o<a-1;)s=e[o],i=i[s],n=n[s],o++;return s=e[o],i[s]=l,l instanceof Array?n[s]=numeric.rep(numeric.dim(l),0):n[s]=0,this}for(;o<a-1;)s=e[o],i=i[s],o++;return s=e[o],i[s]=l,this};numeric.T.prototype.getRows=function(e,r){var i=r-e+1,n,o=Array(i),s,a=this.x,l=this.y;for(n=e;n<=r;n++)o[n-e]=a[n];if(l){for(s=Array(i),n=e;n<=r;n++)s[n-e]=l[n];return new numeric.T(o,s)}return new numeric.T(o)};numeric.T.prototype.setRows=function(e,r,i){var n,o=this.x,s=this.y,a=i.x,l=i.y;for(n=e;n<=r;n++)o[n]=a[n-e];if(l)for(s||(s=numeric.rep(numeric.dim(o),0),this.y=s),n=e;n<=r;n++)s[n]=l[n-e];else if(s)for(n=e;n<=r;n++)s[n]=numeric.rep([a[n-e].length],0);return this};numeric.T.prototype.getRow=function(e){var r=this.x,i=this.y;return i?new numeric.T(r[e],i[e]):new numeric.T(r[e])};numeric.T.prototype.setRow=function(e,r){var i=this.x,n=this.y,o=r.x,s=r.y;return i[e]=o,s?(n||(n=numeric.rep(numeric.dim(i),0),this.y=n),n[e]=s):n&&(n=numeric.rep([o.length],0)),this};numeric.T.prototype.getBlock=function(e,r){var i=this.x,n=this.y,o=numeric.getBlock;return n?new numeric.T(o(i,e,r),o(n,e,r)):new numeric.T(o(i,e,r))};numeric.T.prototype.setBlock=function(e,r,i){i instanceof numeric.T||(i=new numeric.T(i));var n=this.x,o=this.y,s=numeric.setBlock,a=i.x,l=i.y;if(l)return o||(this.y=numeric.rep(numeric.dim(this),0),o=this.y),s(n,e,r,a),s(o,e,r,l),this;s(n,e,r,a),o&&s(o,e,r,numeric.rep(numeric.dim(a),0))};numeric.T.rep=function(e,r){var i=numeric.T;r instanceof i||(r=new i(r));var n=r.x,o=r.y,s=numeric.rep;return o?new i(s(e,n),s(e,o)):new i(s(e,n))};numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var r=e.x,i=e.y,n=numeric.diag;return i?new numeric.T(n(r),n(i)):new numeric.T(n(r))};numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)};numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))};numeric.T.prototype.getDiag=function(){var e=numeric,r=this.x,i=this.y;return i?new e.T(e.getDiag(r),e.getDiag(i)):new e.T(e.getDiag(r))};numeric.house=function(e){var r=numeric.clone(e),i=e[0]>=0?1:-1,n=i*numeric.norm2(e);r[0]+=n;var o=numeric.norm2(r);if(o===0)throw new Error("eig: internal error");return numeric.div(r,o)};numeric.toUpperHessenberg=function(e){var r=numeric.dim(e);if(r.length!==2||r[0]!==r[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var i=r[0],n,o,s,a,l,p=numeric.clone(e),f,d,m,g,v=numeric.identity(i),x;for(o=0;o<i-2;o++){for(a=Array(i-o-1),n=o+1;n<i;n++)a[n-o-1]=p[n][o];if(numeric.norm2(a)>0){for(l=numeric.house(a),f=numeric.getBlock(p,[o+1,o],[i-1,i-1]),d=numeric.tensor(l,numeric.dot(l,f)),n=o+1;n<i;n++)for(m=p[n],g=d[n-o-1],s=o;s<i;s++)m[s]-=2*g[s-o];for(f=numeric.getBlock(p,[0,o+1],[i-1,i-1]),d=numeric.tensor(numeric.dot(f,l),l),n=0;n<i;n++)for(m=p[n],g=d[n],s=o+1;s<i;s++)m[s]-=2*g[s-o-1];for(f=Array(i-o-1),n=o+1;n<i;n++)f[n-o-1]=v[n];for(d=numeric.tensor(l,numeric.dot(l,f)),n=o+1;n<i;n++)for(x=v[n],g=d[n-o-1],s=0;s<i;s++)x[s]-=2*g[s]}}return{H:p,Q:v}};numeric.epsilon=2220446049250313e-31;numeric.QRFrancis=function(t,e){typeof e>"u"&&(e=1e4),t=numeric.clone(t);var r=numeric.clone(t),i=numeric.dim(t),n=i[0],o,s,a,l,p,f,d,m,g,v=numeric.identity(n),x,_,E,O,L,I,D,R,W;if(n<3)return{Q:v,B:[[0,n-1]]};var N=numeric.epsilon;for(W=0;W<e;W++){for(D=0;D<n-1;D++)if(Math.abs(t[D+1][D])<N*(Math.abs(t[D][D])+Math.abs(t[D+1][D+1]))){var z=numeric.QRFrancis(numeric.getBlock(t,[0,0],[D,D]),e),$=numeric.QRFrancis(numeric.getBlock(t,[D+1,D+1],[n-1,n-1]),e);for(E=Array(D+1),I=0;I<=D;I++)E[I]=v[I];for(O=numeric.dot(z.Q,E),I=0;I<=D;I++)v[I]=O[I];for(E=Array(n-D-1),I=D+1;I<n;I++)E[I-D-1]=v[I];for(O=numeric.dot($.Q,E),I=D+1;I<n;I++)v[I]=O[I-D-1];return{Q:v,B:z.B.concat(numeric.add($.B,D+1))}}if(a=t[n-2][n-2],l=t[n-2][n-1],p=t[n-1][n-2],f=t[n-1][n-1],m=a+f,d=a*f-l*p,g=numeric.getBlock(t,[0,0],[2,2]),m*m>=4*d){var q,J;q=.5*(m+Math.sqrt(m*m-4*d)),J=.5*(m-Math.sqrt(m*m-4*d)),g=numeric.add(numeric.sub(numeric.dot(g,g),numeric.mul(g,q+J)),numeric.diag(numeric.rep([3],q*J)))}else g=numeric.add(numeric.sub(numeric.dot(g,g),numeric.mul(g,m)),numeric.diag(numeric.rep([3],d)));for(o=[g[0][0],g[1][0],g[2][0]],s=numeric.house(o),E=[t[0],t[1],t[2]],O=numeric.tensor(s,numeric.dot(s,E)),I=0;I<3;I++)for(_=t[I],L=O[I],R=0;R<n;R++)_[R]-=2*L[R];for(E=numeric.getBlock(t,[0,0],[n-1,2]),O=numeric.tensor(numeric.dot(E,s),s),I=0;I<n;I++)for(_=t[I],L=O[I],R=0;R<3;R++)_[R]-=2*L[R];for(E=[v[0],v[1],v[2]],O=numeric.tensor(s,numeric.dot(s,E)),I=0;I<3;I++)for(x=v[I],L=O[I],R=0;R<n;R++)x[R]-=2*L[R];var X;for(D=0;D<n-2;D++){for(R=D;R<=D+1;R++)if(Math.abs(t[R+1][R])<N*(Math.abs(t[R][R])+Math.abs(t[R+1][R+1]))){var z=numeric.QRFrancis(numeric.getBlock(t,[0,0],[R,R]),e),$=numeric.QRFrancis(numeric.getBlock(t,[R+1,R+1],[n-1,n-1]),e);for(E=Array(R+1),I=0;I<=R;I++)E[I]=v[I];for(O=numeric.dot(z.Q,E),I=0;I<=R;I++)v[I]=O[I];for(E=Array(n-R-1),I=R+1;I<n;I++)E[I-R-1]=v[I];for(O=numeric.dot($.Q,E),I=R+1;I<n;I++)v[I]=O[I-R-1];return{Q:v,B:z.B.concat(numeric.add($.B,R+1))}}for(X=Math.min(n-1,D+3),o=Array(X-D),I=D+1;I<=X;I++)o[I-D-1]=t[I][D];for(s=numeric.house(o),E=numeric.getBlock(t,[D+1,D],[X,n-1]),O=numeric.tensor(s,numeric.dot(s,E)),I=D+1;I<=X;I++)for(_=t[I],L=O[I-D-1],R=D;R<n;R++)_[R]-=2*L[R-D];for(E=numeric.getBlock(t,[0,D+1],[n-1,X]),O=numeric.tensor(numeric.dot(E,s),s),I=0;I<n;I++)for(_=t[I],L=O[I],R=D+1;R<=X;R++)_[R]-=2*L[R-D-1];for(E=Array(X-D),I=D+1;I<=X;I++)E[I-D-1]=v[I];for(O=numeric.tensor(s,numeric.dot(s,E)),I=D+1;I<=X;I++)for(x=v[I],L=O[I-D-1],R=0;R<n;R++)x[R]-=2*L[R]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")};numeric.eig=function(e,r){var i=numeric.toUpperHessenberg(e),n=numeric.QRFrancis(i.H,r),o=numeric.T,se=e.length,s,a,l=!1,p=n.B,f=numeric.dot(n.Q,numeric.dot(i.H,numeric.transpose(n.Q))),d=new o(numeric.dot(n.Q,i.Q)),m,g=p.length,v,x,_,E,O,L,I,D,R,W,N,z,$,q,J=Math.sqrt;for(a=0;a<g;a++)if(s=p[a][0],s!==p[a][1]){if(v=s+1,x=f[s][s],_=f[s][v],E=f[v][s],O=f[v][v],_===0&&E===0)continue;L=-x-O,I=x*O-_*E,D=L*L-4*I,D>=0?(L<0?R=-.5*(L-J(D)):R=-.5*(L+J(D)),$=(x-R)*(x-R)+_*_,q=E*E+(O-R)*(O-R),$>q?($=J($),N=(x-R)/$,z=_/$):(q=J(q),N=E/q,z=(O-R)/q),m=new o([[z,-N],[N,z]]),d.setRows(s,v,m.dot(d.getRows(s,v)))):(R=-.5*L,W=.5*J(-D),$=(x-R)*(x-R)+_*_,q=E*E+(O-R)*(O-R),$>q?($=J($+W*W),N=(x-R)/$,z=_/$,R=0,W/=$):(q=J(q+W*W),N=E/q,z=(O-R)/q,R=W/q,W=0),m=new o([[z,-N],[N,z]],[[R,W],[W,-R]]),d.setRows(s,v,m.dot(d.getRows(s,v))))}var X=d.dot(e).dot(d.transjugate()),se=e.length,ee=numeric.T.identity(se);for(v=0;v<se;v++)if(v>0)for(a=v-1;a>=0;a--){var Z=X.get([a,a]),Y=X.get([v,v]);if(numeric.neq(Z.x,Y.x)||numeric.neq(Z.y,Y.y))R=X.getRow(a).getBlock([a],[v-1]),W=ee.getRow(v).getBlock([a],[v-1]),ee.set([v,a],X.get([a,v]).neg().sub(R.dot(W)).div(Z.sub(Y)));else{ee.setRow(v,ee.getRow(a));continue}}for(v=0;v<se;v++)R=ee.getRow(v),ee.setRow(v,R.div(R.norm2()));return ee=ee.transpose(),ee=d.transjugate().dot(ee),{lambda:X.getDiag(),E:ee}};numeric.ccsSparse=function(e){var r=e.length,a,i,n,o,s=[];for(n=r-1;n!==-1;--n){i=e[n];for(o in i){for(o=parseInt(o);o>=s.length;)s[s.length]=0;i[o]!==0&&s[o]++}}var a=s.length,l=Array(a+1);for(l[0]=0,n=0;n<a;++n)l[n+1]=l[n]+s[n];var p=Array(l[a]),f=Array(l[a]);for(n=r-1;n!==-1;--n){i=e[n];for(o in i)i[o]!==0&&(s[o]--,p[l[o]+s[o]]=n,f[l[o]+s[o]]=i[o])}return[l,p,f]};numeric.ccsFull=function(e){var r=e[0],i=e[1],n=e[2],o=numeric.ccsDim(e),s=o[0],a=o[1],l,p,f,d,m,g=numeric.rep([s,a],0);for(l=0;l<a;l++)for(f=r[l],d=r[l+1],p=f;p<d;++p)g[i[p]][l]=n[p];return g};numeric.ccsTSolve=function(e,r,i,n,o){var s=e[0],a=e[1],l=e[2],p=s.length-1,f=Math.max,d=0;typeof n>"u"&&(i=numeric.rep([p],0)),typeof n>"u"&&(n=numeric.linspace(0,i.length-1)),typeof o>"u"&&(o=[]);function m(R){var W;if(i[R]===0){for(i[R]=1,W=s[R];W<s[R+1];++W)m(a[W]);o[d]=R,++d}}var g,v,x,_,E,O,L,I,D;for(g=n.length-1;g!==-1;--g)m(n[g]);for(o.length=d,g=o.length-1;g!==-1;--g)i[o[g]]=0;for(g=n.length-1;g!==-1;--g)v=n[g],i[v]=r[v];for(g=o.length-1;g!==-1;--g){for(v=o[g],x=s[v],_=f(s[v+1],x),E=x;E!==_;++E)if(a[E]===v){i[v]/=l[E];break}for(D=i[v],E=x;E!==_;++E)O=a[E],O!==v&&(i[O]-=D*l[E])}return i};numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)};numeric.ccsDFS.prototype.dfs=function(e,r,i,n,o,s){var a=0,l,p=o.length,f=this.k,d=this.k1,m=this.j,g,v;if(n[e]===0)for(n[e]=1,m[0]=e,f[0]=g=r[e],d[0]=v=r[e+1];;)if(g>=v){if(o[p]=m[a],a===0)return;++p,--a,g=f[a],v=d[a]}else l=s[i[g]],n[l]===0?(n[l]=1,f[a]=g,++a,m[a]=l,g=r[l],d[a]=v=r[l+1]):++g};numeric.ccsLPSolve=function(e,r,i,n,o,s,a){var l=e[0],p=e[1],f=e[2],d=l.length-1,m=0,g=r[0],v=r[1],x=r[2],_,E,O,L,I,D,R,W,N,z,$,q;for(E=g[o],O=g[o+1],n.length=0,_=E;_<O;++_)a.dfs(s[v[_]],l,p,i,n,s);for(_=n.length-1;_!==-1;--_)i[n[_]]=0;for(_=E;_!==O;++_)L=s[v[_]],i[L]=x[_];for(_=n.length-1;_!==-1;--_){for(L=n[_],D=l[L],R=l[L+1],W=D;W<R;++W)if(s[p[W]]===L){i[L]/=f[W];break}for(q=i[L],W=D;W<R;++W)N=s[p[W]],N!==L&&(i[N]-=q*f[W])}return i};numeric.ccsLUP1=function(e,r){var i=e[0].length-1,n=[numeric.rep([i+1],0),[],[]],o=[numeric.rep([i+1],0),[],[]],s=n[0],a=n[1],l=n[2],p=o[0],f=o[1],d=o[2],m=numeric.rep([i],0),g=numeric.rep([i],0),v,x,_,E,O,L,I,D,R,W,N=numeric.ccsLPSolve,z=Math.max,$=Math.abs,q=numeric.linspace(0,i-1),J=numeric.linspace(0,i-1),X=new numeric.ccsDFS(i);for(typeof r>"u"&&(r=1),v=0;v<i;++v){for(N(n,e,m,g,v,J,X),L=-1,I=-1,x=g.length-1;x!==-1;--x)_=g[x],!(_<=v)&&(D=$(m[_]),D>L&&(I=_,L=D));for($(m[v])<r*L&&(x=q[v],L=q[I],q[v]=L,J[L]=v,q[I]=x,J[x]=I,L=m[v],m[v]=m[I],m[I]=L),L=s[v],I=p[v],R=m[v],a[L]=q[v],l[L]=1,++L,x=g.length-1;x!==-1;--x)_=g[x],D=m[_],g[x]=0,m[_]=0,_<=v?(f[I]=_,d[I]=D,++I):(a[L]=q[_],l[L]=D/R,++L);s[v+1]=L,p[v+1]=I}for(x=a.length-1;x!==-1;--x)a[x]=J[a[x]];return{L:n,U:o,P:q,Pinv:J}};numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)};numeric.ccsDFS0.prototype.dfs=function(e,r,i,n,o,s,a){var l=0,p,f=o.length,d=this.k,m=this.k1,g=this.j,v,x;if(n[e]===0)for(n[e]=1,g[0]=e,d[0]=v=r[s[e]],m[0]=x=r[s[e]+1];;){if(isNaN(v))throw new Error("Ow!");if(v>=x){if(o[f]=s[g[l]],l===0)return;++f,--l,v=d[l],x=m[l]}else p=i[v],n[p]===0?(n[p]=1,d[l]=v,++l,g[l]=p,p=s[p],v=r[p],m[l]=x=r[p+1]):++v}};numeric.ccsLPSolve0=function(e,r,i,n,o,s,a,l){var p=e[0],f=e[1],d=e[2],m=p.length-1,g=0,v=r[0],x=r[1],_=r[2],E,O,L,I,D,R,W,N,z,$,q,J;for(O=v[o],L=v[o+1],n.length=0,E=O;E<L;++E)l.dfs(x[E],p,f,i,n,s,a);for(E=n.length-1;E!==-1;--E)I=n[E],i[a[I]]=0;for(E=O;E!==L;++E)I=x[E],i[I]=_[E];for(E=n.length-1;E!==-1;--E){for(I=n[E],z=a[I],R=p[I],W=p[I+1],N=R;N<W;++N)if(f[N]===z){i[z]/=d[N];break}for(J=i[z],N=R;N<W;++N)i[f[N]]-=J*d[N];i[z]=J}};numeric.ccsLUP0=function(e,r){var i=e[0].length-1,n=[numeric.rep([i+1],0),[],[]],o=[numeric.rep([i+1],0),[],[]],s=n[0],a=n[1],l=n[2],p=o[0],f=o[1],d=o[2],m=numeric.rep([i],0),g=numeric.rep([i],0),v,x,_,E,O,L,I,D,R,W,N=numeric.ccsLPSolve0,z=Math.max,$=Math.abs,q=numeric.linspace(0,i-1),J=numeric.linspace(0,i-1),X=new numeric.ccsDFS0(i);for(typeof r>"u"&&(r=1),v=0;v<i;++v){for(N(n,e,m,g,v,J,q,X),L=-1,I=-1,x=g.length-1;x!==-1;--x)_=g[x],!(_<=v)&&(D=$(m[q[_]]),D>L&&(I=_,L=D));for($(m[q[v]])<r*L&&(x=q[v],L=q[I],q[v]=L,J[L]=v,q[I]=x,J[x]=I),L=s[v],I=p[v],R=m[q[v]],a[L]=q[v],l[L]=1,++L,x=g.length-1;x!==-1;--x)_=g[x],D=m[q[_]],g[x]=0,m[q[_]]=0,_<=v?(f[I]=_,d[I]=D,++I):(a[L]=q[_],l[L]=D/R,++L);s[v+1]=L,p[v+1]=I}for(x=a.length-1;x!==-1;--x)a[x]=J[a[x]];return{L:n,U:o,P:q,Pinv:J}};numeric.ccsLUP=numeric.ccsLUP0;numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]};numeric.ccsGetBlock=function(e,r,i){var n=numeric.ccsDim(e),o=n[0],s=n[1];typeof r>"u"?r=numeric.linspace(0,o-1):typeof r=="number"&&(r=[r]),typeof i>"u"?i=numeric.linspace(0,s-1):typeof i=="number"&&(i=[i]);var a,l,p,f=r.length,d,m=i.length,g,v,x,_=numeric.rep([s],0),E=[],O=[],L=[_,E,O],I=e[0],D=e[1],R=e[2],W=numeric.rep([o],0),N=0,z=numeric.rep([o],0);for(d=0;d<m;++d){v=i[d];var $=I[v],q=I[v+1];for(a=$;a<q;++a)g=D[a],z[g]=1,W[g]=R[a];for(a=0;a<f;++a)x=r[a],z[x]&&(E[N]=a,O[N]=W[r[a]],++N);for(a=$;a<q;++a)g=D[a],z[g]=0;_[d+1]=N}return L};numeric.ccsDot=function(e,r){var i=e[0],n=e[1],o=e[2],s=r[0],a=r[1],l=r[2],p=numeric.ccsDim(e),f=numeric.ccsDim(r),d=p[0],m=p[1],g=f[1],v=numeric.rep([d],0),x=numeric.rep([d],0),_=Array(d),E=numeric.rep([g],0),O=[],L=[],I=[E,O,L],D,R,W,N,z,$,q,J,X,se,ee;for(W=0;W!==g;++W){for(N=s[W],z=s[W+1],X=0,R=N;R<z;++R)for(se=a[R],ee=l[R],$=i[se],q=i[se+1],D=$;D<q;++D)J=n[D],x[J]===0&&(_[X]=J,x[J]=1,X=X+1),v[J]=v[J]+o[D]*ee;for(N=E[W],z=N+X,E[W+1]=z,R=X-1;R!==-1;--R)ee=N+R,D=_[R],O[ee]=D,L[ee]=v[D],x[D]=0,v[D]=0;E[W+1]=E[W]+X}return I};numeric.ccsLUPSolve=function(e,r){var i=e.L,n=e.U,o=e.P,s=r[0],a=!1;typeof s!="object"&&(r=[[0,r.length],numeric.linspace(0,r.length-1),r],s=r[0],a=!0);var l=r[1],p=r[2],f=i[0].length-1,d=s.length-1,m=numeric.rep([f],0),g=Array(f),v=numeric.rep([f],0),x=Array(f),_=numeric.rep([d+1],0),E=[],O=[],L=numeric.ccsTSolve,I,D,R,W,N,z,$=0;for(I=0;I<d;++I){for(N=0,R=s[I],W=s[I+1],D=R;D<W;++D)z=e.Pinv[l[D]],x[N]=z,v[z]=p[D],++N;for(x.length=N,L(i,v,m,x,g),D=x.length-1;D!==-1;--D)v[x[D]]=0;if(L(n,m,v,g,x),a)return v;for(D=g.length-1;D!==-1;--D)m[g[D]]=0;for(D=x.length-1;D!==-1;--D)z=x[D],E[$]=z,O[$]=v[z],v[z]=0,++$;_[I+1]=$}return[_,E,O]};numeric.ccsbinop=function(e,r){return typeof r>"u"&&(r=""),Function("X","Y",`var Xi = X[0], Xj = X[1], Xv = X[2];
var Yi = Y[0], Yj = Y[1], Yv = Y[2];
var n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;
var Zi = numeric.rep([n+1],0), Zj = [], Zv = [];
var x = numeric.rep([m],0),y = numeric.rep([m],0);
var xk,yk,zk;
var i,j,j0,j1,k,p=0;
`+r+`for(i=0;i<n;++i) {
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Xj[j];
    x[k] = 1;
    Zj[p] = k;
    ++p;
  }
  j0 = Yi[i]; j1 = Yi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Yj[j];
    y[k] = Yv[j];
    if(x[k] === 0) {
      Zj[p] = k;
      ++p;
    }
  }
  Zi[i+1] = p;
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];
  j0 = Zi[i]; j1 = Zi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Zj[j];
    xk = x[k];
    yk = y[k];
`+e+`
    Zv[j] = zk;
  }
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;
  j0 = Yi[i]; j1 = Yi[i+1];
  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;
}
return [Zi,Zj,Zv];`)};(function(){var k,A,B,C;for(k in numeric.ops2)isFinite(eval("1"+numeric.ops2[k]+"0"))?A="[Y[0],Y[1],numeric."+k+"(X,Y[2])]":A="NaN",isFinite(eval("0"+numeric.ops2[k]+"1"))?B="[X[0],X[1],numeric."+k+"(X[2],Y)]":B="NaN",isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?C="numeric.ccs"+k+"MM(X,Y)":C="NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+`;
if(typeof Y === "number") return `+B+`;
return `+C+`;
`)})();numeric.ccsScatter=function t(e){var r=e[0],i=e[1],n=e[2],o=numeric.sup(i)+1,s=r.length,a=numeric.rep([o],0),l=Array(s),p=Array(s),f=numeric.rep([o],0),d;for(d=0;d<s;++d)f[i[d]]++;for(d=0;d<o;++d)a[d+1]=a[d]+f[d];var m=a.slice(0),g,v;for(d=0;d<s;++d)v=i[d],g=m[v],l[g]=r[d],p[g]=n[d],m[v]=m[v]+1;return[a,l,p]};numeric.ccsGather=function t(e){var r=e[0],i=e[1],n=e[2],o=r.length-1,s=i.length,a=Array(s),l=Array(s),p=Array(s),f,d,m,g,v;for(v=0,f=0;f<o;++f)for(m=r[f],g=r[f+1],d=m;d!==g;++d)l[v]=f,a[v]=i[d],p[v]=n[d],++v;return[a,l,p]};numeric.sdim=function t(e,r,i){if(typeof r>"u"&&(r=[]),typeof e!="object")return r;typeof i>"u"&&(i=0),i in r||(r[i]=0),e.length>r[i]&&(r[i]=e.length);var n;for(n in e)e.hasOwnProperty(n)&&t(e[n],r,i+1);return r};numeric.sclone=function t(e,r,i){typeof r>"u"&&(r=0),typeof i>"u"&&(i=numeric.sdim(e).length);var n,o=Array(e.length);if(r===i-1){for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o}for(n in e)e.hasOwnProperty(n)&&(o[n]=t(e[n],r+1,i));return o};numeric.sdiag=function t(e){var r=e.length,i,n=Array(r),o,s,a;for(i=r-1;i>=1;i-=2)o=i-1,n[i]=[],n[i][i]=e[i],n[o]=[],n[o][o]=e[o];return i===0&&(n[0]=[],n[0][0]=e[i]),n};numeric.sidentity=function t(e){return numeric.sdiag(numeric.rep([e],1))};numeric.stranspose=function t(e){var r=[],i=e.length,n,o,s;for(n in e)if(e.hasOwnProperty(n)){s=e[n];for(o in s)s.hasOwnProperty(o)&&(typeof r[o]!="object"&&(r[o]=[]),r[o][n]=s[o])}return r};numeric.sLUP=function t(e,r){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")};numeric.sdotMM=function t(e,r){var i=e.length,n=r.length,o=numeric.stranspose(r),s=o.length,a,l,p,f,d,m,g=Array(i),v;for(p=i-1;p>=0;p--){for(v=[],a=e[p],d=s-1;d>=0;d--){m=0,l=o[d];for(f in a)a.hasOwnProperty(f)&&f in l&&(m+=a[f]*l[f]);m&&(v[d]=m)}g[p]=v}return g};numeric.sdotMV=function t(e,r){var i=e.length,n,o,s,a=Array(i),l;for(o=i-1;o>=0;o--){n=e[o],l=0;for(s in n)n.hasOwnProperty(s)&&r[s]&&(l+=n[s]*r[s]);l&&(a[o]=l)}return a};numeric.sdotVM=function t(e,r){var i,n,o,s,a=[],l;for(i in e)if(e.hasOwnProperty(i)){o=r[i],s=e[i];for(n in o)o.hasOwnProperty(n)&&(a[n]||(a[n]=0),a[n]+=s*o[n])}return a};numeric.sdotVV=function t(e,r){var i,n=0;for(i in e)e[i]&&r[i]&&(n+=e[i]*r[i]);return n};numeric.sdot=function t(e,r){var i=numeric.sdim(e).length,n=numeric.sdim(r).length,o=i*1e3+n;switch(o){case 0:return e*r;case 1001:return numeric.sdotVV(e,r);case 2001:return numeric.sdotMV(e,r);case 1002:return numeric.sdotVM(e,r);case 2002:return numeric.sdotMM(e,r);default:throw new Error("numeric.sdot not implemented for tensors of order "+i+" and "+n)}};numeric.sscatter=function t(e){var r=e[0].length,i,n,o,s=e.length,a=[],l;for(n=r-1;n>=0;--n)if(e[s-1][n]){for(l=a,o=0;o<s-2;o++)i=e[o][n],l[i]||(l[i]=[]),l=l[i];l[e[o][n]]=e[o+1][n]}return a};numeric.sgather=function t(e,r,i){typeof r>"u"&&(r=[]),typeof i>"u"&&(i=[]);var n,o,s;n=i.length;for(o in e)if(e.hasOwnProperty(o))if(i[n]=parseInt(o),s=e[o],typeof s=="number"){if(s){if(r.length===0)for(o=n+1;o>=0;--o)r[o]=[];for(o=n;o>=0;--o)r[o].push(i[o]);r[n+1].push(s)}}else t(s,r,i);return i.length>n&&i.pop(),r};numeric.cLU=function t(e){var r=e[0],i=e[1],n=e[2],z=r.length,o=0,s,a,l,p,f,d;for(s=0;s<z;s++)r[s]>o&&(o=r[s]);o++;var m=Array(o),g=Array(o),v=numeric.rep([o],1/0),x=numeric.rep([o],-1/0),L,I,_;for(l=0;l<z;l++)s=r[l],a=i[l],a<v[s]&&(v[s]=a),a>x[s]&&(x[s]=a);for(s=0;s<o-1;s++)x[s]>x[s+1]&&(x[s+1]=x[s]);for(s=o-1;s>=1;s--)v[s]<v[s-1]&&(v[s-1]=v[s]);var E=0,O=0;for(s=0;s<o;s++)g[s]=numeric.rep([x[s]-v[s]+1],0),m[s]=numeric.rep([s-v[s]],0),E+=s-v[s]+1,O+=x[s]-s+1;for(l=0;l<z;l++)s=r[l],g[s][i[l]-v[s]]=n[l];for(s=0;s<o-1;s++)for(p=s-v[s],L=g[s],a=s+1;v[a]<=s&&a<o;a++)if(f=s-v[a],d=x[s]-s,I=g[a],_=I[f]/L[p],_){for(l=1;l<=d;l++)I[l+f]-=_*L[l+p];m[a][s-v[a]]=_}var L=[],I=[],D=[],R=[],W=[],N=[],z,$,q;for(z=0,$=0,s=0;s<o;s++){for(p=v[s],f=x[s],q=g[s],a=s;a<=f;a++)q[a-p]&&(L[z]=s,I[z]=a,D[z]=q[a-p],z++);for(q=m[s],a=p;a<s;a++)q[a-p]&&(R[$]=s,W[$]=a,N[$]=q[a-p],$++);R[$]=s,W[$]=s,N[$]=1,$++}return{U:[L,I,D],L:[R,W,N]}};numeric.cLUsolve=function t(e,r){var i=e.L,n=e.U,o=numeric.clone(r),s=i[0],a=i[1],l=i[2],p=n[0],f=n[1],d=n[2],m=p.length,g=s.length,v=o.length,x,_,E;for(E=0,x=0;x<v;x++){for(;a[E]<x;)o[x]-=l[E]*o[a[E]],E++;E++}for(E=m-1,x=v-1;x>=0;x--){for(;f[E]>x;)o[x]-=d[E]*o[f[E]],E--;o[x]/=d[E],E--}return o};numeric.cgrid=function t(e,r){typeof e=="number"&&(e=[e,e]);var i=numeric.rep(e,-1),n,o,s;if(typeof r!="function")switch(r){case"L":r=function(a,l){return a>=e[0]/2||l<e[1]/2};break;default:r=function(a,l){return!0};break}for(s=0,n=1;n<e[0]-1;n++)for(o=1;o<e[1]-1;o++)r(n,o)&&(i[n][o]=s,s++);return i};numeric.cdelsq=function t(e){var r=[[-1,0],[0,-1],[0,1],[1,0]],i=numeric.dim(e),n=i[0],o=i[1],s,a,l,p,f,d=[],m=[],g=[];for(s=1;s<n-1;s++)for(a=1;a<o-1;a++)if(!(e[s][a]<0)){for(l=0;l<4;l++)p=s+r[l][0],f=a+r[l][1],!(e[p][f]<0)&&(d.push(e[s][a]),m.push(e[p][f]),g.push(-1));d.push(e[s][a]),m.push(e[s][a]),g.push(4)}return[d,m,g]};numeric.cdotMV=function t(e,r){var i,n=e[0],o=e[1],s=e[2],a,l=n.length,p;for(p=0,a=0;a<l;a++)n[a]>p&&(p=n[a]);for(p++,i=numeric.rep([p],0),a=0;a<l;a++)i[n[a]]+=s[a]*r[o[a]];return i};numeric.Spline=function t(e,r,i,n,o){this.x=e,this.yl=r,this.yr=i,this.kl=n,this.kr=o};numeric.Spline.prototype._at=function t(l,r){var i=this.x,n=this.yl,o=this.yr,s=this.kl,a=this.kr,l,p,f,d,m=numeric.add,g=numeric.sub,v=numeric.mul;p=g(v(s[r],i[r+1]-i[r]),g(o[r+1],n[r])),f=m(v(a[r+1],i[r]-i[r+1]),g(o[r+1],n[r])),d=(l-i[r])/(i[r+1]-i[r]);var x=d*(1-d);return m(m(m(v(1-d,n[r]),v(d,o[r+1])),v(p,x*(1-d))),v(f,x*d))};numeric.Spline.prototype.at=function t(e){if(typeof e=="number"){var r=this.x,f=r.length,i,n,o,s=Math.floor,a,l,p;for(i=0,n=f-1;n-i>1;)o=s((i+n)/2),r[o]<=e?i=o:n=o;return this._at(e,i)}var f=e.length,d,m=Array(f);for(d=f-1;d!==-1;--d)m[d]=this.at(e[d]);return m};numeric.Spline.prototype.diff=function t(){var e=this.x,r=this.yl,i=this.yr,n=this.kl,o=this.kr,s=r.length,a,l,p,f=n,d=o,m=Array(s),g=Array(s),v=numeric.add,x=numeric.mul,_=numeric.div,E=numeric.sub;for(a=s-1;a!==-1;--a)l=e[a+1]-e[a],p=E(i[a+1],r[a]),m[a]=_(v(x(p,6),x(n[a],-4*l),x(o[a+1],-2*l)),l*l),g[a+1]=_(v(x(p,-6),x(n[a],2*l),x(o[a+1],4*l)),l*l);return new numeric.Spline(e,f,d,m,g)};numeric.Spline.prototype.roots=function t(){function e(we){return we*we}function r(we,Re,ve,Ae,Ve){var Me=ve*2-(Re-we),Le=-Ae*2+(Re-we),We=(Ve+1)*.5,Fe=We*(1-We);return(1-We)*we+We*Re+Me*Fe*(1-We)+Le*Fe*We}var I=[],i=this.x,n=this.yl,o=this.yr,s=this.kl,a=this.kr;typeof n[0]=="number"&&(n=[n],o=[o],s=[s],a=[a]);var l=n.length,p=i.length-1,f,d,m,g,v,x,_,E,O,L,I=Array(l),D,R,W,N,z,$,q,J,X,se,ee,Z,Y,te,re,ie,ae,he=Math.sqrt;for(f=0;f!==l;++f){for(_=n[f],E=o[f],O=s[f],L=a[f],D=[],d=0;d!==p;d++){for(d>0&&E[d]*_[d]<0&&D.push(i[d]),X=i[d+1]-i[d],se=i[d],N=_[d],z=E[d+1],R=O[d]/X,W=L[d+1]/X,J=e(R-W+3*(N-z))+12*W*N,$=W+3*N+2*R-3*z,q=3*(W+R+2*(N-z)),J<=0?(Z=$/q,Z>i[d]&&Z<i[d+1]?ee=[i[d],Z,i[d+1]]:ee=[i[d],i[d+1]]):(Z=($-he(J))/q,Y=($+he(J))/q,ee=[i[d]],Z>i[d]&&Z<i[d+1]&&ee.push(Z),Y>i[d]&&Y<i[d+1]&&ee.push(Y),ee.push(i[d+1])),re=ee[0],Z=this._at(re,d),m=0;m<ee.length-1;m++){if(ie=ee[m+1],Y=this._at(ie,d),Z===0){D.push(re),re=ie,Z=Y;continue}if(Y===0||Z*Y>0){re=ie,Z=Y;continue}for(var de=0;ae=(Z*ie-Y*re)/(Z-Y),!(ae<=re||ae>=ie);)if(te=this._at(ae,d),te*Y>0)ie=ae,Y=te,de===-1&&(Z*=.5),de=-1;else if(te*Z>0)re=ae,Z=te,de===1&&(Y*=.5),de=1;else break;D.push(ae),re=ee[m+1],Z=this._at(re,d)}Y===0&&D.push(ie)}I[f]=D}return typeof this.yl[0]=="number"?I[0]:I};numeric.spline=function t(e,r,i,n){var o=e.length,s=[],a=[],l=[],p,f=numeric.sub,d=numeric.mul,m=numeric.add;for(p=o-2;p>=0;p--)a[p]=e[p+1]-e[p],l[p]=f(r[p+1],r[p]);(typeof i=="string"||typeof n=="string")&&(i=n="periodic");var g=[[],[],[]];switch(typeof i){case"undefined":s[0]=d(3/(a[0]*a[0]),l[0]),g[0].push(0,0),g[1].push(0,1),g[2].push(2/a[0],1/a[0]);break;case"string":s[0]=m(d(3/(a[o-2]*a[o-2]),l[o-2]),d(3/(a[0]*a[0]),l[0])),g[0].push(0,0,0),g[1].push(o-2,0,1),g[2].push(1/a[o-2],2/a[o-2]+2/a[0],1/a[0]);break;default:s[0]=i,g[0].push(0),g[1].push(0),g[2].push(1);break}for(p=1;p<o-1;p++)s[p]=m(d(3/(a[p-1]*a[p-1]),l[p-1]),d(3/(a[p]*a[p]),l[p])),g[0].push(p,p,p),g[1].push(p-1,p,p+1),g[2].push(1/a[p-1],2/a[p-1]+2/a[p],1/a[p]);switch(typeof n){case"undefined":s[o-1]=d(3/(a[o-2]*a[o-2]),l[o-2]),g[0].push(o-1,o-1),g[1].push(o-2,o-1),g[2].push(1/a[o-2],2/a[o-2]);break;case"string":g[1][g[1].length-1]=0;break;default:s[o-1]=n,g[0].push(o-1),g[1].push(o-1),g[2].push(1);break}typeof s[0]!="number"?s=numeric.transpose(s):s=[s];var v=Array(s.length);if(typeof i=="string")for(p=v.length-1;p!==-1;--p)v[p]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(g)),s[p]),v[p][o-1]=v[p][0];else for(p=v.length-1;p!==-1;--p)v[p]=numeric.cLUsolve(numeric.cLU(g),s[p]);return typeof r[0]=="number"?v=v[0]:v=numeric.transpose(v),new numeric.Spline(e,r,r,v,v)};numeric.fftpow2=function t(e,r){var i=e.length;if(i!==1){var n=Math.cos,o=Math.sin,s,a,l=Array(i/2),p=Array(i/2),f=Array(i/2),d=Array(i/2);for(a=i/2,s=i-1;s!==-1;--s)--a,f[a]=e[s],d[a]=r[s],--s,l[a]=e[s],p[a]=r[s];t(l,p),t(f,d),a=i/2;var m,g=-6.283185307179586/i,v,x;for(s=i-1;s!==-1;--s)--a,a===-1&&(a=i/2-1),m=g*s,v=n(m),x=o(m),e[s]=l[a]+v*f[a]-x*d[a],r[s]=p[a]+v*d[a]+x*f[a]}};numeric._ifftpow2=function t(e,r){var i=e.length;if(i!==1){var n=Math.cos,o=Math.sin,s,a,l=Array(i/2),p=Array(i/2),f=Array(i/2),d=Array(i/2);for(a=i/2,s=i-1;s!==-1;--s)--a,f[a]=e[s],d[a]=r[s],--s,l[a]=e[s],p[a]=r[s];t(l,p),t(f,d),a=i/2;var m,g=6.283185307179586/i,v,x;for(s=i-1;s!==-1;--s)--a,a===-1&&(a=i/2-1),m=g*s,v=n(m),x=o(m),e[s]=l[a]+v*f[a]-x*d[a],r[s]=p[a]+v*d[a]+x*f[a]}};numeric.ifftpow2=function t(e,r){numeric._ifftpow2(e,r),numeric.diveq(e,e.length),numeric.diveq(r,r.length)};numeric.convpow2=function t(e,r,i,n){numeric.fftpow2(e,r),numeric.fftpow2(i,n);var o,s=e.length,a,l,p,f;for(o=s-1;o!==-1;--o)a=e[o],p=r[o],l=i[o],f=n[o],e[o]=a*l-p*f,r[o]=a*f+p*l;numeric.ifftpow2(e,r)};numeric.T.prototype.fft=function t(){var e=this.x,r=this.y,i=e.length,n=Math.log,o=n(2),s=Math.ceil(n(2*i-1)/o),a=Math.pow(2,s),l=numeric.rep([a],0),p=numeric.rep([a],0),f=Math.cos,d=Math.sin,m,g=-3.141592653589793/i,v,x=numeric.rep([a],0),_=numeric.rep([a],0),E=Math.floor(i/2);for(m=0;m<i;m++)x[m]=e[m];if(typeof r<"u")for(m=0;m<i;m++)_[m]=r[m];for(l[0]=1,m=1;m<=a/2;m++)v=g*m*m,l[m]=f(v),p[m]=d(v),l[a-m]=f(v),p[a-m]=d(v);var O=new numeric.T(x,_),L=new numeric.T(l,p);return O=O.mul(L),numeric.convpow2(O.x,O.y,numeric.clone(L.x),numeric.neg(L.y)),O=O.mul(L),O.x.length=i,O.y.length=i,O};numeric.T.prototype.ifft=function t(){var e=this.x,r=this.y,i=e.length,n=Math.log,o=n(2),s=Math.ceil(n(2*i-1)/o),a=Math.pow(2,s),l=numeric.rep([a],0),p=numeric.rep([a],0),f=Math.cos,d=Math.sin,m,g=3.141592653589793/i,v,x=numeric.rep([a],0),_=numeric.rep([a],0),E=Math.floor(i/2);for(m=0;m<i;m++)x[m]=e[m];if(typeof r<"u")for(m=0;m<i;m++)_[m]=r[m];for(l[0]=1,m=1;m<=a/2;m++)v=g*m*m,l[m]=f(v),p[m]=d(v),l[a-m]=f(v),p[a-m]=d(v);var O=new numeric.T(x,_),L=new numeric.T(l,p);return O=O.mul(L),numeric.convpow2(O.x,O.y,numeric.clone(L.x),numeric.neg(L.y)),O=O.mul(L),O.x.length=i,O.y.length=i,O.div(i)};numeric.gradient=function t(e,r){var i=r.length,n=e(r);if(isNaN(n))throw new Error("gradient: f(x) is a NaN!");var v=Math.max,o,s=numeric.clone(r),a,l,p=Array(i),f=numeric.div,d=numeric.sub,m,g,v=Math.max,x=.001,_=Math.abs,E=Math.min,O,L,I,D=0,R,W,N;for(o=0;o<i;o++)for(var z=v(1e-6*n,1e-8);;){if(++D,D>20)throw new Error("Numerical gradient fails");if(s[o]=r[o]+z,a=e(s),s[o]=r[o]-z,l=e(s),s[o]=r[o],isNaN(a)||isNaN(l)){z/=16;continue}if(p[o]=(a-l)/(2*z),O=r[o]-z,L=r[o],I=r[o]+z,R=(a-n)/z,W=(n-l)/z,N=v(_(p[o]),_(n),_(a),_(l),_(O),_(L),_(I),1e-8),m=E(v(_(R-p[o]),_(W-p[o]),_(R-W))/N,z/N),m>x)z/=16;else break}return p};numeric.uncmin=function t(e,r,i,n,o,s,a){var l=numeric.gradient;typeof a>"u"&&(a={}),typeof i>"u"&&(i=1e-8),typeof n>"u"&&(n=function(Ae){return l(e,Ae)}),typeof o>"u"&&(o=1e3),r=numeric.clone(r);var p=r.length,f=e(r),d,m;if(isNaN(f))throw new Error("uncmin: f(x0) is a NaN!");var g=Math.max,v=numeric.norm2;i=g(i,numeric.epsilon);var x,_,E,O=a.Hinv||numeric.identity(p),L=numeric.dot,I=numeric.inv,D=numeric.sub,R=numeric.add,W=numeric.tensor,N=numeric.div,z=numeric.mul,$=numeric.all,q=numeric.isFinite,J=numeric.neg,X=0,se,ee,Z,Y,te,re,ie,ae,he,de,we,Re,ve="";for(_=n(r);X<o;){if(typeof s=="function"&&s(X,r,f,_,O)){ve="Callback returned true";break}if(!$(q(_))){ve="Gradient has Infinity or NaN";break}if(x=J(L(O,_)),!$(q(x))){ve="Search direction has Infinity or NaN";break}if(de=v(x),de<i){ve="Newton step smaller than tol";break}for(he=1,m=L(_,x),Z=r;X<o&&!(he*de<i);){if(ee=z(x,he),Z=R(r,ee),d=e(Z),d-f>=.1*he*m||isNaN(d)){he*=.5,++X;continue}break}if(he*de<i){ve="Line search step size smaller than tol";break}if(X===o){ve="maxit reached during line search";break}E=n(Z),Y=D(E,_),ie=L(Y,ee),te=L(O,Y),O=D(R(O,z((ie+L(Y,te))/(ie*ie),W(ee,ee))),N(R(W(te,ee),W(ee,te)),ie)),r=Z,f=d,_=E,++X}return{solution:r,f,gradient:_,invHessian:O,iterations:X,message:ve}};numeric.Dopri=function t(e,r,i,n,o,s,a){this.x=e,this.y=r,this.f=i,this.ymid=n,this.iterations=o,this.events=a,this.message=s};numeric.Dopri.prototype._at=function t(_,r){function i($){return $*$}var n=this,o=n.x,s=n.y,a=n.f,l=n.ymid,p=o.length,f,d,m,g,v,x,_,E=Math.floor,O,L=.5,I=numeric.add,D=numeric.mul,R=numeric.sub,W,N,z;return f=o[r],d=o[r+1],g=s[r],v=s[r+1],O=d-f,m=f+L*O,x=l[r],W=R(a[r],D(g,1/(f-m)+2/(f-d))),N=R(a[r+1],D(v,1/(d-m)+2/(d-f))),z=[i(_-d)*(_-m)/i(f-d)/(f-m),i(_-f)*i(_-d)/i(f-m)/i(d-m),i(_-f)*(_-m)/i(d-f)/(d-m),(_-f)*i(_-d)*(_-m)/i(f-d)/(f-m),(_-d)*i(_-f)*(_-m)/i(f-d)/(d-m)],I(I(I(I(D(g,z[0]),D(x,z[1])),D(v,z[2])),D(W,z[3])),D(N,z[4]))};numeric.Dopri.prototype.at=function t(e){var r,i,n,o=Math.floor;if(typeof e!="number"){var s=e.length,a=Array(s);for(r=s-1;r!==-1;--r)a[r]=this.at(e[r]);return a}var l=this.x;for(r=0,i=l.length-1;i-r>1;)n=o(.5*(r+i)),l[n]<=e?r=n:i=n;return this._at(e,r)};numeric.dopri=function t(e,r,i,n,o,s,a){typeof o>"u"&&(o=1e-6),typeof s>"u"&&(s=1e3);var l=[e],p=[i],f=[n(e,i)],d,m,g,v,x,_,E=[],O=1/5,L=[3/40,9/40],I=[44/45,-56/15,32/9],D=[19372/6561,-25360/2187,64448/6561,-212/729],R=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],W=[35/384,0,500/1113,125/192,-2187/6784,11/84],N=[.5*6025192743/30085553152,0,.5*51252292925/65400821598,.5*-2691868925/45128329728,.5*187940372067/1594534317056,.5*-1776094331/19743644256,.5*11237099/235043384],z=[1/5,3/10,4/5,8/9,1,1],$=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40],q=0,J,X,se=(r-e)/10,ee=0,Z=numeric.add,Y=numeric.mul,te,re,ie=Math.max,ae=Math.min,he=Math.abs,de=numeric.norminf,we=Math.pow,Re=numeric.any,ve=numeric.lt,Ae=numeric.and,Ve=numeric.sub,Me,Le,We,Fe=new numeric.Dopri(l,p,f,E,-1,"");for(typeof a=="function"&&(Me=a(e,i));e<r&&ee<s;){if(++ee,e+se>r&&(se=r-e),d=n(e+z[0]*se,Z(i,Y(O*se,f[q]))),m=n(e+z[1]*se,Z(Z(i,Y(L[0]*se,f[q])),Y(L[1]*se,d))),g=n(e+z[2]*se,Z(Z(Z(i,Y(I[0]*se,f[q])),Y(I[1]*se,d)),Y(I[2]*se,m))),v=n(e+z[3]*se,Z(Z(Z(Z(i,Y(D[0]*se,f[q])),Y(D[1]*se,d)),Y(D[2]*se,m)),Y(D[3]*se,g))),x=n(e+z[4]*se,Z(Z(Z(Z(Z(i,Y(R[0]*se,f[q])),Y(R[1]*se,d)),Y(R[2]*se,m)),Y(R[3]*se,g)),Y(R[4]*se,v))),te=Z(Z(Z(Z(Z(i,Y(f[q],se*W[0])),Y(m,se*W[2])),Y(g,se*W[3])),Y(v,se*W[4])),Y(x,se*W[5])),_=n(e+se,te),J=Z(Z(Z(Z(Z(Y(f[q],se*$[0]),Y(m,se*$[2])),Y(g,se*$[3])),Y(v,se*$[4])),Y(x,se*$[5])),Y(_,se*$[6])),typeof J=="number"?re=he(J):re=de(J),re>o){if(se=.2*se*we(o/re,.25),e+se===e){Fe.msg="Step size became too small";break}continue}if(E[q]=Z(Z(Z(Z(Z(Z(i,Y(f[q],se*N[0])),Y(m,se*N[2])),Y(g,se*N[3])),Y(v,se*N[4])),Y(x,se*N[5])),Y(_,se*N[6])),++q,l[q]=e+se,p[q]=te,f[q]=_,typeof a=="function"){var st,Ze=e,et=e+.5*se,Je;if(Le=a(et,E[q-1]),We=Ae(ve(Me,0),ve(0,Le)),Re(We)||(Ze=et,et=e+se,Me=Le,Le=a(et,te),We=Ae(ve(Me,0),ve(0,Le))),Re(We)){for(var Et,kt,Xe,Tt,Kt=0,Rr=1,Ot=1;;){if(typeof Me=="number")Je=(Ot*Le*Ze-Rr*Me*et)/(Ot*Le-Rr*Me);else for(Je=et,X=Me.length-1;X!==-1;--X)Me[X]<0&&Le[X]>0&&(Je=ae(Je,(Ot*Le[X]*Ze-Rr*Me[X]*et)/(Ot*Le[X]-Rr*Me[X])));if(Je<=Ze||Je>=et)break;st=Fe._at(Je,q-1),Tt=a(Je,st),Xe=Ae(ve(Me,0),ve(0,Tt)),Re(Xe)?(et=Je,Le=Tt,We=Xe,Ot=1,Kt===-1?Rr*=.5:Rr=1,Kt=-1):(Ze=Je,Me=Tt,Rr=1,Kt===1?Ot*=.5:Ot=1,Kt=1)}return te=Fe._at(.5*(e+Je),q-1),Fe.f[q]=n(Je,st),Fe.x[q]=Je,Fe.y[q]=st,Fe.ymid[q-1]=te,Fe.events=We,Fe.iterations=ee,Fe}}e+=se,i=te,Me=Le,se=ae(.8*se*we(o/re,.25),4*se)}return Fe.iterations=ee,Fe};numeric.LU=function(t,e){e=e||!1;var r=Math.abs,i,n,o,s,a,l,p,f,d,m=t.length,g=m-1,v=new Array(m);for(e||(t=numeric.clone(t)),o=0;o<m;++o){for(p=o,l=t[o],d=r(l[o]),n=o+1;n<m;++n)s=r(t[n][o]),d<s&&(d=s,p=n);for(v[o]=p,p!=o&&(t[o]=t[p],t[p]=l,l=t[o]),a=l[o],i=o+1;i<m;++i)t[i][o]/=a;for(i=o+1;i<m;++i){for(f=t[i],n=o+1;n<g;++n)f[n]-=f[o]*l[n],++n,f[n]-=f[o]*l[n];n===g&&(f[n]-=f[o]*l[n])}}return{LU:t,P:v}};numeric.LUsolve=function t(e,r){var i,n,o=e.LU,s=o.length,a=numeric.clone(r),l=e.P,p,f,d,m;for(i=s-1;i!==-1;--i)a[i]=r[i];for(i=0;i<s;++i)for(p=l[i],l[i]!==i&&(m=a[i],a[i]=a[p],a[p]=m),f=o[i],n=0;n<i;++n)a[i]-=a[n]*f[n];for(i=s-1;i>=0;--i){for(f=o[i],n=i+1;n<s;++n)a[i]-=a[n]*f[n];a[i]/=f[i]}return a};numeric.solve=function t(e,r,i){return numeric.LUsolve(numeric.LU(e,i),r)};numeric.echelonize=function t(e){var r=numeric.dim(e),i=r[0],n=r[1],o=numeric.identity(i),s=Array(i),a,l,p,f,d,m,g,v,x=Math.abs,_=numeric.diveq;for(e=numeric.clone(e),a=0;a<i;++a){for(p=0,d=e[a],m=o[a],l=1;l<n;++l)x(d[p])<x(d[l])&&(p=l);for(s[a]=p,_(m,d[p]),_(d,d[p]),l=0;l<i;++l)if(l!==a){for(g=e[l],v=g[p],f=n-1;f!==-1;--f)g[f]-=d[f]*v;for(g=o[l],f=i-1;f!==-1;--f)g[f]-=m[f]*v}}return{I:o,A:e,P:s}};numeric.__solveLP=function t(e,r,i,n,o,s,a){var l=numeric.sum,p=numeric.log,f=numeric.mul,d=numeric.sub,m=numeric.dot,g=numeric.div,v=numeric.add,x=e.length,_=i.length,E,O=!1,L,I=0,D=1,R,W,N=numeric.transpose(r),z=numeric.svd,$=numeric.transpose,q=numeric.leq,J=Math.sqrt,X=Math.abs,se=numeric.muleq,ee=numeric.norminf,Z=numeric.any,Y=Math.min,te=numeric.all,re=numeric.gt,ie=Array(x),ae=Array(_),he=numeric.rep([_],1),de,we=numeric.solve,Re=d(i,m(r,s)),ve,Ae=m(e,e),Ve;for(ve=I;ve<o;++ve){var Me,Le,We;for(Me=_-1;Me!==-1;--Me)ae[Me]=g(r[Me],Re[Me]);var Fe=$(ae);for(Me=x-1;Me!==-1;--Me)ie[Me]=l(Fe[Me]);D=.25*X(Ae/m(e,ie));var st=100*J(Ae/m(ie,ie));for((!isFinite(D)||D>st)&&(D=st),Ve=v(e,f(D,ie)),de=m(Fe,ae),Me=x-1;Me!==-1;--Me)de[Me][Me]+=1;We=we(de,g(Ve,D),!0);var Ze=g(Re,m(r,We)),et=1;for(Me=_-1;Me!==-1;--Me)Ze[Me]<0&&(et=Y(et,-.999*Ze[Me]));if(E=d(s,f(We,et)),Re=d(i,m(r,E)),!te(re(Re,0)))return{solution:s,message:"",iterations:ve};if(s=E,D<n)return{solution:E,message:"",iterations:ve};if(a){var Je=m(e,Ve),Et=m(r,Ve);for(O=!0,Me=_-1;Me!==-1;--Me)if(Je*Et[Me]<0){O=!1;break}}else s[x-1]>=0?O=!1:O=!0;if(O)return{solution:E,message:"Unbounded",iterations:ve}}return{solution:s,message:"maximum iteration count exceeded",iterations:ve}};numeric._solveLP=function t(e,r,i,n,o){var s=e.length,a=i.length,L,l=numeric.sum,p=numeric.log,f=numeric.mul,d=numeric.sub,m=numeric.dot,g=numeric.div,v=numeric.add,x=numeric.rep([s],0).concat([1]),_=numeric.rep([a,1],-1),E=numeric.blockMatrix([[r,_]]),O=i,L=numeric.rep([s],0).concat(Math.max(0,numeric.sup(numeric.neg(i)))+1),I=numeric.__solveLP(x,E,O,n,o,L,!1),D=numeric.clone(I.solution);D.length=s;var R=numeric.inf(d(i,m(r,D)));if(R<0)return{solution:NaN,message:"Infeasible",iterations:I.iterations};var W=numeric.__solveLP(e,r,i,n,o-I.iterations,D,!0);return W.iterations+=I.iterations,W};numeric.solveLP=function t(e,r,i,n,o,s,a){if(typeof a>"u"&&(a=1e3),typeof s>"u"&&(s=numeric.epsilon),typeof n>"u")return numeric._solveLP(e,r,i,s,a);var l=n.length,p=n[0].length,f=r.length,d=numeric.echelonize(n),m=numeric.rep([p],0),g=d.P,v=[],x;for(x=g.length-1;x!==-1;--x)m[g[x]]=1;for(x=p-1;x!==-1;--x)m[x]===0&&v.push(x);var _=numeric.getRange,E=numeric.linspace(0,l-1),O=numeric.linspace(0,f-1),L=_(n,E,v),I=_(r,O,g),D=_(r,O,v),R=numeric.dot,W=numeric.sub,N=R(I,d.I),z=W(D,R(N,L)),$=W(i,R(N,o)),q=Array(g.length),J=Array(v.length);for(x=g.length-1;x!==-1;--x)q[x]=e[g[x]];for(x=v.length-1;x!==-1;--x)J[x]=e[v[x]];var X=W(J,R(q,R(d.I,L))),se=numeric._solveLP(X,z,$,s,a),ee=se.solution;if(ee!==ee)return se;var Z=R(d.I,W(o,R(L,ee))),Y=Array(e.length);for(x=g.length-1;x!==-1;--x)Y[g[x]]=Z[x];for(x=v.length-1;x!==-1;--x)Y[v[x]]=ee[x];return{solution:Y,message:se.message,iterations:se.iterations}};numeric.MPStoLP=function t(e){e instanceof String&&e.split(`
`);var r=0,i=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],n=e.length,o,s,a,l=0,p={},f=[],d=0,m={},g=0,v,x=[],_=[],E=[];function O(W){throw new Error("MPStoLP: "+W+`
Line `+o+": "+e[o]+`
Current state: `+i[r]+`
`)}for(o=0;o<n;++o){a=e[o];var L=a.match(/\S*/g),I=[];for(s=0;s<L.length;++s)L[s]!==""&&I.push(L[s]);if(I.length!==0){for(s=0;s<i.length&&a.substr(0,i[s].length)!==i[s];++s);if(s<i.length){if(r=s,s===1&&(v=I[1]),s===6)return{name:v,c:x,A:numeric.transpose(_),b:E,rows:p,vars:m};continue}switch(r){case 0:case 1:O("Unexpected line");case 2:switch(I[0]){case"N":l===0?l=I[1]:O("Two or more N rows");break;case"L":p[I[1]]=d,f[d]=1,E[d]=0,++d;break;case"G":p[I[1]]=d,f[d]=-1,E[d]=0,++d;break;case"E":p[I[1]]=d,f[d]=0,E[d]=0,++d;break;default:O("Parse error "+numeric.prettyPrint(I))}break;case 3:m.hasOwnProperty(I[0])||(m[I[0]]=g,x[g]=0,_[g]=numeric.rep([d],0),++g);var D=m[I[0]];for(s=1;s<I.length;s+=2){if(I[s]===l){x[D]=parseFloat(I[s+1]);continue}var R=p[I[s]];_[D][R]=(f[R]<0?-1:1)*parseFloat(I[s+1])}break;case 4:for(s=1;s<I.length;s+=2)E[p[I[s]]]=(f[p[I[s]]]<0?-1:1)*parseFloat(I[s+1]);break;case 5:break;case 6:O("Internal error")}}}O("Reached end of file without ENDATA")};numeric.seedrandom={pow:Math.pow,random:Math.random};(function(t,e,r,i,n,o,s){e.seedrandom=function(m,g){var v=[],x;return m=p(l(g?[m,t]:arguments.length?m:[new Date().getTime(),t,window],3),v),x=new a(v),p(x.S,t),e.random=function(){for(var E=x.g(i),O=s,L=0;E<n;)E=(E+L)*r,O*=r,L=x.g(1);for(;E>=o;)E/=2,O/=2,L>>>=1;return(E+L)/O},m};function a(d){var m,g,v=this,x=d.length,_=0,E=v.i=v.j=v.m=0;for(v.S=[],v.c=[],x||(d=[x++]);_<r;)v.S[_]=_++;for(_=0;_<r;_++)m=v.S[_],E=f(E+m+d[_%x]),g=v.S[E],v.S[_]=g,v.S[E]=m;v.g=function(L){var I=v.S,D=f(v.i+1),R=I[D],W=f(v.j+R),N=I[W];I[D]=N,I[W]=R;for(var z=I[f(R+N)];--L;)D=f(D+1),R=I[D],W=f(W+R),N=I[W],I[D]=N,I[W]=R,z=z*r+I[f(R+N)];return v.i=D,v.j=W,z},v.g(r)}function l(d,m,g,v,x){if(g=[],x=typeof d,m&&x=="object"){for(v in d)if(v.indexOf("S")<5)try{g.push(l(d[v],m-1))}catch{}}return g.length?g:d+(x!="string"?"\0":"")}function p(d,m,g,v){for(d+="",g=0,v=0;v<d.length;v++)m[f(v)]=f((g^=m[f(v)]*19)+d.charCodeAt(v));d="";for(v in m)d+=String.fromCharCode(m[v]);return d}function f(d){return d&r-1}s=e.pow(r,i),n=e.pow(2,n),o=n*2,p(e.random(),t)})([],numeric.seedrandom,256,6,52);(function(t){function e(l){if(typeof l!="object")return l;var p=[],f,d=l.length;for(f=0;f<d;f++)p[f+1]=e(l[f]);return p}function r(l){if(typeof l!="object")return l;var p=[],f,d=l.length;for(f=1;f<d;f++)p[f-1]=r(l[f]);return p}function i(l,p,f){var d,m,g,v,x;for(g=1;g<=f;g=g+1){for(l[g][g]=1/l[g][g],x=-l[g][g],d=1;d<g;d=d+1)l[d][g]=x*l[d][g];if(v=g+1,f<v)break;for(m=v;m<=f;m=m+1)for(x=l[g][m],l[g][m]=0,d=1;d<=g;d=d+1)l[d][m]=l[d][m]+x*l[d][g]}}function n(l,p,f,d){var m,g,v,x;for(g=1;g<=f;g=g+1){for(x=0,m=1;m<g;m=m+1)x=x+l[m][g]*d[m];d[g]=(d[g]-x)/l[g][g]}for(v=1;v<=f;v=v+1)for(g=f+1-v,d[g]=d[g]/l[g][g],x=-d[g],m=1;m<g;m=m+1)d[m]=d[m]+x*l[m][g]}function o(l,p,f,d){var m,g,v,x,_,E;for(g=1;g<=f;g=g+1){if(d[1]=g,E=0,v=g-1,v<1){if(E=l[g][g]-E,E<=0)break;l[g][g]=Math.sqrt(E)}else{for(x=1;x<=v;x=x+1){for(_=l[x][g],m=1;m<x;m=m+1)_=_-l[m][g]*l[m][x];_=_/l[x][x],l[x][g]=_,E=E+_*_}if(E=l[g][g]-E,E<=0)break;l[g][g]=Math.sqrt(E)}d[1]=0}}function s(l,p,f,d,m,g,v,x,_,E,O,L,I,D,R,W){var N,z,$,q,J,X,se,ee,Z,Y,te,re,ie,ae,he,de,we,Re,ve,Ae,Ve,Me,Le,We,Fe,st,Ze;ie=Math.min(d,E),$=2*d+ie*(ie+5)/2+2*E+1,We=1e-60;do We=We+We,Fe=1+.1*We,st=1+.2*We;while(Fe<=1||st<=1);for(N=1;N<=d;N=N+1)R[N]=p[N];for(N=d+1;N<=$;N=N+1)R[N]=0;for(N=1;N<=E;N=N+1)L[N]=0;if(J=[],W[1]===0){if(o(l,f,d,J),J[1]!==0){W[1]=2;return}n(l,f,d,p),i(l,f,d)}else{for(z=1;z<=d;z=z+1)for(m[z]=0,N=1;N<=z;N=N+1)m[z]=m[z]+l[N][z]*p[N];for(z=1;z<=d;z=z+1)for(p[z]=0,N=z;N<=d;N=N+1)p[z]=p[z]+l[z][N]*m[N]}for(g[1]=0,z=1;z<=d;z=z+1)for(m[z]=p[z],g[1]=g[1]+R[z]*m[z],R[z]=0,N=z+1;N<=d;N=N+1)l[N][z]=0;for(g[1]=-g[1]/2,W[1]=0,se=d,ee=se+d,te=ee+ie,Z=te+ie+1,Y=Z+ie*(ie+1)/2,ae=Y+E,N=1;N<=E;N=N+1){for(de=0,z=1;z<=d;z=z+1)de=de+v[z][N]*v[z][N];R[ae+N]=Math.sqrt(de)}I=0,D[1]=0,D[2]=0;function et(){for(D[1]=D[1]+1,$=Y,N=1;N<=E;N=N+1){for($=$+1,de=-x[N],z=1;z<=d;z=z+1)de=de+v[z][N]*m[z];if(Math.abs(de)<We&&(de=0),N>O)R[$]=de;else if(R[$]=-Math.abs(de),de>0){for(z=1;z<=d;z=z+1)v[z][N]=-v[z][N];x[N]=-x[N]}}for(N=1;N<=I;N=N+1)R[Y+L[N]]=0;for(re=0,he=0,N=1;N<=E;N=N+1)R[Y+N]<he*R[ae+N]&&(re=N,he=R[Y+N]/R[ae+N]);return re===0?999:0}function Je(){for(N=1;N<=d;N=N+1){for(de=0,z=1;z<=d;z=z+1)de=de+l[z][N]*v[z][re];R[N]=de}for(q=se,N=1;N<=d;N=N+1)R[q+N]=0;for(z=I+1;z<=d;z=z+1)for(N=1;N<=d;N=N+1)R[q+N]=R[q+N]+l[N][z]*R[z];for(Me=!0,N=I;N>=1;N=N-1){for(de=R[N],$=Z+N*(N+3)/2,q=$-N,z=N+1;z<=I;z=z+1)de=de-R[$]*R[ee+z],$=$+z;if(de=de/R[q],R[ee+N]=de,L[N]<O||de<0)break;Me=!1,X=N}if(!Me)for(we=R[te+X]/R[ee+X],N=1;N<=I&&!(L[N]<O||R[ee+N]<0);N=N+1)he=R[te+N]/R[ee+N],he<we&&(we=he,X=N);for(de=0,N=se+1;N<=se+d;N=N+1)de=de+R[N]*R[N];if(Math.abs(de)<=We){if(Me)return W[1]=1,999;for(N=1;N<=I;N=N+1)R[te+N]=R[te+N]-we*R[ee+N];return R[te+I+1]=R[te+I+1]+we,700}else{for(de=0,N=1;N<=d;N=N+1)de=de+R[se+N]*v[N][re];for(Re=-R[Y+re]/de,Le=!0,Me||we<Re&&(Re=we,Le=!1),N=1;N<=d;N=N+1)m[N]=m[N]+Re*R[se+N],Math.abs(m[N])<We&&(m[N]=0);for(g[1]=g[1]+Re*de*(Re/2+R[te+I+1]),N=1;N<=I;N=N+1)R[te+N]=R[te+N]-Re*R[ee+N];if(R[te+I+1]=R[te+I+1]+Re,Le){for(I=I+1,L[I]=re,$=Z+(I-1)*I/2+1,N=1;N<=I-1;N=N+1)R[$]=R[N],$=$+1;if(I===d)R[$]=R[d];else{for(N=d;N>=I+1&&!(R[N]===0||(ve=Math.max(Math.abs(R[N-1]),Math.abs(R[N])),Ae=Math.min(Math.abs(R[N-1]),Math.abs(R[N])),R[N-1]>=0?he=Math.abs(ve*Math.sqrt(1+Ae*Ae/(ve*ve))):he=-Math.abs(ve*Math.sqrt(1+Ae*Ae/(ve*ve))),ve=R[N-1]/he,Ae=R[N]/he,ve===1));N=N-1)if(ve===0)for(R[N-1]=Ae*he,z=1;z<=d;z=z+1)he=l[z][N-1],l[z][N-1]=l[z][N],l[z][N]=he;else for(R[N-1]=he,Ve=Ae/(1+ve),z=1;z<=d;z=z+1)he=ve*l[z][N-1]+Ae*l[z][N],l[z][N]=Ve*(l[z][N-1]+he)-l[z][N],l[z][N-1]=he;R[$]=R[I]}}else{for(de=-x[re],z=1;z<=d;z=z+1)de=de+m[z]*v[z][re];if(re>O)R[Y+re]=de;else if(R[Y+re]=-Math.abs(de),de>0){for(z=1;z<=d;z=z+1)v[z][re]=-v[z][re];x[re]=-x[re]}return 700}}return 0}function Et(){if($=Z+X*(X+1)/2+1,q=$+X,R[q]===0||(ve=Math.max(Math.abs(R[q-1]),Math.abs(R[q])),Ae=Math.min(Math.abs(R[q-1]),Math.abs(R[q])),R[q-1]>=0?he=Math.abs(ve*Math.sqrt(1+Ae*Ae/(ve*ve))):he=-Math.abs(ve*Math.sqrt(1+Ae*Ae/(ve*ve))),ve=R[q-1]/he,Ae=R[q]/he,ve===1))return 798;if(ve===0){for(N=X+1;N<=I;N=N+1)he=R[q-1],R[q-1]=R[q],R[q]=he,q=q+N;for(N=1;N<=d;N=N+1)he=l[N][X],l[N][X]=l[N][X+1],l[N][X+1]=he}else{for(Ve=Ae/(1+ve),N=X+1;N<=I;N=N+1)he=ve*R[q-1]+Ae*R[q],R[q]=Ve*(R[q-1]+he)-R[q],R[q-1]=he,q=q+N;for(N=1;N<=d;N=N+1)he=ve*l[N][X]+Ae*l[N][X+1],l[N][X+1]=Ve*(l[N][X]+he)-l[N][X+1],l[N][X]=he}return 0}function kt(){for(q=$-X,N=1;N<=X;N=N+1)R[q]=R[$],$=$+1,q=q+1;return R[te+X]=R[te+X+1],L[X]=L[X+1],X=X+1,X<I?797:0}function Xe(){return R[te+I]=R[te+I+1],R[te+I+1]=0,L[I]=0,I=I-1,D[2]=D[2]+1,0}for(Ze=0;;){if(Ze=et(),Ze===999)return;for(;Ze=Je(),Ze!==0;){if(Ze===999)return;if(Ze===700)if(X===I)Xe();else{for(;Et(),Ze=kt(),Ze===797;);Xe()}}}}function a(l,p,f,d,m,g){l=e(l),p=e(p),f=e(f);var v,x,_,E,O,L=[],I=[],D=[],R=[],W=[],N;if(m=m||0,g=g?e(g):[void 0,0],d=d?e(d):[],x=l.length-1,_=f[1].length-1,!d)for(v=1;v<=_;v=v+1)d[v]=0;for(v=1;v<=_;v=v+1)I[v]=0;for(E=0,O=Math.min(x,_),v=1;v<=x;v=v+1)D[v]=0;for(L[1]=0,v=1;v<=2*x+O*(O+5)/2+2*_+1;v=v+1)R[v]=0;for(v=1;v<=2;v=v+1)W[v]=0;return s(l,p,x,x,D,L,f,d,x,_,m,I,E,W,R,g),N="",g[1]===1&&(N="constraints are inconsistent, no solution!"),g[1]===2&&(N="matrix D in quadratic function is not positive definite!"),{solution:r(D),value:r(L),unconstrained_solution:r(p),iterations:r(W),iact:r(I),message:N}}t.solveQP=a})(numeric);numeric.svd=function t(e){var r,i=numeric.epsilon,n=1e-64/i,o=50,s=0,a=0,l=0,p=0,f=0,d=numeric.clone(e),m=d.length,g=d[0].length;if(m<g)throw"Need more rows than columns";var v=new Array(g),x=new Array(g);for(a=0;a<g;a++)v[a]=x[a]=0;var _=numeric.rep([g,g],0);function E(J,X){return J=Math.abs(J),X=Math.abs(X),J>X?J*Math.sqrt(1+X*X/J/J):X==0?J:X*Math.sqrt(1+J*J/X/X)}var O=0,L=0,I=0,D=0,R=0,W=0,N=0;for(a=0;a<g;a++){for(v[a]=L,N=0,f=a+1,l=a;l<m;l++)N+=d[l][a]*d[l][a];if(N<=n)L=0;else for(O=d[a][a],L=Math.sqrt(N),O>=0&&(L=-L),I=O*L-N,d[a][a]=O-L,l=f;l<g;l++){for(N=0,p=a;p<m;p++)N+=d[p][a]*d[p][l];for(O=N/I,p=a;p<m;p++)d[p][l]+=O*d[p][a]}for(x[a]=L,N=0,l=f;l<g;l++)N=N+d[a][l]*d[a][l];if(N<=n)L=0;else{for(O=d[a][a+1],L=Math.sqrt(N),O>=0&&(L=-L),I=O*L-N,d[a][a+1]=O-L,l=f;l<g;l++)v[l]=d[a][l]/I;for(l=f;l<m;l++){for(N=0,p=f;p<g;p++)N+=d[l][p]*d[a][p];for(p=f;p<g;p++)d[l][p]+=N*v[p]}}R=Math.abs(x[a])+Math.abs(v[a]),R>D&&(D=R)}for(a=g-1;a!=-1;a+=-1){if(L!=0){for(I=L*d[a][a+1],l=f;l<g;l++)_[l][a]=d[a][l]/I;for(l=f;l<g;l++){for(N=0,p=f;p<g;p++)N+=d[a][p]*_[p][l];for(p=f;p<g;p++)_[p][l]+=N*_[p][a]}}for(l=f;l<g;l++)_[a][l]=0,_[l][a]=0;_[a][a]=1,L=v[a],f=a}for(a=g-1;a!=-1;a+=-1){for(f=a+1,L=x[a],l=f;l<g;l++)d[a][l]=0;if(L!=0){for(I=d[a][a]*L,l=f;l<g;l++){for(N=0,p=f;p<m;p++)N+=d[p][a]*d[p][l];for(O=N/I,p=a;p<m;p++)d[p][l]+=O*d[p][a]}for(l=a;l<m;l++)d[l][a]=d[l][a]/L}else for(l=a;l<m;l++)d[l][a]=0;d[a][a]+=1}for(i=i*D,p=g-1;p!=-1;p+=-1)for(var z=0;z<o;z++){var $=!1;for(f=p;f!=-1;f+=-1){if(Math.abs(v[f])<=i){$=!0;break}if(Math.abs(x[f-1])<=i)break}if(!$){s=0,N=1;var q=f-1;for(a=f;a<p+1&&(O=N*v[a],v[a]=s*v[a],!(Math.abs(O)<=i));a++)for(L=x[a],I=E(O,L),x[a]=I,s=L/I,N=-O/I,l=0;l<m;l++)R=d[l][q],W=d[l][a],d[l][q]=R*s+W*N,d[l][a]=-R*N+W*s}if(W=x[p],f==p){if(W<0)for(x[p]=-W,l=0;l<g;l++)_[l][p]=-_[l][p];break}if(z>=o-1)throw"Error: no convergence.";for(D=x[f],R=x[p-1],L=v[p-1],I=v[p],O=((R-W)*(R+W)+(L-I)*(L+I))/(2*I*R),L=E(O,1),O<0?O=((D-W)*(D+W)+I*(R/(O-L)-I))/D:O=((D-W)*(D+W)+I*(R/(O+L)-I))/D,s=1,N=1,a=f+1;a<p+1;a++){for(L=v[a],R=x[a],I=N*L,L=s*L,W=E(O,I),v[a-1]=W,s=O/W,N=I/W,O=D*s+L*N,L=-D*N+L*s,I=R*N,R=R*s,l=0;l<g;l++)D=_[l][a-1],W=_[l][a],_[l][a-1]=D*s+W*N,_[l][a]=-D*N+W*s;for(W=E(O,I),x[a-1]=W,s=O/W,N=I/W,O=s*L+N*R,D=-N*L+s*R,l=0;l<m;l++)R=d[l][a-1],W=d[l][a],d[l][a-1]=R*s+W*N,d[l][a]=-R*N+W*s}v[f]=0,v[p]=O,x[p]=D}for(a=0;a<x.length;a++)x[a]<i&&(x[a]=0);for(a=0;a<g;a++)for(l=a-1;l>=0;l--)if(x[l]<x[a]){for(s=x[l],x[l]=x[a],x[a]=s,p=0;p<d.length;p++)r=d[p][a],d[p][a]=d[p][l],d[p][l]=r;for(p=0;p<_.length;p++)r=_[p][a],_[p][a]=_[p][l],_[p][l]=r;a=l}return{U:d,S:x,V:_}}});function Qae(t,e){var r,i,n,o,s,a,l,p,f,d,m,g;for(r=[],s=a=0;a<4;s=++a)r.push([t[s].x,t[s].y,1,0,0,0,-t[s].x*e[s].x,-t[s].y*e[s].x]),r.push([0,0,0,t[s].x,t[s].y,1,-t[s].x*e[s].y,-t[s].y*e[s].y]);for(n=[],s=p=0;p<4;s=++p)n.push(e[s].x),n.push(e[s].y);for(o=sp.default.solve(r,n),i=[[o[0],o[1],0,o[2]],[o[3],o[4],0,o[5]],[0,0,1,0],[o[6],o[7],0,1]],s=d=0;d<4;s=++d)f=sp.default.dot(i,[t[s].x,t[s].y,0,1]),l=f[3],g=sp.default.dot(l,[e[s].x,e[s].y,0,1]);return i}function ele(t,e,r){var i,n,o,s,a,l,p,f;for(n=function(){var d,m;for(f=[],d=0,m=t.length;d<m;d++)l=t[d],f.push({x:l[0]-t[0][0],y:l[1]-t[0][1]});return f}(),p=function(){var d,m,g;for(g=[],d=0,m=e.length;d<m;d++)l=e[d],g.push({x:l[0]-t[0][0],y:l[1]-t[0][1]});return g}(),i=Qae(n,p),f=[],o=a=0;a<4;o=++a)f.push(function(){var d,m;for(m=[],s=d=0;d<4;s=++d)m.push(i[s][o]);return m}());return f.reduce((d,m)=>[...d,...m],[])}var sp,qz,Uz,Jae,Bz,Hz=V(()=>{Yr();ap();sp=ye(zz(),1),qz=ye(Pe(),1);Be();Uz={};pe||(window.numeric=sp.default,Uz=window.lightbox={});Jae=t=>{let e=window.getComputedStyle(t),r={leftPad:parseFloat(e.getPropertyValue("padding-left"))||0,rightPad:parseFloat(e.getPropertyValue("padding-right"))||0,leftBorder:parseFloat(e.getPropertyValue("border-right-width"))||0,rightBorder:parseFloat(e.getPropertyValue("border-left-width"))||0,topPad:parseFloat(e.getPropertyValue("padding-top"))||0,bottomPad:parseFloat(e.getPropertyValue("padding-bottom"))||0,bottomBorder:parseFloat(e.getPropertyValue("border-bottom-width"))||0,topBorder:parseFloat(e.getPropertyValue("border-top-width"))||0};return{...r,vertPadSize:r.topPad+r.bottomPad+r.topBorder+r.bottomBorder,horizPadSize:r.leftPad+r.rightPad+r.leftBorder+r.rightBorder}},Bz=(t,e={x:0,y:0})=>{let{leftPad:r,leftBorder:i,rightPad:n,rightBorder:o,topPad:s,topBorder:a,bottomPad:l,bottomBorder:p}=Jae(t),{x:f,y:d}=e,g=[{left:r+i+e.x+"px",right:"auto",top:s+a+e.y+"px",bottom:"auto"},{left:r+i+e.x+"px",right:"auto",top:"auto",bottom:l+p+-e.y+"px"},{left:"auto",right:n+o+-e.x+"px",top:s+a+e.y+"px",bottom:"auto"},{left:"auto",right:n+o+-e.x+"px",top:"auto",bottom:l+p+-e.y+"px"}].map(x=>{let _=document.createElement("div");return _.style.position="absolute",_.style.top=x.top,_.style.left=x.left,_.style.right=x.right,_.style.bottom=x.bottom,_.style.width="0px",_.style.height="0px",_.style.visibility="hidden",_.style.pointerEvents="none",t.parentElement.parentElement.appendChild(_),_}),v=g.map(x=>{let _=x.getBoundingClientRect();return[_.left,_.top]});return g.forEach(x=>{x.remove()}),v};(function(){"use strict";(function(r,i){r===void 0&&window!==void 0&&(r=window),r.PhotoSwipe=i()})(this,function(){"use strict";var r=function(i,n,o,s){var a={features:null,bind:function(M,H,K,G){var Se=(G?"remove":"add")+"EventListener";H=H.split(" ");for(var Te=0;Te<H.length;Te++)H[Te]&&M[Se](H[Te],K,!1)},isArray:function(M){return M instanceof Array},createEl:function(M,H){var K=document.createElement(H||"div");return M&&(K.className=M),K},getScrollY:function(){var M=window.pageYOffset;return M!==void 0?M:document.documentElement.scrollTop},unbind:function(M,H,K){a.bind(M,H,K,!0)},removeClass:function(M,H){var K=new RegExp("(\\s|^)"+H+"(\\s|$)");M.className=M.className.replace(K," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(M,H){a.hasClass(M,H)||(M.className+=(M.className?" ":"")+H)},hasClass:function(M,H){return M.className&&new RegExp("(^|\\s)"+H+"(\\s|$)").test(M.className)},getChildByClass:function(M,H){for(var K=M.firstChild;K;){if(a.hasClass(K,H))return K;K=K.nextSibling}},arraySearch:function(M,H,K){for(var G=M.length;G--;)if(M[G][K]===H)return G;return-1},extend:function(M,H,K){for(var G in H)if(H.hasOwnProperty(G)){if(K&&M.hasOwnProperty(G))continue;M[G]=H[G]}},easing:{sine:{out:function(M){return Math.sin(M*(Math.PI/2))},inOut:function(M){return-(Math.cos(Math.PI*M)-1)/2}},cubic:{out:function(M){return--M*M*M+1}}},detectFeatures:function(){if(a.features)return a.features;var M=a.createEl(),H=M.style,K="",G={};if(G.oldIE=document.all&&!document.addEventListener,G.touch="ontouchstart"in window,window.requestAnimationFrame&&(G.raf=window.requestAnimationFrame,G.caf=window.cancelAnimationFrame),G.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!G.pointerEvent){var Se=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var Te=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);Te&&Te.length>0&&(Te=parseInt(Te[1],10),Te>=1&&Te<8&&(G.isOldIOSPhone=!0))}var De=Se.match(/Android\s([0-9\.]*)/),rt=De?De[1]:0;rt=parseFloat(rt),rt>=1&&(rt<4.4&&(G.isOldAndroid=!0),G.androidVersion=rt),G.isMobileOpera=/opera mini|opera mobi/i.test(Se)}for(var ht=["transform","perspective","animationName"],yt=["","webkit","Moz","ms","O"],$e,Ct,Vt=0;Vt<4;Vt++){K=yt[Vt];for(var mi=0;mi<3;mi++)$e=ht[mi],Ct=K+(K?$e.charAt(0).toUpperCase()+$e.slice(1):$e),!G[$e]&&Ct in H&&(G[$e]=Ct);K&&!G.raf&&(K=K.toLowerCase(),G.raf=window[K+"RequestAnimationFrame"],G.raf&&(G.caf=window[K+"CancelAnimationFrame"]||window[K+"CancelRequestAnimationFrame"]))}if(!G.raf){var Zt=0;G.raf=function(Jt){var pr=new Date().getTime(),Ar=Math.max(0,16-(pr-Zt)),rn=window.setTimeout(function(){Jt(pr+Ar)},Ar);return Zt=pr+Ar,rn},G.caf=function(Jt){clearTimeout(Jt)}}return G.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,a.features=G,G}};a.detectFeatures(),a.features.oldIE&&(a.bind=function(M,H,K,G){H=H.split(" ");for(var Se=(G?"detach":"attach")+"Event",Te,De=function(){K.handleEvent.call(K)},rt=0;rt<H.length;rt++)if(Te=H[rt],Te)if(typeof K=="object"&&K.handleEvent){if(!G)K["oldIE"+Te]=De;else if(!K["oldIE"+Te])return!1;M[Se]("on"+Te,K["oldIE"+Te])}else M[Se]("on"+Te,K)});var l=this,p=25,f=3,d={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,animatedCloseOnScroll:!0,showCaption:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:222,showAnimationDuration:222,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(M){return M.tagName==="A"},getDoubleTapZoom:function(M,H){return M||H.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};a.extend(d,s);var Is=null,m=function(){var M=a.getScrollY();Is===null&&(Is=M),Sa||(hi=hi+(M-Is),Is=M,J<=l.currItem.fitRatio&&!fi&&d.modal&&(!d.animatedCloseOnScroll||Fo||Bi?hi=0:Ve&&Math.abs(hi)>0&&!Ot&&(mo(),_a()),tn&&clearTimeout(tn),d.animatedCloseOnScroll,tn=setTimeout(function(){mo(),gc()},200)))},g=function(){return{x:0,y:0}},v,x,_,E,O,L,I=g(),D=g(),R=g(),W,N,z,$={},q={},J,X,se,ee,Z,Y,te=0,re={},ie=g(),ae,he,de=0,we,Re,ve,Ae,Ve,Me,Le=!0,We,Fe=[],st,Ze,et,Je,Et,kt,Xe,Tt={},Kt=!1,Rr,Ot=!1,oo=function(M,H){a.extend(l,H.publicMethods),Fe.push(M)},so=function(M){var H=pi();return M>H-1?M-H:M<0?H+M:M},mn={},Ir=function(M,H){return mn[M]||(mn[M]=[]),mn[M].push(H)},wt=function(M){var H=mn[M];if(H){var K=Array.prototype.slice.call(arguments);K.shift();for(var G=0;G<H.length;G++)H[G].apply(l,K)}},zi=function(){return new Date().getTime()},Ai=function(M){Es=M,l.bg.style.opacity=M*d.bgOpacity},hl=function(M,H,K,G,Se){(!Kt||Se&&Se!==l.currItem)&&(G=G/(Se?Se.fitRatio:l.currItem.fitRatio)),K=K+q.top,M[Ve]=se+H+"px, "+K+"px"+ee+" scale("+G+")"},mr=function(M){ci&&(M&&(J>l.currItem.fitRatio?Kt||(ii(l.currItem,!1,!0),Kt=!0):Kt&&(ii(l.currItem),Kt=!1)),hl(ci,R.x,R.y,J))},ao=function(M){M.container&&hl(M.container.style,M.initialPosition.x,M.initialPosition.y,M.initialZoomLevel,M)},lo=function(M,H,K){K[Ve]=se+M+"px, "+H+"px"+ee},bs=function(M,H){if(!d.loop&&H){var K=E+(ie.x*te-M)/ie.x,G=M-yn.x;(K<0&&G>0||K>=pi()-1&&G<0)&&(M=yn.x+G*d.mainScrollEndFriction)}yn.x=M,lo(M,0,O)},Zu=function(M,H){var K=va[M]-re[M];return D[M]+I[M]+K-K*(H/X)},ai=function(M,H){M.x=H.x,M.y=H.y,H.id&&(M.id=H.id)},wp=function(M){M.x=Math.round(M.x),M.y=Math.round(M.y)},fl=null,ml=function(){fl&&(a.unbind(document,"mousemove",ml),a.addClass(i,"quick-view-has-mouse"),d.mouseUsed=!0,wt("mouseUsed")),fl=setTimeout(function(){fl=null},100)},Qg=function(){a.bind(document,"keydown",l),Xe.transform&&a.bind(l.scrollWrap,"click",l),d.mouseUsed||a.bind(document,"mousemove",ml),a.bind(window,"resize scroll orientationchange",l),wt("bindEvents")},ev=function(){a.unbind(window,"resize scroll orientationchange",l),a.unbind(window,"scroll",z.scroll),a.unbind(document,"keydown",l),a.unbind(document,"mousemove",ml),Xe.transform&&a.unbind(l.scrollWrap,"click",l),Bi&&a.unbind(window,W,l),clearTimeout(Rr),wt("unbindEvents")},Ju=function(M,H){var K=Cs(l.currItem,$,M);return H&&(vt=K),K},xp=function(M){return M||(M=l.currItem),M.initialZoomLevel},Qu=function(M){return M||(M=l.currItem),M.w>0?d.maxSpreadZoom:1},Sp=function(M,H,K,G){return G===l.currItem.initialZoomLevel?(K[M]=l.currItem.initialPosition[M],!0):(K[M]=Zu(M,G),K[M]>H.min[M]?(K[M]=H.min[M],!0):K[M]<H.max[M]?(K[M]=H.max[M],!0):!1)},tv=function(){if(Ve){var M=Xe.perspective&&!We;se="translate"+(M?"3d(":"("),ee=Xe.perspective?", 0px)":")";return}Ve="left",a.addClass(i,"quick-view-ie"),lo=function(H,K){K.left=H+"px"},ao=function(H){var K=H.fitRatio>1?1:H.fitRatio,G=H.container.style,Se=K*H.w,Te=K*H.h;G.width=Se+"px",G.height=Te+"px",G.left=H.initialPosition.x+"px",G.top=H.initialPosition.y+"px"},mr=function(){if(ci){var H=ci,K=l.currItem,G=K.fitRatio>1?1:K.fitRatio,Se=G*K.w,Te=G*K.h;H.width=Se+"px",H.height=Te+"px",H.left=R.x+"px",H.top=R.y+"px"}}},rv=function(M){var H="";d.escKey&&M.keyCode===27?H="close":d.arrowKeys&&(M.keyCode===37?H="prev":M.keyCode===39&&(H="next")),M.keyCode===32&&(M.preventDefault(),M.stopImmediatePropagation(),H="close"),H&&!M.ctrlKey&&!M.altKey&&!M.shiftKey&&!M.metaKey&&(M.preventDefault?M.preventDefault():M.returnValue=!1,l[H]())},ec=function(M){M&&(po||co||Hr||Ss)&&(M.preventDefault(),M.stopPropagation())},_p=function(){l.setScrollOffset(0,a.getScrollY())};pe||window.addEventListener("scroll",m);var ti={},Fo=0,pa=function(M){ti[M]&&(ti[M].raf&&Ze(ti[M].raf),Fo--,delete ti[M])},tc=function(M){ti[M]&&pa(M),ti[M]||(Fo++,ti[M]={})},ha=function(){for(var M in ti)ti.hasOwnProperty(M)&&pa(M)},ws=function(M,H,K,G,Se,Te,De){var rt=zi(),ht;tc(M);var yt=function(){if(ti[M]){if(ht=zi()-rt,ht>=G){pa(M),Te(K),De&&De();return}Te((K-H)*Se(ht/G)+H),ti[M].raf=st(yt)}};yt()},iv={shout:wt,listen:Ir,viewportSize:$,options:d,isMainScrollAnimating:function(){return Hr},getZoomLevel:function(){return J},getCurrentIndex:function(){return E},isDragging:function(){return Bi},isZooming:function(){return vn},setScrollOffset:function(M,H){re.x=M,kt=re.y=H,wt("updateScrollOffset",re)},applyZoomPan:function(M,H,K,G){R.x=H,R.y=K,J=M,mr(G)},init:function(){if(!(v||x)){e("init",l);var M;l.framework=a,l.template=i,l.bg=a.getChildByClass(i,"quick-view-bg"),l.captionPositioner=a.getChildByClass(i,"quick-view-caption-positioner"),l.captionWrapper=a.getChildByClass(l.captionPositioner,"quick-view-caption-wrapper"),l.caption=a.getChildByClass(l.captionWrapper,"quick-view-caption"),et=i.className,v=!0,Xe=a.detectFeatures(),st=Xe.raf,Ze=Xe.caf,Ve=Xe.transform,Et=Xe.oldIE,l.scrollWrap=a.getChildByClass(i,"quick-view-scroll-wrap"),l.container=a.getChildByClass(l.scrollWrap,"quick-view-container"),O=l.container.style,l.itemHolders=ae=[{el:l.container.children[0],wrap:0,index:-1},{el:l.container.children[1],wrap:0,index:-1},{el:l.container.children[2],wrap:0,index:-1}],ae[0].el.style.display=ae[2].el.style.display="none",tv(),z={resize:l.updateSize,orientationchange:function(){clearTimeout(Rr),Rr=setTimeout(function(){$.x!==l.scrollWrap.clientWidth&&l.updateSize()},500)},scroll:_p,keydown:rv,click:ec};var H=Xe.isOldIOSPhone||Xe.isOldAndroid||Xe.isMobileOpera;for((!Xe.animationName||!Xe.transform||H)&&(d.showAnimationDuration=d.hideAnimationDuration=0),M=0;M<Fe.length;M++)l["init"+Fe[M]]();if(n){var K=l.ui=new n(l,a);K.init()}wt("firstUpdate"),E=E||d.index||0,(isNaN(E)||E<0||E>=pi())&&(E=0),l.currItem=bn(E),(Xe.isOldIOSPhone||Xe.isOldAndroid)&&(Le=!1),i.setAttribute("aria-hidden","false"),d.modal&&(Le?i.style.position="fixed":(i.style.position="absolute",i.style.top=a.getScrollY()+"px")),i.classList.add("quick-view-vertical-align-"+d.alignVertical),i.classList.add("quick-view-horizontal-align-"+d.alignHorizontal),kt===void 0&&(wt("initialLayout"),kt=Je=a.getScrollY());var G="quick-view-open ";for(d.mainClass&&(G+=d.mainClass+" "),d.showHideOpacity&&(G+="quick-view-animate_opacity "),G+=We?"quick-view-touch":"quick-view-notouch",G+=Xe.animationName?" quick-view-css_animation":"",G+=Xe.svg?" quick-view-svg":"",a.addClass(i,G),l.updateSize(),L=-1,de=null,M=0;M<f;M++)lo((M+L)*ie.x+q.left,0,ae[M].el.style);Et||a.bind(l.scrollWrap,N,l),Ir("initialZoomInEnd",function(){l.setContent(ae[0],E-1),l.setContent(ae[2],E+1),ae[0].el.style.display=ae[2].el.style.display="block",d.focus&&i.focus(),Qg()}),l.setContent(ae[1],E),l.updateCurrItem(),setTimeout(l.updateCaption,d.showAnimationDuration+50),wt("afterInit",E),e("after-init",l),Le||(Z=setInterval(function(){!Fo&&!Bi&&!vn&&J===l.currItem.initialZoomLevel&&l.updateSize()},1e3)),a.addClass(i,"quick-view-visible")}},close:function(){v&&(v=!1,x=!0,wt("close"),e("closing",l),ev(),wl(l.currItem,null,!0,l.destroy))},destroy:function(){wt("destroy"),e("destroy",l),or&&clearTimeout(or),i.setAttribute("aria-hidden","true"),i.className=et,Z&&clearInterval(Z),a.unbind(l.scrollWrap,N,l),a.unbind(window,"scroll",l),window.removeEventListener("scroll",m),yl(),ha(),mn=null},panTo:function(M,H,K){K||(M>vt.min.x?M=vt.min.x:M<vt.max.x&&(M=vt.max.x),H>vt.min.y?H=vt.min.y:H<vt.max.y&&(H=vt.max.y)),R.x=M,R.y=H,mr()},handleEvent:function(M){M=M||window.event,z[M.type]&&z[M.type](M)},goTo:function(M){M=so(M);var H=M-E;de=H,E=M,l.currItem=bn(E),te-=H,bs(ie.x*te),ha(),Hr=!1,l.updateCurrItem()},next:function(){l.goTo(E+1)},prev:function(){l.goTo(E-1)},updateCurrZoomItem:function(M){if(M&&(wt("beforeChange",0),e("before-slide-change",l,0)),ae[1].el.children.length){var H=ae[1].el.children[0];a.hasClass(H,"quick-view-zoom-wrap")?ci=H.style:ci=null}else ci=null;vt=l.currItem.bounds,X=J=l.currItem.initialZoomLevel,R.x=vt.center.x,R.y=vt.center.y,M&&(wt("afterChange",E),e("after-slide-change",l))},invalidateCurrItems:function(){Y=!0;for(var M=0;M<f;M++)ae[M].item&&(ae[M].item.needsUpdate=!0)},updateCaption:function(){if(l.currItem.caption&&d.showCaption){for(;l.caption.childNodes.length>0;)l.caption.childNodes[0].parentNode.removeChild(l.caption.childNodes[0]);l.caption.appendChild(l.currItem.caption),wa(l.currItem),l.caption.classList.remove("hidden")}else if(d.showCaption){var M=function(){for(;l.caption.childNodes.length>0;)l.caption.childNodes[0].parentNode.removeChild(l.caption.childNodes[0]);l.caption.removeEventListener("transitionend",M)};l.caption.classList.contains("hidden")?M():(l.caption.addEventListener("transitionend",M),l.caption.classList.add("hidden"))}},updateCurrItem:function(M){if(de!==0){var H=Math.abs(de),K;if(!(M&&H<2)){l.currItem=bn(E),Kt=!1,wt("beforeChange",de);var G=de;G===null&&(G=0),e("slide-change",l,G),H>=f&&(L+=de+(de>0?-f:f),H=f);for(var Se=0;Se<H;Se++)de>0?(K=ae.shift(),ae[f-1]=K,L++,lo((L+2)*ie.x+q.left,0,K.el.style),l.setContent(K,E-H+Se+1+1)):(K=ae.pop(),ae.unshift(K),L--,lo(L*ie.x+q.left,0,K.el.style),l.setContent(K,E+H-Se-1-1));if(ci&&Math.abs(de)===1){var rt=bn(he);rt.initialZoomLevel!==J&&(Cs(rt,$),ii(rt),ao(rt))}var Te=1+-de,De=ae[Te];de=0,l.updateCurrZoomItem(),he!==void 0&&l.updateCaption();var rt=bn(he),ht=rt?.container?.querySelector("media-item");ht&&(ht.pause?.(),ht.getAttribute("autoplay")!="true"&&ht.setCurrentTime?.(0),ht.removeAttribute("autoplay"));var yt=bn(E),$e=yt?.container?.querySelector("media-item");$e&&($e.setAttribute("force-visible",!0),$e.onload=()=>{yt.autoplay?$e.play?.():setTimeout(()=>{$e?.play?.()},400)}),he=E,wt("afterChange",E)}}},updateSize:function(M){if(!Le&&d.modal){var H=a.getScrollY();if(kt!==H&&(i.style.top=H+"px",kt=H),!M&&Tt.x===window.innerWidth&&Tt.y===window.innerHeight)return;Tt.x=window.innerWidth,Tt.y=window.innerHeight,i.style.height=Tt.y+"px"}var K=window.getComputedStyle(l.template),G=parseFloat(K.getPropertyValue("padding-left"))+parseFloat(K.getPropertyValue("border-left-width")),Se=parseFloat(K.getPropertyValue("margin-left")),Te=parseFloat(K.getPropertyValue("padding-right"))+parseFloat(K.getPropertyValue("border-right-width")),De=parseFloat(K.getPropertyValue("margin-right")),rt=parseFloat(K.getPropertyValue("padding-top"))+parseFloat(K.getPropertyValue("border-top-width")),ht=parseFloat(K.getPropertyValue("margin-top")),yt=parseFloat(K.getPropertyValue("padding-bottom"))+parseFloat(K.getPropertyValue("border-bottom-width")),$e=parseFloat(K.getPropertyValue("margin-bottom"));let Ct="quick-view-vertical-align-"+d.alignVertical,Vt="quick-view-horizontal-align-"+d.alignHorizontal;Ct!=="quick-view-vertical-align-center"&&i.classList.remove("quick-view-vertical-align-center"),Ct!=="quick-view-vertical-align-top"&&i.classList.remove("quick-view-vertical-align-top"),Ct!=="quick-view-vertical-align-bottom"&&i.classList.remove("quick-view-vertical-align-bottom"),Vt!=="quick-view-horizontal-align-center"&&i.classList.remove("quick-view-horizontal-align-center"),Vt!=="quick-view-horizontal-align-left"&&i.classList.remove("quick-view-horizontal-align-left"),Vt!=="quick-view-horizontal-align-right"&&i.classList.remove("quick-view-horizontal-align-right"),i.classList.add(Ct),i.classList.add(Vt),q.top=rt,q.left=G,q.bottom=yt,q.right=Te,q.marginTop=ht,q.marginLeft=Se,q.marginBottom=$e,q.marginRight=De;var mi=l.scrollWrap.getBoundingClientRect();if($.x=mi.width,$.y=mi.height,_p(),ie.x=$.x+$.x*d.spacing,ie.y=$.y,bs(ie.x*te),wt("beforeResize"),L!==void 0){for(var Zt,Jt,pr,Ar=0;Ar<f;Ar++)Zt=ae[Ar],lo((Ar+L)*ie.x+q.left,0,Zt.el.style),pr=E+Ar-1,d.loop&&pi()>2&&(pr=so(pr)),Jt=bn(pr),Jt&&(Y||Jt.needsUpdate||!Jt.bounds)?(l.cleanSlide(Jt),l.setContent(Zt,pr),Ar===1&&(l.currItem=Jt,l.updateCurrZoomItem(!0)),Jt.needsUpdate=!1):Zt.index===-1&&pr>=0&&l.setContent(Zt,pr),Jt&&Jt.container&&(Cs(Jt,$),ii(Jt),ao(Jt));Y=!1}X=J=l.currItem.initialZoomLevel,vt=l.currItem.bounds,vt&&(R.x=vt.center.x,R.y=vt.center.y,mr(!0)),wt("resize")},zoomTo:function(M,H,K,G,Se){H&&(X=J,va.x=Math.abs(H.x)-R.x,va.y=Math.abs(H.y)-R.y,ai(D,R));var Te=Ju(M,!1),De={};Sp("x",Te,De,M),Sp("y",Te,De,M);var rt=J,ht={x:R.x,y:R.y};wp(De);var yt=function($e){$e===1?(J=M,R.x=De.x,R.y=De.y,l.currItem.caption&&d.showCaption&&(Math.abs(J-l.currItem.fitRatio)>.01?l.caption.classList.add("hidden"):l.caption.classList.remove("hidden"))):(J=(M-rt)*$e+rt,R.x=(De.x-ht.x)*$e+ht.x,R.y=(De.y-ht.y)*$e+ht.y),Se&&Se($e),mr($e===1)};K?ws("customZoomTo",0,1,K,G||a.easing.sine.inOut,yt):yt(1)}},Ep=30,rc=10,ic,gl,li={},zo={},ui={},Ur={},Bo={},Qi=[],qo={},uo,Uo=[],xs={},nc,Ss,_s,fa=0,vl=g(),oc=0,Bi,sc,co,po,ma,gn,Ti,vn,ga,ac,vt,yn=g(),ci,Hr,va=g(),Ho=g(),qi,ya,Dn,Es,ba,nv=function(M,H){return M.x===H.x&&M.y===H.y},Cp=function(M,H){return Math.abs(M.x-H.x)<p&&Math.abs(M.y-H.y)<p},lc=function(M,H){return xs.x=Math.abs(M.x-H.x),xs.y=Math.abs(M.y-H.y),Math.sqrt(xs.x*xs.x+xs.y*xs.y)},yl=function(){ma&&(Ze(ma),ma=null)},uc=function(){Bi&&(ma=st(uc),uv())},ov=function(){return!(d.scaleMode==="fit"&&J===l.currItem.initialZoomLevel)},Pp=function(M,H){return!M||M===document||M.getAttribute("class")&&M.getAttribute("class").indexOf("quick-view-scroll-wrap")>-1?!1:H(M)?M:Pp(M.parentNode,H)},cc={},dc=function(M,H){return cc.prevent=!Pp(M.target,d.isClickableElement),wt("preventDragEvent",M,H,cc),cc.prevent},Ip=function(M,H){return H.x=M.pageX+-q.left+-q.marginLeft,H.y=M.pageY+-q.top+-q.marginTop,H.clientY=M.clientY,H.id=M.identifier,H},Ap=function(M,H,K){K.x=(M.x+H.x)*.5,K.y=(M.y+H.y)*.5},sv=function(M,H,K){if(M-gl>50){var G=Uo.length>2?Uo.shift():{};G.x=H,G.y=K,Uo.push(G),gl=M}},Tp=function(){var M=R.y-l.currItem.initialPosition.y;return Math.min(1.2-Math.abs(M/($.y/2)),1)},ho={},av={},fo=[],bl,pc=function(M){for(;fo.length>0;)fo.pop();return Me?(bl=0,Qi.forEach(function(H){bl===0?fo[0]=H:bl===1&&(fo[1]=H),bl++})):M.type.indexOf("touch")>-1?M.touches&&M.touches.length>0&&(fo[0]=Ip(M.touches[0],ho),M.touches.length>1&&(fo[1]=Ip(M.touches[1],av))):(ho.x=M.pageX,ho.y=M.pageY,ho.clientY=M.clientY,ho.id="",fo[0]=ho),fo},Mp=function(M,H){var K,G=0,Se=R[M]+H[M],Te,De=H[M]>0,rt=yn.x+H.x,ht=yn.x-qo.x,yt,$e;if(Se>vt.min[M]||Se<vt.max[M]?K=d.panEndFriction:K=1,Se=R[M]+H[M]*K,(d.allowPanToNext||J===l.currItem.initialZoomLevel)&&(ci?qi==="h"&&M==="x"&&!co&&(De?(Se>vt.min[M]&&(K=d.panEndFriction,G=vt.min[M]-Se,Te=Math.round(vt.min[M]-D[M])),(Te<=0||ht<0)&&pi()>1?($e=rt,ht<0&&rt>qo.x&&($e=qo.x)):vt.min.x!==vt.max.x&&(yt=Se)):(Se<vt.max[M]&&(K=d.panEndFriction,G=Se-vt.max[M],Te=Math.round(D[M]-vt.max[M])),(Te<=0||ht>0)&&pi()>1?($e=rt,ht>0&&rt<qo.x&&($e=qo.x)):vt.min.x!==vt.max.x&&(yt=Se))):$e=rt,M==="x"))return $e!==void 0&&(bs($e,!0),$e===qo.x?gn=!1:gn=!0),vt.min.x!==vt.max.x&&(yt!==void 0?R.x=yt:gn||(R.x+=H.x*K)),$e!==void 0;Hr||gn||J>l.currItem.fitRatio&&(R[M]+=H[M]*K)},Yt=null,Xt=function(M){if(!(M.type==="mousedown"&&M.button>0)){if(Wo){M.preventDefault();return}if(!(_s&&M.type==="mousedown")){if(dc(M,!0)&&M.preventDefault(),_l=M.type,Yt=setTimeout(function(){l.template.classList.add("mouse-down")},200),wt("pointerDown"),Me){var H=a.arraySearch(Qi,M.pointerId,"id");H<0&&(H=Qi.length),Qi[H]={x:M.pageX,y:M.pageY,clientY:M.clientY,id:M.pointerId}}var K=pc(M),G=K.length;Ti=null,ha(),(!Bi||G===1)&&(Bi=ya=!0,a.bind(window,W,l),nc=fi=ba=Dn=Ss=gn=po=sc=co=!1,qi=null,fc=K[0].y+-kt,wt("firstTouchStart",K),ai(D,R),I.x=I.y=0,ai(Ur,K[0]),ai(Bo,Ur),qo.x=ie.x*te,Uo=[{x:Ur.x,y:Ur.y}],gl=ic=zi(),Ju(J,!0),yl(),uc()),!vn&&G>1&&!Hr&&!gn&&(X=J,co=!1,vn=sc=!0,I.y=I.x=0,ai(D,R),ai(li,K[0]),ai(zo,K[1]),Ap(li,zo,Ho),va.x=Math.abs(Ho.x)-R.x,va.y=Math.abs(Ho.y)-R.y,ga=ac=lc(li,zo))}}},lv=function(M){if(M.preventDefault(),Me){var H=a.arraySearch(Qi,M.pointerId,"id");if(H>-1){var K=Qi[H];K.x=M.pageX,K.y=M.pageY,K.clientY=M.clientY}}if(Bi){var G=pc(M);if(!qi&&!po&&!vn)if(yn.x!==ie.x*te)qi="h";else{var Se=Math.abs(G[0].x-Ur.x)-Math.abs(G[0].y-Ur.y);Math.abs(Se)>=rc&&(qi=Se>0?"h":"v",Ti=G)}else Ti=G;Vo=Vo+(fc-G[0].clientY),fc=G[0].clientY}},uv=function(){if(Ti){var M=Ti.length;if(M!==0)if(ai(li,Ti[0]),ui.x=li.x-Ur.x,ui.y=li.y-Ur.y,vn&&M>1){if(Ur.x=li.x,Ur.y=li.y,!ui.x&&!ui.y&&nv(Ti[1],zo))return;ai(zo,Ti[1]),co||(co=!0,wt("zoomGestureStarted"),l.currItem.caption&&d.showCaption&&l.caption.classList.add("hidden"));var H=lc(li,zo),K=Rp(H);K>l.currItem.initialZoomLevel+l.currItem.initialZoomLevel/15&&(ba=!0);var G=1,Se=xp(),Te=Qu();if(K<Se)if(d.pinchToClose&&!ba&&X<=l.currItem.initialZoomLevel){var De=Se-K,rt=1-De/(Se/1.2);Ai(rt),wt("onPinchClose",rt),Dn=!0}else G=(Se-K)/Se,G>1&&(G=1),K=Se-G*(Se/3);else K>Te&&(G=(K-Te)/(Se*6),G>1&&(G=1),K=Te+G*Se);G<0&&(G=0),ga=H,Ap(li,zo,vl),I.x+=vl.x-Ho.x,I.y+=vl.y-Ho.y,ai(Ho,vl),R.x=Zu("x",K),R.y=Zu("y",K),nc=K>J,J=K,mr()}else{if(!qi||(ya&&(ya=!1,Math.abs(ui.x)>=rc&&(ui.x-=Ti[0].x-Bo.x),Math.abs(ui.y)>=rc&&(ui.y-=Ti[0].y-Bo.y,Vo-=-(Ti[0].y-Bo.y))),Ur.x=li.x,Ur.y=li.y,ui.x===0&&ui.y===0))return;if(qi==="v"&&d.animatedCloseOnScroll&&_l==="touchstart"){if(hi=Vo,Vo=0,!fi&&!Ot){fi=!0,mo(),_a();var ht=!1,yt=0,$e=1,Ct=0;en=0,Ps=0;var Vt=Ur.y,mi=Ur.y,Zt,Jt,pr=document.documentElement.scrollTop,Ar=document.documentElement.scrollHeight,rn=$.y,gi=!1,vi=function(){gi||(gi=!0,Jt=requestAnimationFrame(function(){transformTargets.style.transform="translateY("+-Ps+"px)",gi=!1}))},nn=function(Wr){if(Wr.touches.length==0||Wr.touches.length>1){go(),Nr();return}Wr.preventDefault(),en=mi-Wr.touches[0].pageY,Ps=en,en+pr<=0?(scrollMonitor.__frozen=!0,Ps=-pr):en+pr+rn>=Ar?(scrollMonitor.__frozen=!0,Ps=0):scrollMonitor.__frozen&&delete scrollMonitor.__frozen,Ct=Vt-Wr.touches[0].pageY,Vt=Wr.touches[0].pageY,vi()},go=function(){window.removeEventListener("touchmove",nn),window.removeEventListener("touchend",go),window.addEventListener("touchstart",Nr),cancelAnimationFrame(Jt),transformTargets.style.transform="",document.documentElement.scrollTop=document.documentElement.scrollTop+en,Ts(),requestAnimationFrame(function(){scrollMonitor.__frozen&&delete scrollMonitor.__frozen,Cargo.View.Backdrop.updateBackdropScrollPosition(!0),Cargo.Event.trigger("lightbox-scroll-finished")})},Nr=function(){Ct=0,cancelAnimationFrame(Zt),window.removeEventListener("touchstart",Nr)},Ts=function(){$e=$e*.95;var Wr=Ct*$e;document.documentElement.scrollTop=document.documentElement.scrollTop+Wr,Math.abs(Wr)>.5?Zt=requestAnimationFrame(function(){Ts()}):Nr()};window.addEventListener("touchmove",nn),window.addEventListener("touchend",go)}return}else if(qi==="v"&&d.closeOnVerticalDrag&&!ov()){I.y+=ui.y,R.y+=ui.y;var jo=Tp();Ss=!0,wt("onVerticalDrag",jo),Ai(jo),mr();return}sv(zi(),li.x,li.y),qi==="h"&&d.showCaption&&!po&&l.caption.classList.add("hidden"),po=!0,vt=l.currItem.bounds;var gv=Mp("x",ui);gv||(Mp("y",ui),wp(R),mr())}}},cv=function(M){if(_l="",Xe.isOldAndroid){if(_s&&M.type==="mouseup")return;M.type.indexOf("touch")>-1&&(clearTimeout(_s),_s=setTimeout(function(){_s=0},600))}clearTimeout(Yt),l.template.classList.remove("mouse-down"),wt("pointerUp"),dc(M,!1)&&M.preventDefault();var H;if(Me){var K=a.arraySearch(Qi,M.pointerId,"id");if(K>-1)if(H=Qi.splice(K,1)[0],navigator.pointerEnabled)H.type=M.pointerType||"mouse";else{var G={4:"mouse",2:"touch",3:"pen"};H.type=G[M.pointerType],H.type||(H.type=M.pointerType||"mouse")}}var Se=pc(M),Te,De=Se.length;if(M.type==="mouseup"&&(De=0),De===2)return Ti=null,!0;De===1&&ai(Bo,Se[0]),De===0&&!qi&&!Hr&&(H||(M.type==="mouseup"?H={x:M.pageX+-q.left+-q.marginLeft,y:M.pageY+-q.top+-q.marginTop,type:"mouse"}:M.changedTouches&&M.changedTouches[0]&&(H={x:M.changedTouches[0].pageX+-q.left+-q.marginLeft,y:M.changedTouches[0].pageY+-q.top+-q.marginTop,type:"touch"})),wt("touchRelease",M,H));var rt=-1;if(De===0&&(Bi=!1,a.unbind(window,W,l),yl(),vn?rt=0:oc!==-1&&(rt=zi()-oc)),oc=De===1?zi():-1,rt!==-1&&rt<150?Te="zoom":Te="swipe",vn&&De<2&&(vn=!1,De===1&&(Te="zoomPointerUp"),wt("zoomGestureEnded")),Ti=null,!(!po&&!co&&!Hr&&!Ss&&!fi)){if(ha(),uo||(uo=dv()),uo.calculateSwipeSpeed("x"),fi)tn&&clearTimeout(tn),fi=!1,mo(),gc();else if(Ss){var ht=Tp();if(ht<d.verticalDragRange)l.close();else{var yt=R.y,$e=Es;ws("verticalDrag",0,1,300,a.easing.cubic.out,function(Vt){R.y=(l.currItem.initialPosition.y-yt)*Vt+yt,Ai((1-$e)*Vt+$e),mr()}),wt("onVerticalDrag",1)}return}if((gn||Hr)&&De===0){var Ct=hv(Te,uo);if(Ct)return;Te="zoomPointerUp"}if(!Hr){if(Te!=="swipe"){fv();return}!gn&&J>l.currItem.fitRatio&&pv(uo)}}},dv=function(){var M,H,K={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(G){Uo.length>1?(M=zi()-gl+50,H=Uo[Uo.length-2][G]):(M=zi()-ic,H=Bo[G]),K.lastFlickOffset[G]=Ur[G]-H,K.lastFlickDist[G]=Math.abs(K.lastFlickOffset[G]),K.lastFlickDist[G]>20?K.lastFlickSpeed[G]=K.lastFlickOffset[G]/M:K.lastFlickSpeed[G]=0,Math.abs(K.lastFlickSpeed[G])<.1&&(K.lastFlickSpeed[G]=0),K.slowDownRatio[G]=.95,K.slowDownRatioReverse[G]=1-K.slowDownRatio[G],K.speedDecelerationRatio[G]=1},calculateOverBoundsAnimOffset:function(G,Se){K.backAnimStarted[G]||(R[G]>vt.min[G]?K.backAnimDestination[G]=vt.min[G]:R[G]<vt.max[G]&&(K.backAnimDestination[G]=vt.max[G]),K.backAnimDestination[G]!==void 0&&(K.slowDownRatio[G]=.7,K.slowDownRatioReverse[G]=1-K.slowDownRatio[G],K.speedDecelerationRatioAbs[G]<.05&&(K.lastFlickSpeed[G]=0,K.backAnimStarted[G]=!0,ws("bounceZoomPan"+G,R[G],K.backAnimDestination[G],Se||300,a.easing.sine.out,function(Te){R[G]=Te,mr()}))))},calculateAnimOffset:function(G){K.backAnimStarted[G]||(K.speedDecelerationRatio[G]=K.speedDecelerationRatio[G]*(K.slowDownRatio[G]+K.slowDownRatioReverse[G]-K.slowDownRatioReverse[G]*K.timeDiff/10),K.speedDecelerationRatioAbs[G]=Math.abs(K.lastFlickSpeed[G]*K.speedDecelerationRatio[G]),K.distanceOffset[G]=K.lastFlickSpeed[G]*K.speedDecelerationRatio[G]*K.timeDiff,R[G]+=K.distanceOffset[G])},panAnimLoop:function(){if(ti.zoomPan&&(ti.zoomPan.raf=st(K.panAnimLoop),K.now=zi(),K.timeDiff=K.now-K.lastNow,K.lastNow=K.now,K.calculateAnimOffset("x"),K.calculateAnimOffset("y"),mr(),K.calculateOverBoundsAnimOffset("x"),K.calculateOverBoundsAnimOffset("y"),K.speedDecelerationRatioAbs.x<.05&&K.speedDecelerationRatioAbs.y<.05)){R.x=R.x,R.y=R.y,mr(),pa("zoomPan");return}}};return K},pv=function(M){if(M.calculateSwipeSpeed("y"),vt=l.currItem.bounds,M.backAnimDestination={},M.backAnimStarted={},Math.abs(M.lastFlickSpeed.x)<=.05&&Math.abs(M.lastFlickSpeed.y)<=.05)return M.speedDecelerationRatioAbs.x=M.speedDecelerationRatioAbs.y=0,M.calculateOverBoundsAnimOffset("x"),M.calculateOverBoundsAnimOffset("y"),!0;tc("zoomPan"),M.lastNow=zi(),M.panAnimLoop()},hv=function(M,H){var K;Hr||(fa=E);var G;if(M==="swipe"){var Se=Ur.x-Bo.x,Te=H.lastFlickDist.x<10;Se>Ep&&(Te||H.lastFlickOffset.x>20)?G=-1:Se<-Ep&&(Te||H.lastFlickOffset.x<-20)&&(G=1)}var De;G&&(E+=G,E<0?(E=d.loop?pi()-1:0,De=!0):E>=pi()&&(E=d.loop?0:pi()-1,De=!0),(!De||d.loop)&&(de+=G,te-=G,K=!0));var rt=ie.x*te,ht=Math.abs(rt-yn.x),yt;return!K&&rt>yn.x!=H.lastFlickSpeed.x>0?yt=333:(yt=Math.abs(H.lastFlickSpeed.x)>0?ht/Math.abs(H.lastFlickSpeed.x):333,yt=Math.min(yt,400),yt=Math.max(yt,250)),fa===E&&(K=!1),Hr=!0,wt("mainScrollAnimStart"),ws("mainScroll",yn.x,rt,yt,a.easing.cubic.out,bs,function(){ha(),Hr=!1,fa=-1,(K||fa!==E)&&l.updateCurrItem(),wt("mainScrollAnimComplete")}),K?l.updateCurrItem(!0):l.updateCaption(),K},Rp=function(M){return 1/ac*M*X},fv=function(){var M=J,H=xp(),K=Qu();J<H?M=H:J>K&&(M=K);var G=1,Se,Te=Es;return Dn&&!nc&&!ba&&J<H?(l.close(),!0):(Dn&&(Se=function(De){Ai((G-Te)*De+Te)}),l.zoomTo(M,0,200,a.easing.cubic.out,Se),!0)};oo("Gestures",{publicMethods:{initGestures:function(){var M=function(H,K,G,Se,Te){we=H+K,Re=H+G,ve=H+Se,Te?Ae=H+Te:Ae=""};Me=Xe.pointerEvent,Me&&Xe.touch&&(Xe.touch=!1),Me?navigator.pointerEnabled?M("pointer","down","move","up","cancel"):M("MSPointer","Down","Move","Up","Cancel"):Xe.touch?(M("touch","start","move","end","cancel"),We=!0):M("mouse","down","move","up"),W=Re+" "+ve+" "+Ae,N=we,Me&&!We&&(We=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),l.likelyTouchDevice=We,z[we]=Xt,z[Re]=lv,z[ve]=cv,Ae&&(z[Ae]=z[ve]),Xe.touch&&(N+=" mousedown",W+=" mousemove mouseup",z.mousedown=z[we],z.mousemove=z[Re],z.mouseup=z[ve]),We||(d.allowPanToNext=!1)}}});var or,wl=function(M,H,K,G){if(or&&clearTimeout(or),Wo=!0,di=!0,K){let $e=M.el?.closest?.("gallery-slideshow");if($e){let Ct=M.el?.assignedSlot?.name?.replace("slot-","")??-1;Ct!==-1&&$e.goToSlide(parseInt(Ct))}}let Se=M.el?.shadowRoot?.querySelector('[part*="media"]'),Te=M.container.querySelector("media-item")?.shadowRoot?.querySelector('[part*="media"]');var De=K?d.hideAnimationDuration:d.showAnimationDuration;let rt=!1;if(Se){rt=!0;let $e=Se.closest("marquee-set, gallery-slideshow"),Ct=Se.getBoundingClientRect(),Vt=$e?$e.getBoundingClientRect():{top:0,left:0,right:document.documentElement.clientWidth,bottom:document.documentElement.clientHeight};(Ct.bottom<Vt.top||Ct.top>Vt.bottom||Ct.right<Vt.left||Ct.left>Vt.right)&&(rt=!1)}if(rt&&Te&&Se){mr(),M.container.style.width=Te.offsetWidth+"px",M.container.style.height=Te.offsetHeight+"px";let $e={x:Te.offsetWidth/2,y:Te.offsetHeight/2},Ct={x:Se.offsetWidth/2,y:Se.offsetHeight/2},Vt=Bz(Se,Ct),mi=Bz(Te,$e);Vt.forEach(Nr=>{Nr[0]+=R.x,Nr[1]+=R.y+q.top});let Zt=ele(mi,Vt),Jt=Math.sqrt(Zt[12]*Zt[12]+Zt[13]*Zt[13]),pr=Math.max(0,20/Jt),Ar=[1,0,0,0,0,1,0,0,0,0,1,0,R.x,R.y+q.top,0,1],rn=getComputedStyle(M.el.shadowRoot.querySelector(".sizing-frame")),gi=getComputedStyle(Se),vi=gi.getPropertyValue("opacity")!=1||gi.getPropertyValue("filter")!="none"||rn.getPropertyValue("opacity")!=1||rn.getPropertyValue("filter")!="none",nn=[{offset:0,transform:"matrix3d("+Zt.map(Nr=>Number(Nr).toFixed(10)).join(",")+")"},{offset:1,transform:"matrix3d("+Ar.map(Nr=>Number(Nr).toFixed(10)).join(",")+")"}];vi&&(nn[0].filter=rn.getPropertyValue("filter"),nn[0].opacity=0,nn.splice(1,0,{opacity:rn.getPropertyValue("opacity")/3,offset:pr/2},{opacity:rn.getPropertyValue("opacity")/2,offset:pr},{opacity:rn.getPropertyValue("opacity"),offset:Math.min(1,pr*5)}),nn[nn.length-1].opacity=1);let go={fill:K?"forwards":"none",direction:K?"reverse":"normal",easing:"ease-in-out",duration:De};requestAnimationFrame(()=>{let Nr=M.container.animate(nn,go)})}var ht=function(){if(pa("initialZoom"),K)l.template.removeAttribute("style"),l.bg.removeAttribute("style");else{if(Ai(1),H&&(H.style.display="block"),M.autoplay){let $e=M.container.querySelector("media-item");$e&&($e.onload=()=>{$e.play?.()})}a.addClass(i,"quick-view-hide-overflow"),a.addClass(i,"quick-view-animated-in"),wt("initialZoom"+(K?"OutEnd":"InEnd"))}G&&G(),Wo=!1};if(!De){wt("initialZoom"+(K?"Out":"In")),J=M.initialZoomLevel,ai(R,M.initialPosition),mr(),i.style.opacity=K?0:1,Ai(1),De?setTimeout(function(){ht()},De):ht();return}var yt=function(){var $e=_||K,Ct=l.currItem.loadError||d.showHideOpacity||!rt,Vt=fi,mi=0;if(M.container.style.backfaceVisibility="hidden",K||(l[Ct?"template":"bg"].style.opacity=.001,mr()),tc("initialZoom"),K&&!$e&&a.removeClass(i,"quick-view-animated-in"),K){a.removeClass(i,"quick-view-hide-overflow");var Zt=l.getCurrentIndex();qz.default.each(l.itemHolders,function(Ar){Ar.index!==Zt&&(Ar.el.style.display="none")}),d.showCaption&&l.caption.classList.add("hidden")}let Jt=l.currItem.el?.getAttribute?.("rel")==="quick-view";(Ct||Vt||Jt)&&(K?a[($e?"remove":"add")+"Class"](i,"quick-view-animate_opacity"):setTimeout(function(){a.addClass(i,"quick-view-animate_opacity")},30));var pr=function(){if(wt("initialZoom"+(K?"Out":"In")),K){var Ar={x:R.x,y:R.y},rn=J,gi=Es,vi=document.documentElement.scrollTop,nn=Ps,go=function(Nr){if(mr(),Vt){var Ts=1-Nr;if(Math.hasOwnProperty("cbrt")){var jo=1-Math.cbrt(Ts);Ts=1-jo*jo*jo*jo}i.style.opacity=Ts}else Ct?i.style.opacity=1-Nr:Ai(gi-Nr*gi)};$e?ws("initialZoom",0,1,De,a.easing.cubic.out,go,ht):(go(1),or=setTimeout(ht,De+20))}else{if(J=M.initialZoomLevel,ai(R,M.initialPosition),mr(),Ai(1),ci){ci.opacity="",ci.transitionDuration="";let Nr=M.container.offsetHeight}Ct?i.style.opacity=1:Ai(1),or=setTimeout(ht,De+20)}};mi===0?pr():or=setTimeout(function(){pr()},mi)};yt()},Ui,kr={},Ln=[],di,Wo,kp={index:0,errorMsg:'<div class="quick-view-error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Ui.length}},bn,pi,Np,Op=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},Mi=function(M,H,K){var G=M.bounds;d.alignHorizontal==="left"?G.center.x=0:d.alignHorizontal==="right"?G.center.x=kr.x-H+M.hGap.left:G.center.x=(kr.x-H)/2+M.hGap.left,d.alignVertical==="top"?G.center.y=0:d.alignVertical==="bottom"?G.center.y=kr.y-K+M.vGap.top:G.center.y=(kr.y-K)/2+M.vGap.top,G.max.x=H>kr.x?kr.x-H+M.hGap.left:G.center.x,G.max.y=K>kr.y?kr.y-K+M.vGap.top:G.center.y,G.min.x=H>kr.x?M.hGap.left:G.center.x,G.min.y=K>kr.y?M.vGap.top:G.center.y},Cs=function(M,H,K){var G=!K;if(G&&(M.vGap||(M.vGap={top:0,bottom:0}),M.hGap||(M.hGap={left:0,right:0}),wt("parseVerticalMargin",M)),M.useViewportHeight||M.useViewportWidth?(kr.x=H.x-M.hGap.left-M.hGap.right,kr.y=H.y-M.vGap.top-M.vGap.bottom):(kr.x=H.x-M.hGap.left-M.hGap.right+-(q.left+q.right),kr.y=H.y-M.vGap.top-M.vGap.bottom+-(q.top+q.bottom)),G){var rt=M.w,ht=M.h;M.useViewportWidth&&(rt=(H.x-(q.left+q.right))*M.viewportWidthPercentage),M.useViewportHeight&&(ht=(H.y-(q.top+q.bottom))*M.viewportHeightPercentage);var Se=kr.x/rt,Te=kr.y/ht;M.useViewportHeight||M.useViewportWidth?M.fitRatio=1:M.fitRatio=Se<Te?Se:Te;var De=d.scaleMode;De==="orig"?K=1:De==="fit"&&(K=M.fitRatio),K>1&&(K=1),K==0&&(K=.01),M.initialZoomLevel=K,M.bounds||(M.bounds=Op())}if(K){var rt=M.w,ht=M.h;return M.useViewportWidth&&(rt=H.x*M.viewportWidthPercentage),M.useViewportHeight&&(ht=H.y*M.viewportHeightPercentage),(M.useViewportHeight||M.useViewportWidth)&&(K=1),Mi(M,rt*K,ht*K),G&&K===M.initialZoomLevel&&(M.initialPosition=M.bounds.center),M.bounds}},ri=function(M,H,K,G,Se,Te){if(!H.loadError&&G){H.imageAppended=!0,ii(H,G,H===l.currItem&&Kt),K.appendChild(G),Te&&(H.placeholder&&H.placeholder.classList.remove("quick-view-item"),setTimeout(function(){H&&H.loaded&&H.placeholder&&(H.placeholder.style.display="none",H.placeholder=null)},500));let rt=["allow","allowfullscreen","referrerpolicy","sandbox","srcdoc","controlslist","disablepictureinpicture","disableremoteplayback","x-webkit-airplay","playsinline"].reduce(($e,Ct)=>H.el?.hasAttribute(Ct)?{...$e,[Ct]:H.el.getAttribute(Ct)}:$e,{});for(let[$e,Ct]of Object.entries(rt))G.setAttribute($e,Ct);G.setAttribute("force-visible",!0),G.setAttribute("disable-scroll-animation",!0),G.setAttribute("disable-zoom",!0),G.setAttribute("width",H.w),G.setAttribute("height",H.h),G.setAttribute("uses","inline-part-styles"),G.setAttribute("media-style","padding: 0px; border-width: 0px; border-radius: 0px; outline-width: 0px;"),G.style.padding=G.style.borderWidth=G.style.borderRadius=G.style.outlineWidth="0px",H.usePlaceholder?G.setAttribute("hash","placeholder"):H.hash?G.setAttribute("hash",H.hash):H.src&&G.setAttribute("src",H.src);let ht=ae.find($e=>$e.index==M);if(H.fileType=="video"||H.fileType.startsWith("vimeo")||H.fileType.startsWith("youtube"))H.fileType!=="video"&&ht.el.classList.add("iframe-item"),H.autoplay?(H.el?.getCurrentTime?.().then($e=>{G.onload=()=>{setTimeout(()=>{G.setCurrentTime?.($e)},0)}}),G.setAttribute("muted",!0),G.setAttribute("loop",!0),G.setAttribute("autoplay",!0),G.setAttribute("browser-default",!1)):(H.poster?G.setAttribute("poster",H.poster):H.posterSrc&&G.setAttribute("poster",H.posterSrc),H.el?.pause?.(),G.setAttribute("browser-default",!0));else if(H.fileType==="image"){ht.el.classList.remove("iframe-item");var De=H.el?.shadowRoot?.querySelector('img[part*="media"]')?.src;De&&H.src&&De!==H.src&&(De=H.src)}else H.fileType==="url"&&ht.el.classList.add("iframe-item");H.hash&&H.hash!=="placeholder"&&G.hasAttribute("src")?(G.setAttribute("hash",H.hash),G.removeAttribute("src")):H.src&&G.getAttribute("src")!==H.src?(H.posterSrc&&!G.poster&&G.setAttribute("poster",H.posterSrc),G.setAttribute("src",H.src)):H.model&&(G.model=H.model),G.itemDragStart=$e=>{$e.preventDefault()};let yt=G.shadowRoot.querySelector("video");yt&&(yt.style.display="table",setTimeout(()=>{yt.style.display=""},0)),H.autoplay&&(G.onload=()=>{setTimeout(()=>{G?.play?.()})})}},Dp=function(M){M.loading=!0,M.loaded=!1;var H=M.img=a.createEl("quick-view-item","media-item");Sg(M.el,M,!0).then(K=>{for(let[G,Se]of Object.entries(K))M[G]=Se;if(M.loaded=!0,M.loading=!1,M.loadError){M.loadComplete&&M.loadComplete(M);return}M.img&&(M.hash?M.img.setAttribute("hash",M.hash):M.src&&M.img.setAttribute("src",M.src),M.fileType=="video"&&M.autoplay&&(M.img.setAttribute("autoplay",!0),M.img.setAttribute("muted",!0),M.img.setAttribute("loop",!0))),M.loadComplete?M.loadComplete(M):M.img=null})},hc=function(M,H){if((M.src||M.hash)&&M.loadError&&M.container)return H&&(M.container.innerHTML=""),M.container.innerHTML=d.errorMsg.replace("%url%",M.src),!0},ii=function(M,H,K){H||(H=M.container.lastChild);var G=K?M.w:M.w*M.fitRatio,Se=K?M.h:M.h*M.fitRatio,Te=M.w*M.fitRatio,De=M.h*M.fitRatio;M.useViewportWidth&&(G=$.x*M.viewportWidthPercentage,G=Te=G-(q.left+q.right)),M.useViewportHeight&&(Se=$.y*M.viewportHeightPercentage,Se=De=Se-(q.top+q.bottom)),M.renderedSize={w:Te,h:De},M===l.currItem&&wa(M),!Bi&&q.top>5&&q.right>5&&q.bottom>5&&q.left>5&&(G=Math.round(G),Se=Math.round(Se)),H&&(H.style.transform="translate3d(0,0,0)",H.style.width=G+"px",H.style.height=Se+"px",H.style.setProperty("--frame-padding",Se+"px"),H.style.setProperty("padding","0px"),H.style.setProperty("border","none"),H.style.setProperty("outline","none"),H.style.setProperty("background","none"))},wa=function(M){if(M.renderedSize){var H=M.renderedSize.w,K=M.renderedSize.h,G=Math.max(1,M.fitRatio);l.captionWrapper.style.width=H/G+"px",l.captionWrapper.style.right=q.right+"px",l.captionWrapper.style.left=q.left+"px";var Se=0;switch(d.alignVertical){case"center":Se=($.y+-q.bottom+-q.top+-K/G)*.5+q.bottom;break;case"top":Se=$.y+-q.bottom+-q.top+-K/G+q.bottom;break;case"bottom":Se=q.bottom;break}l.captionWrapper.style.height=Se+"px"}},xl=function(){if(Ln.length){for(var M,H=0;H<Ln.length;H++)M=Ln[H],M.holder.index===M.index&&ri(M.index,M.item,M.baseDiv,M.img,!1,M.clearPlaceholder);Ln=[]}};oo("Controller",{publicMethods:{lazyLoadItem:function(M){M=so(M);var H=bn(M);!H||(H.loaded||H.loading)&&!Y||(wt("gettingData",M,H),Dp(H))},initController:function(){a.extend(d,kp,!0),l.items=Ui=o,bn=l.getItemAt,pi=d.getNumItemsFn,Np=d.loop,pi()<3&&(d.loop=!1),Ir("beforeChange",function(M){var H=d.preload,K=M===null?!0:M>=0,G=Math.min(H[0],pi()),Se=Math.min(H[1],pi()),Te;for(Te=1;Te<=(K?Se:G);Te++)l.lazyLoadItem(E+Te);for(Te=1;Te<=(K?G:Se);Te++)l.lazyLoadItem(E-Te)}),Ir("initialLayout",function(){l.currItem}),Ir("mainScrollAnimComplete",xl),Ir("initialZoomInEnd",xl),Ir("destroy",function(){for(var M,H=0;H<Ui.length;H++)M=Ui[H],M.container&&(M.container=null),M.placeholder&&(M.placeholder=null),M.img&&(M.img=null),M.preloader&&(M.preloader=null),M.loadError&&(M.loaded=M.loadError=!1);Ln=null})},getItemAt:function(M){return M>=0&&Ui[M]!==void 0?Ui[M]:!1},allowProgressiveImg:function(){return!0},setContent:function(M,H){d.loop&&(H=so(H));var K=l.getItemAt(M.index);K&&(K.container=null);var G=l.getItemAt(H),Se;if(!G){M.el.innerHTML="";return}wt("gettingData",H,G),M.index=H,M.item=G;var Te=G.container=a.createEl("quick-view-zoom-wrap");hc(G),Cs(G,$),(G.src||G.hash||G.usePlaceholder)&&!G.loadError&&!G.loaded?(G.loadComplete=function(De){if(v){if(M&&M.index===H){if(hc(De,!0)){De.loadComplete=De.img=null,Cs(De,$),ao(De),M.index===E&&l.updateCurrZoomItem();return}De.imageAppended?!Wo&&De.placeholder&&(De.placeholder.style.display="none",De.placeholder=null):Xe.transform&&(Hr||Wo)?Ln.push({item:De,baseDiv:Te,img:De.img,index:H,holder:M,clearPlaceholder:!0}):ri(H,De,Te,De.img,Hr||Wo,!0),Cs(De,$),ii(De),ao(De)}De.loadComplete=null,De.img=null,wt("imageLoadComplete",H,De)}},a.features.transform,G.loading||Dp(G),l.allowProgressiveImg()&&(!di&&Xe.transform?Ln.push({item:G,baseDiv:Te,img:G.img,index:H,holder:M}):ri(H,G,Te,G.img,!0,!0))):(G.src||G.hash||G.usePlaceholder)&&!G.loadError?(Se=a.createEl("quick-view-item","media-item"),Se.style.opacity=1,ii(G,Se),ri(H,G,Te,Se,!0)):!G.src&&!G.hash&&G.html&&ii(G,null),!di&&H===E?(G.preloadedImage&&Se&&Se.setAttribute("src",G.preloadedImage.getAttribute("src")),G.container.style.opacity=0,ci=Te.style,setTimeout(()=>{wl(G,Se||G.img),G.container.style.opacity=null},0)):ao(G),M.el.innerHTML="",M.el.appendChild(Te)},cleanSlide:function(M){M.img&&(M.img.onload=M.img.onerror=null),M.loaded=M.loading=M.img=M.imageAppended=!1}}});var Nt,wn={},xa=function(M,H,K){var G=document.createEvent("CustomEvent"),Se={origEvent:M,target:M.target,releasePoint:H,pointerType:K||"touch"};G.initCustomEvent("pswpTap",!0,!0,Se),M.target.dispatchEvent(G)};oo("Tap",{publicMethods:{initTap:function(){Ir("firstTouchStart",l.onTapStart),Ir("touchRelease",l.onTapRelease),Ir("destroy",function(){wn={},Nt=null})},onTapStart:function(M){M.length>1&&(clearTimeout(Nt),Nt=null)},onTapRelease:function(M,H){if(H&&!po&&!sc&&!Fo){var K=H;if(Nt&&(clearTimeout(Nt),Nt=null,Cp(K,wn))){wt("doubleTap",K);return}if(H.type==="mouse"){xa(M,H,"mouse");return}var G=M.target.tagName.toUpperCase();if(G==="BUTTON"||a.hasClass(M.target,"quick-view-single-tap")){xa(M,H);return}ai(wn,K),Nt=setTimeout(function(){xa(M,H),Nt=null},300)}}}});var Sl,Vo=0,fc=0,hi=0,mc=!1,$o=0,fi=!1,en=0,Ps=0,_l="",Is=null,Sa=!1,_a=function(){Ot=!0,El()},mo=function(){Sl&&(Ze(Sl),Sl=null,$o=0,hi=0,Ot=!1)},gc=function(){if(!(Ot||As)){var M=R.y,H=R.x,K=Es,G=J;ws("resetVertical",0,1,300,a.easing.cubic.out,function(Se){J=l.currItem.initialZoomLevel*Se+(1-Se)*G,R.y=(l.currItem.initialPosition.y-M)*Se+M;var Te=(l.currItem.initialZoomLevel*parseFloat(l.currItem.w)-J*parseFloat(l.currItem.w))*.5;R.x=l.currItem.initialPosition.x+Te,Ai((1-K)*Se+K),mr()})}},El=function(){mc||(mc=!0,Ot&&(Sl=st(El),mv(),mc=!1))},As=!1,mv=function(){!fi&&Sa&&(document.documentElement.scrollTop=document.documentElement.scrollTop+hi);var M=Math.min($.y,$.x),H=Math.abs(hi)/M,K=Math.max(0,Math.min(1.3-Math.abs($o/(M/3)),1));if(K<.85||As||H>.2){mo(),tn&&clearTimeout(tn),As||(As=!0,fi?(_=!0,l.close()):setTimeout(function(){_=!0,l.close()},25));return}Ai(K);var G=Math.abs($o)/($.y*.75);if(l.currItem.hasOwnProperty("thumbRect")){var Se=l.currItem.initialZoomLevel*parseFloat(l.currItem.h)*.5<l.currItem.thumbRect.h;Se&&(G=0)}J=(1-G*G)*l.currItem.initialZoomLevel;var Te=(l.currItem.initialZoomLevel*parseFloat(l.currItem.w)-J*parseFloat(l.currItem.w))*.5,De=(l.currItem.initialZoomLevel*parseFloat(l.currItem.h)-J*parseFloat(l.currItem.h))*.5;R.y=l.currItem.initialPosition.y+De+-$o,R.x=l.currItem.initialPosition.x+Te,mr(),$o=$o+hi,hi=0},tn,Wt;oo("DesktopZoom",{publicMethods:{initDesktopZoom:function(){Et||(We?l.setupDesktopZoom():l.setupDesktopZoom(!0))},setupDesktopZoom:function(M){Wt={};var H="wheel mousewheel DOMMouseScroll";Ir("bindEvents",function(){a.bind(i,H,l.handleMouseWheel)}),Ir("unbindEvents",function(){Wt&&a.unbind(i,H,l.handleMouseWheel)}),l.mouseZoomedIn=!1;var K,G=function(){l.mouseZoomedIn&&(a.removeClass(i,"quick-view-zoomed-in"),l.mouseZoomedIn=!1),J<1?a.addClass(i,"quick-view-zoom-allowed"):a.removeClass(i,"quick-view-zoom-allowed"),Se()},Se=function(){K&&(a.removeClass(i,"quick-view-dragging"),K=!1)};Ir("resize",G),Ir("afterChange",G),Ir("pointerDown",function(){l.mouseZoomedIn&&(K=!0,a.addClass(i,"quick-view-dragging"))}),Ir("pointerUp",Se),M||G()},handleMouseWheel:function(M){if(Sa=!0,J<=l.currItem.fitRatio&&d.modal&&(!d.closeOnScroll||Fo||Bi?M.preventDefault():Ve&&Math.abs(M.deltaY)>2&&(_=!0,l.close())),Wt.x=0,"deltaX"in M)M.deltaMode===1?(Wt.x=M.deltaX*18,Wt.y=M.deltaY*18):(Wt.x=M.deltaX,Wt.y=M.deltaY);else if("wheelDelta"in M)M.wheelDeltaX&&(Wt.x=-.16*M.wheelDeltaX),M.wheelDeltaY?Wt.y=-.16*M.wheelDeltaY:Wt.y=-.16*M.wheelDelta;else if("detail"in M)Wt.y=M.detail;else return;if(J<=l.currItem.fitRatio&&!fi){hi=hi+Wt.y,d.modal&&(!d.animatedCloseOnScroll||Fo||Bi?(M.preventDefault(),hi=0):Ve&&Math.abs(Wt.y)>0&&!Ot&&(mo(),_a()),tn&&clearTimeout(tn),tn=setTimeout(function(){mo(),gc()},200));return}else hi=0,M.stopPropagation();Ju(J,!0);var H=R.x-Wt.x,K=R.y-Wt.y;(d.modal||H<=vt.min.x&&H>=vt.max.x&&K<=vt.min.y&&K>=vt.max.y)&&M.preventDefault(),l.panTo(H,K)},toggleDesktopZoom:function(M){M=M||{x:$.x/2+re.x,y:$.y/2+re.y};var H=d.getDoubleTapZoom(!0,l.currItem),K=J===H;l.mouseZoomedIn=!K,l.zoomTo(K?l.currItem.initialZoomLevel:H,M,333),a[(K?"remove":"add")+"Class"](i,"quick-view-zoomed-in"),l.currItem.caption&&d.showCaption&&(K?l.caption.classList.remove("hidden"):l.caption.classList.add("hidden"))}}}),a.extend(l,iv)};return r}),this.template=`<div class="quick-view" tabindex="-1" role="dialog" aria-hidden="true"> 
	

</div>`;var t=function(){var r=document.querySelector(".quick-view-container");r.outerHTML=this.template,r=null}.bind(this),e=function(){};this.setEventProxy=function(r){typeof r=="function"&&(e=r)},this.isActive=!1,this.activeGallery=void 0,this.openImageArray=function(r,i,n){if(!(r===void 0||this.activeGallery!==void 0)){var o=document.querySelectorAll(".quick-view")[0],s=this,a=n.alignVertical||"center",l=n.alignHorizontal||"center",p=n.useControls,f=n.animatedCloseOnScroll,d=n.showCaption,m={index:i,maxSpreadZoom:1,getThumbMatrixTransform:function(O){if(n&&n.preventAnimation||s.activeGallery==null)return!1;var L=s.activeGallery.getItemAt(O),I;if(!L||!L.el)return!1;L.el.tagName==="A"?I=L.el.querySelector("media-item, video, iframe, img")||L.el:I=L.el;let D=I.closest("marquee-set");if(D){let W=D.querySelector('marquee-inner[slot="contents"]'),N=D.querySelector('marquee-inner[slot="contents-clone"]');if(s.isActive&&N)return!1}if(I&&I.tagName==="MEDIA-ITEM"&&(I=I.shadowRoot.querySelector('[part*="media"]')),!I)return!1;let R=I.getRootNode();for(;R&&R!==document;)R instanceof ShadowRoot?R=R.host.getRootNode():R=void 0;return R?matrix:!1},closeEl:!0,arrowEl:!1,tapToClose:!0,closeOnScroll:!1,alignHorizontal:l,alignVertical:a,useControls:p,animatedCloseOnScroll:f,showCaption:d},g=!1,v=!1,x=function(){v=!0},_=function(){v=!1};if(window.addEventListener("touchend",_),window.addEventListener("touchstart",x),n!==void 0&&typeof n=="object"){for(var E in n)n.hasOwnProperty(E)&&(m[E]=n[E]);n.disableZoom===!0&&(g=!0,m.zoomEl=!1,m.getDoubleTapZoom=function(O,L){return L.initialZoomLevel},m.pinchToClose=!1)}return this.activeGallery=new this.PhotoSwipe(o,this.PhotoSwipeUI_Default,r,m),n.afterInit&&this.activeGallery.listen("afterInit",n.afterInit),g?o.classList.add("quick-view-zoom-disabled"):o.classList.remove("quick-view-zoom-disabled"),this.activeGallery.init(),this.isActive=!0,this.activeGallery.elementArray=r,this.activeGallery.listen("destroy",function(){o.parentNode!==null?(o.parentNode.removeChild(o),window.removeEventListener("touchend",_),window.removeEventListener("touchstart",x)):(window.removeEventListener("touchend",_),window.removeEventListener("touchstart",x)),s.isActive=!1,s.activeGallery=void 0}),this.activeGallery}};(function(r,i){r===void 0&&window!==void 0&&(r=window),r.PhotoSwipeUI_Default=i()})(this,function(){"use strict";var r=function(i,n){var o=this,s=!1,a=!0,l,p,f,d,m,g,v,x={closeElClasses:["holder","caption","zoom-wrap","ui","top-menu-bar","container"],timeToIdle:1500,timeToIdleOutside:1500,closeEl:!0,fullscreenEl:!0,zoomEl:!0,counterEl:!0,arrowEl:!0,tapToClose:!1,tapToToggleControls:!0,useControls:!1,clickToCloseNonZoomable:!0,fitControlsWidth:1200},_,E,O=function(Y){if(_)return!0;Y=Y||window.event,v.timeToIdle&&v.mouseUsed&&!d&&$();for(var te=Y.target||Y.srcElement;te.nodeName==="svg"||te.nodeName==="path"||te.nodeName==="circle"||te.nodeName==="polyline"||te.nodeName==="g"||te.nodeName==="foreignObject"||te.nodeName==="line";)te=te.parentNode;for(var re,ie=te.getAttribute("class")||"",ae,he=0;he<ee.length;he++)re=ee[he],re.onTap&&ie.indexOf("quick-view-"+re.name)>-1&&(re.onTap(),ae=!0);if(ae){Y.stopPropagation&&Y.stopPropagation(),_=!0;var de=n.features.isOldAndroid?600:30;E=setTimeout(function(){_=!1},de)}},L=function(){return!i.likelyTouchDevice||v.mouseUsed||screen.width>v.fitControlsWidth},I=function(Y,te,re){n[(re?"add":"remove")+"Class"](Y,"quick-view-"+te)},D=function(Y){for(var te=0;te<v.closeElClasses.length;te++)if(n.hasClass(Y,"quick-view-"+v.closeElClasses[te]))return!0},R,W,N=0,z=!1,$=function(Y){if(Y){var te=qa(Y.target,function(re){if(re&&re.nodeType===Node.ELEMENT_NODE)return re.classList.contains("left-arrow")||re.classList.contains("right-arrow")||re.classList.contains("close-button")});z=!!te}clearTimeout(W),N=0,d&&o.setIdle(!1)},q=function(Y){Y=Y||window.event;var te=Y.relatedTarget||Y.toElement;(!te||te.nodeName==="HTML")&&(clearTimeout(W),W=setTimeout(function(){o.setIdle(!0)},v.timeToIdleOutside))},J=function(){v.fullscreenEl&&!n.features.isOldAndroid&&(l||(l=o.getFullscreenAPI()),l?(n.bind(document,l.eventK,o.updateFullscreen),o.updateFullscreen(),n.addClass(i.template,"quick-view-supports-fs")):n.removeClass(i.template,"quick-view-supports-fs"))},X=function(){v.timeToIdle&&m("mouseUsed",function(){n.bind(document,"mousemove",$),n.bind(document,"mouseout",q),R=setInterval(function(){N++,N===2&&o.setIdle(!0)},v.timeToIdle/2)})},se=function(){m("onVerticalDrag",function(te){a&&te<.95?o.hideControls():!a&&te>=.95&&o.showControls()});var Y;m("onPinchClose",function(te){a&&te<.9?(o.hideControls(),Y=!0):Y&&!a&&te>.9&&o.showControls()}),m("zoomGestureEnded",function(){Y=!1,Y&&!a&&o.showControls()})},ee=[{name:"button--zoom",option:"zoomEl",onTap:i.toggleDesktopZoom},{name:"button-close",option:"closeEl",onTap:i.close},{name:"button-prev",option:"arrowEl",onTap:i.prev},{name:"button-next",option:"arrowEl",onTap:i.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){l.isFullscreen()?l.exit():l.enter()}}],Z=function(){var Y,te,re,ie=function(de){if(de){for(var we=de.length,Re=[],ve=0;ve<we;ve++){Y=de[ve],te=Y.className;for(var Ae=0;Ae<ee.length;Ae++)re=ee[Ae],te.indexOf("quick-view-"+re.name)>-1&&(v[re.option]?(n.removeClass(Y,"quick-view-element--disabled"),Re.push(Y),re.onInit&&re.onInit(Y)):n.addClass(Y,"quick-view-element--disabled"))}Re.length>0}};ie(p.children);for(var ae=p.querySelectorAll(".quick-view-group"),he=0;he<ae.length;he++)ie(ae[he].children)};o.init=function(){n.extend(i.options,x,!0),v=i.options,p=n.getChildByClass(i.scrollWrap,"quick-view-ui"),m=i.listen,m("beforeChange",o.update),m("doubleTap",function(Y){var te=i.currItem.initialZoomLevel;i.getZoomLevel()!==te?i.zoomTo(te,Y,333):i.zoomTo(v.getDoubleTapZoom(!1,i.currItem),Y,333)}),m("preventDragEvent",function(Y,te,re){var ie=Y.target||Y.srcElement;ie&&ie.getAttribute("class")&&Y.type.indexOf("mouse")>-1&&(ie.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(ie.tagName))&&(re.prevent=!1)}),m("destroy",function(){v.captionEl&&(_fakeCaptionContainer&&p.removeChild(_fakeCaptionContainer),n.removeClass(_captionContainer,"quick-view-caption--empty"))}),o.bindEvents(),J()},o.unbindEvents=function(){R&&clearInterval(R),n.unbind(document,"mouseout",q),n.unbind(document,"mousemove",$),n.unbind(i.scrollWrap,"pswpTap",o.onGlobalTap),window.removeEventListener("mousedown",o.onGlobalClick),l&&(n.unbind(document,l.eventK,o.updateFullscreen),l.isFullscreen()&&(v.hideAnimationDuration=0,l.exit()),l=null)},o.setupIdle=function(){X()},o.bindEvents=function(){v.useControls,window.addEventListener("mousedown",o.onGlobalClick),n.bind(i.scrollWrap,"pswpTap",o.onGlobalTap),i.likelyTouchDevice},o.setIdle=function(Y){window.store?.getState()?.frontendState?.adminMode||z||(d=Y)},o.update=function(){a&&i.currItem?s=!0:s=!1},o.updateFullscreen=function(Y){Y&&setTimeout(function(){i.setScrollOffset(0,n.getScrollY())},50),n[(l.isFullscreen()?"add":"remove")+"Class"](i.template,"quick-view-fs")},o.onGlobalClick=function(Y){let te=Y.target.closest('.quick-view, media-item:not([disable-zoom="true"]), href[rel="quick-view"]');te&&(te.getAttribute("rel")=="quick-view"||te.nodeName==="MEDIA-ITEM")?i.elementArray.findIndex(ie=>ie.el==te)===-1&&i.close():te||i.close()},o.onGlobalTap=function(Y){Y=Y||window.event;var te=Y.target||Y.srcElement;if(!_){if(Y.detail&&Y.detail.pointerType==="mouse"){if(D(te)){i.close();return}if(n.hasClass(te,"quick-view-item")){if(v.disableZoom){let re=te.getFileType?.();if(re&&!i.currItem.autoplay&&(re.startsWith("vimeo")||re.startsWith("youtube")||re==="video"))return;i.close();return}if(i.getZoomLevel()===1&&i.getZoomLevel()<=i.currItem.fitRatio){if(v.clickToCloseNonZoomable){i.close();return}}else i.toggleDesktopZoom(Y.detail.releasePoint)}}else if(v.tapToToggleControls&&(a?o.hideControls():o.showControls()),v.tapToClose&&(n.hasClass(te,"quick-view-item")||D(te))){(!te.getFileType||te.getFileType?.()==="image")&&i.close();return}}},o.onMouseOver=function(Y){Y=Y||window.event;var te=Y.target||Y.srcElement;I(p,"ui--over-close",D(te))},o.hideControls=function(){},o.showControls=function(){},o.toggleFullscreen=function(){l.isFullscreen()?l.exit():l.enter()},o.supportsFullscreen=function(){var Y=document;return!!(Y.exitFullscreen||Y.mozCancelFullScreen||Y.webkitExitFullscreen||Y.msExitFullscreen)},o.getFullscreenAPI=function(){var Y=document.documentElement,te,re="fullscreenchange";return Y.requestFullscreen?te={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:re}:Y.mozRequestFullScreen?te={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+re}:Y.webkitRequestFullscreen?te={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+re}:Y.msRequestFullscreen&&(te={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),te&&(te.enter=function(){if(f=v.closeOnScroll,v.closeOnScroll=!1,this.enterK==="webkitRequestFullscreen")i.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);else return i.template[this.enterK]()},te.exit=function(){return v.closeOnScroll=f,document[this.exitK]()},te.isFullscreen=function(){return document[this.elementK]}),te}};return r})}).call(Uz)});var Wz=oe((eke,tle)=>{tle.exports={}});var u1={};hr(u1,{default:()=>nle,getLightboxItemAndPreloadFromElement:()=>Sg,openQuickViewFromElement:()=>l1});function rle(t,e){let r=t?.css?.stylesheet||"",i=document.createElement("style");i.disabled=!0,i.innerHTML=r,document.body.appendChild(i);let n=!1;if(i.sheet&&i.sheet.cssRules)for(let o=0;o<i.sheet.cssRules.length;o++){let s=i.sheet.cssRules[o];s.selectorText&&s.selectorText.includes(".mobile")&&s.selectorText.includes(".quick-view::part(slideshow-nav)")&&Array.from(s.style).indexOf("opacity")>-1&&(n=!0)}return i.remove(),{mobileOpacityIsOverridden:n,imageSettings:t.siteDesign.images,settings:t.siteDesign.quick_view,quickView:t.frontendState.quickView,adminMode:t.frontendState.adminMode}}function ile(t){return zt({updateFrontendState:actions.updateFrontendState},t)}var _g,a1,$z,Vz,Sg,l1,nle,ap=V(()=>{ke();Ye();ft();xr();Pr();Yr();Be();la();is();Hz();_g=ye(Pe(),1);fe();a1=class extends me{constructor(e){super(e),this.state={closing:!0,lightboxActive:!1,navigationElement:null,showInterface:!1,showArrows:!0,navTransitioning:!1,pointerDown:!1},this.template=xe(),this.navigationRef=xe(),this.lightbox=window.lightbox,this.QuickView=window.QuickView,Promise.resolve().then(()=>ye(Wz(),1)),this.htmlTemplate=`
			<div class="quick-view-bg quick-view-background"></div> 
			<div class="quick-view-scroll-wrap"> 

				<div class="quick-view-container"> 
					<div class="quick-view-holder"></div> 
					<div class="quick-view-holder"></div> 
					<div class="quick-view-holder"></div> 
				</div> 

			</div>

			<div class="quick-view-caption-positioner"> 
				<div class="quick-view-caption-wrapper"> 
					<div class="quick-view-caption caption hidden" data-quick-view-caption><span></span></div>
				</div> 
			</div>`}onPointerDown=e=>{this.setState({pointerDown:!0})};onPointerUp=e=>{this.setState({pointerDown:!1})};onPointerMove=e=>{!this.state.showInterface&&!this.state.pointerDown&&this.setState({showInterface:!0});let r=document.querySelector(".quick-view-caption");e&&e.target&&(this.state.navigationElement?.contains(e.target)||e.target===r||r&&r.contains(e.target))&&this.hideInterface.cancel()};isInAdmin=()=>Fr&&this.props.adminMode===!0;hideInterface=_g.default.debounce(()=>{this.isInAdmin()||this.setState({showInterface:!1})},1500);hideArrows=_g.default.debounce(()=>{this.isInAdmin()||this.setState({showArrows:!1})},500);bindEvents(){document.addEventListener("pointerleave",this.hideInterface),window.addEventListener("pointerdown",this.onPointerDown),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerdown",this.onPointerMove)}unbindEvents(){document.removeEventListener("pointerleave",this.hideInterface),window.removeEventListener("pointerdown",this.onPointerDown),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerdown",this.onPointerMove)}componentDidUpdate(e,r){this.state.navigationElement!==this.navigationRef.current&&(this.navigationRef.current&&!this.navigationRef.current.shadowRoot&&this.navigationRef.current.attachShadow({mode:"open"}),this.setState({navigationElement:this.navigationRef.current})),this.props.location!==e.location&&this.closeQuickView(),!e.quickView.inited&&this.props.quickView.inited&&this.setState({lightboxActive:!0,showInterface:!1},()=>{this.props.quickView.mode==="preview"?(window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!0}}),this.previewInAdmin()):this.launchQuickView(),this.bindEvents(),this.lightbox.activeGallery?.listen("initialZoomInEnd",()=>{this.setState({closing:!1,showInterface:!0,showArrows:!1})}),this.lightbox.activeGallery?.listen("onVerticalDrag",n=>{this.state.showInterface&&n<.95?this.setState({showInterface:!1}):!this.state.showInterface&&n>=.95&&this.setState({showInterface:!0})});var i;this.lightbox.activeGallery?.listen("onPinchClose",n=>{this.state.showInterface&&n<.9?(this.setState({showInterface:!1}),i=!0):i&&!this.state.showInterface&&n>.9&&this.setState({showInterface:!0})}),this.lightbox.activeGallery?.listen("zoomGestureEnded",()=>{i=!1,i&&!this.state.showInterface&&this.setState({showInterface:!1})}),this.lightbox?.activeGallery?.listen("close",()=>{this.setState({closing:!0,showInterface:!1,showArrows:!1}),this.unbindEvents()}),this.lightbox?.activeGallery?.listen("destroy",()=>{window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!1}}),this.props.updateFrontendState({quickView:{mode:"default",inited:!1,autoScrolling:!1,activeGallery:null,elementArray:void 0,activeIndex:0}}),this.setState({lightboxActive:!1,showInterface:!1,showArrows:!1})})}),e.quickView.inited&&!this.props.quickView.inited&&this.lightbox.isActive&&this.lightbox.activeGallery.close(),e.quickView.autoScrolling!==this.props.quickView.autoScrolling&&this.lightbox.activeGallery&&(this.props.quickView.autoScrolling?this.lightbox.activeGallery.options.animatedCloseOnScroll=!1:this.lightbox.activeGallery.options.animatedCloseOnScroll=this.props.settings.close_on_scroll),!_g.default.isEqual(e.settings,this.props.settings)&&this.lightbox.activeGallery&&(e.settings.show_ui!==this.props.settings.show_ui&&this.props.settings.show_ui&&(this.setState({showInterface:!0}),this.hideInterface()),this.lightbox.activeGallery.options.alignHorizontal=this.props.settings.contentAlignHorizontal,this.lightbox.activeGallery.options.alignVertical=this.props.settings.contentAlignVertical,this.lightbox.activeGallery.options.animatedCloseOnScroll=this.props.settings.close_on_scroll,this.props.settings.captions!==e.settings.captions&&(this.lightbox.activeGallery.options.showCaption=this.props.settings.captions,this.props.settings.captions?(this.lightbox.activeGallery.caption.style.display="",this.lightbox.activeGallery.updateCaption()):this.lightbox.activeGallery.caption.style.display="none"),this.lightbox.activeGallery.updateSize(!0))}closeQuickView=e=>{Ht.getState().frontendState?.quickView?.inited!==!1&&this.props.updateFrontendState({quickView:{inited:!1}})};render(){return this.state.lightboxActive||this.state.navTransitioning?S(ce,{children:[S("div",{ref:this.template,className:"quick-view",dangerouslySetInnerHTML:{__html:this.htmlTemplate}}),this.props.settings.show_ui?S("div",{className:"quick-view quick-view-navigation",ref:this.navigationRef,children:[this.state.navigationElement?S("style",{children:`
							.quick-view-caption {
								opacity: ${this.state.showInterface?"1":"0"};
							}
						`}):null,this.state.navigationElement?it(S(ce,{children:[S("style",{children:`
								[part="slideshow-nav"], .quick-view-caption {
									${this.state.closing?`
										opacity: 0!important;`:`
										opacity: ${this.state.showInterface?"1":"0"};`}
								}

								${!this.props.mobileOpacityIsOverridden&&this.props.isMobile?`

									[part="slideshow-nav-next-button"], [part="slideshow-nav-previous-button"] {
										pointer-events:none;
										opacity: 0;
									}

								`:""}
								
							`}),S("div",{part:"slideshow-nav",onTransitionStart:e=>{this.setState({navTransitioning:!0})},onTransitionEnd:e=>{this.setState({navTransitioning:!1})},children:[this.isInAdmin()||this.props.quickView.elementArray?.length>1?S(ce,{children:[S("div",{part:"slideshow-nav-previous-button",onClick:e=>{e.preventDefault(),this.lightbox?.activeGallery?.prev()},children:S("svg",{part:"slideshow-nav-prev",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})}),S("div",{part:"slideshow-nav-next-button",onClick:e=>{e.preventDefault(),this.lightbox?.activeGallery?.next()},children:S("svg",{part:"slideshow-nav-next",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})})]},"slideshow-nav-buttons"):null,S("div",{part:"slideshow-nav-close-button",onClick:e=>{e.preventDefault(),this.lightbox?.activeGallery?.close()},children:S("svg",{part:"slideshow-nav-close",x:"0px",y:"0px",width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",children:[S("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),S("path",{part:"slideshow-nav-x",d:"M9.3,9.3L18,18l-8.7,8.7 M26.7,9.3L18,18l8.7,8.7"})]})})]})]}),this.state.navigationElement.shadowRoot):null]}):null]}):null}launchQuickView=()=>{if(!this.props.quickView.elementArray)return;let e=this.props.quickView.activeIndex;(e===-1||isNaN(e))&&(e=0);let r=this.props.quickView.elementArray[e],i=!1,n=r?.el?.getAttribute?.("rel")==="quick-view";lightbox.openImageArray(this.props.quickView.elementArray,e,{disableZoom:!this.props.imageSettings.image_full_zoom,preventAnimation:!1,showHideOpacity:n,animatedCloseOnScroll:!!this.props.settings?.close_on_scroll,alignHorizontal:this.props.settings?.contentAlignHorizontal||"center",alignVertical:this.props.settings?.contentAlignVertical||"center",useControls:!1,showCaption:!!this.props.settings?.captions,isAdmin:!1,afterInit:o=>{let s=lightbox.activeGallery.template,a=window.getComputedStyle(s),l=parseInt(a.getPropertyValue("width")),p=parseInt(a.getPropertyValue("height"));this.props.updateFrontendState({quickView:{activeIndex:o}})}}),lightbox?.activeGallery?.listen("afterChange",o=>{this.props.quickView.inited&&this.props.updateFrontendState({quickView:{activeIndex:o}})})};previewInAdmin=()=>{let r=[[6800,5e3],[5e3,6800],[5e3,5e3]].map(i=>{let n=document.createElement("media-item"),o=document.createElement("span");return o.classList.add("caption-background"),o.innerHTML="Lorem ipsum dolor sit amet, consectetur adipiscing",n.setAttribute("width",i[0]),n.setAttribute("height",i[1]),{useViewportWidth:!1,useViewportHeight:!1,viewportWidthPercentage:1,viewportHeightPercentage:1,autoplay:!1,fileType:"placeholder",w:i[0],h:i[1],caption:o,hash:"placeholder",src:null,usePlaceholder:!1,el:n}});this.lightbox.openImageArray(r,0,{disableZoom:!this.props.imageSettings.image_full_zoom,preventAnimation:!1,animatedCloseOnScroll:!!this.props.settings?.close_on_scroll,alignHorizontal:this.props.settings?.contentAlignHorizontal||"center",alignVertical:this.props.settings?.contentAlignVertical||"center",useControls:!1,showCaption:!!this.props.settings?.captions,isAdmin:!1})}};$z=Ue(rle,ile)(a1),Vz=(t="")=>{let e="none";if(t){let s=t.toLowerCase();if(s.endsWith(".mov")||s.endsWith(".mp4")||s.endsWith(".webm"))e="video";else if(s.endsWith(".png")||s.endsWith(".webp")||s.endsWith(".jpg")||s.endsWith(".jpeg")||s.endsWith(".gif")||s.endsWith(".avif")||s.endsWith(".apng")||s.endsWith(".svg"))e="image";else{e="url";var r,i=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,o=t.match(i);if(o&&o[3]){r=o[3];let a=t.split("/");a[a.length-1]!=r&&(r+="/"+a[a.length-1]),e="vimeo:"+r}var n=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,o=t.match(n);o&&o[7].length==11&&(r=o[7],e="youtube:"+r)}}return e},Sg=(t,e={},r=!0)=>{var i=!1,n=t?.querySelector("figcaption"),o=n?.innerHTML;n&&o!==""&&(i=document.createElement("span"),i.classList.add("caption-background"),i.innerHTML=o);let s=!1,a=!1,l=1,p=1,f=1600,d=1600,m=!1,g="url",v=t.getAttribute("hash")||null,x=t.getAttribute("href")||null;t.getAttribute("rel")=="quick-view"?g=Vz(t.getAttribute("href")):t.tagName==="MEDIA-ITEM"&&t.getFileType?g=t.getFileType():g=Vz(t.getAttribute("src"));let _=x||t.getAttribute("src");return x&&(v=null),new Promise(E=>{if(v&&v!=="placeholder"&&t.tagName==="MEDIA-ITEM"&&!x){let L=t.getAttribute("poster");var O=t?.shadowRoot?.querySelector("video")?.getAttribute("poster");O||(O=t?.shadowRoot?.querySelector('img[part*="poster"]')?.getAttribute("src"));let I=screen.width,D=screen.height,R=Math.max(Math.ceil(screen.width/t._size.width),Math.ceil(screen.height/t._size.height));switch(!0){case g==="url":s=!0,a=!0;break;case g.startsWith("youtube"):case g.startsWith("vimeo"):case g=="video":f=t._size.width*R,d=t._size.height*R;break;default:f=t._size.width*R,d=t._size.height*R;break}let W,N=()=>{E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,fileType:g,poster:t.getAttribute("poster"),loaded:!0,loading:!1,w:f,h:d,caption:i,hash:v,src:_,posterSrc:O,autoplay:t.getAttribute("autoplay")=="true",usePlaceholder:!1,el:t,model:t.model,preloadedImage:W})},z=t.shadowRoot.querySelector("img")?.getAttribute("src");r&&g=="image"&&z?(W=document.createElement("img"),W.onload=()=>{W.onload=void 0,W.decode().then(()=>{N()})},W.src=z):N()}else if(v&&v=="placeholder")E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:!1,fileType:g,w:t.getAttribute("width")||16e3,h:t.getAttribute("height")||9e3,caption:i,hash:"placeholder",src:_,loaded:!1,loading:!1,usePlaceholder:!0,el:t,model:t.model});else if(t.hasAttribute("width")&&t.hasAttribute("height")?t.getAttribute("width").indexOf("%")>-1&&t.getAttribute("height").indexOf("%")>-1?(s=!0,a=!0,l=parseFloat(t.getAttribute("width"))/100,p=parseFloat(t.getAttribute("height"))/100):(f=parseFloat(t.getAttribute("width")),d=parseFloat(t.getAttribute("height"))):g==="url"&&(s=!0,a=!0,l=1,p=1),g.startsWith("vimeo")||g.startsWith("youtube")){let L="";g.startsWith("vimeo")?L="https://vimeo.com/api/oembed.json?url="+_+"&width=640":L="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url="+_,r?fetch(L,{mode:"cors"}).then(I=>{I.json().then(D=>{E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:t.tagName!=="MEDIA-ITEM"&&t.getAttribute("autoplay")=="true",fileType:g,w:D.width*20,h:D.height*20,caption:i,hash:null,src:_,loaded:!0,loading:!1,usePlaceholder:!1,el:t,model:t.model})})}):E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:t.tagName!=="MEDIA-ITEM"&&t.getAttribute("autoplay")=="true",fileType:g,w:1600,h:900,caption:i,hash:null,src:_,loaded:!1,loading:!1,usePlaceholder:!1,el:t,model:t.model})}else if(g==="url"){let L=sd()&&_.indexOf(".pdf")>-1&&_.indexOf("docs.google.com/viewer")==-1,I=L?`https://docs.google.com/viewer?url=${_}&embedded=true&chrome=false`:_;E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,fileType:g,loaded:!0,loading:!1,noLazyLoading:!!L,w:3200,h:2e3,caption:i,hash:null,src:I,usePlaceholder:!1,el:t,model:t.model})}else if(g==="image")if(r){let L=document.createElement("img");L.onerror=function(){L.onload=null,E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,loadError:!0,autoplay:!1,fileType:g,loaded:!0,loading:!1,w:1600,h:1e3,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null})},L.onload=I=>{L.onload=null,f=L.naturalWidth,d=L.naturalHeight,s=!1,a=!1,L.decode().then(()=>{E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:!1,fileType:g,loaded:!0,loading:!1,w:f*100,h:d*100,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null,preloadedImage:L})})},L.setAttribute("src",_)}else E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:!1,fileType:g,loaded:!1,loading:!1,w:1600,h:900,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null});else if(g==="video")if(r){let L=document.createElement("video");L.setAttribute("preload","metadata"),L.onerror=function(I){L.onloadedmetadata=null,L.onerror=null,L.src="",L.load(),E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,loadError:!0,loaded:!0,loading:!1,autoplay:!1,fileType:g,w:1600,h:1e3,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null})},L.onloadedmetadata=I=>{L.onloadedmetadata=null,L.onerror=null,f=L.videoWidth,d=L.videoHeight,s=!1,a=!1,L.src="",L.load(),E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:t.getAttribute("autoplay")=="true",loaded:!0,loading:!1,fileType:g,w:f*100,h:d*100,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null})},L.setAttribute("src",_),L.load()}else E({...e,useViewportWidth:s,useViewportHeight:a,viewportWidthPercentage:l,viewportHeightPercentage:p,autoplay:t.getAttribute("autoplay")=="true",loaded:!1,loading:!1,fileType:g,w:1600,h:900,caption:i,hash:null,src:_,usePlaceholder:!1,el:t,model:null})})},l1=t=>{let e=Ht.getState();if(t&&t.nodeName!=="MEDIA-ITEM"&&(t=t.closest('a[rel="quick-view"]')||t),window.lightbox.activeGallery&&e.frontendState.quickView.elementArray){let f=e.frontendState.quickView.elementArray.findIndex(d=>d.el==t);if(f!==-1){window.lightbox.activeGallery.goTo(f);return}}let r=t.closest(".page"),i=t.getAttribute("hash"),n=[],o=qa(t,f=>f?.tagName?.startsWith("GALLERY-")),s=!1,a=t.closest("marquee-set");if(o){if(o.getAttribute("thumbnail-index")==="img:all")s=!0;else if(o&&o.getAttribute("disable-zoom")==="true")return;n=Array.from(o.querySelectorAll('media-item:not([disable-zoom="true"]):not([href]), a[rel="quick-view"], media-item[rel="quick-view"], media-item[force-quick-view="true"]'))}else{r?n=Array.from(r.querySelector("bodycopy")?.querySelectorAll('media-item:not([disable-zoom="true"]):not([href]), a[rel="quick-view"], media-item[rel="quick-view"], media-item[force-quick-view="true"]')):n=Array.from(document.querySelectorAll('bodycopy media-item:not([disable-zoom="true"]):not([href]), bodycopy a[rel="quick-view"], bodycopy media-item[rel="quick-view"], bodycopy media-item[force-quick-view="true"]'));let f=a&&t.closest('[slot="contents-clone"]');n=n.filter(d=>!qa(d,m=>!!(m?.tagName?.startsWith("GALLERY-")||m?.classList?.contains("flying-object")||m.tagName==="MARQUEE-INNER"&&(m.slot==="contents-clone"&&!f||m.slot==="contents"&&f))))}n=n.filter(f=>{if(f.tagName!=="A")return!0;let d=f.getAttribute("href")||"";return!(d===""||d=="#"||d.indexOf("mailto:")==0||d.indexOf("tel:")==0)});let l=n.indexOf(t),p=0;Promise.all(n.map((f,d)=>{let m=n.length*.5,g=m-Math.abs((l+-d)%(2*m)-m);return g<-m&&g<0&&(g=g+n.length),Sg(f,{},Math.abs(g)<=p)})).then(f=>{Ht.dispatch(actions.updateFrontendState({quickView:{mode:"default",inited:!0,autoScrolling:!1,elementArray:f,activeIndex:l===-1?0:l}}))})};$z.defaultProps={settings:{show_ui:!0,captions:!1,quickViewAlignment:"center-center",contentAlignVertical:"center",contentAlignHorizontal:"center"}};nle=Wn($z)});var ua,c1,d1,jz=V(()=>{ke();Be();is();Ya();xr();ft();tr();Pr();ua=ye(Pe(),1);pg();o1();pe||(window.logSiteStructure=()=>{let t=window.store.getState(),e=t.structure.bySort,r=Object.keys(e);r.sort((n,o)=>e[n]-e[o]);let i={};r.forEach(n=>{let o=t.pages.byId[n]||t.sets.byId[n];i[n]={title:o.title,sort:e[n],index:t.structure.indexById[n],page_count:o.page_count}}),console.table(i)});c1=class extends me{constructor(e){super(e),this.state={},this.isMac=!1,pe||(Promise.resolve().then(()=>(ap(),u1)).then(({openQuickViewFromElement:r})=>{this.setState({openQuickViewFromElement:r})}),this.isMac=od())}handleGlobalClick=e=>{let r=e.target,i=r;r.shadowRoot?r=e.composedPath().find(s=>s.tagName==="A")||r:r.closest("a")&&(r=r.closest("a")),Qr.handleGlobalClick(r,i);let n=document.querySelectorAll('cargo-map[follow-navigation="true"]');for(let s of n)s.handleGlobalClick(r,i);if(!e.defaultPrevented&&r&&(r.nodeName==="A"||r.nodeName==="a")&&r.getAttribute("href")&&r.getAttribute("href")!==""){let s=r.getAttribute("rel");if(this.props.adminMode){e.preventDefault();return}let a=r.getAttribute("href")||"",l=r.getAttribute("target"),p;switch(s){case"history":e.preventDefault();let f=this.props.store.getState(),d=a.substring(0,1)==="#",m=!1,g=nt.getContentByPurl(store.getState(),a.replace(/\//,""));if(g?.overlay){Qr.toggleOverlay(g.id);return}if(!d){if(p=r.getAttribute("data-tags"),p?.length>0)a=p;else{let E=nt.getHomepagePurl(f);a.toLowerCase()===E&&!f.sets.byId.root.stack&&(a="/")}a.startsWith("/")||(a="/"+a),a==="/contact-form"&&(m=!0),i.nodeName==="MEDIA-ITEM"&&i?.classList.contains("thumbnail")&&a.replace(/\//,"")===this.props.activePURL&&document.scrollingElement.scrollTo({top:0,left:0,behavior:"instant"})}this.isMac&&e.metaKey===!0||!this.isMac&&e.ctrlKey===!0?window.open(a,"_blank"):this.props.history.push(a,{preventScrollReset:m});break;case"prev_page":case"prev-page":e.preventDefault(),this.loadPrevPage();break;case"next_page":case"next-page":e.preventDefault(),this.loadNextPage();break;case"home_page":case"home-page":e.preventDefault(),this.props.history.push("/");break;case"random_page":case"random-page":e.preventDefault(),this.loadRandomPage();break;case"top":e.preventDefault();let v=r.closest?.(".pinned.allow-scroll .page-content, .overlay-content.overlay-allow-scroll");v?this.scrollToTop(v):(this.scrollToTop(document.scrollingElement),ua.default.each(document.querySelectorAll(".pinned.allow-scroll .page-content, .overlay-content.overlay-allow-scroll"),this.scrollToTop));break;case"quick-view":case"quick_view":e.preventDefault(),this.state.openQuickViewFromElement?.(e.target);break;case"close-overlay":case"close_overlay":e.preventDefault();let x=i.closest("[page-url]")?.id;Qr.getOverlay(x)?Qr.closeOverlay(x):this.props.history.push("/");break;case"map-coordinates":e.preventDefault();break;case"map-marker":e.preventDefault();break;case"add-to-cart":case"add_to_cart":e.preventDefault(),this.props.addCommerceProductToCart((r.getAttribute("data-product")||e.target.getAttribute("data-product"))??null,(r.getAttribute("data-variant")||e.target.getAttribute("data-variant"))??null,{callback:()=>{this.props.history.push("/cart",{preventScrollReset:!0})},failureCallback:E=>{this.props.updateFrontendState({alertModal:{header:E,type:"notice"}})}});break;case"show_cart":case"show-cart":e.preventDefault(),wg().then(E=>{this.props.history.push("/cart",{preventScrollReset:!0})}).catch(E=>{console.warn(E)});break;case"filter-index":case"filter_index":e.preventDefault(),p=r.getAttribute("data-tags");let _=r.getAttribute("data-set");var o=new CustomEvent("filter-thumbnail-index",{bubbles:!0,cancelable:!0,composed:!0,detail:{filter:p?"tag:"+p:_?"set:"+_:"all"}});r.dispatchEvent(o);break;default:this.props.isInHomepagePreview?(e.preventDefault(),parent.window.open(a)):l!=="_blank"&&(e.preventDefault(),parent.location.href=a);break}}};openAdmin=()=>{if(window.parent!==window)return;let e=this.props.activePID;if(this.props.store.getState().sets.byId[e]!==void 0){let r=document.querySelector(".content .pages .page");r?e=r.id:e=""}e?window.location.href="/edit/"+e:window.location.href="/edit"};showCargoSiteIndicator=()=>{let e=new Image;e.onload=function(){let r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.zIndex="2147483647",r.style.position="fixed",r.style.background='url("https://static.cargo.site/assets/C3/c3label.svg") center center / contain no-repeat',r.style.backgroundSize="60%",r.style.transform="rotate(-30deg)",setTimeout(function(){r.style.transition="opacity 500ms",setTimeout(function(){r.parentNode.removeChild(r)},700),setTimeout(function(){r.style.opacity="0"})},1e3),document.body.appendChild(r)},e.src="https://static.cargo.site/assets/C3/c3label.svg"};handleGlobalKeyDown=e=>{if(e.target.nodeName==="INPUT"||e.target.nodeName==="TEXTAREA"||e.target.closest?.('[contenteditable]:not([contenteditable="false"])')||e.target.classList?.contains("mcforms-wrapper"))return;let r=this.props.store.getState();if(!this.props.adminMode){if(this.isMac&&e.metaKey&&e.which===191||!this.isMac&&e.ctrlKey&&e.which===191){this.showCargoSiteIndicator();return}if(this.isMac&&e.metaKey&&e.which===27||!this.isMac&&e.ctrlKey&&e.which===27){this.openAdmin();return}if(e.shiftKey&&(e.keyCode===65||e.keyCode===69)&&!r.frontendState.contactForm.inited&&!r.frontendState.cartOpen&&!r.frontendState?.quickView?.inited&&(this.props.inAdminFrame?this.props.editorRole!=="Viewer"&&(this.props.activePID&&this.props.activePID.length>0&&this.props.activePID!=="root"?parent.navigateAdmin("/"+this.props.activePID):parent.navigateAdmin("/")):this.openAdmin()),e.keyCode===82&&!r.frontendState.contactForm.inited&&!r.frontendState.cartOpen&&!r.frontendState?.quickView?.inited&&!e.metaKey&&!e.ctrlKey?(e.preventDefault(),this.loadRandomPage()):e.keyCode===37&&!r.frontendState.contactForm.inited&&!r.frontendState.cartOpen&&!r.frontendState?.quickView?.inited&&!e.metaKey&&!e.ctrlKey?(e.preventDefault(),this.loadPrevPage()):e.keyCode===39&&!r.frontendState.contactForm.inited&&!r.frontendState.cartOpen&&!r.frontendState?.quickView?.inited&&!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),this.loadNextPage()),e.which===27&&!e.metaKey&&!e.ctrlKey){if(r.frontendState?.contactForm?.inited){this.props.updateFrontendState({contactForm:{transition:!0,inited:!0}}),setTimeout(()=>{this.props.updateFrontendState({contactForm:{transition:!1,inited:!1}})},300);return}if(r.frontendState.quickView.inited||r.frontendState.cartOpen||r.frontendState?.contactForm?.inited||r.frontendState.alertModal)return;if(!this.props.inAdminFrame){let i=Qr.getAllOverlays();i.length>0?Qr.closeOverlay(i[i.length-1].pid):this.props.history.location.pathname!=="/"&&this.props.history.push("/")}}}};componentDidMount(){pe||(window.addEventListener("click",this.handleGlobalClick),window.addEventListener("keydown",this.handleGlobalKeyDown))}componentWillUnmount(){pe||(window.removeEventListener("click",this.handleGlobalClick),window.removeEventListener("keydown",this.handleGlobalKeyDown))}render(){return this.props.children}loadRandomPage=()=>{let e=this.props.store.getState(),r=[];if(ua.default.each(e.sets.byId,o=>{if(o.stack&&o.id!=="root")o.page_count>0&&e.frontendState.activePID!==o.id&&r.push([o.id]);else{let s=Array.apply(null,{length:o.page_count}).map(Number.call,l=>[o.id,l]),a=nt.getSetContentsByIndex(e,o.id);r=r.concat(s.filter(([l,p])=>{let f=a[p];return!(f&&(f.id===e.frontendState.activePID||f.id===e.site.homepage_id||f.id===e.site.mobile_homepage_id||f.page_type==="set"||f.pin===!0))}))}}),r.length===0)return;let i=r[Math.floor(Math.random()*r.length)],n=e.sets.byId[i[0]];i.length===2?this.props.fetchContent(n.id,{indexes:[i[1]],idType:"pid"}).then(o=>{o.data&&o.data[0]?this.props.history.push("/"+o.data[0].purl):this.loadRandomPage()}):i.length===1&&this.props.history.push("/"+n.purl)};doScroll=(e,r,i,n)=>{let s=r-i,a=s/(12*12);s!==0&&(n+=(n+a)/s);let l=Math.abs(i-r)<1,p=l?i+s:i+s*(-Math.pow(2,-20*n/1)+1);n>0&&(e.classList.contains("top-scrollable-overlay")?e:document.scrollingElement).scrollTo({top:p,left:0,behavior:"instant"}),l||requestAnimationFrame(()=>{this.doScroll(e,r,p,n)})};scrollToTop=e=>{let r=e.scrollTop,i=Math.round(r*.2);r>e.clientHeight?this.doScroll(e,0,i,0):this.doScroll(e,0,r,0)};loadNextPage=()=>{let e=this.props.store.getState(),r=e.pages.byId[this.props.activePID]||e.sets.byId[this.props.activePID];if(!r||r.page_type==="set"&&!r.stack)return;let i=e.structure.indexById[r.id];if(i===null){e.adminState?.crdt.initializedAdminList?this.loadNearestContentNeighbor(r,"next"):this.props.fetchContent(r.id,{next:!0}).then(l=>{l?.data&&l.data[0]&&this.props.history.push("/"+l.data[0].purl)});return}let n=e.sets.byId[ua.default.findKey(e.structure.byParent,l=>l.includes(r.id))];if(!n||n.page_count===void 0||n.page_count<=1)return;let o=ua.default.without(e.structure.byParent[n.id]?.map(l=>e.pages.byId[l]||e.sets.byId[l]).map(function(l){if(l&&(l.page_type==="set"&&(l.stack===!1||l.page_count===0)||l.id===e.site.homepage_id||l.id===e.site.mobile_homepage_id))return e.structure.indexById[l.id]}),void 0);if(o.length===n.page_count)return;for(let l=0;l<n.page_count&&(i++,i>=n.page_count&&(i=0),!!o.includes(i));l++);let a=(e.structure.byParent[n.id]?.reduce((l,p)=>(e.structure.indexById[p]!==null&&(l[e.structure.indexById[p]]=p),l),{}))[i];a?this.props.history.push("/"+(e.pages.byId[a]||e.sets.byId[a])?.purl):this.props.fetchContent(n.id,{indexes:[i],idType:"pid"}).then(l=>{this.loadNextPage()})};loadPrevPage=()=>{let e=this.props.store.getState(),r=e.pages.byId[this.props.activePID]||e.sets.byId[this.props.activePID];if(!r||r.page_type==="set"&&!r.stack)return;let i=e.structure.indexById[r.id];if(i===null){e.adminState?.crdt.initializedAdminList?this.loadNearestContentNeighbor(r,"prev"):this.props.fetchContent(r.id,{prev:!0}).then(l=>{l.data&&l.data[0]&&this.props.history.push("/"+l.data[0].purl)});return}let n=e.sets.byId[ua.default.findKey(e.structure.byParent,l=>l.includes(r.id))];if(!n||n.page_count===void 0||n.page_count<=1)return;let o=ua.default.without(e.structure.byParent[n.id]?.map(l=>e.pages.byId[l]||e.sets.byId[l]).map(function(l){if(l&&(l.page_type==="set"&&(l.stack===!1||l.page_count===0)||l.id===e.site.homepage_id||l.id===e.site.mobile_homepage_id))return e.structure.indexById[l.id]}),void 0);if(o.length===n.page_count)return;for(let l=0;l<=n.page_count&&(i--,i<0&&(i=n.page_count-1),!!o.includes(i));l++);let a=(e.structure.byParent[n.id]?.reduce((l,p)=>(l[e.structure.indexById[p]]=p,l),{}))[i];a?this.props.history.push("/"+(e.pages.byId[a]||e.sets.byId[a])?.purl):this.props.fetchContent(n.id,{indexes:[i],idType:"pid"}).then(l=>{this.loadPrevPage()})};loadNearestContentNeighbor=(e,r)=>{let i=this.props.store.getState();if(r!=="next"&&r!=="prev")throw'direction needs to be "next" or "prev"';let n=Object.keys(i.structure.bySort).sort((l,p)=>i.structure.bySort[l]-i.structure.bySort[p]);r==="prev"&&n.reverse();let o=n.indexOf(e.id);if(o===-1)throw"Unable to locate current id in sort list";let s;for(let l=1;l<n.length+1;l++){let p=n[(o+l)%n.length],f=i.structure.byParent.hasOwnProperty(p);if(f&&i.sets.byId[p]?.stack===!0){s=p;break}else if(!f&&i.structure.indexById[p]!==null&&p!==i.site.homepage_id&&p!==i.site.mobile_homepage_id){s=p;break}}let a=i.pages.byId[s]||i.sets.byId[s];a?this.props.history.push("/"+a.purl):this.props.fetchContent(s,{idType:"pid"}).then(l=>{l.data&&l.data[0]&&this.props.history.push("/"+l.data[0].purl)})}},d1=Rn(Wn(Ue((t,e)=>{let r;return t.auth.data?.id&&(r=ua.default.find(t.site?.editors,i=>i.id===parseInt(t.auth.data.id))?.role),{editorRole:r,adminMode:t.frontendState.adminMode,inAdminFrame:t.frontendState.inAdminFrame,activePID:t.frontendState.activePID,isInHomepagePreview:t.auth.previewing,activePURL:(t.pages.byId[t.frontendState.activePID]||t.sets.byId[t.frontendState.activePID])?.purl}},t=>zt({updateFrontendState:Ge.updateFrontendState,fetchContent:Ge.fetchContent,addCommerceProductToCart:Ge.addCommerceProductToCart},t))(c1)))});var Gz=V(()=>{});var Kz=V(()=>{Ye();Gz();fe()});var Yz=V(()=>{});var Xz,Eg,Zz=V(()=>{Ye();Xz=ye(Pe());Kz();kf();Yz();fe();Eg=class extends me{constructor(e){super(e),this.ref=ze.createRef(),this.maxValue=100,this.speed=9,this.currValue=null,this.rafID=null,this.state={value:0,complete:!1,successLoading:!1}}componentDidMount=()=>{this.ref.current.addEventListener("mousestart",this.unlockStartHandler,!1)};unlockStartHandler=()=>{window.cancelAnimationFrame(this.rafID),this.currValue=this.state.value};unlockEndHandler=()=>{this.currValue=+this.state.value,this.currValue>=this.maxValue?this.successHandler():(this.rafID=window.requestAnimationFrame(this.animateHandler),this.setState({complete:!1}))};animateHandler=()=>{this.setState({value:this.currValue}),this.currValue>-1&&window.requestAnimationFrame(this.animateHandler),this.currValue=this.currValue-this.speed,setTimeout(Xz.default.bind(function(){this.setState({value:0})},this),150)};successHandler=()=>{this.setState({successLoading:!0,complete:!1}),setTimeout(()=>{this.props.onConfirm()},800)};onRangeChange(e){e.persist(),this.setState({value:e.currentTarget.value}),this.setState({complete:e.currentTarget.value>=100})}componentWillUnmount=()=>{this.ref?.current?.removeEventListener("mousestart",this.unlockStartHandler,!1)};render(){return S("div",{className:`slide-confirm-slider${this.state.successLoading?" success-loading":""}`,ref:this.ref,onMouseDown:e=>{this.unlockStartHandler(e)},onMouseUp:e=>{this.unlockEndHandler(e)},onTouchEnd:e=>{this.unlockEndHandler(e)},children:[S("span",{className:"slide-message",children:this.props.slideMessage}),S("div",{className:"slide-progress",style:{left:"calc("+this.state.value+"% - calc("+this.state.value/100+" * 40px))"}}),S("input",{type:"range",min:"0",value:this.state.value,className:`pullee${this.state.complete?" complete":""}`,onChange:e=>{this.onRangeChange(e)}}),this.state.successLoading?S(os,{className:"accent"}):null]})}}});function sle(t){return t&&(["INPUT","TEXTAREA","SELECT"].includes(t.tagName)||t.isContentEditable)}var p1,ole,Jz,h1,Cg,Qz=V(()=>{Wm();p1=ye(Pe()),ole=0,Jz=tt.isMac();h1=class t{constructor(){if(!tt.isServer)return t.instance||(this.shortcuts={},this.scopeOrder=[],this.onKeyDown=this.onKeyDown.bind(this),this.handleEditorKeyDown=e=>this.onKeyDown("editor",e),typeof window<"u"&&window.addEventListener("keydown",this.handleEditorKeyDown),window.__c3_admin__&&(this.handleInterfaceKeyDown=r=>this.onKeyDown("interface",r),document.getElementById("client-frame")?.contentWindow?.addEventListener("keydown",this.handleInterfaceKeyDown)),t.instance=this),t.instance}setScopeOrder(e){this.scopeOrder&&p1.default.isEmpty(this.scopeOrder)&&p1.default.each(e,r=>{this.scopeOrder.push(r)})}getConfigKey(e){let{keyCode:r,metaKey:i="false",shiftKey:n="false",altKey:o="false",macCtrlKey:s="false"}=e;return`${r}-${i}-${n}-${o}-${s}`}getEventConfig(e){return{keyCode:e.keyCode,metaKey:Jz?e.metaKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,macCtrlKey:Jz?e.ctrlKey:!1}}registerHotKey(e,r,i,n="default"){let{notWhileTyping:o=!1,...s}=r,a=!!o,l=ole++,p=this.getConfigKey(s);return this.shortcuts[n]||(this.shortcuts[n]={}),this.shortcuts[n][p]||(this.shortcuts[n][p]=[]),this.shortcuts[n][p].push({id:l,callback:i,notWhileTyping:a}),()=>{let f=this.shortcuts[n][p];if(f){let d=f.findIndex(m=>m.id===l);d!==-1&&(f.splice(d,1),f.length===0&&(delete this.shortcuts[n][p],Object.keys(this.shortcuts[n]).length===0&&delete this.shortcuts[n]))}}}shouldSkip(e,r){return e.notWhileTyping&&sle(r)}onKeyDown(e,r){if(r.repeat)return;let i=this.getEventConfig(r),n=this.getConfigKey(i);if(!store.getState()?.frontendState?.contactForm.inited){for(let s=0;s<this.scopeOrder.length;s++){let a=this.scopeOrder[s],l=this.shortcuts[a];if(l&&l[n]){let p=l[n];if(p&&p.length>0){let f=p[p.length-1];if(f&&f.callback){if(this.shouldSkip(f,r.target))return;r.preventDefault(),f.callback(r);return}}}}if(!this.scopeOrder.includes("default")&&this.shortcuts.default&&this.shortcuts.default[n]){let s=this.shortcuts.default[n];if(s&&s.length>0){let a=s[s.length-1];if(a&&a.callback){if(this.shouldSkip(a,r.target))return;r.preventDefault(),a.callback(r)}}}}}},Cg=new h1;Object.freeze(Cg)});var e3=V(()=>{});var lp,f1,Pg,t3=V(()=>{Ye();lp=ye(Pe());Zz();kf();Qz();e3();fe();f1=ze.createContext({header:null,message:null,slideMessage:null,placeholder:null,existingValue:null,type:"alert",children:null,customElement:null,preventCancelButtonRender:!1,preventClose:!1,cancelButton:!1,overCart:!1,checkBoxConfirmation:null,checkBoxConfirmationValue:!1,confirmButton:"Yes",denyButton:"No",maxInputLength:null,dialogInputType:"text",validateInput:()=>!0,onOpen:()=>null,onConfirm:()=>null,onCancel:()=>null,onDeny:()=>null,onClose:()=>null,updateModal:()=>null}),Pg=class extends me{constructor(e){super(e),this.modalDefaults={header:null,htmlHeader:null,message:null,slideMessage:null,htmlMessage:null,type:"alert",children:null,customElement:null,preventCancelButtonRender:!1,preventClose:!1,confirmButton:"OK",denyButton:"Cancel",cancelButton:!1,overCart:!1,checkBoxConfirmation:null,checkBoxConfirmationValue:!1,frontendData:null,maxInputLength:null,dialogInputType:"text",closeManually:!1,validateInput:()=>!0,onOpen:()=>null,onConfirm:()=>null,onCancel:()=>null,onDeny:()=>null,onClose:()=>null},this.state={modalOpen:!1,animate:!1,processConfirm:!1,...this.modalDefaults},this.overlayRef=ze.createRef(),this.inputRef=ze.createRef(),this.transitioning=!1,this.ignoreUnmount=!1,this.internalHotKeySet=!1,this.alterEventExecution=!0,this.clickStartedInModal=!1,this.unregisterEscapeHotKey=null,this.unregisterEnterHotKey=null}openModal=e=>{if(this.transitioning||this.state.modalOpen||this.state.animate)return;document.activeElement?.blur(),this.transitioning=!0;let r=lp.default.defaults(e,this.modalDefaults),i=new Event("openAlertModal");window.dispatchEvent(i),r.onOpen&&r.onOpen(),window.__c3_admin__===!0&&(window.store.getState().adminState.pauseGlobalEventExecution?this.alterEventExecution=!1:window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!0}})),r.manuallyBindHotkeys&&(this.internalHotKeySet=!0,window.addEventListener("keydown",this.onKeyDown,!0)),!this.state.HotKeyProxy&&!r.manuallyBindHotkeys&&!this.unregisterEscHotKey&&(this.unregisterEscHotKey=Cg.registerHotKey("escape",{keyCode:27},this.cancelModal,"alert")),!this.state.HotKeyProxy&&!r.manuallyBindHotkeys&&!this.unregisterEnterHotKey&&(this.unregisterEnterHotKey=Cg.registerHotKey("enter",{keyCode:13},this.confirmModal,"alert")),window.addEventListener("keydown",this.onTabKeyDown),r.ignoreUnmount&&(this.ignoreUnmount=!0),this.originalStyle=window.getComputedStyle(document.body).overflow,document.body.style.overflow="hidden",window.requestAnimationFrame(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!0,animate:!1,...r},()=>{window.requestAnimationFrame(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!0,animate:!0},()=>{setTimeout(()=>{this.transitioning=!1},280)})})})}),r.frontendData&&r.frontendData.contentWindow.getSelection().removeAllRanges(),window.focus()};dispatchCloseEvents=()=>{let e=new Event("closeAlertModal");window.dispatchEvent(e),window.__c3_admin__===!0&&this.alterEventExecution&&window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!1}})};unbindInternalHotkeys=()=>{this.internalHotKeySet&&(this.internalHotKeySet=!1,window.removeEventListener("keydown",this.onKeyDown,!0)),this.unregisterEscHotKey&&(this.unregisterEscHotKey(),this.unregisterEscHotKey=null),this.unregisterEnterHotKey&&(this.unregisterEnterHotKey(),this.unregisterEnterHotKey=null),window.removeEventListener("keydown",this.onTabKeyDown)};closeModal=e=>{if(!this.state.modalOpen)return;let r=lp.default.defaults(e,this.modalDefaults);this.transitioning=!0,this.dispatchCloseEvents(),this.unbindInternalHotkeys(),document.body.style.overflow=this.originalStyle,window.requestAnimationFrame(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!0,animate:!1},()=>{setTimeout(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!1,animate:!1},()=>{this.state.onClose&&(this.state.onClose(),this.setState({modalOpen:!1,animate:!1,processConfirm:!1,existingValue:null,...this.modalDefaults},()=>{this.transitioning=!1}))})},280)})})};validateInput=()=>{};confirmModal=e=>{if(this.state.closeManually){this.setState({processConfirm:!0}),this.state.onConfirm();return}if(this.state.type==="dialog"&&this.inputRef.current){if(this.state.onConfirm){let r=this.inputRef.current.value;this.setState({existingValue:r},()=>{this.state.onConfirm(r)})}}else{let r={};r.checkBoxConfirmationValue=this.state.checkBoxConfirmationValue??null,this.state.onConfirm(r)}this.closeModal()};onKeyDown=e=>{e?.key==="Enter"&&this.state.type!=="slide-confirm"&&this.confirmModal(e),e?.key==="Escape"&&(e.preventDefault(),e.stopImmediatePropagation(),this.cancelModal(e))};denyModal=()=>{if(!this.state.processConfirm){if(this.state.onDeny){let e={};e.checkBoxConfirmationValue=this.state.checkBoxConfirmationValue??null,this.state.onDeny(e)}this.closeModal()}};cancelModal=e=>{this.state.preventClose||(this.state.onDeny&&e==="action"&&this.state.onDeny(),e?.type==="keydown"&&(e.preventDefault(),e.stopImmediatePropagation()),this.state.onCancel&&this.state.onCancel(),this.closeModal())};updateModal=(e={})=>{if(!this.state.modalOpen)return;let r=["type","modalOpen","animate","manuallyBindHotkeys","closeManually","ignoreUnmount"],i=lp.default.omit(e,r);this.setState(n=>({...n,...lp.default.pickBy(i,o=>o!==void 0)}))};overlayClick=e=>{if(this.clickStartedInModal){this.clickStartedInModal=!1;return}e.target==this.overlayRef.current&&this.cancelModal()};onMouseDown=e=>{this.clickStartedInModal=!0};onTabKeyDown=e=>{let r=e.key==="Tab"||e.keyCode===9;this.state.modalOpen&&r&&e.preventDefault()};componentDidMount(){}componentWillUnmount(){this.unmounted=!0}render(){let e=this.state.confirmButton||"OK",r=this.state.denyButton||"Cancel",i=this.state.header&&S("div",{className:"header",children:this.state.header}),n=this.state.message&&S("div",{className:"sub-message",children:this.state.message}),o=this.state.htmlHeader&&S("div",{className:"header",dangerouslySetInnerHTML:{__html:this.state.htmlHeader}}),s=this.state.htmlMessage&&S("div",{className:"sub-message",dangerouslySetInnerHTML:{__html:this.state.htmlMessage}}),a=this.state.placeholder?this.state.placeholder:"",l=this.state.existingValue?this.state.existingValue:"",p=this.state.confirmButton!==!1&&S("button",{"button-style":"rounded-2",className:"confirm",onClick:O=>this.confirmModal(O,null),children:[e,this.state.processConfirm?S(os,{className:"default-border-radius"}):""]}),f=!this.state.preventCancelButtonRender&&S("button",{"button-style":"rounded-2",className:"deny",onClick:this.denyModal,children:r}),d=this.state.children&&!this.state.wrapperlessChildren?S("div",{className:"form",children:this.state.children}):this.state.wrapperlessChildren?this.state.children:null,m=()=>S(ce,{children:[S("div",{className:"message",children:[i,n]}),S("div",{className:"opt-buttons",children:[f,p]})]}),g=()=>S(ce,{children:[S("div",{className:"message",children:[i,n,o,s]}),S("div",{className:"input"}),S("div",{className:"buttons",children:p})]}),v=()=>S(ce,{children:[S("div",{className:"message",children:S("div",{className:"header",children:["Something went wrong. Please contact ",S("a",{className:"alert-action-link underlined",href:"https://support.cargo.site/contact",target:"_blank",children:"Cargo Support"})]})}),S("div",{className:"input"}),S("div",{className:"buttons",children:p})]}),x=()=>S(ce,{children:[S("div",{className:"message",children:[i,o,n,s]}),d,S("div",{className:"input"}),S("div",{className:"buttons",children:[f,p]})]}),_=()=>S(ce,{children:[S("div",{className:"message",children:[i,n]}),S("div",{className:"input",children:S("input",{type:this.state.dialogInputType,maxLength:this.state.maxInputLength??null,placeholder:a,autoFocus:!0,autoComplete:this.state.dialogInputType==="email"?"email":null,defaultValue:l,ref:this.inputRef})}),S("div",{className:"buttons",children:[S("button",{"button-style":"rounded-2",className:"deny",onClick:this.denyModal,children:"Cancel"}),S("button",{"button-style":"rounded-2",className:"confirm",onClick:O=>this.confirmModal(O,null),children:"OK"})]})]}),E=()=>S(ce,{children:[S("div",{className:"message",children:[i,n]}),this.state.checkBoxConfirmation?S("div",{className:"footer",children:S("label",{onClick:O=>{O.preventDefault(),this.setState({checkBoxConfirmationValue:!this.state.checkBoxConfirmationValue})},className:"checkbox",htmlFor:"alert_checkbox_confirmation",children:[this.state.checkBoxConfirmation,S("input",{readOnly:!0,name:"alert_checkbox_confirmation",id:"alert_checkbox_confirmation",type:"checkbox",checked:this.state.checkBoxConfirmationValue?"checked":""})]})}):null,S("div",{className:"buttons",children:[this.state.cancelButton?S("button",{"button-style":"rounded-2",className:"deny",onClick:this.cancelModal,children:"Cancel"}):null,S("button",{"button-style":"rounded-2",className:"deny",onClick:this.denyModal,children:this.state.denyButton}),S("button",{"button-style":"rounded-2",className:"confirm",onClick:O=>this.confirmModal(O,null),children:this.state.confirmButton})]})]});return S(f1.Provider,{value:{openModal:this.openModal,closeModal:this.closeModal,updateModal:this.updateModal},children:[this.state.modalOpen?S(ce,{children:S("div",{className:`alert-window${this.state.animate?" active":""}${this.state.preventCancelButtonRender||this.state.preventClose?" no-exit":""}${this.state.overCart?" over-cart":""}`,onClick:this.overlayClick,ref:this.overlayRef,children:this.state.customElement?this.state.customElement:S("div",{onMouseDown:this.onMouseDown,className:`alert-modal${" "+this.state.type}${this.state.className?" "+this.state.className:""}`,children:[(this.state.type==="alert"||this.state.type==="notice")&&S(g,{}),this.state.type==="contact"&&S(v,{}),this.state.type==="confirm"&&S(x,{}),this.state.type==="dialog"&&S(_,{}),this.state.type==="publish"&&S(E,{}),this.state.type==="custom"&&S(ce,{children:[S("div",{className:"message",children:[i,n]}),d]}),this.state.type==="slide-confirm"&&S(ce,{children:[S("div",{className:"message",children:[i,n,o,s,d]}),S("div",{className:"buttons",children:[S("br",{}),S("br",{}),S("button",{className:"deny",onClick:this.denyModal,children:"Cancel"}),S(Eg,{onConfirm:O=>this.confirmModal(O,null),slideMessage:this.state.slideMessage??"Slide to delete"})]})]})]})})}):null,this.props.children]})}}});function lle(t,e){return{alertModal:t.frontendState.alertModal,adminMode:t.frontendState.adminMode}}function ule(t){return zt({updateFrontendState:Ge.updateFrontendState},t)}var oNe,ale,cle,r3,i3=V(()=>{ke();ft();xr();tr();oNe=ye(Pe(),1);t3();fe();ale=({alertModal:t,adminMode:e,...r})=>S(Pg,{children:S(f1.Consumer,{children:i=>{t&&!e&&i.openModal({...t,manuallyBindHotkeys:!0,onConfirm:n=>{r.onConfirm&&r.onConfirm(),r.updateFrontendState({alertModal:!1})},onClose:n=>{r.onClose&&r.onclose(),r.updateFrontendState({alertModal:!1})},onCancel:n=>{r.onCancel&&r.onCancel(),r.updateFrontendState({alertModal:!1})}})}})});cle=Ue(lle,ule)(ale),r3=cle});var Ig,m1=V(()=>{Ig=(t,e=window)=>new Promise((r,i)=>{var n=e.document.getElementsByTagName("head")[0],o=e.document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=t,o.media="all",o.onload=r,o.onError=i,n.appendChild(o)})});var n3,o3,s3=V(()=>{m1();n3="https://api.cargo.site/v1/fonts/css?family=",o3=(t,e)=>new Promise((r,i)=>{if(!e||e.length===0)return r();let n=e.join("%7C").replace(/[\. -]+/g,"");if(n+="&c=3",t.context==="server"){fetch(n3+n).then(async s=>{let a=await s.text();r(a)}).catch(i);return}let o=e.map(s=>{let a=t.context.document.createElement("span");return a.style=`display:block;position:absolute;top:-9999px;left:-9999px;
			font-size:300px;width:auto;height:auto;line-height:normal;margin:0;
			padding:0;font-variant:normal;white-space:nowrap;font-family:${s};`,a.textContent="BESbswy",a});o.forEach(s=>t.context.document.body.appendChild(s)),Ig(n3+n,t.context).then(s=>{t.context.document.fonts.ready.then(()=>{o.forEach(a=>a.remove()),r()})}).catch(i)})});var dle,ple,a3,l3=V(()=>{m1();dle="https://fonts.googleapis.com/css?family=",ple=["100","100italic","200","200italic","300","300italic","400","400italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],a3=(t,e)=>new Promise((r,i)=>{if(!e||e.length===0)return r();if(t.context==="server")return i("Google fonts should only be loaded by the client");let n=e.map(s=>s.indexOf(":")===-1?s+":"+ple.join(","):s).join("%7C").replace(/ /g,"+"),o=e.map(s=>{let a=t.context.document.createElement("span");return a.style=`display:block;position:absolute;top:-9999px;left:-9999px;
			font-size:300px;width:auto;height:auto;line-height:normal;margin:0;
			padding:0;font-variant:normal;white-space:nowrap;font-family:${s};`,a.textContent="BESbswy",a});o.forEach(s=>t.context.document.body.appendChild(s)),Ig(dle+n,t.context).then(s=>{t.context.document.fonts.ready.then(()=>{o.forEach(a=>a.remove()),r()})}).catch(i)})});var g1,u3=V(()=>{s3();l3();g1=t=>{if(!t)throw"No config given";t.context=t.context||window,t.active=t.active||function(){};let e=[];return e.push(a3(t,t.families?.reduce?.((r,i)=>(i.provider==="google"&&r.push(i.family),r),[]))),e.push(o3(t,t.families?.reduce?.((r,i)=>(i.provider==="cargo"&&r.push(i.family),r),[]))),Promise.all(e).catch(r=>{console.log("something went wrong while loading the site's fonts...",r)}).finally(r=>{t.active?.(r)})}});var c3,v1,y1,up,b1=V(()=>{ke();Ye();ft();c3=ye(Pe(),1);Be();Pr();_i();fe();v1=new Set,y1=class extends me{constructor(e){super(e),this.state={src:null,lastSrc:null,loaded:!1},this.uid=c3.default.uniqueId(),this.decodingQueue=[]}blankURI="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";render(e,r){let{model:i,adminMode:n,isZoomable:o,alt:s,hash:a,src:l,decoding:p}=e,f=e.width??i?.width??1600,d=e.height??i?.height??1600,m=this.state.src||this.blankURI;return v1.has(this.state.src)||(m=this.state.lastSrc||this.blankURI),m=this.props.isLazyLoadable?m:this.blankURI,Lt("img",{onClick:this.props.onClick,crossorigin:"",alt:s||null,src:m,width:f,height:d,className:`media${o?" image-zoom":""} `+(this.props.className||""),ref:this.props.mediaRef,onLoad:this.onLoad,decoding:"sync",part:this.props.part||void 0})}onLoad=e=>{this.props.mediaRef.current&&(this.props.mediaRef.current.src===this.blankURI||this.props.mediaRef.current.src===""||(this.setState({loaded:!0}),this.props.onLoad&&(this.props.model?this.props.onLoad({width:this.props.model.width,height:this.props.model.width}):this.props.onLoad({width:this.props.mediaRef.current.naturalWidth,height:this.props.mediaRef.current.naturalHeight}))))};componentDidUpdate(e,r){let i=this.props["dynamic-src"]||this.props.src||void 0,n=e["dynamic-src"]||e.src||void 0;(this.props.renderWidth!==e.renderWidth||this.props.renderHeight!==e.renderHeight||e.isLazyLoadable!==this.props.isLazyLoadable||i!==n||this.props.model&&this.props.model?.hash!==e.model?.hash)&&this.onSizeChange()}componentDidMount(){this.firstLoad=!0,this.onSizeChange()}decodeImage=(e,r)=>{if(this.decodingQueue.indexOf(e)>-1)return;this.decodingQueue.push(e);let i=document.createElement("img"),n=()=>{i.onload=null,v1.has(i.src)?this.forceUpdate():(v1.add(i.src),this.state.src==i.src&&this.forceUpdate())};this.firstLoad?(i.decoding="async",i.onload=n,i.onerror=this.props.onError,i.src=e):(i.decoding="async",i.src=e,i.onerror=this.props.onError,i.decode().then(o=>{n()}).catch(o=>{n()}))};onSizeChange=()=>{let e=this.props["dynamic-src"]||this.props.src||void 0,r=this.props.renderWidth,i=this.props.renderHeight,n=r<500?50:250,o=Math.ceil(r/n)*n,s=i<500?50:250,a=Math.ceil(i/s)*s;this.props.model&&o!==0&&a!==0&&(e=iu({w:o,h:a},this.props.model).url),this.props.isLazyLoadable&&e&&this.decodeImage(e),this.setState(l=>e==l.src||!e?null:(this.firstLoad=!1,{lastSrc:l.src,src:e}))}},up=Di((t,e)=>{let r=t.model?.is_video&&t.model?.poster?t.model.poster:t.model;return r&&r.loading&&(r=null),S(y1,{...t,model:r,mediaRef:e})})});var d3,ul,cp,hle,cl,dp,fle,w1,p3,h3=V(()=>{ke();Ye();d3=ye(Pe(),1);fe();ul=new Set,cp="unloaded",hle=function(){if(window?.YT&&(cp="loaded"),cp==="unloaded"){let r=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{cp="loaded",ul.forEach(i=>{i.initYoutubePlayer()}),ul.clear(),typeof r=="function"&&r()},cp="loading";var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}cp==="loaded"&&(ul.forEach(r=>{r.initYoutubePlayer()}),ul.clear())},cl=new Set,dp="unloaded",fle=function(){if(window?.Vimeo&&(dp="loaded"),dp==="unloaded"){dp="loading";var t=document.createElement("script");t.onload=()=>{dp="loaded",cl.forEach(r=>{r.initVimeoPlayer()}),cl.clear()},t.src="https://player.vimeo.com/api/player.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}dp==="loaded"&&(cl.forEach(r=>{r.initVimeoPlayer()}),cl.clear())},w1=class extends me{constructor(e){super(e),this.state={apiPlayer:null,nativeSize:{width:1,height:1},wasInLazyLoadRange:e.isLazyLoadable},this.uid=d3.default.uniqueId(),this.html="",this.divRef=xe()}render(e){let{src:r,width:i,height:n,model:o}=e;return S(ce,{children:[e.adminMode?S("div",{style:{position:"absolute",zIndex:9999,pointerEvents:"auto",background:"transparent",inset:0}}):null,S("div",{onPointerEnter:this.props.onPointerEnter,onPointerOut:this.props.onPointerOut,dangerouslySetInnerHTML:{__html:this.html},style:{position:"absolute",inset:0},ref:this.divRef})]})}setIframeStyles=()=>{if(!this.divRef.current)return;let e=this.divRef.current.querySelector("iframe");if(e||this.props.fileType.startsWith("youtube:")||this.props.fileType.startsWith("vimeo:")&&this.state.apiPlayer&&(e=this.state.apiPlayer.element),!e)return;let r="margin: auto; position: absolute;";r+="width: 100%; height: 100%; inset: 0;",e.setAttribute("part","iframe iframe"+this.props.statusPartAppendix),e.setAttribute("style",r)};loadAPIPlayer=()=>{cl.delete(this),ul.delete(this),this.props.fileType.startsWith("youtube:")?(ul.add(this),hle()):this.props.fileType.startsWith("vimeo:")&&(cl.add(this),fle())};initVimeoPlayer=()=>{for(;this.divRef.current?.childNodes?.[0];)this.divRef.current.childNodes[0].remove();let e=this.props.fileType.replace("vimeo:","").split("/"),r=new window.Vimeo.Player(this.divRef.current,{id:e.length>1&&this.props.src?this.props.src:e[0],h:e[1]||void 0,width:this.props.width||640,height:this.props.height||480,loop:this.props.loop,autopause:!1,autoplay:!1,volume:this.props.autoplay||this.props.muted?0:1,background:!this.props["browser-default"],pip:!1,speed:!0,portrait:!1,muted:this.props.autoplay||this.props.muted});this.setState({apiPlayer:r},()=>{Promise.all([r.getVideoWidth(),r.getVideoHeight()]).then(i=>{r.on("loaded",()=>{r.element?.setAttribute("id","vimeo-player-"+this.uid),r.element?.setAttribute("frameborder","0"),this.setIframeStyles()}),r.on("play",()=>{this.props.onPlay?.()}),r.on("pause",()=>{this.props.onPause?.()}),r.on("ended",()=>{this.props.onEnded?.()}),r.pause().then(r.setCurrentTime(0));var n=i[0],o=i[1];this.setState({nativeSize:{width:n,height:o}}),this.props.onNewPlayer&&this.props.onNewPlayer({play:()=>new Promise((s,a)=>{this.state.apiPlayer.play().then(l=>{s(!0)}).catch(l=>{a(l)})}),pause:()=>new Promise((s,a)=>{this.state.apiPlayer.pause().then(l=>{s(!0)})}),setCurrentTime:s=>new Promise((a,l)=>{this.state.apiPlayer.setCurrentTime(s).then(p=>{a(!0)})}),getCurrentTime:()=>new Promise((s,a)=>{this.state.apiPlayer.getCurrentTime().then(l=>{s(l)})}),setMute:s=>new Promise((a,l)=>{this.state.apiPlayer.setMuted(s).then(function(p){a(p)}).catch(function(p){})}),setVolume:s=>new Promise((a,l)=>{this.state.apiPlayer.setVolume(s).then(p=>{a(!0)})}),getVolume:()=>new Promise((s,a)=>{this.state.apiPlayer.getVolume().then(l=>{s(l)})}),getDuration:()=>new Promise((s,a)=>{this.state.apiPlayer.getDuration().then(l=>{s(!0)})}),stop:()=>new Promise((s,a)=>{Promise.all([r.pause(),r.setCurrentTime(0)]).then(()=>{s(!0)})}),setPlaybackRate:s=>new Promise((a,l)=>{this.state.apiPlayer.setPlaybackRate(s).then(p=>{a(!0)})}),size:{width:n,height:o}})})})};initYoutubePlayer=()=>{for(;this.divRef.current?.childNodes?.[0];)this.divRef.current.childNodes[0].remove();let e=document.createElement("iframe"),r=this.props.fileType.replace("youtube:","");e.setAttribute("style","display:none;"),this.divRef.current.appendChild(e);let i=this.props.src.indexOf("?")>-1?this.props.src.split("?")[0]:this.props.src,n=this.props.fileType?.replace("youtube:","")||null,o="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url="+i;n&&n.length>0&&(o="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v="+n),fetch(o,{mode:"cors"}).then(s=>{s.json().then(a=>{let l=a.width*2||640,p=a.height*2||480;e.setAttribute("id","youtube-player"),e.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),e.setAttribute("allowfullscreen",""),e.setAttribute("frameborder","0");let f={autoplay:this.props.muted&&this.props.autoplay?1:0,width:l,height:p,modestbranding:1,loop:this.props.loop,host:"https://www.youtube.com",controls:this.props["browser-default"]?void 0:0,disablekb:this.props["browser-default"]?1:0,enablejsapi:1,origin:window.location.origin,rel:0},d=Object.entries(f).filter(([g,v])=>v!==void 0).map(([g,v])=>g+"="+v).join("&");e.setAttribute("src","https://www.youtube.com/embed/"+r+"?"+d),this.setState({nativeSize:{width:l,height:p}}),this.setIframeStyles();let m=new YT.Player(e,{videoId:r,playerVars:f,events:{onReady:()=>{this.setState({nativeSize:{width:l,height:p}}),this.props.onNewPlayer&&this.props.onNewPlayer({play:()=>new Promise((g,v)=>{this.state.apiPlayer.playVideo(),g(!0)}),pause:()=>new Promise((g,v)=>{this.state.apiPlayer.pauseVideo(),g(!0)}),stop:()=>new Promise((g,v)=>{this.state.apiPlayer.stopVideo(),esolve(!0)}),size:{width:l,height:p},setCurrentTime:g=>new Promise((v,x)=>{switch(this.state.apiPlayer.getPlayerState()){case 0:case 1:case 2:this.state.apiPlayer.seekTo(g,!1)}v(!0)}),getCurrentTime:()=>new Promise((g,v)=>{g(this.state.apiPlayer.getCurrentTime())}),setVolume:g=>new Promise((v,x)=>{this.state.apiPlayer.setVolume(g*100),v(!0)}),setMute:g=>new Promise((v,x)=>{g?this.state.apiPlayer.mute():this.state.apiPlayer.unMute(),v(!0)}),getVolume:g=>new Promise((v,x)=>{v(this.state.apiPlayer.getVolume()/100)}),getDuration:()=>new Promise((g,v)=>{g(this.state.apiPlayer.getDuration())}),setPlaybackRate:g=>new Promise((v,x)=>{this.state.apiPlayer.setPlaybackRate(g),v(!0)})})},onStateChange:g=>{switch(g.data){case YT.PlayerState.ENDED:this.props.onEnded?.();break;case YT.PlayerState.PAUSED:this.props.onPause?.();break;case YT.PlayerState.PLAYING:this.props.onPlay?.();break}}}});this.setState({apiPlayer:m})})})};componentDidUpdate(e,r){if((this.props.width!==e.width||this.props.height!==e.height||this.state.nativeSize!==r.nativeSize||this.props["image-fit"]!==e["image-fit"])&&this.setIframeStyles(),this.props.statusPartAppendix!==e.statusPartAppendix){let i=this.divRef.current?.querySelector("iframe");i&&i.setAttribute("part","iframe iframe"+this.props.statusPartAppendix)}e.isLazyLoadable!==this.props.isLazyLoadable&&this.props.isLazyLoadable&&this.setState({wasInLazyLoadRange:!0}),(e.src!==this.props.src||e.autoplay!==this.props.autoplay||e["browser-default"]!==this.props["browser-default"]||e.loop!==this.props.loop||e.muted!==this.props.muted||r.wasInLazyLoadRange!==this.state.wasInLazyLoadRange)&&(e.src&&this.props.onNewPlayer(null),clearTimeout(this.initPlayerTimeout),this.initPlayerTimeout=setTimeout(()=>{e.fileType.startsWith("youtube")&&this.state.apiPlayer&&(this.state.apiPlayer?.destroy(),this.loadAPIPlayer()),e.fileType.startsWith("vimeo")&&this.state.apiPlayer&&(this.state.apiPlayer.off("loaded"),this.state.apiPlayer.off("play"),this.state.apiPlayer.off("pause"),this.state.apiPlayer?.destroy().then(()=>{this.loadAPIPlayer()}))},0))}componentDidMount(){this.loadAPIPlayer()}componentWillUnmount(){clearTimeout(this.initPlayerTimeout),ul.delete(this),cl.delete(this)}},p3=Di((t,e)=>S(w1,{...t,mediaRef:e}))});var f3,x1,m3,g3=V(()=>{ke();ft();b1();h3();_i();Be();Ye();f3=ye(Pe(),1);fe();x1=class extends me{constructor(e){super(e),this.nullPlayer={play:()=>new Promise((r,i)=>{i("null player play")}),pause:()=>new Promise((r,i)=>{i("null player pause")}),stop:()=>new Promise((r,i)=>{i("null player stop")}),getDuration:()=>new Promise((r,i)=>{i("null player getDuration")}),getCurrentTime:()=>new Promise((r,i)=>{i("null player getCurrentTime")}),setCurrentTime:()=>new Promise((r,i)=>{i("null player setCurrentTime")}),setMute:()=>new Promise((r,i)=>{i("null player setMute")}),getVolume:()=>new Promise((r,i)=>{i("null player getVolume")}),setVolume:()=>new Promise((r,i)=>{i("null player setVolume")}),setPlaybackRate:()=>new Promise((r,i)=>{i("null player setPlaybackRate")}),size:{width:0,height:0}},this.state={playing:!1,paused:!0,stopped:!0,hasPlayedThrough:!1,interacted:!1,hasAttention:!1,videoLoaded:!1,posterLoaded:!1,activePlayer:this.nullPlayer},this.posterRef=xe(),this.videoRef=xe(),this.videoPlayerRef=xe()}blankURI="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";render(e){let{model:r,posterModel:i,adminMode:n,isZoomable:o,alt:s,hash:a,src:l,fileType:p,decoding:f,"browser-default":d,"dynamic-src":m}=e,g=["controlslist","disablepictureinpicture","disableremoteplayback","x-webkit-airplay","playsinline"].reduce((W,N)=>this.props.baseNode.hasAttribute(N)?{...W,[N]:this.props.baseNode.getAttribute(N)}:W,{}),v=e.width??r?.width??1600,x=e.height??r?.height??1600,_=m||l||"",E=null;r&&(r.is_url?E=r.url:E="https://freight.cargo.site/i/"+r.hash+"/"+r.name);let O="";r?.loading||!E?O=_||"":O=E||"";let L=!this.props.muted&&!this.props.autoplay&&this.state.playing;p==="video"&&(O=L||this.props.isLazyLoadable?O:"");let I=null;i&&!i.loading?i.is_video&&i.poster?I=iu({w:this.props.renderWidth},i.poster).url||"":I=iu({w:this.props.renderWidth},i).url||"":r&&r.poster&&!r.poster.loading?I=iu({w:this.props.renderWidth},r.poster).url||"":(this.props["dynamic-poster"]||this.props.poster)&&(I=this.props["dynamic-poster"]||this.props.poster||null,I=I.startsWith("https://")?I:""),I=this.props.isLazyLoadable?I:"";let D=this.state.playing?"-playing":this.state.stopped?"-stopped":this.state.paused?"-paused":"",R=!d;return S("div",{onPointerEnter:this.onPointerEnter,onPointerOut:this.onPointerOut,part:"media video-player"+(D?" video-player"+D:""),ref:this.props.mediaRef,className:`media${o?" image-zoom":""}`,children:S("div",{className:"video-player-crop",children:[R?S(up,{ref:this.posterRef,src:I||this.blankURI,isZoomable:o,onLoad:this.onPosterLoad,isLazyLoadable:this.props.isLazyLoadable,renderWidth:this.props.renderWidth,renderHeight:this.props.renderHeight,width:v,height:x,style:{transform:"rotate(1deg)"},part:"poster"+(D?" poster"+D:"")}):null,p==="video"?S("video",{...g,ref:this.videoRef,playsinline:"true",autoplay:this.props.autoplay,loop:this.props.loop,src:O,controls:d,onLoadedMetadata:this.onVideoLoad,preload:"metadata",part:"video"+(D?" video"+D:""),poster:d?I+"?cachebreak="+this.state.forceUpdate:null,onPlay:this.onPlay,onPause:this.onPause,onEnded:this.onEnded,width:v,height:x,onClick:this.onClick}):S(p3,{...this.props,statusPartAppendix:D,fileType:p,ref:this.videoRef,loop:this.props.loop,width:v,height:x,onPlay:this.onPlay,onPause:this.onPause,onEnded:this.onEnded,onNewPlayer:this.onNewPlayer,src:O})]})})}onClick=e=>{};componentDidMount(){this.props.baseNode.play=this.state.activePlayer.play,this.props.baseNode.pause=this.state.activePlayer.pause,this.props.baseNode.getCurrentTime=this.state.activePlayer.getCurrentTime,this.props.baseNode.setCurrentTime=this.state.activePlayer.setCurrentTime,Object.defineProperty(this.props.baseNode,"playing",{get:()=>this.state.playing,configurable:!0}),Object.defineProperty(this.props.baseNode,"paused",{get:()=>this.state.paused,configurable:!0}),Object.defineProperty(this.props.baseNode,"stopped",{get:()=>this.state.stopped,configurable:!0}),this.autoplayInterval=setInterval(()=>{this.props.autoplay&&!this.state.playing&&this.props.visible&&!this.state.interacted&&(this.props.loop||!this.state.hasPlayedThrough)&&this.state.activePlayer.setMute(!0).then(()=>{this.play()}).catch(e=>{clearInterval(this.autoplayInterval)})},1200),this.configurePlayer(),this.props.visible&&this.enteredView()}configurePlayer=()=>{this.props.muted||this.props.autoplay?this.state.activePlayer.setMute(!0).then(()=>{this.props.visible&&this.enteredView()}).catch(e=>{}):this.state.activePlayer.setVolume(1).catch(e=>{}),this.props["playback-rate"]!=1&&this.state.activePlayer.setPlaybackRate(this.props["playback-rate"]).catch(e=>{})};componentDidUpdate(e,r){r.activePlayer!=this.state.activePlayer&&(this.configurePlayer(),this.setState({interacted:!1})),(this.props.visible!=e.visible||r.activePlayer!=this.state.activePlayer)&&(this.props.visible?this.enteredView():this.exitedView()),this.props.poster!==e.poster&&this.resetVideoPlayer(),this.props.isLazyLoadable!==e.isLazyLoadable&&(this.props.isLazyLoadable||(this.videoRef.current?.pause(),this.videoRef.current?.removeAttribute("src"),this.videoRef.current?.load())),this.props.muted!==e.muted&&this.state.activePlayer.setVolume(this.props.muted||this.props.autoplay?0:1),this.props.fileType==="video"&&(r.videoLoaded!==this.state.videoLoaded||r.posterLoaded!==this.state.posterLoaded)&&(this.props.poster&&this.state.posterLoaded&&this.state.videoLoaded?this.initializeVideoElementPlayer():this.state.videoLoaded&&this.initializeVideoElementPlayer()),(e.autoplay!==this.props.autoplay||e["browser-default"]!==this.props["browser-default"])&&(this.setState({interacted:!1}),this.state.activePlayer.setCurrentTime(0),this.props.autoplay?this.play():this.stop())}componentWillUnmount(){clearInterval(this.autoplayInterval),this.pause(),this.exitedView.cancel(),delete this.props.baseNode.playing,delete this.props.baseNode.paused,delete this.props.baseNode.stopped,delete this.props.baseNode.play,delete this.props.baseNode.pause,delete this.props.baseNode.getCurrentTime,delete this.props.baseNode.setCurrentTime}play=()=>{this.state.activePlayer&&this.state.activePlayer.play().then(()=>{this.setState({playing:!0,paused:!1,stopped:!1})}).catch(e=>{this.state.activePlayer.getVolume().then(r=>{r!==0&&this.state.activePlayer.setVolume(0).then(()=>{this.state.activePlayer.play().then(()=>{this.setState({playing:!0,paused:!1,stopped:!1})}).catch(i=>{})}).catch(i=>{})}).catch(r=>{})})};pause=()=>{this.state.activePlayer&&this.state.activePlayer.pause().then(()=>{this.setState({playing:!1,paused:!0})}).catch(e=>{})};stop=()=>{this.state.activePlayer&&(this.pause(),this.state.activePlayer.pause().then(()=>{this.setState({playing:!1,paused:!0,stopped:!0}),this.state.activePlayer.setCurrentTime(0)}).catch(e=>{}))};onPointerEnter=e=>{this.props["play-on"]==="hover"&&(this.props.poster&&this.state.activePlayer.setCurrentTime(0),this.play()),this.setState({hasAttention:!0})};onPointerOut=e=>{this.props["play-on"]==="hover"&&this.pause(),this.setState({hasAttention:!1})};onPosterLoad=()=>{this.setState({posterLoaded:!0})};onVideoLoad=()=>{this.setState({videoLoaded:!0})};onNewPlayer=e=>{if(!e){this.setState({playing:!1,stopped:!0,paused:!0,hasPlayedThrough:!1,activePlayer:this.nullPlayer},()=>{this.props.baseNode.play=this.state.activePlayer.play,this.props.baseNode.pause=this.state.activePlayer.pause,this.props.baseNode.getCurrentTime=this.state.activePlayer.getCurrentTime,this.props.baseNode.setCurrentTime=this.state.activePlayer.setCurrentTime});return}this.setState({playing:!1,stopped:!0,paused:!0,hasPlayedThrough:!1,activePlayer:e},()=>{this.props.baseNode.play=this.state.activePlayer.play,this.props.baseNode.pause=this.state.activePlayer.pause,this.props.baseNode.getCurrentTime=this.state.activePlayer.getCurrentTime,this.props.baseNode.setCurrentTime=this.state.activePlayer.setCurrentTime,this.props.onLoad&&this.props.onLoad({width:e.size.width,height:e.size.height}),this.props.visible&&this.enteredView()})};initializeVideoElementPlayer=()=>{this.videoRef.current.paused&&this.videoRef.current.currentTime!==0&&(this.videoRef.current.currentTime=0),this.onNewPlayer({play:()=>new Promise((e,r)=>{this.videoRef.current.play().then(function(){e(!0)}).catch(function(i){r(i)})}),pause:()=>new Promise((e,r)=>{this.videoRef.current.pause(),e(!0)}),stop:()=>new Promise((e,r)=>{this.videoRef.current.pause(),this.videoRef.current.currentTime=0,e(!0)}),getDuration:()=>new Promise((e,r)=>{e(this.videoRef.current.duration)}),getCurrentTime:()=>new Promise((e,r)=>{e(this.videoRef.current.currentTime)}),setCurrentTime:e=>new Promise((r,i)=>{this.videoRef.current.currentTime===e?r(!0):(this.videoRef.current.currentTime=e,this.videoRef.current.addEventListener("seeked",()=>{r(!0)},{once:!0}))}),setMute:e=>new Promise((r,i)=>{this.videoRef.current.muted=e,r(e)}),getVolume:()=>new Promise((e,r)=>{e(this.videoRef.current.volume)}),setVolume:e=>new Promise((r,i)=>{this.videoRef.current.volume=e,r(!0)}),setPlaybackRate:e=>new Promise((r,i)=>{this.videoRef.current.playbackRate=Math.max(.1,Math.min(2,parseFloat(e))),"preservesPitch"in this.videoRef.current?this.videoRef.current.preservesPitch=!1:"mozPreservesPitch"in this.videoRef.current?this.videoRef.current.mozPreservesPitch=!1:"webkitPreservesPitch"in this.videoRef.current&&(this.videoRef.current.webkitPreservesPitch=!1),r(!0)}),size:{width:this.videoRef.current.videoWidth||320,height:this.videoRef.current.videoHeight||240}})};onPlay=()=>{this.setState(e=>{let r={...e};return e.hasAttention&&(r.interacted=!0),r.playing=!0,r.paused=!1,r.stopped=!1,r})};onPause=()=>{this.setState(e=>{let r={...e};return e.hasAttention&&(r.interacted=!0),r.playing=!1,r.paused=!0,r})};onEnded=()=>{this.setState({hasPlayedThrough:!0})};resetVideoPlayer=()=>{Promise.all([this.state.activePlayer.setCurrentTime(0),this.state.activePlayer.pause()]).then(()=>{this.setState({hasPlayedThrough:!1,paused:!0,stopped:!0},()=>{if(this.props.poster&&this.videoRef.current&&this.props["browser-default"]){if(cn()&&this.videoRef.current){let e=this.videoRef.current.cloneNode();this.videoRef.current.replaceWith(e),this.videoRef.current=e}this.videoRef.current.load()}})})};enteredView(){this.exitedView.cancel(),(this.props.autoplay==!0||this.props["play-on"]==="hover"&&this.state.hasAttention)&&!this.state.playing&&this.play()}exitedView=f3.default.debounce(()=>{!this.props.muted&&!this.props.autoplay&&this.state.playing||(this.pause(),Promise.all([this.state.activePlayer.pause(),this.state.activePlayer.getCurrentTime(),this.state.activePlayer.getDuration()]).then(([r,i,n=0])=>{(n-i<.1&&!this.props.loop||Number.isNaN(n)||i==0&&r)&&this.resetVideoPlayer()}))},500)},m3=Di((t,e)=>S(x1,{...t,mediaRef:e}))});var iOe,S1,v3,y3=V(()=>{ke();ft();_i();Ye();iOe=ye(Pe(),1);fe();S1=class extends me{constructor(e){super(e)}render(e){let{model:r,src:i,isLazyLoadable:n}=e,o=(r?.is_url?r.url:i)||"",s=["soundcloud.","mixcloud.","spotify.","bandcamp."].some(l=>o.includes(l));!n&&!s&&(o="");let a=["allow","allowfullscreen","referrerpolicy","sandbox","srcdoc"].reduce((l,p)=>this.props.baseNode.hasAttribute(p)?{...l,[p]:this.props.baseNode.getAttribute(p)}:l,{});return S("iframe",{part:"media iframe",allowfullscreen:!0,mozallowfullscreen:!0,webkitallowfullscreen:!0,frameborder:"0",...a,className:this.props.loaded?"loaded":"",onload:this.onLoad,ref:this.props.mediaRef,src:o})}onLoad=()=>{this.props.onLoad&&this.props.onLoad()};componentDidMount(){this.props.isLazyLoadable&&this.startGDocsLoadCheck()}componentDidUpdate(e,r){this.props.loaded!==e.loaded&&(clearInterval(this.gDocsTimeoutCheck),this.props.loaded||this.startGDocsLoadCheck()),this.props.isLazyLoadable!==e.isLazyLoadable&&(clearInterval(this.gDocsTimeoutCheck),this.props.isLazyLoadable&&this.startGDocsLoadCheck())}componentWillUnmount(){clearInterval(this.gDocsTimeoutCheck)}startGDocsLoadCheck=()=>{let e=this.props.model?.is_url?this.props.model.url:this.props.src;if(e.indexOf("https://docs.google.com/viewer")==0){let r=2500;this.gDocsTimeoutCheck=setInterval(()=>{this.props.mediaRef.current?.contentDocument?(this.props.mediaRef.current.setAttribute("src",""),this.props.mediaRef.current.setAttribute("src",e)):clearInterval(this.gDocsTimeoutCheck),r=r+500,r>4e3&&(console.warn("Google Docs Viewer failed to load"),clearInterval(this.gDocsTimeoutCheck))},r)}}},v3=Di((t,e)=>S(S1,{...t,mediaRef:e}))});var ca,Wu,_1,E1,b3,w3=V(()=>{ke();Ye();Bt();Be();qr();Kn();Br();ca=ye(Pe(),1);fe();Wu=new Set,_1=ca.default.debounce(()=>{let t=Array.from(Wu),e=[],r=t.filter(o=>o.state.selected).length>1,i=0;if(r){let o=t.map(l=>{let p;return l.state.selected?p=l.props.baseNode.getBoundingClientRect():p={top:-9e9},{component:l,rect:p}});e=ca.default.sortBy(o,(l,p)=>l.rect.top);let s=e.filter(l=>l.component.state.selected),a=s[s.length-1].component.props.baseNode._size;i=s[s.length-1].rect.bottom+-s[0].rect.top+-a.mediaItemSize.padSize+-a.mediaSize.padSize,e=e.map(l=>l.component)}else e=t;let n=!1;e.forEach(o=>{!r||!o.state.selected?o.setState({pointerProxyAttention:!1,partOfMultipleSelection:!1,showMultipleSelectionButton:!1,multiSelectHeight:null}):n?o.setState({partOfMultipleSelection:!0,showMultipleSelectionButton:!1,multiSelectHeight:null}):(o.setState({pointerProxyAttention:!0,partOfMultipleSelection:!0,showMultipleSelectionButton:!0,multiSelectHeight:i},()=>{o.setEditorFrame()}),n=!0)})},100);pe||(CargoEditor&&Object.keys(CargoEditor||{}).length>0?CargoEditor.events.on("cursor-activity",_1):window.addEventListener("CargoEditor-load",function(){CargoEditor.events.on("cursor-activity",_1)}),document.addEventListener("selectionchange",_1));E1=class extends me{constructor(e){super(e),this.state={selected:!1,partOfMultipleSelection:!1,showMultipleSelectionButton:!1,overlayPosition:{x:0,y:0},mediaItemEditorInfo:{},resizeCorner:0,pointerAttention:!1,pointerProxyAttention:!1,activeGallery:null,disabledFigureOptions:[],editorFramePosition:{x:0,y:0},editorMediaFramePosition:{x:0,y:0},UIWindow:!1,cursorOrientation:"nwse-resize",isResizing:!1,dragStartPosition:{x:0,y:0},dragDelta:{x:0,y:0},scalingLimit:1e3,resizeDimensions:{scale:"100%",scaleArray:[100,"%"],newWidth:"auto",newHeight:"auto",width:0,height:0,displayScale:null},initialDimensions:{scale:"100%",scaleArray:[100,"%"],newWidth:"auto",newHeight:"auto",width:0,height:0,displayScale:null},handlePos:{x:100,y:100,w:100,h:100},contextPos:{x:100,y:100,w:100,h:100},mediaCornerPositions:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],multiSelectHeight:null},this.renderElement=Ke.getPortal(this.props.baseNode,{noPointerEvents:!1,trackResize:!1,extraMargins:!1,component:this}),this.mediaGhostRef=xe(),this.observer=new MutationObserver(this.checkForEmptyCaption)}render(e,r){let{mediaItemEditorInfo:i,overlayPosition:n,resizeCorner:o,pointerAttention:s,pointerProxyAttention:a,disabledFigureOptions:l,editorFramePosition:p,editorMediaFramePosition:f,isResizing:d,dragStartPosition:m,dragDelta:g,scalingLimit:v,resizeDimensions:x,handlePos:_,mediaCornerPositions:E,cursorOrientation:O,partOfMultipleSelection:L,showMultipleSelectionButton:I,UIWindow:D,contextPos:R}=r,{rotation:W,dimensions:N,mediaDimensions:z,baseNode:$,size:q}=e;if(i?.disableAll==!0)return null;let J=x.width*x.overSize/q.mediaSize.width,X=x.height*x.overSize/q.mediaSize.height,se=1/J||1,ee=e.scale;d&&(x.displayScale?ee=x.displayScale:x.scaleArray[1]=="px"?ee=parseFloat(x.scaleArray[0]).toFixed(0)+x.scaleArray[1]+"":ee=parseFloat(x.scaleArray[0]).toFixed(1)+x.scaleArray[1]+""),ee=ee==="100.0%"?"100%":ee;let Z=e.rotation+"\xB0",Y=null;(s||a)&&!i?.disableButton&&!D&&!d&&(I&&L?Y=S("button",{"data-editor-overlay":"true",class:"media-options-button multiple",style:{transform:`translate(${Math.floor(R.x*2)/2}px, ${Math.floor(R.y*2)/2}px)`},onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,onMouseUp:this.onOptionsButtonContextMenu,children:"Edit Multiple"}):!I&&!L&&(Y=S("button",{"data-editor-overlay":"true",class:"media-options-button",style:{transform:`translate(${Math.floor(R.x*2)/2}px, ${Math.floor(R.y*2)/2}px)`},onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,children:S("svg",{width:"17",height:"18",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S("circle",{className:"inner-circle",cx:"8.5",cy:"8.65747",r:"7.5"}),S("circle",{className:"outer-circle",cx:"8.5",cy:"8.65747",r:"8"}),S("circle",{className:"dot",cx:"8.49977",cy:"8.65747",r:"1"}),S("circle",{className:"dot",cx:"5.07",cy:"8.65747",r:"1"}),S("circle",{className:"dot",cx:"11.9295",cy:"8.65747",r:"1"})]})})));let te=null;!d&&s&&!i?.disableResize&&!L&&(te=S("button",{class:`resize-handle ${O}`,style:{transform:`translate(${Math.floor(_.x*2)/2}px, ${Math.floor(_.y*2)/2}px)`},onMouseDown:this.onResizePointerDown,children:S("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 32 32",style:"enable-background:new 0 0 32 32;",children:[S("polygon",{class:"outline",points:"24,18 28,15 30,14 30,30 14,30 15,28 18,24 8,14 4,17 2,18 2,2 18,2 17,4 14,8 "}),S("polygon",{class:"inner",points:"8,11 4,14 4,4 14,4 11,8 24,21 28,18 28,28 18,28 21,24 "})]})}));let re=i?.additionalUI?.(this,$)||null;return S(ce,{children:[S("style",{children:`:host {
				${d?"visibility: hidden!important;":""}
			}
			`}),S(Zr,{baseNode:$,onSelectionChange:this.onSelectionChange}),it(S("div",{class:"editor-overlay",style:{height:q.mediaItemSize.height+"px",width:q.mediaItemSize.width+"px",display:s||d||a?"block":"none",transform:`translate3d(${n.x}px, ${n.y}px, 1px) rotate(${e.rotation}deg)`},children:[S("div",{class:`figure-outline${this.state.usingLocalScale?" using-local-scale":""}`,style:{width:q.mediaItemSize.width+"px",height:q.mediaItemSize.height+"px",top:p.y+"px",left:p.x+"px",transform:`rotate(${-e.rotation}deg)`},children:[d&&s&&S("div",{className:"tool-tip figure-sizing visible",style:{transform:`translate(${Math.floor(R.x*2)/2}px, ${Math.floor(R.y*2)/2}px)`},children:S("div",{className:"tooltip-content",children:S("span",{children:`${this.props.limitBy}: ${ee}`})})}),Y,te,re]}),S("div",{class:"media-ghost-container",style:{display:d?"block":"none",width:x.width+q.mediaSize.padSize+"px",height:x.height+q.mediaSize.padSize+"px",top:o===2||o===3?"0":"auto",right:o===1||o===2?"auto":"0",left:o===1||o===2?"0":"auto",bottom:o===2||o===3?"auto":"0"},children:S("div",{class:"media-ghost",ref:this.mediaGhostRef})})]}),this.renderElement)]},"media-item-editor")}onOptionsButtonContextMenu=e=>{e.metaKey||e.preventDefault()};onOptionsButtonClick=e=>{if(this.state.mediaItemEditorInfo?.disableAll||e.metaKey||e.target.closest("figcaption"))return;e.preventDefault();let r=[];Wu.forEach(o=>{o.state.selected&&r.push(o.props.baseNode)}),r.indexOf(this.props.baseNode)===-1&&(r=[this.props.baseNode]);let i=this.props.baseNode.getBoundingClientRect(),n={x:i.x+10,y:i.y+10,left:i.left+10,right:i.right+10,top:i.top+10,bottom:i.top+10,width:i.width,height:0};Ce.adminWindow.UIWindowOpener.openUIWindow({windowName:"imageoptions",positionRect:n,closeOnAllClickout:!1,ignoreEditorWindowClickout:!1,props:{selectedMediaItems:r,clickedMediaItem:this.props.baseNode}})};setUIWindow=e=>{this.setState({UIWindow:e})};onSelectionChange=e=>{!e&&this.state.showMultipleSelectionButton&&this.setState({pointerProxyAttention:!1,showMultipleSelectionButton:!1,pointerAttention:!1}),this.setState({selected:e})};checkForEmptyCaption=()=>{let e=this.props.figCaptionElement;if(e){e.classList.contains("caption")||e.classList.add("caption");let r=Array.from(e.childNodes).every(i=>i.nodeType==Node.TEXT_NODE&&i.nodeValue.trim()==="");r&&!e.classList.contains("empty")?e.classList.add("empty"):!r&&e.classList.contains("empty")&&e.classList.remove("empty")}};componentDidMount(){Wu.add(this),this.props.baseNode._editorInterface=this,this.checkZoomable(),this.checkHref(),this.setState({usingLocalScale:this.props.baseNode?.hasAttribute("scale")&&this.props.baseNode?.hasAttribute("limit-by")}),Ce.globalDragEventController.on("dragend",this.updatePosition),Ce.globalDragEventController.on("drop",this.updatePosition),this.props.baseNode.addEventListener("contextmenu",this.onOptionsButtonClick),this.checkForEmptyCaption(),this.props.figCaptionElement&&this.observer.observe(this.props.figCaptionElement,{characterData:!0,subtree:!0,childList:!0})}componentWillUnmount(){if(cancelAnimationFrame(this.onScrollAnimFrame),Wu.delete(this),this.observer.disconnect(),Ce.globalDragEventController.off("dragend",this.updatePosition),Ce.globalDragEventController.off("drop",this.updatePosition),this.state.UIWindow)if(this.props.baseNode.__willBeReplacedWith){let e=[...this.state.UIWindow.state.selectedMediaItems],r=e.indexOf(this.props.baseNode);r>-1&&(e[r]=this.props.baseNode.__willBeReplacedWith);let i=this.state.UIWindow.state.clickedMediaItem;this.props.baseNode==i&&(i=this.props.baseNode.__willBeReplacedWith),this.state.UIWindow.setState({selectedMediaItems:e,clickedMediaItem:i},()=>{this.state.UIWindow?.getSettingsFromNodes()})}else this.state.UIWindow?.onMutate();delete this.props.baseNode._editorInterface,Ke.removePortal(this.props.baseNode,this.renderElement),this.props.baseNode.removeEventListener("contextmenu",this.onOptionsButtonClick)}updatePosition=()=>{(this.state.pointerAttention||this.state.pointerProxyAttention||this.state.selected)&&this.onScroll()};onScroll=e=>{this.ticking||(this.ticking=!0,this.onScrollAnimFrame=requestAnimationFrame(()=>{let r=this.props.scrollContext.getScrollPosition().y,i=r-this.scrollPos;this.scrollPos=r,this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(i),Ke.testHover(),this.setEditorFrame(),this.ticking=!1}))};checkZoomable(e=this.props){let r=this.props["force-quick-view"]||this.props.imageSettings.image_zoom&&!this.props["disable-zoom"]&&!this.props.href&&!this.props.zoomTemporarilyDisabled,i=e["force-quick-view"]||e.imageSettings.image_zoom&&!e["disable-zoom"]&&!e.href&&!e.zoomTemporarilyDisabled;(r!=i||r&&!this.props.baseNode.classList.contains("zoomable")||!r&&this.props.baseNode.classList.contains("zoomable"))&&CargoEditor?.mutationManager?.execute?.(()=>{r?this.props.baseNode.classList.add("zoomable"):this.props.baseNode.classList.remove("zoomable")},{preventDraft:!0})}checkHref(e=this.props){let r=this.props.href!==void 0&&this.props.href!==null,i=e.href!==void 0&&e.href!==null;(r!=i||r&&!this.props.baseNode.classList.contains("linked")||!r&&this.props.baseNode.classList.contains("linked"))&&CargoEditor?.mutationManager?.execute?.(()=>{r&&this.props.baseNode.classList.add("linked"),this.props.baseNode.classList.remove("linked")},{preventDraft:!0})}componentDidUpdate(e,r){this.checkZoomable(e),this.checkHref(e),this.props.figCaptionElement!==e.figCaptionElement&&(this.observer.disconnect(),this.props.figCaptionElement&&(this.checkForEmptyCaption(),this.observer.observe(this.props.figCaptionElement,{characterData:!0,subtree:!0,childList:!0}))),(!this.props.height||!this.props.width)&&(!this.props.model?.width||!this.props.model?.height)&&this.props.nativeMediaDimensions.width&&this.props.nativeMediaDimensions.height&&(this.props.nativeMediaDimensions.width!==e.nativeMediaDimensions.width||this.props.nativeMediaDimensions.height!==e.nativeMediaDimensions.height||this.props.height!==e.height||this.props.width!==e.width)&&CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.setAttribute("width",this.props.nativeMediaDimensions.width),this.props.baseNode.setAttribute("height",this.props.nativeMediaDimensions.height)},{preventDraft:!0}),(this.props.src!==e.src||this.props.hash!==e.hash)&&CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.removeAttribute("width"),this.props.baseNode.removeAttribute("height"),this.props.baseNode.removeAttribute("poster")},{preventDraft:!0}),(this.state.UIWindow!==r.UIWindow||this.state.pointerAttention!==r.pointerAttention||this.state.pointerProxyAttention!==r.pointerProxyAttention||this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement)&&(this.props.scrollContext.scrollingElement&&(this.state.UIWindow||this.state.pointerProxyAttention||this.state.pointerAttention)?(this.scrollPos=this.props.scrollContext.getScrollPosition().y,this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll)):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll)),(this.props.size.mediaSize.width!==e.size.mediaSize.width||this.props.size.mediaSize.height!==e.size.mediaSize.height||this.props.size.mediaItemSize.width!==e.size.mediaItemSize.width||this.props.size.mediaItemSize.height!==e.size.mediaItemSize.height||this.props.size.mediaSize.padSize!==e.size.mediaSize.padSize||this.props.size.mediaItemSize.padSize!==e.size.mediaItemSize.padSize||this.props.rotation!==e.rotation)&&(this.state.pointerAttention||this.state.pointerProxyAttention)&&(this.setState({usingLocalScale:this.props.baseNode?.hasAttribute("scale")&&this.props.baseNode?.hasAttribute("limit-by")}),Ke.testHover(),this.setEditorFrame())}pointerIn=()=>{let e=this.props.baseNode?.parentNode?._mediaItemEditorInfo||{},r=this.props.baseNode.parentElement?.nodeName=="GALLERY-SLIDESHOW"?this.props.baseNode.parentElement:null;if(r&&!r.thumbnailsVisible&&!this.props.baseNode.assignedSlot?.parentElement?.hasAttribute?.("data-active-slide")){this.pointerOut();return}this.setState({mediaItemEditorInfo:e}),this.state.selected&&Wu.forEach(i=>{i.state.showMultipleSelectionButton&&i.setState({pointerProxyAttention:!0})}),this.setState({pointerAttention:!0},()=>{this.setEditorFrame()})};pointerOut=()=>{this.state.selected&&Wu.forEach(e=>{e.state.pointerProxyAttention&&e.setState({pointerProxyAttention:!1})}),this.setState({pointerAttention:!1})};onResizePointerDown=e=>{if(e.button==2)return;let r=this.props.mediaElement,i=this.mediaGhostRef.current;if(!r||!i||this.props.size.width?.indexOf?.("%")>-1)return;for(;i.lastChild;)i.lastChild.remove();if(r.tagName=="IMG"){let o=r.cloneNode(!0);o.setAttribute("decoding","sync"),i.appendChild(o)}else if(r.tagName==="VIDEO"&&r.hasAttribute("poster")){let o=document.createElement("img");o.setAttribute("decoding","sync"),o.setAttribute("src",r.getAttribute("poster")),i.appendChild(o)}else r.classList.contains("placeholder")?i.appendChild(r.cloneNode(!0)):i.appendChild(document.createElement("div"));let n=window.getComputedStyle(r);i.firstChild.style.border=n.getPropertyValue("border"),i.firstChild.style.borderRadius=n.getPropertyValue("border-radius"),i.firstChild.style.padding=n.getPropertyValue("padding"),i.firstChild.style.outline=n.getPropertyValue("outline"),this.startDrag(e)};startDrag=e=>{let{handlePos:r,mediaCornerPositions:i,cursorOrientation:n}=this.state,{baseNode:o,rotation:s,limitBy:a,size:l}=this.props,p=this.props.baseNode.closest("bodycopy, column-unit, gallery-freeform"),f=0;if(p){let _=window.getComputedStyle(p);f=p.offsetWidth+-parseFloat(_.getPropertyValue("padding-left"))+-parseFloat(_.getPropertyValue("padding-right"))}else f=window.innerWidth;f=f+-l.mediaSize.padSize+-l.mediaItemSize.padSize;let d={x:e.clientX,y:e.clientY};e.preventDefault();let m=this.props.scale??100,g=lr(m,a==="width"?"%":"rem");a!=="width"&&a!=="height"&&(g[1]=""),g[0]=parseFloat(g[0]),(g[0]===""||g[1].indexOf("calc(")>-1||g[1].indexOf("var(")>-1)&&(a==="width"?(g[0]=l.mediaSize.width/f*100,g[1]="%"):(g[0]=l.mediaSize.height/window.innerHeight*100,g[1]="vh"));let v=Math.min(g[0].toString().indexOf(".")>-1?g[0].toString().split(".").pop().length:0,3);g[0]=parseFloat(parseFloat(g[0]).toFixed(v));let x={width:l.mediaSize.width,height:l.mediaSize.height,atLimit:Math.abs(l.mediaSize.width-f)<2,scaleArray:g,scale:m,overSize:1,displayScale:null};this.state.mediaItemEditorInfo.beforeScaleChange&&(x=this.state.mediaItemEditorInfo.beforeScaleChange(this.props.baseNode,x)),this.setState({dragStartPosition:d,scalingLimit:f,dragDelta:{x:0,y:0},resizeDimensions:x,initialDimensions:{...x,scaleArray:[...x.scaleArray]},isResizing:!0},()=>{Ke.lock(),document.body.style.setProperty("cursor",n,"important"),document.body.classList.add("dragging-figure-in-editor"),Ce.adminWindow.addEventListener("mouseup",this.onPointerUp),Ce.adminWindow.addEventListener("pointermove",this.onDrag),window.addEventListener("pointermove",this.onDrag),window.addEventListener("mouseup",this.onPointerUp)})};onDrag=e=>{e.preventDefault();let{dragStartPosition:r,mediaCornerPositions:i,scalingLimit:n,resizeCorner:o,handlePos:s,handleTrack:a,initialDimensions:l}=this.state,{rotation:p,limitBy:f,baseNode:d,size:m}=this.props,{resizeDimensions:g}=this.state,{scale:v,scaleArray:x}=l,_={x:e.clientX-r.x,y:e.clientY+-r.y},E=p*(Math.PI/180)||0,O=i[o],L=i[(o+1)%4],I=i[(o+2)%4],D=i[(o+3)%4],R=this.getDistance(D,s),W=this.getDistance(I,s),N=parseInt(m.width),z=parseInt(m.height),$=45,q=this.getAngle(D,O),J=this.getAngle(O,L),X={x:s.x+_.x,y:s.y+_.y},se=[{x:s.x+Math.cos(J)*10,y:a.y+a.h+-$+Math.sin(J+Math.PI)*10},{x:s.x,y:a.y+a.h+-$}],ee=[{x:s.x+Math.cos(q)*10,y:a.y+a.h+-$+Math.sin(q+Math.PI)*10},{x:s.x,y:a.y+a.h+-$}],Z=0,Y=0,te=0,re,ie;if(o%2==0){let Ae=this.getIntersection(se,[L,I]),Ve=this.getIntersection(ee,[I,D]),Me=this.getDistance(I,s),Le=this.getDistance(I,X),We=this.getAngle(I,X),Fe=this.getDistance(I,s);te=Le/Fe;let st=this.getDistance(I,Ae);Y=Le/st;let Ze=Math.abs(Math.sin(We+E));Y*=Ze;let et=this.getDistance(Ve,I);Z=Le/et;let Je=Math.cos(We+E);Z*=Je}else{let Ae=this.getIntersection(se,[D,O]),Ve=this.getIntersection(ee,[O,L]),Me=this.getDistance(I,s),Le=this.getDistance(I,X),We=this.getAngle(I,X),Fe=this.getDistance(I,s);te=Le/Fe;let st=this.getDistance(I,Ae);Y=Le/st;let Ze=Math.abs(Math.sin(We+E));Y*=Ze;let et=this.getDistance(Ve,I);Z=Le/et;let Je=Math.cos(We+E);Z*=Je}let ae=Math.max(Z,te,Y),he=Math.min(m.mediaSize.width/N,m.mediaSize.height/z),de=N/z;re=N*he*ae,ie=z*he*ae;let we=!1,Re=1;if(re>n){let Ae=n/re;we=!0,re=n,ie=ie*Ae}let ve=e.altKey||e.metaKey;f==="width"?([x,re]=this.scaleDimension(x,re+m.mediaSize.padSize+m.mediaItemSize.padSize,m.mediaSize.width+m.mediaSize.padSize+m.mediaItemSize.padSize,ve),re=re+-m.mediaSize.padSize+-m.mediaItemSize.padSize,ie=re/de):([x,ie]=this.scaleDimension(x,ie+m.mediaSize.padSize+m.mediaItemSize.padSize,m.mediaSize.height+m.mediaSize.padSize+m.mediaItemSize.padSize,ve),re=de*(ie+-m.mediaSize.padSize+-m.mediaItemSize.padSize),ie=re/de),x[0]=parseFloat(x[0]),g={scale:x.join(""),scaleArray:x,limitBy:f,width:re,height:ie,atLimit:we,overSize:Re,displayScale:null},x[1]=="%"&&f=="width"&&parseFloat(x[0])>=100&&(g.scale="100%",g.scaleArray=[100,"%"]),this.state.mediaItemEditorInfo.whileScaleChange&&(g=this.state.mediaItemEditorInfo.whileScaleChange(this.props.baseNode,{...g})),this.setState({resizeDimensions:g})};scaleDimension=(e,r,i,n)=>{let o=e[0]*(r/i),s=o;n?e[1]=="%"||e[1]=="vh"||e[1]=="vw"||e[1]=="vmax"||e[1]=="vmin"?o=Math.round(o/.5)*.5:o=Math.round(o/10)*10:e[1]=="px"?o=Math.round(o):o=Math.round(o*10)/10,o=Math.max(1,o);let a=o/s||0;return[[o,e[1]],r*a]};onPointerUp=e=>{let{resizeDimensions:r,scalingLimit:i}=this.state;e.preventDefault(),CargoEditor.mutationManager.execute(()=>{this.state.mediaItemEditorInfo.afterScaleChange?this.state.mediaItemEditorInfo.afterScaleChange(this.props.baseNode,r):this.props.baseNode.setAttribute("scale",r.scale),this.props.baseNode.flushMutationQueue()}),Ke.unlock(),this.setState({isResizing:!1},()=>{document.body.style.cursor="",Ce.adminWindow.removeEventListener("mouseup",this.onPointerUp),Ce.adminWindow.removeEventListener("pointermove",this.onDrag),document.body.classList.remove("dragging-figure-in-editor"),window.removeEventListener("pointermove",this.onDrag),window.removeEventListener("mouseup",this.onPointerUp)})};setEditorFrame=()=>{let{figureElement:e,mediaElement:r,sizingFrameElement:i,baseNode:n,rotation:o,size:s}=this.props;if(!e||!r||!r.parentElement||s.mediaItemSize.width==0||s.mediaItemSize.height==0||!i||!this.state.pointerAttention&&!this.state.pointerProxyAttention)return;let a=o*(Math.PI/180)||0,l=n.getBoundingClientRect(),p={w:s.mediaItemSize.width*Math.cos(a)-s.mediaItemSize.height*Math.sin(a),h:s.mediaItemSize.width*Math.sin(a)+s.mediaItemSize.height*Math.cos(a)},m={x:l.left+(l.width-p.w)*.5+-0,y:l.top+(l.height-p.h)*.5+-0},g=i.getBoundingClientRect(),v=45,x=45,_=this.state.showMultipleSelectionButton&&this.state.multiSelectHeight,E={x:e.offsetLeft,y:e.offsetTop,w:e.offsetWidth,h:e.offsetHeight};_&&(E.h=this.state.multiSelectHeight);let O=r.offsetLeft,L=r.offsetTop,I=r;for(;I&&I.parentNode&&I.parentNode!==n.shadowRoot&&I.parentNode!==e&&I.parentNode!==n;)O=O+I.offsetLeft,L=L+I.offsetTop,I=I.offsetParent;let D={x:O||0,y:L||0},R=[{x:D.x,y:D.y},{x:D.x+s.mediaSize.width+s.mediaSize.padSize,y:D.y},{x:D.x+s.mediaSize.width+s.mediaSize.padSize,y:D.y+s.mediaSize.height+s.mediaSize.padSize},{x:D.x,y:D.y+s.mediaSize.height+s.mediaSize.padSize}],W=[];if(_)W=R,W[2].y=D.y+this.state.multiSelectHeight,W[3].y=D.y+this.state.multiSelectHeight;else{let Fe={x:E.w*.5,y:E.h*.5};W=R.map(st=>{let Ze={x:st.x-Fe.x,y:st.y-Fe.y},et={x:Ze.x*Math.cos(a)-Ze.y*Math.sin(a),y:Ze.x*Math.sin(a)+Ze.y*Math.cos(a)};return{x:et.x+Fe.x,y:et.y+Fe.y}})}if(ca.default.isEqual(W))return;let N,z,$,q;N=ca.default.minBy(W,Fe=>Fe.y);let J=W.indexOf(N);z=W[(J+1)%4],$=W[(J+2)%4],q=W[(J+3)%4];let X={x:0,y:0,w:v,h:x},se={x:0,y:0},ee={x:N.x,y:N.y},Z={w:z.x-q.x,h:$.y-N.y,x:q.x,y:N.y},Y=[{x:Z.x+Z.w*.5,y:Z.y+Z.h*.5},{x:Z.x+Z.w,y:Z.y+Z.h}],te=this.getIntersection(Y,[z,$]),re=this.getIntersection(Y,[q,$]),ie=!1,ae=ca.default.minBy([re,te],Fe=>Fe.y<Y[0].y?9e9:Fe.y);if(ae==re)X.x=$.x,X.y=$.y;else{let Fe=this.getDistance(z,ae);this.getDistance($,ae)<Fe?(X.x=$.x,X.y=$.y):(X.x=z.x,X.y=z.y,ie=!0)}let he,de=0,we=0;if(ie){let Fe=this.getAngle(z,N),st=Math.PI-(Math.abs(Fe)+Math.PI*.5),Ze=x*Math.cos(st),et=-Math.cos(st+Math.PI*.5)*Ze,Je=-Math.sin(st+Math.PI*.5)*Ze;ee={x:q.x+-et,y:q.y+-Je+x},X.x=X.x+et+-v,he=X.y+Je+x;let Et=[{x:N.x-v,y:he},{x:N.x-v,y:he-10}],kt=[{x:N.x,y:he},{x:N.x,y:he-10}],Xe=[this.getIntersection(Et,[q,N]),this.getIntersection(Et,[N,z]),this.getIntersection(kt,[q,N]),this.getIntersection(kt,[N,z])],Tt=ca.default.maxBy(Xe,Ot=>Ot.y);X.y=Tt.y,X.h=he-X.y;let Kt=Math.max(0,g.bottom+(x+Je)+-ot.data.window.h+-($.y-z.y));we=X.h-x+-Kt,de=this.getIntersection([{x:X.x,y:X.y+we},{x:X.x-10,y:X.y+we}],[N,z]).x-X.x+-v}else{let Fe=this.getAngle($,z),st=Math.PI-(Math.abs(Fe)+Math.PI*.5),Ze=v*Math.cos(st),et=-Math.cos(st)*Ze,Je=-Math.sin(st)*Ze;if(he=X.y+Je,X.x=X.x+et,X.y=z.y,X.h=he-z.y,ee={x:N.x+-et+-v,y:N.y+-Je},Math.abs(this.getSlope(z,$))>1&&g.bottom+Je>=ot.data.window.h){let kt=g.bottom+-ot.data.window.h,Xe={x:$.x,y:$.y-kt},Tt=this.getIntersection([Xe,{x:Xe.x+10,y:Xe.y}],[$,z]);de=Tt.x-(X.x+X.w),we=Tt.y-X.y+-x}else{let kt=[{x:X.x,y:he},{x:X.x,y:he-10}],Xe=[{x:X.x+X.w,y:he},{x:X.x+X.w,y:he-10}],Tt=[this.getIntersection(kt,[q,N]),this.getIntersection(kt,[N,z]),this.getIntersection(Xe,[q,N]),this.getIntersection(Xe,[N,z])],Kt=ca.default.maxBy(Tt,Ot=>Ot.y);X.y=Kt.y,X.h=he-X.y;let Rr=Math.max(0,g.bottom+-ot.data.window.h+Je);we=X.h-x+-Rr,de=0}}se.x=X.x+de,se.y=Math.max(X.y,X.y+we);let Re=Math.max(0,g.left+g.width+-ot.data.window.w);se.x=Math.min(se.x,z.x-(Re+v));let ve=Math.min(0,g.left),Ae=Math.min(0,g.top);ee.x=Math.max(ee.x,-ve+q.x),ee.y=Math.max(ee.y,-Ae+N.y);let Ve=this.getIntersection([ee,{x:ee.x,y:ee.y+10}],[q,$]);ee.y=Math.min(ee.y,Ve.y+-x);let Me=(J+2)%4;ie&&(Me=(Me+3)%4);let Le="nwse-resize",We=this.getAngle(se,W[(Me+2)%4]);Math.abs(Math.PI*.5-We)<.4?Le="ns-resize":Math.abs(Math.PI-Math.abs(We))<.4&&(Le="ew-resize"),this.setState({mediaCornerPositions:W,resizeCorner:Me,contextPos:ee,handlePos:se,cursorOrientation:Le,handleTrack:X,overlayPosition:m,editorMediaFramePosition:{x:D.x,y:D.y},editorFramePosition:{x:0,y:0}})};getAngle=(e,r)=>Math.atan2(-(r.y-e.y),r.x-e.x);getDistance=(e,r)=>Math.sqrt(Math.pow(r.y-e.y,2)+Math.pow(r.x-e.x,2));getSlope=(e,r)=>(r.y-e.y)/(r.x-e.x);getIntersection=(e,r)=>{let i=this.getSlope(...e),n=this.getSlope(...r),o,s;return i==0?(isFinite(n)?o=(n*r[0].x-(r[0].y-e[0].y))/n:o=r[0].x,s=e[0].y):isFinite(i)?(o=(n*r[0].x-i*e[0].x-(r[0].y-e[0].y))/(n-i),s=i*(o-e[0].x)+e[0].y):(o=e[0].x,s=n*(o-r[0].x)+r[0].y),isFinite(o)||(o=null),isFinite(s)||(s=null),{x:o,y:s}}},b3=E1});var x3,pp,Ag,mle,gle,S3=V(()=>{ke();Ye();ft();x3=ye(Pe(),1);Be();Yr();zr();ap();Pr();b1();g3();y3();Xr();w3();il();fe();ke();pe||(pp=new ResizeObserver(function(t){t.forEach(function(e){if(e.contentRect.width==0&&e.contentRect.height==0&e.contentRect.top==0&&e.contentRect.left==0)return;let r=0,i=0,n=0,o=0,s=0,a=0,l=0,p=0,f=0,d=0,m=e.target.tagName==="DIV";if(e.contentBoxSize&&e.borderBoxSize&&!m)e.borderBoxSize.length?(r=e.borderBoxSize[0].blockSize-e.contentBoxSize[0].blockSize,i=e.borderBoxSize[0].inlineSize-e.contentBoxSize[0].inlineSize):(r=e.borderBoxSize.blockSize-e.contentBoxSize.blockSize,i=e.borderBoxSize.inlineSize-e.contentBoxSize.inlineSize);else{let g=window.getComputedStyle(e.target);n=parseFloat(g.getPropertyValue("padding-left"))||0,o=parseFloat(g.getPropertyValue("padding-right"))||0,s=parseFloat(g.getPropertyValue("border-right-width"))||0,a=parseFloat(g.getPropertyValue("border-left-width"))||0,l=parseFloat(g.getPropertyValue("padding-top"))||0,p=parseFloat(g.getPropertyValue("padding-bottom"))||0,f=parseFloat(g.getPropertyValue("border-bottom-width"))||0,d=parseFloat(g.getPropertyValue("border-top-width"))||0,r=l+p+d+f,i=n+o+s+a}_t(e.target,"elementResize",{padSize:i,vertPadSize:r,horizPadSize:i,width:e.contentRect.width,height:e.contentRect.height,leftPad:n,rightPad:o,leftBorder:s,rightBorder:a,topPad:l,bottomPad:p,bottomBorder:f,topBorder:d},{bubbles:!1})})}));Ag=class extends Tr{constructor(e){super(e),this.state={zoomTemporarilyDisabled:!1,scrollTransitionDisabled:!1,slottedMediaNode:null,nativeMediaDimensions:{width:null,height:null},dimensions:{padSize:0,vertPadSize:0,horizPadSize:0,width:0,height:0},mediaDimensions:{padSize:0,vertPadSize:0,horizPadSize:0,width:0,height:0,leftPad:0,rightPad:0,leftBorder:0,rightBorder:0,topPad:0,bottomPad:0,bottomBorder:0,topBorder:0},isVisible:!1,viewportIntersection:{hasLayout:!1,visible:!1,position:"unknown"},isLazyLoadable:!1,loaded:!1},this.uid=x3.default.uniqueId(),this.figureRef=xe(),this.mediaRef=xe(),this.lastMediaRef=xe(),this.figCaptionRef=xe(),this.sizingFrameRef=xe(),Object.defineProperty(this.props.baseNode,"_size",{get:()=>({width:this.props.width??this.props.model?.width??this.state.nativeMediaDimensions.width??1600,height:this.props.height??this.props.model?.height??this.state.nativeMediaDimensions.height??1e3,mediaItemSize:this.state.dimensions,mediaSize:this.state.mediaDimensions}),configurable:!0}),Object.defineProperty(this.props.baseNode,"_nativeMediaDimensions",{get:()=>({width:this.state.nativeMediaDimensions.width??1600,height:this.state.nativeMediaDimensions.height??1600}),configurable:!0}),Object.defineProperty(this.props.baseNode,"_model",{get:()=>this.props.model||null,configurable:!0});let r=this.props.baseNode.onload;Object.defineProperty(this.props.baseNode,"onload",{get:()=>this.onloadCallback,set:n=>{this.onloadCallback=n,this.state.loaded&&n&&this.onLoad()},configurable:!0}),this.props.baseNode.onload=r;let i=this.props.baseNode.onerror;Object.defineProperty(this.props.baseNode,"onerror",{get:()=>this.onErrorCallback,set:n=>{this.onErrorCallback=n},configurable:!0}),this.props.baseNode.onerror=i,this.props.baseNode._disableZoom=n=>{this.setState(o=>o.zoomTemporarilyDisabled===n?null:{zoomTemporarilyDisabled:n})},this.props.baseNode._disableScrollTransition=n=>{this.setState(o=>o.scrollTransitionDisabled===n?null:{scrollTransitionDisabled:n})},this.props.baseNode._forceRedraw=n=>{this.setState({forceRedraw:Math.random()})},this.props.baseNode.getFileType=this.getFileType}handleClick=e=>{if(e?.defaultPrevented)return;let r=e.composedPath();if(r.find(p=>p.tagName==="A"))return;if(this.pointerInteractionType=="mouse"&&!this.props.adminMode&&!this.state.hoveringOverFigure&&!this.state.hasOpaqueBG){e.preventDefault();return}let n=this.props.baseNode.shadowRoot.querySelector("a.sizing-frame"),o=!1,s=window.getSelection();if(s&&s.rangeCount>0&&!this.props.adminMode){let p=s.getRangeAt(0);p&&p.commonAncestorContainer&&!p.collapsed&&this.props.baseNode.contains(p.commonAncestorContainer)&&(o=!0)}if(n&&!o&&!this.props.adminMode){n.click();return}let a=this.getFileType(),l=this.isZoomable();if((a==="video"||a.startsWith("vimeo")||a.startsWith("youtube"))&&(!this.props.adminMode&&e.detail==1||e.detail==2)&&!this.props.autoplay&&!l){if(r.some(p=>p.nodeName=="VIDEO"||p.nodeName==="IFRAME")&&this.props["browser-default"])return;e.preventDefault(),this.props.baseNode.playing?this.props.baseNode.pause():this.props.baseNode.play();return}!l||o||!r.find(p=>p&&p.classList?.contains("sizing-frame"))||this.props.adminMode||(e.preventDefault(),l1(this.props.baseNode))};isZoomable=()=>this.props["force-quick-view"]||this.props.imageSettings.image_zoom&&!this.props["disable-zoom"]&&!this.props.href&&!this.state.zoomTemporarilyDisabled;getFileType=()=>{let{model:e,src:r,"dynamic-src":i}=this.props;if(r=i||r,this.props["dynamic-filetype"]!==void 0&&this.props["dynamic-filetype"]!==null)return this.props["dynamic-filetype"];let n="none";if(e)e.is_image?n="image":e.is_video?n="video":e.is_url&&(n="url",e.url_type&&!e.url_id?n=e.url_type:e.url_id&&e.url_type&&(n=e.url_type+":"+e.url_id));else if(r){let f=r.toLowerCase();if(f.endsWith(".mov")||f.endsWith(".mp4")||f.endsWith(".webm"))n="video";else if(f.endsWith(".png")||f.endsWith(".webp")||f.endsWith(".jpg")||f.endsWith(".jpeg")||f.endsWith(".gif")||f.endsWith(".avif")||f.endsWith(".apng")||f.endsWith(".svg"))n="image";else{n="url";var o="",s=/(?:<iframe [^>]*src=")?(?:https?:\/\/(?:[\w]+\.)*vimeo\.com(?:[\/\w:]*(?:\/videos)?)?\/([0-9]+)[^\s]*)"?(?:[^>]*><\/iframe>)?(?:<p>.*<\/p>)?/,p=r.match(s);if(p&&p[0]){let d=p[0].split(/\/|\?h=|&|\?/);for(var a=0;a<d.length;a++)!d[a].includes(":")&&!d[a].includes(".")&&!d[a].includes("vimeo")&&!d[a].includes("=")&&!d[a].includes("video")&&!d[a].includes("showcase")&&!d[a].includes("player")&&d[a].length>3&&(o.length==0?o=d[a]:o+="/"+d[a]);n="vimeo:"+o}var l=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(shorts\/)|(watch\?))\??v?=?([^#\&\?]*).*/,p=r.match(l);p&&(p[7]&&p[7].length==11?(o=p[7],n="youtube:"+o):p[8]&&p[8].length==11&&(o=p[8],n="youtube:"+o))}}return n};onCaptionClick=e=>{this.props.adminMode||e.target.closest("a")&&e.stopPropagation()};render(e,r,i){let{dimensions:n,mediaDimensions:o,viewportIntersection:s,loading:a,nativeMediaDimensions:l,scrollTransitionDisabled:p}=r,{rotation:f,drag:d,"force-visible":m,"dynamic-src":g,adminMode:v,imageSettings:x,pageInfo:_,width:E,height:O,baseNode:L,model:I,posterModel:D,href:R,src:W,hash:N,isMobile:z}=e,$=m??this.state.isVisible,q=m??this.state.isLazyLoadable,{uid:J}=this,X=this.props.scale!==void 0?this.props.scale:z&&x.mobile_image_width_maximize?"100%":x.scale,se=this.props["limit-by"]!==void 0?this.props["limit-by"]:z&&x.mobile_image_width_maximize?"width":x.limit_by;W=g||W;let ee=E??I?.width??l.width??1600,Z=O??I?.height??l.height??1e3,Y=lr(X,se=="height"?"rem":"%"),te=Z/ee,ie=o.width*te,ae=o.horizPadSize+n.horizPadSize,he=o.vertPadSize+n.vertPadSize,de=o.width+o.horizPadSize,Re=(ie+o.vertPadSize)/de,ve=Y.join(""),Ae,Ve=null;isNaN(Re)&&(Re=Z/ee);let Me=ee.toString().trim().endsWith("%"),Le=Z.toString().trim().endsWith("%"),We=lr(ee,"%"),Fe=lr(Z,"%");if(Me&&Le)se==="width"||se=="height"?(ve=`calc(${We[0]*.01} * var(--resize-parent-width, 100%) )`,Ve=`calc( var(--fit-height) * ${Fe[0]*.01} )`,Ae="var(--custom-fit-height)"):(ve=`calc(${We[0]*Y[0]*1e-4} * var(--resize-parent-width, 100%) )`,Ve=`calc( var(--fit-height) * ${Fe[0]*Y[0]*1e-4} )`,Ae="var(--custom-fit-height)");else if(se=="height")if(Le)Ve=`calc( var(--fit-height) * ${Fe[0]*.01} )`,Ae="var(--custom-fit-height)",ve=`${We[0]*.01}px`;else{let Tt="";Y[1]=="%"?Tt=`( ${Y[0]*.01} * var(--resize-parent-width, 100%) )`:Y[1].indexOf("calc(")>-1?(Y[1]=Y[1].replace(/[\d*\.]+%/g,function(Kt){return`( ${lr(Kt,"%")[0]*.01} * var(--resize-parent-width, 100%) )`}),Tt=Y[1].replace("calc(","(")):Tt=Y.join(""),Me?(ve=`calc( ${We[0]*.01} * var(--resize-parent-width, 100%) )`,Ae=`calc( ${Tt} )`):(ve=`calc( ( ${Tt} - ${he}px ) * ( 1 / ${te} ) + ${ae}px )`,Ae=Re*100+"%")}else se==="width"?Me?(ve=`calc( ${We[0]*.01} * var(--resize-parent-width, 100%) )`,Ae=`${Fe[0]}px`):(Y[1]=="%"?ve=`calc(${Y[0]*.01} * var(--resize-parent-width, 100%) )`:(Y[1].indexOf("calc(")>-1&&(Y[1]=Y[1].replace(/[\d*\.]+%/g,function(Tt){return`( ${lr(Tt,"%")[0]*.01} * var(--resize-parent-width, 100%) )`})),ve=Y.join("")),Le?(Ve=`calc( var(--fit-height) * ${Fe[0]*.01} )`,Ae="var(--custom-fit-height)"):Ae=Re*100+"%"):Me?(ve=`calc(${We[0]*Y[0]*1e-4} * var(--resize-parent-width, 100%) )`,Ve=`calc( min( var(--fit-height) * ${Y[0]*.01} , ${Fe[0]*Y[0]*.01}px ) )`,Ae="var(--custom-fit-height)"):Le?(ve=`calc( min( ${Y[0]*.01} * var(--resize-parent-width, 100%) , ${We[0]*Y[0]*.01}px ) )`,Ve=`calc(  var(--fit-height) * ${Y[0]*Fe[0]*1e-4}  )`,Ae="var(--custom-fit-height)"):(ve=`calc( ( ( var(--fit-height, 50vh) * ${Y[0]/100} ) - ${ae}px ) * ( 1 / ${te} ) + ${ae}px )`,Ae=Re*100+"%");let st=this.props.uses||"";st.indexOf("scroll-transition")===-1&&x?.scroll_animation&&this.props["disable-scroll-animation"]===!1&&!this.state.scrollTransitionDisabled&&(st=st+" scroll-transition");let Ze=null,et=this.getFileType()||"",Je=this.isZoomable(),Et=e.autoplay&&e.muted;switch(!0){case(!Et&&Je&&et.startsWith("youtube")&&D&&!e["browser-default"]):case(!Et&&Je&&et.startsWith("vimeo")&&D&&!e["browser-default"]):case(!Et&&Je&&et==="video"&&D&&!e["browser-default"]):case(Je&&et==="url"&&D):Ze=S(up,{...e,model:D,isZoomable:Je,ref:this.mediaRef,onLoad:this.onLoad,isLazyLoadable:q,renderWidth:o.width,renderHeight:o.height,part:"media",onError:this.onErrorCallback});break;case et=="video":case et.startsWith("vimeo:"):case et.startsWith("youtube:"):Ze=S(m3,{...e,baseNode:this.props.baseNode,isZoomable:Je,ref:this.mediaRef,onLoad:this.onLoad,visible:$,fileType:et,isLazyLoadable:q,renderWidth:n.width,renderHeight:n.height,src:W});break;case et=="image":Ze=S(up,{...e,isZoomable:Je,ref:this.mediaRef,onLoad:this.onLoad,isLazyLoadable:q,renderWidth:o.width,renderHeight:o.height,part:"media",onError:this.onErrorCallback});break;case et=="url":Ze=S(v3,{...e,loaded:this.state.loaded,onLoad:this.onLoad,ref:this.mediaRef,isLazyLoadable:q,src:W});break;default:Ze=S("div",{ref:this.mediaRef,className:"placeholder",part:"media placeholder",width:"1600",height:"1000",draggable:"true",children:S("svg",{preserveAspectRatio:"none",part:"placeholder-svg",viewBox:"0 0 1600 1600",style:{display:"block",width:"100%",height:"100%"},children:[S("rect",{part:"placeholder-rect"}),S("line",{part:"placeholder-line","vector-effect":"non-scaling-stroke",x1:"0",y1:"0",x2:"1600",y2:"1600",stroke:"rgb(200,200,200)","stroke-width":"1"})]})});break}let kt=S("slot",{onSlotChange:this.onMediaSlotChange,name:"custom-media",children:Ze},"media-slot-key"),Xe=S(ce,{children:[S("style",{id:"media-item",children:`

:host {
	 ${this.state.forceRedraw?`/* ${this.state.forceRedraw} */`:""}
	${(this.state.hoveringOverFigure||this.state.hasOpaqueBG)&&!v&&R&&R!==""?"cursor: pointer;":""}
	display: inline-flex;
	vertical-align: bottom;
	flex-direction: column; 
	position: relative;

	width: var(--resize-parent-width, 100%);
	max-width: ${ve||"100%"};
	${Ve?`--custom-fit-height: ${Ve};`:""}
	transform-origin: center center;
	margin: 0;
	padding: 0;
	z-index: var(--z-index, initial);    
}
 :host, * {
	box-sizing: border-box;
}
a {
	cursor: inherit;
}

${(this.state.hoveringOverFigure||this.state.hasOpaqueBG)&&!v&&Je?`[part*="media"]:active {
    opacity: 0.7;
}`:""}

${(this.state.hoveringOverFigure||this.state.hasOpaqueBG)&&!v&&R?`:host(:active) {
    opacity: 0.7;
}`:""}

figure {
	flex-direction: column;
	position: relative;
	display: flex;
	width: 100%;
	margin: 0;
	padding: 0;
	z-index: 2;
}

::slotted(figcaption){
	-webkit-user-select: text;	
	user-select: text;
	width: 100%;
}

:host([image-fit="fit"]) {
	--object-fit: contain;
}
:host([image-fit="fill"]) {
	--object-fit: cover;
}
:host([image-fit="stretch"]) {
	--object-fit: fill;
}

[part*="media"],
[part*="video"],
[part*="poster"] {
	object-fit: var(--object-fit, cover);
}

[part*="media"]:-webkit-full-screen,
[part*="media"]:fullscreen,
[part*="video"]:-webkit-full-screen,
[part*="video"]:fullscreen {
	object-fit: contain!important;
}

.sizing-frame {
	display: block;
	width: 100%;
	flex-grow: 1;
	height: 0;
	padding-bottom: var(--frame-padding, ${Ae});
	position: relative;
}

.frame {
	display:contents;
}

/* for images and custom media */
::slotted([slot="custom-media"]),
[part*="media"] {
	object-position: center center;
	display: block;
	margin: 0;
	width: 100%;
	min-width: 100%;
	min-height: 100%;
	height: 100%;
	position: absolute;
	overflow: clip;
	overflow-clip-margin: content-box;
	inset: 0;
}

/*
	for URL fileType and default setup for iframe-videos
*/
iframe {
	opacity: 0;
	pointer-events: ${!v&&!this.props.href&&!Je?"auto":"none"};
}

iframe.loaded {
	opacity: 1;
}

/* enable proper padding cropping for videos, in most scenarios */
.video-player-crop {
	all: inherit;
	filter: unset;
	will-change: unset;
	width: unset;
	height: unset;
	padding: 0;
	border-left-width: ${o.leftPad+o.leftBorder}px;
	border-right-width: ${o.rightPad+o.rightBorder}px;
	border-top-width: ${o.topPad+o.topBorder}px;
	border-bottom-width: ${o.bottomPad+o.bottomBorder}px;
	top: ${-o.topBorder}px;
	left: ${-o.leftBorder}px;
	right: ${-o.rightBorder}px;
	bottom: ${-o.bottomBorder}px;

	min-width: unset;
	min-height: unset;

	margin: auto;
	border-color: transparent;
	background: transparent;
}

/* for video filetype */
[part*="video"], [part*="poster"] {
	object-position: 50% 50%;	
	display: block;
	margin: 0;
	width: 100%;
	height: 100%;
	position: absolute;
	inset: 0;
}

[part*="video"] iframe[part*="iframe"] {
	opacity: 1;
}

[part*="poster"] {
	object-fit: cover;
	z-index: 2;
	opacity: 0;
}
${e["browser-default"]?`[part*="poster-playing"],
[part*="poster-paused"]{
	pointer-events:none;
}
`:""}	
[part*="poster-stopped"]{
	opacity: 1;
}
${a?`[part*="media"] {
	opacity: 0;
}`:""}

${v?`
::slotted(video[slot="custom-media"]),
::slotted(iframe[slot="custom-media"]){
	pointer-events:none;
}

[part*="media"] iframe {
	pointer-events:none!important;
}

`:`
[part*="media"].image-zoom {
	cursor: -webkit-zoom-in;
	cursor: -moz-zoom-in;
	cursor: zoom-in;
}	
`}

${_.isEditing?`
:host, * {
	-webkit-user-select: text;
	user-select: text;	
}
`:""}

				`}),S(ia,{scrollContext:this.props.scrollContext,uses:st,visibility:s,onLazyLoadChange:this.onlazyLoadChange,adminMode:v,customElementMode:!0,baseNode:L,isLazyLoadable:q,pageInfo:_,children:S("figure",{draggable:this.props.adminMode?"true":null,part:"figure",ref:this.figureRef,onPointerEnter:this.onFigurePointerEnter,onPointerCancel:this.onFigurePointerCancel,onPointerLeave:this.onFigurePointerLeave,children:[S("div",{part:"frame",className:"frame",children:this.props.href!==void 0?S("a",{ref:this.sizingFrameRef,className:"sizing-frame",part:"link sizing-frame",href:this.props.href,rel:this.props.rel,target:this.props.target,"data-tags":this.props["data-tags"],children:kt}):S("div",{ref:this.sizingFrameRef,className:"sizing-frame",part:"sizing-frame",children:kt})}),S("slot",{name:"caption"})]})},"media-host"),_.isEditing&&v&&Lt(b3,{...this.props,zoomTemporarilyDisabled:this.state.zoomTemporarilyDisabled,fileType:et,limitBy:se,width:E,height:O,rotation:f||0,scale:X,scrollContext:this.props.scrollContext,key:`media-item-editor-${this.uid}`,baseNode:L,nativeMediaDimensions:this.state.nativeMediaDimensions,figCaptionElement:this.figCaptionRef.current,sizingFrameElement:this.sizingFrameRef.current,figureElement:this.figureRef.current,mediaElement:this.mediaRef.current,size:this.props.baseNode._size,uid:this.uid})]},"media-item-fragment");return it(Xe,L.shadowRoot)}onViewportIntersectionChange=e=>{this.state.viewportIntersection?.position!==e.position?this.setState({isVisible:e.position==="inside",viewportIntersection:e}):(this.state.viewportIntersection.hasLayout!==e.hasLayout||this.state.viewportIntersection.visibility!==e.visibility)&&this.setState({viewportIntersection:e})};onLazyloadIntersectionChange=e=>{let r=e.position==="inside";this.state.isLazyLoadable!==r&&this.setState({isLazyLoadable:r})};onMediaSlotChange=e=>{let r=e.target.assignedNodes();r[0]?(this.setState({nativeMediaDimensions:{width:parseFloat(r[0].getAttribute("width"))||null,height:parseFloat(r[0].getAttribute("height"))||null},slottedMediaNode:r[0]}),this.mediaRef.current=r[0]):this.setState({nativeMediaDimensions:{width:null,height:null},slottedMediaNode:null})};bindMediaListeners=e=>{if(!e)return;let r=parseFloat(e.getAttribute("width"))||null,i=parseFloat(e.getAttribute("height"))||null;r&&i&&this.state.nativeMediaDimensions.width!==r&&this.state.nativeMediaDimensions.height!==i&&this.setState({nativeMediaDimensions:{width:r,height:i}}),At(e,"elementResize",this.onMediaResize),pp.observe(e)};unbindMediaListeners=e=>{e&&(this.setState({nativeMediaDimensions:{width:null,height:null}}),Rt(e,"elementResize",this.onMediaResize),pp.unobserve(e))};componentDidMount(){if(pe)return;this.props.adminMode||(this.isZoomable()?this.props.baseNode.classList.add("zoomable"):this.props.baseNode.classList.remove("zoomable"),this.props.href!==void 0?this.props.baseNode.classList.add("linked"):this.props.baseNode.classList.remove("linked"));let e=this.props["dynamic-src"]||this.props.modelSrc||this.props.src;this.props.hash==="placeholder"&&!e&&!this.props.baseNode.hasAttribute("hash")&&this.onLoad(),At(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),At(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),At(this.props.baseNode,"elementResize",this.onResize),this.props.baseNode.addEventListener("pointerenter",this.onPointerEnter),this.props.baseNode.addEventListener("click",this.handleClick),this.props.baseNode.addEventListener("dragstart",this.onDragStart),this.bindMediaListeners(this.mediaRef.current),this.lastMediaRef.current=this.mediaRef.current,pp.observe(this.props.baseNode)}componentWillUnmount(){pe||(cancelAnimationFrame(this.itemResizeAfterModelChange),Rt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),Rt(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),Rt(this.props.baseNode,"elementResize",this.onResize),this.props.baseNode.removeEventListener("pointerenter",this.onPointerEnter),this.props.baseNode.removeEventListener("dragstart",this.onDragStart),this.props.baseNode.removeEventListener("click",this.handleClick),pp.unobserve(this.props.baseNode),this.unbindMediaListeners(this.mediaRef.current))}componentDidUpdate(e,r){(this.props.hash!==e.hash||this.props.src!==e.src)&&this.setState({nativeMediaDimensions:{width:null,height:null}});let i=this.getFileType();(i.startsWith("vimeo")||i.startsWith("youtube"))&&(e.src!==this.props.src||e.autoplay!==this.props.autoplay||e["browser-default"]!==this.props["browser-default"]||e.loop!==this.props.loop||e.muted!==this.props.muted)&&this.setState({loaded:!1}),(this.props.imageSettings.image_zoom!==e.imageSettings.image_zoom||this.props["disable-zoom"]!==e["disable-zoom"]||this.state.zoomTemporarilyDisabled!==r.zoomTemporarilyDisabled)&&(this.isZoomable()?this.props.baseNode.classList.add("zoomable"):this.props.baseNode.classList.remove("zoomable")),this.props.href!==e.href&&(this.props.href!==void 0?this.props.baseNode.classList.add("linked"):this.props.baseNode.classList.remove("linked")),this.props.itemLoad!==e.itemLoad&&this.props.itemLoad&&this.state.loaded&&this.onLoad(),this.props.itemResize&&!(this.props.baseNode.slot&&!this.props.baseNode.assignedSlot)&&(this.props.model&&e.model&&e.model.hash!==this.props.model.hash||this.props.width!==e.width||this.props.height!==e.height||this.state.nativeMediaDimensions.width!==r.nativeMediaDimensions.width||this.state.nativeMediaDimensions.height!==r.nativeMediaDimensions.height||this.state.dimensions.width!=r.dimensions.width||this.state.dimensions.height!=r.dimensions.height||this.state.dimensions.padSize!=r.dimensions.padSize||this.state.mediaDimensions.padSize!=r.mediaDimensions.padSize)&&this.props.itemResize(this.props.baseNode._size,this.props.baseNode),e.hash!=="placeholder"&&this.props.hash==="placeholder"&&this.onLoad(),this.lastMediaRef.current!==this.mediaRef.current&&(this.unbindMediaListeners(this.lastMediaRef.current),this.bindMediaListeners(this.mediaRef.current),this.lastMediaRef.current=this.mediaRef.current)}onResize=e=>{this.setState({dimensions:{...e}})};onMediaResize=e=>{(e.width!==this.state.mediaDimensions.width||e.horizPadSize!==this.state.mediaDimensions.horizPadSize||e.vertPadSize!==this.state.mediaDimensions.vertPadSize||e.height!==this.state.mediaDimensions.height)&&this.setState({mediaDimensions:{...e}})};onPointerEnter=e=>{if(this.props.adminMode)return;let r=getComputedStyle(this.props.baseNode),i=r.getPropertyValue("background-image"),n=!1;if(i!="none")n=!0;else switch(r.getPropertyValue("background-color")){case"rgba(0, 0, 0, 0)":case"rgba(0 0 0 0)":case"none":case"transparent":n=!1;break;default:n=!0;break}this.setState({hasOpaqueBG:n})};onFigurePointerEnter=e=>{this.pointerInteractionType=e.pointerType,this.setState({hoveringOverFigure:!0})};onFigurePointerCancel=e=>{this.setState({hoveringOverFigure:!1})};onFigurePointerLeave=e=>{this.setState({hoveringOverFigure:!1})};onDragStart=e=>{typeof this.props.itemDragStart=="function"&&this.props.itemDragStart(e);let r=this.props.baseNode.querySelector("figcaption");this.props.baseNode.contains(e.target)&&(r&&!r.contains(e.target)||!r)&&this.props.adminMode&&this.props.pageInfo.isEditing&&e.dataTransfer.setData("media-drag","true")};onLoad=e=>{this.setState(r=>e&&(e.width!==r.nativeMediaDimensions.width||e.height!==r.nativeMediaDimensions.height)?{nativeMediaDimensions:{...e},loaded:!0}:{loaded:!0},()=>{this.onloadCallback&&this.onloadCallback(this.props.baseNode),this.props.itemLoad&&this.props.itemLoad(this.props.baseNode)})}};Ag.defaultProps={scale:void 0,"limit-by":void 0,"force-quick-view":!1,"disable-zoom":!1,"disable-scroll-animation":!1,width:void 0,height:void 0,hash:"placeholder",src:void 0,rotation:0,model:null,"image-fit":"fill","play-on":"click",autoplay:!1,muted:!1,loop:!1,"browser-default":!1,"playback-rate":1};mle=Ut(Ue((t,e)=>{let r=e["dynamic-hash"]||e.hash||null,i=r?nt.getMediaByHash(t)[r]:null;e.model&&(i=e.model);let n=e.poster||null,o=null,s;return e.posterModel?o=e.posterModel:n&&!n.includes?.(".")&&(o=nt.getMediaByHash(t)[n]||null),{posterModel:o,model:i,isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,imageSettings:{limit_by:"width",scale:"100%",...t.siteDesign.images}}},null)(Ag)),gle=["itemResize","itemLoad","itemDragStart","model","dynamic-hash","dynamic-filetype","dynamic-src","rotation","limit-by","disable-zoom","disable-scroll-animation","scale","hash","src","force-visible","alt","href","rel","target","tag-text","autoplay","muted","loop","poster","play","browser-default","playback-rate","image-fit","width","height"];sr(mle,"media-item",gle)});var vle,Vu,Tg=V(()=>{vle=ye(Pe(),1);Be();Vu=(t,e,r)=>{let i=(pe?1:window.devicePixelRatio)>1,n=r/t-e*((t-1)/t),o=[],s=i?Math.round(e*2)/2:Math.round(e);for(let a=0;a<t;a++){let l={left:n*a+e*a,right:n*a+e*a+n};a<t-1?l.right=i?Math.round(l.right*2)/2:Math.round(l.right):l.right=r,a>0&&(l.left=o[a-1].right+s),o.push(l)}return{columnAndGutterMap:o,columnWidth:n,gutterPixelWidth:s,halfPixels:i}}});var zOe,C1,_3,E3=V(()=>{ke();zOe=ye(Pe(),1);Bt();Fu();fe();C1=class extends me{constructor(e){super(e)}render(e,r){let{galleryInstance:i,"vertical-align":n}=e,o=!!e?.["blog-gallery"],s=o?!0:!!this.props.disableResize,a=o?!0:!!e?.["disable-button"];return S(Ro,{...e,disabledFigureOptions:["scale"],gallerySpecificAttributes:this.props.gallerySpecificAttributes,mediaItemEditorInfo:{disableResize:s,disableButton:a,afterScaleChange:this.afterScaleChange,beforeScaleChange:this.spanResize,whileScaleChange:this.spanResize},galleryInstance:i,onCleanUp:(l,p,f,d,m,g)=>{f.forEach(v=>{v.getAttribute("grid-vertical-align")===n&&v.removeAttribute("grid-vertical-align"),v.getAttribute("grid-span")===1&&v.removeAttribute("grid-span")}),p.forEach(v=>{v&&(v.classList.remove("last-column"),v.classList.remove("last-row"),v.classList.remove("orphaned-item"))}),this.props.onCleanUp&&this.props.onCleanUp(l,p,f,d,m,g)}})}spanResize=(e,r)=>{let i=this.convertWidthToSpans(r);return{...r,displayScale:i>1?i+" columns":i+" column"}};afterScaleChange=(e,r)=>{let i=this.convertWidthToSpans(r);i===1?e.removeAttribute("grid-span"):e.setAttribute("grid-span",i),this.props.galleryComponent.onItemResize()};convertWidthToSpans=e=>{let{columnAndGutterMap:r}=this.props,i=r.findIndex((n,o)=>{let s=r[o+1]?.left||9e9,a=n.right-n.left;return e.width>=n.left+a*.5&&e.width<=s+a*.5})+1;return Math.max(1,i)}},_3=C1});var Mg,ro,Rg,P1,kg=V(()=>{ke();Ye();ft();na();Bu();Be();Tg();zu();zr();Br();E3();Mg=ye(Pe(),1);Xr();fe();ro={name:"grid",displayName:"Grid",tagName:"GALLERY-GRID",disabledMediaItemOptions:["scale","limit-by"],mediaItemOptions:[{labelName:"Spans",name:"grid-span",type:"scrubber",allowUnclampedTextEntry:!1,value:1,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Vertical Align",name:"grid-vertical-align",type:"radio",value:"inherit",inheritsFrom:"vertical-align",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]}],options:[{labelName:"Columns",name:"columns",type:"scrubber",allowUnclampedTextEntry:!1,value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{vw:30,vh:30,vmax:30,vmin:30,rem:20,em:20,px:300,etc:100},step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Vertical Align",name:"vertical-align",type:"radio",value:"top",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{labelName:"Horizontal Align",name:"horizontal-align",type:"radio",value:"left",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]}],mobileOptions:[{labelName:"Columns",name:"mobile-columns",allowUnclampedTextEntry:!1,type:"scrubber",value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"mobile-gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Vertical Align",name:"mobile-vertical-align",type:"radio",value:"top",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{labelName:"Horizontal Align",name:"mobile-horizontal-align",type:"radio",value:"left",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]}]};ro.mediaItemDefaults=pt(ro.mediaItemOptions);ro.defaults=pt(ro.options);ro.mobileDefaults=pt(ro.mobileOptions);Rg=class extends me{constructor(e){super(e),this.state={isMobile:ot.data.mobile.active,sizeIncrement:0,elWidth:1e3,gutterWidth:0,gutterHeight:0,hasSizes:!1,renderLimit:250},this.uid=Mg.default.uniqueId(),this.paginationWatcherRef=xe(),this.paginationObserver=new IntersectionObserver(this.requestPagination,{root:this.props.scrollContext.scrollingElement===window?document:this.props.scrollContext.scrollingElement,rootMargin:screen.height*2+"px",threshold:[0,1]})}requestPagination=async e=>{if(this.isIntersecting=e[0].isIntersecting,!(this.isPaginating||this.state.renderLimit>=this.getMediaItems().length)){for(this.isPaginating=!0;this.isIntersecting;){let r=this.state.renderLimit+100;if(this.setState({renderLimit:r}),r>=this.getMediaItems().length)break;await new Promise(i=>setTimeout(i,250))}this.isPaginating=!1}};getMediaItems(){return Array.from(this.props.baseNode.children).filter(e=>e.nodeName=="MEDIA-ITEM")}render(e,r){let{adminMode:i,baseNode:n,pageInfo:o}=e,{isMobile:s,gutterWidth:a,gutterHeight:l,hasSizes:p}=r,{elWidth:f}=r;p||(f=this.props.baseNode.offsetWidth);let d=this.state.isMobile&&this.props["mobile-vertical-align"]!==void 0?this.props["mobile-vertical-align"]:this.props["vertical-align"];this.props.verticalAlign&&(d=this.props.verticalAlign);let m=this.state.isMobile&&this.props["mobile-columns"]!==void 0?this.props["mobile-columns"]:this.props.columns;m=Math.max(1,parseInt(m))||1;let v=(this.state.isMobile&&this.props["mobile-gutter"]!==void 0?this.props["mobile-gutter"]:this.props.gutter).split(" "),x=(v.length>1,v[0]);x=lr(x,"rem"),x[1]=="rem"&&s&&(x=["","calc( var(--mobile-padding-offset, 1) * "+x.join("")+" )"]);let _=v.length>1?v[1]:v[0];_=lr(_,"rem"),_[1]=="rem"&&s&&(_=["","calc( var(--mobile-padding-offset, 1) * "+_.join("")+" )"]);let{columnAndGutterMap:E,columnWidth:O,gutterPixelWidth:L}=Vu(m,a,f),I=this.getMediaItems(),D=[],R=0,W=0,N=s&&!isNaN(parseInt(this.props["mobile-columns"]))&&parseInt(this.props["mobile-columns"])!==parseInt(this.props.columns);I.forEach((X,se)=>{if(se>this.state.renderLimit)return;D[R]||(D[R]=[]);let ee=N?1:parseInt(X.getAttribute("grid-span"))||1;W%m+ee>m&&(ee=m-W%m);let Z=X.getAttribute("grid-vertical-align")||null;D[R].push({index:se,spans:ee,hasOrphans:!1,verticalAlign:Z,el:X}),W=W+ee,W%m==0&&R++,W%m!=0&&se==I.length-1&&(D[D.length-1].hasOrphans=!0)});let z=I.length%m,$=[],q=[];D.forEach((X,se)=>{let ee=Mg.default.sumBy(X,he=>he.spans),Z=0,Y=[],te=0,re=0,ie=X.map((he,de)=>{let we=he.spans,Re=he.el._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0,horizPadSize:0,vertPadSize:0},mediaItemSize:{width:0,height:0,padSize:0,vertPadSize:0,horizPadSize:0}},ve=Z,Ae=Z+we+-1,Ve=O*we+a*(we-1),Me=(Ve+-Re.mediaItemSize.horizPadSize+-Re.mediaSize.horizPadSize)/Re.width||1,Le=Math.round(Re.height*Me+Re.mediaSize.vertPadSize)||0;Ve=E[Ae].right-E[ve].left,Z+=we,te=Math.max(te,Le);let We={},Fe="";return Ve<0?(Le=0,L=0,Fe+=`
					--grid-width: 0px;
					--grid-gutter-width: ${Ve+L}px;`):Fe+=` --grid-width: ${Ve}px;`,We.orphanedItem=X.hasOrphans,de===X.length-1?(We.lastColumn=!0,he.index<I.length-1&&(Fe=` --grid-width: ${f-re}px;`),re=0):(de==0&&(We.firstColumn=!0),re=re+Ve+a),se==D.length-1&&(We.lastRow=!0),We.gridItemPixelHeight=Le,We.gridItemPixelWidth=Ve,We.gridWidthStyle=Fe,We});var ae=Mg.default.maxBy(ie,he=>he.gridItemPixelHeight);te=ae.gridItemPixelHeight,X.forEach((he,de)=>{let we=ie[de],Re=0,ve=d;switch(he.verticalAlign){case"top":case"center":case"bottom":ve=he.verticalAlign;break}switch(ve){case"top":Re=0;break;case"center":Re=(te-we.gridItemPixelHeight)*.5;break;case"bottom":Re=te-we.gridItemPixelHeight;break}let Ae=`margin-top: ${Re}px; --frame-padding: ${we.gridItemPixelHeight}px; ${we.gridWidthStyle}`,Ve=se==0?" first-row":we.lastRow?" last-row":"",Me=we.firstColumn?" first-in-row":we.lastColumn?" last-in-row":"",Le="row-"+se+"-"+he.index+Ve+Me;$.push({slot:Le,itemResize:this.onItemResize,"limit-by":null}),q.push({slot:Le,style:Ae,itemStatuses:we})})}),I.forEach((X,se)=>{let ee=$[se]||{slot:null},Z=X._props||{};ko(X,{...Z,...ee},Z,!1,!1)});let J=[];return D.forEach((X,se)=>{J.push(S("div",{part:se==0?"first-row":se===D.length-1?"last-row":"row",className:`row ${X.hasOrphans?"has-orphans":""}`,children:X.map(ee=>S("slot",{name:$[ee.index].slot},"slot-"+se+"-"+ee.index))},"row-"+se))}),S(ce,{children:[this.props.children,it(S(ce,{children:[S("style",{children:`
						:host {
							display: block;
							width: var(--resize-parent-width, 100%);
							max-width: 100%;
							position: relative;							
			 				--grid-gutter-width: ${L}px;
							--grid-gutter-height: ${l}px;
							--grid-columns: ${m};
							margin-top: calc(var(--gutter-expand, 0) * ${l}px );	
						}				

						* {
							box-sizing: border-box;
						}

						${q.map((X,se)=>`::slotted(media-item[slot="${X.slot}"]) {
								${X.style}
								${X.itemStatuses.lastColumn&&!X.itemStatuses.orphanedItem?"flex-grow: 1; --object-fit: fill;":""}
								${X.itemStatuses.lastColumn?"":"margin-right: var(--grid-gutter-width);"}
								${X.itemStatuses.lastRow?"":"margin-bottom: var(--grid-gutter-height);"}
							} `).join("")}
								

						.row {
							max-width: ${f}px;
						    align-items: flex-start;
						    justify-content: flex-start;
							position: relative;
							display: flex;
							flex-direction: row;
							flex-wrap: nowrap;					
							width: 100%;
							clear: both;
						}				
		
						.row.has-orphans {
						    justify-content: flex-start;
						}

						${s&&e["mobile-horizontal-align"]?`
							:host([mobile-horizontal-align="left"]) .row.has-orphans {
								justify-content: flex-start;
							}
			
							:host([mobile-horizontal-align="center"]) .row.has-orphans {
								justify-content: center;
							}
			
							:host([mobile-horizontal-align="right"]) .row.has-orphans {
								justify-content: flex-end;
							}
						`:`
							:host([horizontal-align="left"]) .row.has-orphans {
								justify-content: flex-start;
							}
			
							:host([horizontal-align="center"]) .row.has-orphans {
								justify-content: center;
							}
			
							:host([horizontal-align="right"]) .row.has-orphans {
								justify-content: flex-end;
							}
						`}
		
						:host([hidden]) {
							display: none;
						}
		
						::slotted(media-item) {
							${i?"pointer-events: auto;":""}
							position: relative;
						    display: flex;
						    max-width: 100%;   
						    flex-grow: 0;
						    flex-shrink: 0;
						    flex-basis: var(--grid-width);
						    width: var(--grid-width);
						}
		

		
					`}),S(Yi,{values:{elWidth:"100%",gutterWidth:x.join(""),gutterHeight:_.join("")},onResize:this.onResize}),i&&o.isEditing&&!pe&&S(_3,{...e,disableResize:N,gallerySpecificAttributes:["grid-span","grid-vertical-align"],galleryInstance:n,galleryComponent:this,columnAndGutterMap:E}),J,S("div",{ref:this.paginationWatcherRef,class:"pagination-watcher"})]}),this.props.baseNode.shadowRoot)]})}onMobileChange=e=>{this.setState({isMobile:e})};componentDidMount(){ot.on("mobile-change",this.onMobileChange),this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.observe(this.paginationWatcherRef.current)}componentWillUnmount(){ot.off("mobile-change",this.onMobileChange),this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.unobserve(this.paginationWatcherRef.current)}onItemResize=e=>{this.setState(r=>({sizeIncrement:r.sizeIncrement+1}))};onResize=(e,r)=>{this.setState(i=>{let n={...i};return n[e]=r,n.hasSizes=!0,n})}};Rg.defaultProps={"show-tags":!0,"show-title":!0,columns:ro.defaults.columns.value,gutter:"2rem","vertical-align":ro.defaults["vertical-align"].value,"horizontal-align":ro.defaults["horizontal-align"].value};P1=Ut(No(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Rg)));sr(P1,"gallery-grid",["thumbnail-index","thumbnail-index-metadata","links-filter-index","show-tags","show-title","columns","gutter","mobile-columns","mobile-gutter","vertical-align","horizontal-align","mobile-horizontal-align","mobile-vertical-align"])});var lDe,I1,C3,P3=V(()=>{ke();lDe=ye(Pe(),1);Bt();Fu();fe();I1=class extends me{constructor(e){super(e)}render(e,r){let{galleryInstance:i,gutterWidth:n,elWidth:o,elHeight:s,disabledAttributes:a}=e;return S(Ro,{...e,dragIndicationType:"columns",gallerySpecificAttributes:this.props.gallerySpecificAttributes,galleryInstance:i,mediaItemEditorInfo:{disableResize:this.props.disableResize,disableButton:!1,afterScaleChange:this.afterScaleChange,beforeScaleChange:this.spanResize,whileScaleChange:this.spanResize},disabledAttributes:a})}spanResize=(e,r)=>{let i=this.convertWidthToSpans(r);return{...r,displayScale:i>1?i+" columns":i+" column"}};afterScaleChange=(e,r)=>{let i=this.convertWidthToSpans(r);i===1?e.removeAttribute("columnized-span"):e.setAttribute("columnized-span",i),this.props.galleryComponent.onItemResize()};convertWidthToSpans=e=>{let{columnAndGutterMap:r}=this.props,i=r.findIndex((n,o)=>{let s=r[o+1]?.left||9e9,a=n.right-n.left;return e.width>=n.left+a*.5&&e.width<=s+a*.5})+1;return Math.max(1,i)}},C3=I1});var A1,vs,Ng,yle,T1=V(()=>{ke();Ye();ft();na();Be();Tg();zu();Bu();zr();P3();Br();A1=ye(Pe(),1);Xr();fe();vs={name:"columnized",displayName:"Columnized",tagName:"GALLERY-COLUMNIZED",disabledMediaItemOptions:["scale","limit-by"],mediaItemOptions:[{labelName:"Column Span",name:"columnized-span",allowUnclampedTextEntry:!1,type:"scrubber",value:1,min:1,max:11,step:1,numberOnlyMode:!0}],options:[{labelName:"Columns",name:"columns",type:"scrubber",allowUnclampedTextEntry:!1,value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{vw:30,vh:30,vmax:30,vmin:30,rem:20,em:20,px:300,etc:100},step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]}],mobileOptions:[{labelName:"Columns",name:"mobile-columns",allowUnclampedTextEntry:!1,type:"scrubber",value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"mobile-gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]}]};vs.mediaItemDefaults=pt(vs.mediaItemOptions);vs.defaults=pt(vs.options);vs.mobileDefaults=pt(vs.mobileOptions);Ng=class extends me{constructor(e){super(e),this.state={elWidth:1e3,gutterWidth:0,gutterHeight:0,isMobile:ot.data.mobile.active,sizeIncrement:0,hasSizes:!1}}render(e,r){let{gutterWidth:i,gutterHeight:n,isMobile:o,hasSizes:s}=r,{baseNode:a,adminMode:l,pageInfo:p}=e,{elWidth:f}=r;s||(f=this.props.baseNode.offsetWidth);let m=(this.state.isMobile&&this.props["mobile-gutter"]!==void 0?this.props["mobile-gutter"]:this.props.gutter).split(" "),g=(m.length>1,m[0]);g.includes("rem")&&o&&(g="calc( var(--mobile-padding-offset, 1) * "+g+" )");let v=m.length>1?m[1]:m[0];v.includes("rem")&&o&&(v="calc( var(--mobile-padding-offset, 1) * "+v+" )");let x=this.state.isMobile&&this.props["mobile-columns"]!==void 0?this.props["mobile-columns"]:this.props.columns;x=Math.max(1,parseInt(x))||1;let{columnAndGutterMap:_,columnWidth:E,gutterPixelWidth:O,halfPixels:L}=Vu(x,i,f),I=Array.from(a.children).filter(Z=>Z.tagName=="MEDIA-ITEM"),D=[],R=[],W=[],N=[],z=0;z=(f-(x-1)*i)/x;for(let Z=0;Z<Math.min(I.length,x);Z++)D[Z]=[],N[Z]=[];for(let Z=0;Z<x;Z++)R[Z]={height:0,marginTop:-i,index:Z};let $=!0,q=0,J=0;for(q=0;q<12;){let Z=parseInt(I[J]?.getAttribute("columnized-span"))||1;if(q=q+Z,q>=x){q=x,$=!1;break}J++}let X=[],se=o&&!isNaN(parseInt(this.props["mobile-columns"]))&&parseInt(this.props["mobile-columns"])!==parseInt(this.props.columns),ee=[];I.forEach((Z,Y)=>{let te=se?1:Math.min(parseInt(Z.getAttribute("columnized-span"))||1,x);te=Math.min(te,I.length);let re=-1,ie=A1.default.minBy(R,Je=>{re++;let Et=R.slice(re+1,re+te).map(Xe=>Xe.height);if(Et.length+1<te)return 9e9;let kt=Je.height==0?0:Math.abs((re+(re%2==0?.25:.75))*2-x);return A1.default.mean([Je.height,...Et])+kt}),ae=`column-${ie.index}-slot-${Y}`,he=ie.height;ie.index+te>x&&(te=x-ie.index),W[ie.index]=Y;let de=0,we=null,Re=E*te+i*(te-1),ve=Z._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};de=ve.mediaItemSize.height+ve.mediaItemSize.padSize;let Ae=ie.index,Ve=ie.index+te+-1;Re=_[Ve].right-_[Ae].left,Re=Math.max(0,Re);let Me=(Re+-ve.mediaItemSize.padSize+-ve.mediaSize.padSize)/ve.width;we=L?Math.round((ve.height*Me+ve.mediaSize.padSize)*2)/2||0:Math.round(ve.height*Me+ve.mediaSize.padSize)||0;let Le=ie,We=ie.height;for(let Je=1;Je<te;Je++){let Et=ie.index+Je;R[Et].height>=We&&(Le=R[Et],We=R[Et].height)}let Fe=Le.height,st=Le.height+ve.mediaItemSize.height+ve.mediaItemSize.padSize+i;for(let Je=0;Je<te;Je++){let Et=ie.index+Je;Je===0?(R[Et].marginTop=R[Et].marginTop+(Fe-R[Et].height),R[Et].height=st):(R[Et].marginTop=R[Et].marginTop+(st-R[Et].height),R[Et].height=st)}let Ze={},et=R[ie.index].marginTop;R[ie.index].marginTop=0,Ze.styleString="",et!==n&&(Ze.styleString+=` --column-gutter-height: ${et+n}px;`),te>1&&(Ze.styleString+=` --resize-parent-width:${Re}px; min-width: ${Re}px;`),we!==null&&(Ze.styleString+=` --frame-padding: ${we}px;`),he===0&&(Ze.firstColumnItem=!0),Ze.slotName=ae,ee.push(Ze),D[ie.index]||(D[ie.index]=[]),D[ie.index].push(S("slot",{name:ae},ae)),X.push({slot:ae})});for(let Z=0;Z<q;Z++)D[Z]||(D[Z]=[]);return W.forEach(Z=>{ee[Z].lastInColumn=!0}),I.forEach((Z,Y)=>{let te=X[Y]||{};te.itemResize=this.onItemResize;let re=Z._props||{};ko(Z,{...re,...te},re,!1,!1)}),S(ce,{children:[this.props.children,it(S(ce,{children:[S("style",{children:`
				:host {
					width: var(--resize-parent-width, 100%);
					max-width: 100%;
					${$?"display: block;":`display: flex;
					    flex-direction: row;
					    flex-wrap: wrap;
					    align-content: flex-start;
					    justify-content: center;`}
				    position: relative;					
					--column-gutter-width: ${O}px;
					--column-gutter-height: ${n}px;
					margin-top: calc(var(--gutter-expand, 0) * ${n}px);
				}

				${ee.map((Z,Y)=>`::slotted(media-item[slot="${Z.slotName}"]){
						margin-top: ${Z.firstColumnItem?"0;":"var(--column-gutter-height, 0px);"}
						${Z.lastInColumn?`
						    flex-grow: 1;
						    flex-shrink: 1;
						    flex-basis: ${x===1?"100%":0};						
						`:""}
						${Z.styleString}
					} `).join("")}

				* {
					box-sizing: border-box;
				}	

				:host[hidden] {
					display:none;
				}

				:host .columns-column {
					${$?`
						display: inline-flex;
						vertical-align: top;
					`:`
					    max-width: ${Math.ceil(f/x)}px;
					`}
					min-height: 10px;			
					flex-grow: 0;
					flex-shrink: 0;
				}

				:host .columns-column.last-column {
				    flex-grow: 1;
				    flex-shrink: 1;
				    flex-basis: ${x===1?"100%":0};
				}
				

				:host .columns-column:not(:last-child){
				    margin-right: var(--column-gutter-width, 0px);
				}

				::slotted(media-item) {
					position: relative;
				    width: 100%;
				    max-width: none;
				    display: flex;
				}




				`}),S(Yi,{values:{gutterWidth:g,gutterHeight:v,elWidth:"100%"},onResize:this.onResize}),l&&p.isEditing&&!pe&&S(C3,{...this.props,disableResize:se,isMobile:o,gallerySpecificAttributes:["columnized-span"],columnAndGutterMap:_,galleryInstance:a,galleryComponent:this}),D.map((Z,Y)=>{let te=_[Y];return S("div",{className:`columns-column${Y===x-1?" last-column":""}`,style:{width:te.right-te.left+"px"},children:Z},`columns-column-${Y}`)})]}),this.props.baseNode.shadowRoot)]})}componentDidMount(){ot.on("mobile-change",this.onMobileChange)}componentWillUnmount(){ot.off("mobile-change",this.onMobileChange)}onMobileChange=e=>{this.setState({isMobile:e})};onResize=(e,r)=>{this.setState(i=>{let n={...i};return n[e]=r,n.hasSizes=!0,n})};onItemResize=(e,r)=>{this.setState(i=>({sizeIncrement:i.sizeIncrement+1}))}};Ng.defaultProps={"show-tags":!0,"show-title":!0,columns:vs.defaults.columns.value,gutter:"2rem","mobile-gutter":"2rem"};yle=Ut(No(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Ng)));sr(yle,"gallery-columnized",["thumbnail-index","links-filter-index","show-tags","show-title","thumbnail-index-metadata","columns","gutter","mobile-columns","mobile-gutter"],{renderIntoShadow:!0})});var Ji,M1,I3,A3=V(()=>{ke();Ji=ye(Pe(),1);Fu();qr();Bt();fe();M1=class extends me{constructor(e){super(e),this.state={pauseRealignment:!1,waitingForRealignment:!1,currentZoom:100,currentHorizontalShift:0,transform:{x:0,y:0},previewShifts:[],previewingTransform:!1,dragStartPosition:{x:0,y:0},scrollDelta:{x:0,y:0},dragDelta:{x:0,y:0},initialPosition:{x:0,y:0},ghostRect:{significantShift:!1,width:0,height:0,x:0,y:0},minHeight:0,overrideHeight:!1,dragSrcIndex:-1,UIWindow:!1,draggedItemIndex:-1,isDragging:!1,showDropTarget:!1,breakOutOfGallery:!1,draggedMediaItem:null,timer:0},this.draggedItem=xe(),this.dragGhostRef=xe(),this.lastPosition=null,this.debouncedCommitTransform=Ji.default.debounce(this.commitTransform,500)}render(e,r){let{showDropTarget:i,draggedMediaItem:n,isDragging:o,dragDelta:s,draggedItemIndex:a,initialPosition:l,dragSrcIndex:p,ghostRect:f}=r,{galleryInstance:d}=e;return S(ce,{children:[S("style",{id:"freeform-editor",children:[p>-1&&o?`
			::slotted(media-item:nth-child(${p+1})){
				pointer-events:none;
				opacity: 0;
			}

			.drag-ghost {
				position: absolute;
				top: 0;
				left: 0;
				z-index: 1001;	
				pointer-events: none;
				outline: 1px solid #ccc;
			}

			.drag-ghost.snapping {
				outline: 1px solid var(--baseColor-accent);
			}

			.drag-ghost img {
				position: absolute;
				inset: 0;
				width: 100%;
				height: 100%;
				opacity: 0.5;
				transition: none;
				object-fit: cover;
				transform:translateZ(0);
			}

			`:`

			#freeform-holder {
				transform: scale(${this.state.currentZoom}%) translateX(${this.state.currentHorizontalShift}%);
				transform-origin: center top;
			}

			`,this.state.overrideHeight?`
				:host {
					min-height: ${this.state.minHeight}px;
				}
			`:"",this.state.previewingTransform?this.state.previewShifts.map(m=>`::slotted(media-item[slot="${m.slot}"]){
						--base-translate: translate(${m.x}px , ${m.y}px)!important;
					} `):""]}),S(Ro,{...e,gallerySpecificAttributes:this.props.gallerySpecificAttributes,galleryInstance:d,mediaItemEditorInfo:{disableResize:!1,disableButton:!1,afterScaleChange:this.afterScaleChange,whileScaleChange:this.whileScaling,beforeScaleChange:this.beforeScaleChange},onScrollWhileHovered:this.onScrollWhileHovered,onUIWindowSet:this.getUIWindow,onUIWindowRelease:this.releaseUIWindow,disableDragOver:!0,onCleanUp:this.onCleanUp}),S("div",{className:`drag-ghost ${f.significantShift?"snapping":""}`,style:{display:o&&f.width>0&&f.height>0?"block":"none",transform:`translate3d(${f.x}px, ${f.y}px, 1001px)`,width:f.width+"px",height:f.height+"px"},dangerouslySetInnerHTML:{__html:""},ref:this.dragGhostRef})]})}onScrollWhileHovered=e=>{this.setState(r=>r.isDragging?{scrollDelta:{x:0,y:r.scrollDelta.y+e}}:null)};getUIWindow=e=>{this.setState({UIWindow:e})};releaseUIWindow=e=>{this.setState({UIWindow:!1})};beforeScaleChange=(e,r)=>{let i=e.hasAttribute("freeform-scale")?e.getAttribute("freeform-scale"):20;return{...r,scaleArray:[parseFloat(i),"%"],scale:i+""}};whileScaling=(e,r)=>{let{magneticSnap:i,magneticSnapMargin:n}=this.props,o=e._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};if(!i)return r;let{width:s,height:a,scaleArray:l,overSize:p,atLimit:f,scale:d}=r,{elWidth:m,attributeMap:g}=this.props;m=m+-o.mediaItemSize.padSize+-o.mediaSize.padSize;let v=n*.01*m,x=s/a,_={width:!1,height:!1},E=Array.from(this.props.galleryInstance.children).filter(R=>R.tagName==="MEDIA-ITEM").indexOf(e),O=g[E],L={x1:O.xPx,y1:O.yPx,x2:O.xPx+s,y2:O.yPx+a},I={top:!0,left:!0,right:!1,bottom:!1},D=this.calculateMagnetism(e,L,I);return Math.abs(D.x)<Math.abs(D.y)&&Math.abs(D.x)>.1?_.width=!0:Math.abs(D.y)>.1&&(_.height=!0),Math.abs(D.x)>15&&(_.width=!1,D.x=0),Math.abs(D.y)>15&&(_.height=!1,D.y=0),_.width?(s=s+D.x,a=s/x):_.height&&(a=a+D.y,s=a*x),l[0]=s/m*100,{...r,scale:l.join(""),width:s,height:a,scaleArray:l,overSize:p,atLimit:f}};afterScaleChange=(e,r)=>{let{elWidth:i}=this.props,n=e._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};i=i+-n.mediaItemSize.padSize+-n.mediaSize.padSize;let o=(100*(r.width/i)).toFixed(2);e.setAttribute("limit-by","width"),e.setAttribute("scale",o),e.setAttribute("freeform-scale",o),this.props.galleryComponent.onItemResize()};onDragStart=(e,r,i)=>{let n=i.draggedMediaItems?.find(v=>this.props.galleryInstance.contains(v))||null;if(!n){this.setState({draggedItemIsInsideGallery:!1});return}let{attributeMap:o,elWidth:s}=this.props;this.draggedItem.current=n,Array.from(this.dragGhostRef.current?.children).forEach(v=>{v.remove()});let a=this.draggedItem.current?.shadowRoot?.querySelector('.sizing-frame [part="media"]'),l=Array.from(this.props.galleryInstance.children),p=l.indexOf(n),f=l.filter(v=>v.tagName==="MEDIA-ITEM").indexOf(n),d=o[f],m={x:d?.xPx??0,y:d?.yPx??0},g=this.props.galleryInstance.offsetHeight;this.setState(v=>(Ce.globalDragEventController.setCustomDropTarget(this.props.galleryInstance),{dragDelta:{x:0,y:0},draggedItemIsInsideGallery:!0,initialPosition:m,dragStartPosition:{x:i.cursorPosition.x,y:i.cursorPosition.y},scrollDelta:{x:0,y:0},ghostRect:{x:0,y:0,width:0,height:0},dragSrcIndex:p,overrideHeight:!0,minHeight:g,isDragging:!0}))};onDragOver=(e,r,i)=>{if(this.ticking)return;this.ticking=!0,this.dragFrame=requestAnimationFrame(()=>{this.ticking=!1});let{elWidth:n,elHeight:o,mediaItems:s,magneticSnapMargin:a,magneticSnap:l,attributeArray:p}=this.props,f=i.draggedMediaItems.length>0,d=this.props.galleryInstance.contains(i.dropTarget),m=this.props.galleryInstance===i.customDropTarget;i.inAdmin||i.fromOutside||!(d||this.state.draggedItemIsInsideGallery)?Ce.globalDragEventController.releaseCustomDropTarget(this.props.galleryInstance):this.setState(g=>{if(Ce.globalDragEventController.setCustomDropTarget(this.props.galleryInstance),g.isDragging){let v={x:i.cursorPosition.x+-g.dragStartPosition.x+g.scrollDelta.x,y:i.cursorPosition.y+-g.dragStartPosition.y+g.scrollDelta.y},x={x:g.initialPosition.x+v.x,y:g.initialPosition.y+v.y};this.lastPosition||(this.lastPosition=x);let _={width:0,height:0,x1:x.x,x2:x.x,y1:x.y,y2:x.y};if(this.draggedItem.current){let I=this.draggedItem.current._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};_.x2=_.x1+I.mediaItemSize.padSize+I.mediaSize.padSize+I.mediaItemSize.width,_.y2=_.y1+I.mediaItemSize.padSize+I.mediaItemSize.height,_.width=I.mediaItemSize.padSize+I.mediaSize.padSize+I.mediaItemSize.width,_.height=I.mediaItemSize.padSize+I.mediaItemSize.height}let E=l?this.calculateMagnetism(this.draggedItem.current,_):{x:0,y:0},O=a*.01*n;Math.abs(E.x)>Math.max(O,6)?E.x=0:E.x!==0&&(x.x=(x.x+E.x)*.5+this.lastPosition.x*.5),Math.abs(E.y)>Math.max(O,6)?E.y=0:E.y!==0&&(x.y=(x.y+E.y)*.5+this.lastPosition.y*.5);let L=Math.abs(E.x)>1||Math.abs(E.y)>1;return this.lastPosition=x,{ghostRect:{significantShift:L,x:x.x,y:x.y,width:_.width,height:_.height},dragDelta:{x:v.x+E.x,y:v.y+E.y}}}else{let v=this.props.galleryInstance.getBoundingClientRect(),x={x:i.cursorPosition.x-v.left,y:i.cursorPosition.y-v.top};return this.draggedItem.current=i.draggedMediaItems[0],{dragDelta:{x:0,y:0},scrollDelta:{x:0,y:0},initialPosition:x,dragStartPosition:{x:i.cursorPosition.x,y:i.cursorPosition.y},ghostRect:{x:0,y:0,width:0,height:0},isDragging:!0,dragSrcIndex:-1}}})};calculateMagnetism=(e,r,i={top:!1,right:!1,bottom:!1,left:!1})=>{let{mediaItems:n,galleryInstance:o,elWidth:s,elHeight:a,magneticSnapMargin:l,attributeMap:p}=this.props,f=Math.round(l*.01*s*32)/32,d=[],m=[],g=[],v={};n.forEach((N,z)=>{let $=p[z];if(N===e)return;g.length=0;let q=N._size;v.x1=$.xPx,v.y1=$.yPx,v.x2=q.mediaItemSize.width+q.mediaItemSize.padSize+v.x1,v.y2=q.mediaItemSize.height+q.mediaItemSize.padSize+v.y1,r.x1<v.x2+f*2&&r.x2>v.x1-f*2&&(v.x2<r.x1||v.x1>r.x2?(g.push(v.y1),g.push(v.y2)):(g.push(v.y1-f),g.push(v.y2+f)),g.forEach(J=>{d.indexOf(J)===-1&&d.push(J)})),g.length=0,r.y1<v.y2+f*2&&r.y2>v.y1-f*2&&(v.y2<r.y1||v.y1>r.y2?(g.push(v.x1),g.push(v.x2)):(g.push(v.x1-f),g.push(v.x2+f)),g.forEach(J=>{m.indexOf(J)===-1&&m.push(J)}))}),d.indexOf(0)===-1&&d.push(0),d.indexOf(a)===-1&&d.push(a),m.indexOf(0)===-1&&m.push(0),m.indexOf(s)===-1&&m.push(s);let x=Ji.default.minBy(d,N=>Math.abs(N-r.y1)),_=Ji.default.minBy(d,N=>Math.abs(N-r.y2)),E=x-r.y1,O=_-r.y2,L=Ji.default.minBy(m,N=>Math.abs(N-r.x1)),I=Ji.default.minBy(m,N=>Math.abs(N-r.x2)),D=L-r.x1,R=I-r.x2;return{x:Ji.default.minBy([i.left?9e9:D,i.right?9e9:R],N=>N!==0?Math.abs(N):9e9),y:Ji.default.minBy([i.top?9e9:E,i.bottom?9e9:O],N=>N!==0?Math.abs(N):9e9)}};onDragDrop=(e,r,i)=>{this.setState({isDragging:!1},()=>{this.lastPosition=null,!i.inAdmin&&i.customDropTarget===this.props.galleryInstance&&CargoEditor?.mutationManager&&(CargoEditor.rangy.getSelection().removeAllRanges(),Ke.deactivateHoverElement(this.props.galleryInstance),CargoEditor.mutationManager.execute(()=>{let n=Array.from(this.props.galleryInstance.children).filter(f=>f.tagName==="MEDIA-ITEM"),o=Ji.default.sortBy(n,f=>parseFloat(f.getAttribute("freeform-y"))||0),s=(this.state.initialPosition.x+this.state.dragDelta.x)/this.props.elWidth*100,a=(this.state.initialPosition.y+this.state.dragDelta.y)/this.props.elWidth*100,l=this.draggedItem.current?.getAttribute("freeform-scale")||20,p=o.find(f=>parseFloat(f.getAttribute("freeform-y"))>a);i.draggedMediaItems.forEach((f,d)=>{f.setAttribute("freeform-z",n.length+200+d),f===this.draggedItem.current?(f.setAttribute("freeform-x",s),f.setAttribute("freeform-y",a)):(f.setAttribute("freeform-x",(s+d*5)%80),f.setAttribute("freeform-y",a+d*5)),f.hasAttribute("freeform-scale")||f.setAttribute("freeform-scale",l),this.props.galleryInstance.insertBefore(f,p),f.flushMutationQueue()}),this.stackZ(),this.centerY(),this.alignDomWithY(),this.props.galleryInstance._editorInterface.flushMutationQueue()}))}),this.unsetMinHeight()};unsetMinHeight=Ji.default.debounce(()=>{this.setState({overrideHeight:!1})},100);onDragEnd=(e,r,i)=>{this.setState({isDragging:!1},()=>{this.lastPosition=null}),this.unsetMinHeight()};onCleanUp=(e,r,i,n)=>{CargoEditor&&Object.keys(CargoEditor).length>0&&(!Ji.default.isEqual(e,r)||i.length>0)&&CargoEditor.mutationManager.execute(()=>{this.centerY(),this.alignDomWithY()}),this.props.onCleanUp&&this.props.onCleanUp(e,r,i,n)};stackZ=()=>{let e=Array.from(this.props.galleryInstance.children).filter(i=>i.tagName==="MEDIA-ITEM");Ji.default.sortBy(e,i=>parseFloat(i.getAttribute("freeform-z"))||0).forEach((i,n)=>{i.setAttribute("freeform-z",n+1),i.flushMutationQueue()})};centerY=()=>{let e=Array.from(this.props.galleryInstance.children).filter(n=>n.tagName==="MEDIA-ITEM"),r=Ji.default.sortBy(e,n=>n.hasAttribute("freeform-y")?parseFloat(n.getAttribute("freeform-y")):0),i=r[0]?.hasAttribute("freeform-y")?parseFloat(r[0].getAttribute("freeform-y")):0;i!==0&&r.forEach((n,o)=>{let s=n.hasAttribute("freeform-y")?parseFloat(n.getAttribute("freeform-y")):i;n.setAttribute("freeform-y",s-i),n.flushMutationQueue()})};alignDomWithY=()=>{let e=Array.from(this.props.galleryInstance.children).filter(n=>n.tagName==="MEDIA-ITEM"),r=Ji.default.sortBy(e,n=>n.hasAttribute("freeform-y")?parseFloat(n.getAttribute("freeform-y")):0),i=e[0];r.forEach((n,o,s)=>{if(n!=i){for(let a=i,l=0;(a=a.nextElementSibling)&&l<s.length&&a!=n;l+=1);this.props.galleryInstance.insertBefore(n,i)}else i=n.nextElementSibling;n.flushMutationQueue()})};zoom=e=>{this.setState({currentZoom:e})};commitZoom=()=>{let{magneticSnapMargin:e,attributeMap:r}=this.props,{currentZoom:i}=this.state;Array.from(this.props.galleryInstance.children).filter(o=>o.tagName==="MEDIA-ITEM").forEach((o,s)=>{let a=r[s],l=a["freeform-x"],p=a["freeform-y"],f=a["freeform-scale"],d=Math.sqrt(Math.pow(l-50,2)+Math.pow(p,2)),m=Math.atan2(p,l-50);o.setAttribute("freeform-x",Math.cos(m)*d*(i*.01)+50),o.setAttribute("freeform-y",Math.sin(m)*d*(i*.01)+50*(i*.01)),o.setAttribute("freeform-scale",i*.01*f)});let n=Math.abs(i*.01*e);if(n>.1)for(;n>5;)n*=.5;this.centerY(),this.state.UIWindow?.onChange?.({zoom:100,"magnetic-snap-margin":n}),this.props.galleryInstance._editorInterface.flushMutationQueue(),this.props.galleryComponent.onItemResize()};previewTransform=(e,r)=>{let i=r.map(n=>{let o=(e.x+parseFloat(n.getAttribute("freeform-x")||0))*this.props.elWidth*.01,s=(e.y+parseFloat(n.getAttribute("freeform-y")||0))*this.props.elWidth*.01;return{slot:n.getAttribute("slot"),x:o,y:s}});this.setState({transform:e,previewShifts:i,previewingTransform:!0})};commitTransform=()=>{CargoEditor.mutationManager.execute(()=>{this.state.previewShifts.forEach(r=>{let i=this.props.galleryInstance.querySelector('[slot="'+r.slot+'"]');if(i){let n=parseFloat(i.getAttribute("freeform-x")||0),o=parseFloat(i.getAttribute("freeform-y")||0),s=Math.round((n+this.state.transform.x)*8)/8,a=Math.round((o+this.state.transform.y)*8)/8;i.setAttribute("freeform-x",s),i.setAttribute("freeform-y",a)}}),this.centerY(),this.alignDomWithY(),this.props.galleryInstance._editorInterface.flushMutationQueue()});let e=Array.from(this.props.galleryInstance.children).find(r=>r._editorInterface)?._editorInterface?.state?.UIWindow||null;e&&e.onChange({"shift-x":0,"shift-y":0}),this.setState({transform:{x:0,y:0},previewShifts:[],previewingTransform:!1},()=>{this.props.galleryInstance._editorInterface.flushMutationQueue(),this.props.galleryComponent.onItemResize()})};horizontalShift=e=>{this.setState({currentHorizontalShift:e})};commitHorizontalShift=()=>{let{currentHorizontalShift:e}=this.state,{attributeMap:r}=this.props;Array.from(this.props.galleryInstance.children).filter(i=>i.tagName==="MEDIA-ITEM").forEach((i,n)=>{let s=r[n]["freeform-x"];i.setAttribute("freeform-x",s+e)}),this.state.UIWindow?.onChange?.({horizontalShift:0}),this.props.galleryComponent.onItemResize()};fitToWidth=()=>{let{magneticSnapMargin:e,attributeMap:r}=this.props;CargoEditor.mutationManager.execute(()=>{let{elWidth:i,attributeMap:n}=this.props,o=Array.from(this.props.galleryInstance.children).filter(d=>d.tagName==="MEDIA-ITEM"),s=9e9,a=-9e9;o.forEach((d,m)=>{let g=n[m];s=Math.min(s,g["freeform-x"]),a=Math.max(a,g["freeform-x"]+g["freeform-scale"])});let l=100/(a-s),p=s,f=Math.abs(l*e);if(f>.1)for(;f>5;)f*=.5;o.forEach((d,m)=>{let g=n[m],v=g["freeform-scale"]||30,x=g["freeform-x"],_=g["freeform-y"],E=(x+-p)*l,O=_*l;d.setAttribute("freeform-x",E),d.setAttribute("freeform-y",O),d.setAttribute("freeform-scale",l*v)}),this.state.UIWindow?.onChange?.({zoom:100,"magnetic-snap-margin":f})})};componentDidMount(){Ce.globalDragEventController.on("dragstart",this.onDragStart),Ce.globalDragEventController.on("dragover",this.onDragOver),Ce.globalDragEventController.on("drop",this.onDragDrop),Ce.globalDragEventController.on("dragend",this.onDragEnd),this.props.galleryInstance._freeformEditor=this}componentWillUnmount(){this.debouncedCommitTransform.cancel(),this.unsetMinHeight.cancel(),cancelAnimationFrame(this.dragFrame),clearTimeout(this.breakOutTimer),delete this.props.galleryInstance._freeformEditor,Ce.globalDragEventController.off("dragstart",this.onDragStart),Ce.globalDragEventController.off("dragover",this.onDragOver),Ce.globalDragEventController.off("drop",this.onDragDrop),Ce.globalDragEventController.off("dragend",this.onDragEnd)}componentDidUpdate(e,r){r.pauseRealignment!==this.state.pauseRealignment&&!this.state.pauseRealignment&&this.state.waitingForRealignment}},I3=M1});var T3,Og,ble,ei,R1=V(()=>{ke();Ye();zu();na();kg();ft();Be();A3();Bu();zr();Br();T3=ye(Pe(),1);Xr();fe();Og=class extends me{constructor(e){super(e),this.state={elWidth:1e3,sizeIncrement:0},this.holderRef=xe()}render(e,r){let{adminMode:i,baseNode:n,pageInfo:o,"mobile-grid":s,"mobile-gutter":a,"mobile-columns":l,"mobile-horizontal-align":p,"mobile-vertical-align":f,"hover-pop":d,"magnetic-snap":m,"magnetic-snap-margin":g}=e;if(s&&e.isMobile)return this.renderedMobileGrid=!0,S(P1,{...this.props,columns:l,gutter:a,verticalAlign:f,horizontalAlign:p,baseNode:n,adminMode:i,pageInfo:o});let{elWidth:v}=r,x=0,_=0,E=0,O=Array.from(n.children).filter(z=>z.tagName=="MEDIA-ITEM"),L=[],I=[],D=-1;O.forEach((z,$)=>{let q=!1,J={"freeform-scale":parseFloat(z.getAttribute("freeform-scale")),"freeform-x":parseFloat(z.getAttribute("freeform-x")),"freeform-y":parseFloat(z.getAttribute("freeform-y")),"freeform-z":parseFloat(z.getAttribute("freeform-z"))},X={slot:"slot-"+$,itemResize:this.onItemResize};(isNaN(J["freeform-scale"])||isNaN(J["freeform-x"])||isNaN(J["freeform-y"])||isNaN(J["freeform-z"]))&&(q=!0,J["freeform-scale"]=Number.isNaN(parseFloat(z.getAttribute("freeform-scale")))?20:parseFloat(z.getAttribute("freeform-scale")),J["freeform-x"]=Number.isNaN(parseFloat(z.getAttribute("freeform-x")))?E*1.5:parseFloat(z.getAttribute("freeform-x")),J["freeform-x"]=J["freeform-x"]%80,J["freeform-y"]=Number.isNaN(parseFloat(z.getAttribute("freeform-y")))?E*1.5:parseFloat(z.getAttribute("freeform-y")),J["freeform-z"]=9999,E++);let se=parseFloat(J["freeform-x"])*.01*v,ee=parseFloat(J["freeform-y"])*.01*v,Z=parseInt(J["freeform-z"]),Y=parseFloat(J["freeform-scale"])*.01*v,te=Y,re=z._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};te=re.mediaItemSize.height+re.mediaItemSize.padSize,x=Math.max(ee+te,x),q||(D=$,_=x),J.widthPx=Y,J.xPx=se,J.yPx=ee,J.z=Z,J.writeAttributes=X,I.push(J)});let R=100*(_/v),W=0;for(var N=D+1;N<I.length;N++){let $=O[N]._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}},q=$.mediaItemSize.height+$.mediaItemSize.padSize,J=W*1.5+R,X=J*.01*v;I[N]["freeform-y"]=J,I[N].yPx=X,x=Math.max(I[N].yPx+q,x),W++}return I.forEach((z,$)=>{let q=O[$],{widthPx:J,yPx:X,xPx:se,z:ee,writeAttributes:Z}=z,Y=q._props||{};this.renderedMobileGrid&&(Y.itemResize=null),ko(q,{...Y,...Z},Y,!1,!1),L.push({width:J+"px","--base-translate":`translate(${Math.floor(se)}px, ${Math.floor(X)}px)`,"--z-index":ee+1})}),this.renderedMobileGrid=!1,S(ce,{children:[this.props.children,it(S(ce,{children:[S("style",{children:`
					* {
						box-sizing: border-box;
					}
									
					:host {
						width: var(--resize-parent-width, 100%);
						max-width: 100%;						
						height: ${x}px;
						display: block;
						position: relative;
						contain: layout;
					}
					
					::slotted(media-item) {
						max-width: none;
						position: absolute;
						top: 0;
						left: 0;
						display: flex;
						flex-shrink: 0;
						flex-grow: 0;
					}

					::slotted(media-item)::part(sizing-frame){
						pointer-events:auto;						
					}

					${L.map((z,$)=>`::slotted(media-item[slot="slot-${$}"]){
							width: ${z.width};
							--base-translate: ${z["--base-translate"]};
							--z-index: ${z["--z-index"]};
						} `).join("")}						
					
					${d?`::slotted(media-item:hover) {
						z-index: 99999;	
					}`:""}
					
					#freeform-holder {
						position: absolute;
						inset: 0;
					}
				`}),S(ce,{children:[S("div",{id:"freeform-holder",ref:this.holderRef,children:O.map((z,$)=>S("slot",{name:`slot-${$}`}))}),S(Yi,{values:{elWidth:"100%"},onResize:this.onResize})]}),i&&o.isEditing&&!pe&&S(I3,{...e,gallerySpecificAttributes:["freeform-x","freeform-y","freeform-z","freeform-scale"],galleryInstance:n,galleryComponent:this,mediaItemOptions:ei.mediaItemOptions,disabledMediaItemOptions:ei.disabledMediaItemOptions,mediaItems:O,elWidth:v,elHeight:x,hoverPop:d,magneticSnap:m,magneticSnapMargin:g,attributeMap:I})]}),this.props.baseNode.shadowRoot)]})}componentDidUpdate(e,r){this.props.isMobile!==e.isMobile&&this.onItemResize()}onResize=(e,r)=>{this.setState(i=>{let n={...i};return n[e]=r,n})};onItemResize=(e,r)=>{this.setState(i=>({sizeIncrement:i.sizeIncrement+1}))}},ble=Ut(No(Ue((t,e)=>({adminMode:t.frontendState.adminMode,isMobile:t.frontendState.isMobile}))(Og)));sr(ble,"gallery-freeform",["thumbnail-index","links-filter-index","show-tags","show-title","thumbnail-index-metadata","magnetic-snap","magnetic-snap-margin","hover-pop","mobile-grid","mobile-gutter","mobile-columns","mobile-horizontal-align","mobile-vertical-align"],{renderIntoShadow:!0});ei={name:"freeform",displayName:"Freeform",tagName:"GALLERY-FREEFORM",disabledMediaItemOptions:["limit-by","scale"],nonAttributeValues:["horizontalShift","fitToWidth","zoom","shift-x","shift-y"],mediaItemOptions:[{type:"group",className:"grid-columns-even",children:[{labelName:"X",name:"shift-x",defaultValue:0,type:"scrubber",value:0,step:.05,numberOnlyMode:!0,onScrubEnd:function(){this.state.galleryParent?._freeformEditor?.commitTransform()}},{labelName:"Y",name:"shift-y",defaultValue:0,type:"scrubber",value:0,step:.05,numberOnlyMode:!0,onScrubEnd:function(){this.state.galleryParent?._freeformEditor?.commitTransform()}}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Width",name:"freeform-scale",type:"scrubber",value:20,step:.05,min:0,max:150,numberOnlyMode:!0},{labelName:"Bring to Front",name:"freeform-z",type:"button",onClick:function(t){CargoEditor.mutationManager.execute(()=>{let e=this.state.selectedMediaItems[0].closest("gallery-freeform");if(e){e._freeformEditor?.stackZ();let r=T3.default.sortBy(Array.from(e.querySelectorAll("media-item")),n=>parseInt(n.getAttribute("freeform-z")));this.state.selectedMediaItems.forEach(n=>{n.setAttribute("freeform-z",1+r.length)}),e._freeformEditor?.stackZ()}})}}]}],mobileOptions:[{type:"group",className:"grid-columns-auto",children:[{labelName:"Use Grid",name:"mobile-grid",type:"check-box",value:!0}]},{type:"group",className:"grid-columns-auto",requirements:[{option:"mobile-grid",shouldBe:!1}],renderWhenDisabled:!1,children:[{labelName:"Magnetic Snap",name:"magnetic-snap-margin",type:"scrubber",value:0,step:.05,suffix:"%",max:10,min:0,numberOnlyMode:!0,requirements:[{option:"magnetic-snap",shouldBe:!0}],renderWhenDisabled:!0},{labelName:"",className:"square",name:"magnetic-snap",type:"check-box",value:!0}]},{type:"group",className:"grid-columns-even",requirements:[{option:"mobile-grid",shouldBe:!1}],renderWhenDisabled:!1,children:[{labelName:"Pop on Hover",name:"hover-pop",type:"check-box",value:!1},{labelName:"Fit to Width",name:"fitToWidth",type:"button",onClick:function(t){t.preventDefault();let e=this.state.activeGallery;e&&e._freeformEditor?.setState({currentZoom:100},()=>{e._freeformEditor?.fitToWidth()})}}]},{type:"group",className:"grid-columns-even",requirements:[{option:"mobile-grid",shouldBe:!1}],renderWhenDisabled:!1,children:[{labelName:"Shift",name:"horizontalShift",type:"scrubber",value:0,step:.05,suffix:"%",max:50,min:-50,numberOnlyMode:!0,onScrubEnd:function(t){this.state.activeGallery?._freeformEditor?.commitHorizontalShift()}},{labelName:"Zoom",name:"zoom",type:"scrubber",value:100,step:.1,suffix:"%",max:200,min:50,numberOnlyMode:!0,onScrubEnd:function(t){this.state.activeGallery?._freeformEditor?.commitZoom()}}]},{labelName:"Columns",name:"mobile-columns",type:"scrubber",value:2,min:1,max:12,step:1,allowUnclampedTextEntry:!1,numberOnlyMode:!0,requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1},{labelName:"Gutter",name:"mobile-gutter",type:"scrubber",addDefaultUnitToUnitlessNumber:!0,value:"2rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"],requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1},{labelName:"Vertical Align",name:"mobile-vertical-align",type:"radio",value:"top",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}],requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1},{labelName:"Horizontal Align",name:"mobile-horizontal-align",type:"radio",value:"left",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}],requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1}],options:[{type:"group",className:"grid-columns-auto",children:[{labelName:"Magnetic Snap",name:"magnetic-snap-margin",type:"scrubber",value:0,step:.05,suffix:"%",max:10,min:0,numberOnlyMode:!0,requirements:[{option:"magnetic-snap",shouldBe:!0}],renderWhenDisabled:!0},{labelName:"",className:"square",name:"magnetic-snap",type:"check-box",value:!0}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Pop on Hover",name:"hover-pop",type:"check-box",value:!1},{labelName:"Fit to Width",name:"fitToWidth",type:"button",onClick:function(t){t.preventDefault();let e=this.state.activeGallery;e&&e._freeformEditor?.setState({currentZoom:100},()=>{e._freeformEditor?.fitToWidth()})}}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Shift",name:"horizontalShift",type:"scrubber",value:0,step:.05,suffix:"%",max:50,min:-50,numberOnlyMode:!0,onScrubEnd:function(t){this.state?.activeGallery?._freeformEditor?.commitHorizontalShift()}},{labelName:"Zoom",name:"zoom",type:"scrubber",value:100,step:.1,suffix:"%",max:200,min:50,numberOnlyMode:!0,onScrubEnd:function(t){this.state?.activeGallery?._freeformEditor?.commitZoom()}}]}],onMediaItemChange:function(t){let e=this.state.galleryParent;return e?(Object.keys(t).forEach(r=>{let i=t[r];switch(r){case"shift-x":e._freeformEditor?.previewTransform({x:i,y:0},this.state.selectedMediaItems);break;case"shift-y":e._freeformEditor?.previewTransform({x:0,y:i},this.state.selectedMediaItems);break}}),{...t}):{...t}},onChange:function(t){let e=this.state.activeGallery;e&&Object.keys(t).forEach(r=>{let i=t[r];switch(r){case"horizontalShift":e._freeformEditor?.horizontalShift(i);break;case"zoom":e._freeformEditor?.zoom(i);break}})}};ei.mediaItemDefaults=pt(ei.mediaItemOptions);ei.defaults=pt(ei.options);ei.mobileDefaults=pt(ei.mobileOptions);Og.defaultProps={"show-tags":!0,"show-title":!0,"thumbnail-index":void 0,"magnetic-snap":ei.defaults["magnetic-snap"].value,"magnetic-snap-margin":ei.defaults["magnetic-snap-margin"].value,"hover-pop":ei.defaults["hover-pop"].value,"mobile-grid":ei.mobileDefaults["mobile-grid"].value,"mobile-gutter":ei.mobileDefaults["mobile-gutter"].value,"mobile-columns":ei.mobileDefaults["mobile-columns"].value,"mobile-horizontal-align":ei.mobileDefaults["mobile-horizontal-align"].value,"mobile-vertical-align":ei.mobileDefaults["mobile-vertical-align"].value}});var M3,k1,R3,k3=V(()=>{ke();M3=ye(Pe(),1);Bt();qr();Fu();fe();k1=class extends me{constructor(e){super(e),this.state={}}render(e,r){let{galleryInstance:i,gutterWidth:n,elWidth:o,mediaItems:s}=e;return S(Ro,{...e,gallerySpecificAttributes:this.props.gallerySpecificAttributes,onAfterDrop:this.onAfterDrop,galleryInstance:i,disabledMediaItemOptions:["scale"],mediaItemEditorInfo:{disableResize:!0,disableButton:!1,additionalUI:this.props.isMobile?null:this.renderBracket}})}onBracketClick=(e,r,i)=>{this.dragStarted||(i&&(i.preventDefault(),Ke.setHoveredElements([this.props.galleryInstance])),CargoEditor.mutationManager.execute(()=>{if(e)r.removeAttribute("justify-row-end");else{let n=r.previousSibling,o=1;for(;n;)n.nodeName==="MEDIA-ITEM"&&n.assignedSlot&&n.assignedSlot.parentElement.lastChild==n.assignedSlot&&n.setAttribute("justify-row-end","true"),n=n.previousSibling;r.setAttribute("justify-row-end","true")}}),this.props.incrementLayout&&this.props.incrementLayout())};renderBracket=(e,r)=>{let{gutterWidth:i,gutterHeight:n}=this.props,o=r.assignedSlot;if(!o)return null;let s=o.parentElement.lastChild==o,a=r.getAttribute("justify-row-end")==="true",l="pointer";return a||(l="e-resize"),S("div",{className:`justify-bracket${a?" row-end":""}`,style:{"--media-item-pad":-r._size.mediaItemSize.padSize*.5+-1+"px"},onClick:p=>{this.onBracketClick(a,r,p)},onMouseDown:p=>{this.onMouseDown(r,p)}})};componentWillUnmount(){this.setRow.cancel()}onMouseDown=(e,r)=>{let i=e.assignedSlot;if(!i)return;let{mediaItems:n}=this.props;r.preventDefault();let o=i.parentElement,s=Array.from(o.children);this.delta=0,this.initialPoint=r.clientX,this.rowItems=s,this.indexOfFirstInRow=n.indexOf(this.rowItems[0].assignedNodes()[0]),this.dragStarted=!1,window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)};onPointerMove=e=>{let{mediaItems:r}=this.props;if(this.delta=e.clientX-this.initialPoint,!(Math.abs(this.delta)<3)){if(!this.dragStarted){Ke.setHoveredElements([this.props.galleryInstance]),Ke.lock(),document.body.classList.add("dragging");let i=r[this.indexOfFirstInRow-1];i&&this.onBracketClick(!1,i,null),this.attrCache=r.map(n=>n.getAttribute("justify-row-end")==="true")}this.dragStarted=!0,this.setRow()}};setRow=M3.default.throttle(()=>{CargoEditor.mutationManager.execute(()=>{let{elWidth:e,mediaItems:r,rowAlign:i}=this.props,n=e/12,o=Math.round(this.delta/n);(i=="fill"||i=="right")&&(o=o*-1);let s=Math.max(o+this.rowItems.length,1);Ke.setHoveredElements([this.props.galleryInstance]),Ke.lock(),this.attrCache.forEach((a,l)=>{l>=this.indexOfFirstInRow&&l<=this.indexOfFirstInRow+s&&(a=!1,(l==this.attrCache.length-1||l==this.indexOfFirstInRow+s+-1)&&(a=!0));let p=r[l],f=p.getAttribute("justify-row-end");a&&f!=="true"?p.setAttribute("justify-row-end",a):!a&&p.hasAttribute("justify-row-end")&&p.removeAttribute("justify-row-end")})}),this.props.incrementLayout&&this.props.incrementLayout()},80);onPointerUp=e=>{Ke.unlock(),Ke.testHover(),document.body.classList.remove("dragging"),this.setRow.cancel(),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp)};onAfterDrop=(e,r,i)=>{let n=!1,o=r,s=e[e.length-1],a=e[0];for(;s&&e.indexOf(s)>-1;)s=s.nextElementSibling;for(;a&&e.indexOf(a)>-1;)a=a.previousElementSibling;i.left>-1&&i.right>-1?(r===e[e.length-1]&&(s=e[e.length-1]),r===e[0].nextElementSibling&&(a=e[0])):i.left>-1&&i.right==-1?s=null:i.right>-1&&i.left==-1&&(a=null),a&&i.left>-1&&(a.getAttribute("justify-row-end")=="true"||a.getAttribute("justify-row-end")==!0)&&(a.removeAttribute("justify-row-end"),e[e.length-1].setAttribute("justify-row-end",!0))}},R3=k1});var N1,Dg,io,wle,O1=V(()=>{ke();Ye();zu();Ye();na();ft();Bu();Be();Xr();k3();Br();zr();N1=ye(Pe(),1);fe();Dg=class extends Tr{constructor(e){super(e),this.state={isMobile:ot.data.mobile.active,elWidth:0,gutterPixelWidth:0,gutterHeight:0,targetPxHeight:0,sizeIncrement:0,hasSizes:!1,renderLimit:150},this.paginationWatcherRef=xe(),this.paginationObserver=new IntersectionObserver(this.requestPagination,{root:this.props.scrollContext.scrollingElement===window?document:this.props.scrollContext.scrollingElement,rootMargin:screen.height*2+"px",threshold:[0,1]})}requestPagination=async e=>{if(this.isIntersecting=e[0].isIntersecting,!(this.isPaginating||this.state.renderLimit>=this.getMediaItems().length)){for(this.isPaginating=!0;this.isIntersecting;){let r=this.state.renderLimit+150;if(this.setState({renderLimit:r}),r>=this.getMediaItems().length)break;await new Promise(i=>setTimeout(i,200))}this.isPaginating=!1}};getMediaItems(){return Array.from(this.props.baseNode.children).filter(e=>e.nodeName=="MEDIA-ITEM")}render(e,r){let{gutterPixelWidth:i,gutterHeight:n,targetPxHeight:o,elHeight:s,isMobile:a,hasSizes:l}=r,{children:p,adminMode:f,pageInfo:d,baseNode:m}=e,{elWidth:g}=r;l||(g=this.props.baseNode.offsetWidth);let{"row-align":v,"row-height":x,gutter:_}=e;_=a&&this.props["mobile-gutter"]!==void 0?this.props["mobile-gutter"]:this.props.gutter;let E="";a&&this.props["mobile-row-align"]!==void 0&&(v=this.props["mobile-row-align"],E="mobile-"),a&&this.props["mobile-row-height"]!==void 0&&(x=this.props["mobile-row-height"]);let O=_.split(" "),L=(O.length>1,O[0]);L.includes("rem")&&a&&(L="calc( var(--mobile-padding-offset, 1) * "+L+" )");let I=O.length>1?O[1]:O[0];I.includes("rem")&&a&&(I="calc( var(--mobile-padding-offset, 1) * "+I+" )");let D=lr(x,"%").join(""),R=this.getMediaItems(),W=R.slice(0,this.state.renderLimit),N=this.brickLayout(W),z=[];return R.forEach(($,q)=>{let J=N.attributes[q]||{slot:null},X=$._props||{};ko($,{...X,...J},X,!1,!1)}),S(ce,{children:[S(ce,{children:this.props.children}),it(S(ce,{children:[S("style",{children:`
* {
	box-sizing: border-box;
}

:host {
	width: var(--resize-parent-width, 100%);
	max-width: 100%;	
	position: relative;
	display: block;
	--gutter-width: ${i}px;
	--gutter-height: ${n}px;
	margin-top: calc(var(--gutter-expand, 0) * ${n}px );	
}

${N.shadowStyleMap.map(($,q)=>`::slotted(media-item[slot="slot-${q}"]){
		${$.style};
		${$.itemStatuses.lastRow?"":"margin-bottom: var(--gutter-height);"}
		${$.itemStatuses.lastChild?"":"margin-right: var(--gutter-width);"}
		${$.itemStatuses.lastChild&&!$.itemStatuses.orphanRow&&v==="fill"?`
			flex-grow: 1;
			--object-fit: fill;
		`:""}
	}`).join("")}

:host .justify-row {
	max-width: ${g+3}px;
	width: 100%;
	display:flex;
	flex-shrink: 0;
	align-items: stretch;
	justify-content: flex-start;
	position: relative;
	flex-wrap: nowrap;
}

:host .justify-row.orphan-row {
	width: ${N.orphanRowWidth}px;
	display: inline-flex;
}

::slotted(media-item) {
	position: relative;
	max-width: 100%;
	display: flex;
	flex-shrink: 0;
	flex-grow: 0;
}    


:host([${E}row-align="left"]) .justify-row {
	justify-content: flex-start;
}

:host([${E}row-align="right"]) .justify-row {
	justify-content: flex-end;
}

:host([${E}row-align="center"]) .justify-row {
	justify-content: center;
}

:host ::slotted(media-item.last-child), :host([${E}row-align="fill"]) ::slotted(media-item.last-child) {
	flex-grow: 1;
}

:host([${E}row-align="center"]) ::slotted(media-item.last-child),
:host([${E}row-align="left"]) ::slotted(media-item.last-child),
:host([${E}row-align="right"]) ::slotted(media-item.last-child) {
	flex-grow: 0;
}

					`}),S(Yi,{values:{targetPxHeight:D,gutterPixelWidth:L,gutterHeight:I,elWidth:"100%"},onResize:this.onResize}),N.shadow,f&&d.isEditing&&!pe&&S(R3,{...e,isMobile:a,gallerySpecificAttributes:["justify-row-end"],galleryInstance:m,gutterWidth:i,gutterHeight:n,elWidth:g,rowHeight:D,rowAlign:v,mediaItems:R,incrementLayout:this.onItemResize}),S("div",{ref:this.paginationWatcherRef,class:"pagination-watcher"})]}),this.props.baseNode.shadowRoot)]})}onResize=(e,r)=>{e==="targetPxHeight"&&(r=Math.max(r,10)),this.setState({[e]:r,hasSizes:!0})};onMobileChange=e=>{this.setState({isMobile:e})};componentDidMount(){ot.on("mobile-change",this.onMobileChange),this.props.baseNode._figureEditorInfo={disabledMediaItemOptions:io.disabledMediaItemOptions,galleryParent:this.props.baseNode,galleryWidth:this.state.elWidth},this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.observe(this.paginationWatcherRef.current),this.props.onMount&&this.props.onMount()}componentWillUnmount(){ot.off("mobile-change",this.onMobileChange),this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.unobserve(this.paginationWatcherRef.current)}onItemResize=e=>{this.setState(r=>({sizeIncrement:r.sizeIncrement+1}))};brickLayout=e=>{let r=window.devicePixelRatio>1?2:1,{isMobile:i}=this.state,{"row-align":n}=this.props;i&&this.props["mobile-row-align"]!==void 0&&(n=this.props["mobile-row-align"]);let o={},s=i&&this.props["mobile-row-height"]!==void 0&&this.props["mobile-row-height"]!==this.props["row-height"],a=!1,l=e.map((L,I)=>{let D=this.getItemSize(L,s);return this.getItemSize(L,s)});for(let L=l.length-1;L>=0;L--){let I=l[L];I.rowEnd||a?(I.inDesignatedRow=!0,a=!0):I.inDesignatedRow=!1}this.findValidRowCache={},this.makeNodes(0,0,null,o,l),this.findValidRowCache=null;let p=[],f=N1.default.keys(o).sort(function(L,I){return parseInt(L)-parseInt(I)}),d=f[f.length-1];for(;d!=null;){let L=o[d];o[L.parent]&&(o[L.parent].path=o[L.parent].edges[d]),p.unshift(L),d=L.parent}let m=[],g=[],v=[],x=this.state.targetPxHeight,_=this.state.elWidth,E=this.state.gutterPixelWidth,O=0;return p.forEach((L,I)=>{let D=L.path,R=[];if(!D)return;let W=0,N=!1;for(let z=D.startIndex;z<D.breakBefore;z++){let $=e[z],q=D.breakBefore-D.startIndex,J=z+1==D.breakBefore,X=this.getItemSize($,!1),se=X.mediaSize.padSize+X.mediaItemSize.padSize,ee=(x+-se)/X.height||1,Z,Y;Z=X.width*ee+se,Y=X.height*ee+X.mediaSize.padSize;let te=_+-D.rowWidth;if(n!=="fill"||N)te=Math.min(0,te),O=D.rowWidth;else if(te/_>.5&&J&&I==0&&!D.position=="forcebreak"){N=!0,z=D.startIndex-1;continue}if(te!==0){let he=(Z+-se)/D.contentWidth,de=D.rowWidth-D.contentWidth,we=_-de;Z=he*we,Y=Z*(X.height/X.width)+X.mediaSize.padSize,Z=Z+se}Z=Math.floor(Z*r)/r,W=Y;let re={},ie="";z==D.startIndex&&(re.firstChild=!0),z+1==D.breakBefore&&(re.lastChild=!0),I+2==p.length&&(re.lastRow=!0),re.orphanRow=N,v[z]={style:`width: ${Z}px`,itemStatuses:re},g[z]={slot:`slot-${z}`,itemResize:this.onItemResize},R[z]=S("slot",{name:`slot-${z}`},`slot-${z}`)}W=Math.floor(W*r)/r,m.push(S("div",{className:`justify-row${N?" orphan-row":""}`,style:{"--frame-padding":W+"px"},children:R},`justify-row-${I}`))}),{shadow:m,attributes:g,shadowStyleMap:v,orphanRowWidth:O}};findValidRows=(e,r)=>{if(this.findValidRowCache[e])return this.findValidRowCache[e];e=parseInt(e);let i=e,n=0,o=0,s=0,a=0,l=0,p={},f=this.props["row-align"];this.state.isMobile&&this.props["mobile-row-align"]!==void 0&&(f=this.props["mobile-row-align"]);for(let d=e;d<r.length;d++){let m=s,g=a,v=r[d],x=v.mediaSize.padSize+v.mediaItemSize.padSize,_=(this.state.targetPxHeight+-x)/v.height;if(a=v.width*_,s=a+x,d===e?(l=1,n=s,o=s+-x):(n=n+this.state.gutterPixelWidth+s,o=o+a,l++),v.rowEnd){p[d+1]={position:"forcebreak",penalty:-9e9,itemCount:l,startIndex:e,breakBefore:d+1,rowWidth:n,contentWidth:o};break}else if(n>this.state.elWidth){if(v.inDesignatedRow)continue;p[d]={position:"under",itemCount:l+-1,penalty:0,startIndex:e,breakBefore:d,rowWidth:n+-(this.state.gutterPixelWidth+s),contentWidth:o-a},f==="fill"||d===e?p[d+1]={position:"over",penalty:0,itemCount:l,startIndex:e,breakBefore:d+1,rowWidth:n,contentWidth:o}:d-1>-1&&(p[d-1]={position:"oneunder",penalty:.11,itemCount:l+-2,startIndex:e,breakBefore:d-1,rowWidth:n+-(this.state.gutterPixelWidth*2+s+m),contentWidth:o-(a+g)});break}else if(d==r.length-1){f!=="fill"&&d==e?p[d+1]={position:"orphan",penalty:.5,itemCount:l,startIndex:e,breakBefore:d+1,rowWidth:n,contentWidth:o}:p[d+1]={position:"last",penalty:.06,itemCount:l,startIndex:e,breakBefore:d+1,rowWidth:n,contentWidth:o};break}else l+-2>0&&!v.inDesignatedRow&&f==="fill"&&(p.mid={position:"mid",penalty:.06,itemCount:l+-2,startIndex:e,breakBefore:d-1,rowWidth:n+-(this.state.gutterPixelWidth*2+s+m),contentWidth:o-(a+g)})}if(p.hasOwnProperty("mid")){let d=p.mid.breakBefore;!p.hasOwnProperty(d)&&r.length<15&&(p[p.mid.breakBefore]=p.mid),delete p.mid}for(let d in p){let m=p[d],g=m.rowWidth/this.state.elWidth;m.distance=Math.abs(1-g)*Math.abs(1-g)*Math.abs(1-g),isNaN(m.penalty)||(m.distance=m.distance+m.penalty)}return this.findValidRowCache[e]=p,p};makeNodes=(e,r,i,n,o)=>{if(e===-1)return;let s={index:parseInt(e),edges:this.findValidRows(e,o),distanceToFirstNode:r,parent:i},a=!1;if(n[e]?s.distanceToFirstNode<n[e].distanceToFirstNode&&(n[e]=s,a=!0):(n[e]=s,a=!0),a){let l=N1.default.keys(s.edges);for(let p=0;p<l.length;p++){let f=s.edges[l[p]];this.makeNodes(parseInt(l[p]),f.distance+s.distanceToFirstNode,s.index,n,o)}}};getItemSize=(e,r)=>{let i=e._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};isNaN(i.width)&&(i.width=300),isNaN(i.height)&&(i.height=300);let n=e.getAttribute("justify-row-end")==="true"&&!r;return{...i,rowEnd:n}}},io={name:"justify",displayName:"Justify",tagName:"GALLERY-JUSTIFY",disabledMediaItemOptions:["scale","limit-by"],mediaItemOptions:[{labelName:"End Row Here",name:"justify-row-end",type:"check-box",value:!0}],options:[{labelName:"Row Height",name:"row-height",type:"scrubber",addDefaultUnitToUnitlessNumber:!0,allowCalc:!0,allowVar:!0,value:"20%",min:1,defaultUnit:"%",step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowedUnits:["px","%","rem","vmin","vmax","vw","vh","em"]},{labelName:"Gutter",name:"gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{vw:30,vh:30,vmax:30,vmin:30,rem:20,em:20,px:300,etc:100},step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Row Align",name:"row-align",type:"radio",value:"fill",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"},{labelName:"Fill",iconName:"alignContentFill",value:"fill"}]},{type:"more-actions",children:[{labelName:"Clear Designated Rows",name:"clear-designated-rows",type:"button",className:"text-button remove",onClick:function(t){t.preventDefault(),t.stopPropagation();let e=Array.from(this.state.activeGallery.children).filter(r=>r.hasAttribute("justify-row-end")||r.hasAttribute("justify-row-start"));CargoEditor.mutationManager.execute(()=>{e.forEach(r=>{r.removeAttribute("justify-row-end")})}),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor())}}]}],mobileOptions:[{labelName:"Row Height",name:"mobile-row-height",type:"scrubber",addDefaultUnitToUnitlessNumber:!0,allowCalc:!0,allowVar:!0,value:"20%",min:1,defaultUnit:"%",allowedUnits:["px","%","rem","vmin","vmax","vw","vh","em"]},{labelName:"Gutter",name:"mobile-gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"1rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Row Align",name:"mobile-row-align",type:"radio",value:"fill",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"},{labelName:"Fill",iconName:"alignContentFill",value:"fill"}]}]};io.mediaItemDefaults=pt(io.mediaItemOptions);io.defaults=pt(io.options);io.mobileDefaults=pt(io.mobileOptions);Dg.defaultProps={"show-tags":!0,"show-title":!0,"row-align":io.defaults["row-align"].value,"row-height":io.defaults["row-height"].value,gutter:"1rem","mobile-gutter":void 0,"mobile-row-height":void 0,"mobile-row-align":void 0};wle=Ut(No(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Dg)));sr(wle,"gallery-justify",["thumbnail-index","thumbnail-index-metadata","links-filter-index","show-tags","show-title","row-align","row-height","gutter","mobile-gutter","mobile-row-height","mobile-row-align"],{renderIntoShadow:!0})});function xle(t,e){let r=e.pid;return{isMobileOnly:t.site.mobile_homepage_id==r||t.pages.byId[r]&&t.pages.byId[r].pin&&t.pages.byId[r].pin_options.screen_visibility==="mobile"}}var Pi,Lg,D1,N3,O3=V(()=>{ke();ft();zr();Ye();Bt();qr();ps();Kn();Br();Be();Pi=ye(Pe(),1);fe();Lg=new Set;pe||(window.addEventListener("mousedown",t=>{Lg.forEach(e=>{e.setState({noPointerEvents:!0})})}),window.addEventListener("mouseup",t=>{Lg.forEach(e=>{e.setState({noPointerEvents:!1})})}));D1=class extends me{constructor(e){super(e),this.handleWidth=20,this.minHandleOverlap=3,this.maxColumns=12,this.state={columnSetAbove:!1,noPointerEvents:!1,buttonHovered:!1,focused:!1,loaded:!1,adminWindow:!1,showGhost:!1,isDraggingHandle:!1,isDragging:!1,activeIndex:-1,pointerStart:{x:0,y:0},delta:{x:0,y:0},instanceRect:{width:100,height:100,left:-999,top:-999},referenceColumnSpans:[]},this.columnAddOrRemoveObserver=new MutationObserver(this.onColumnAddOrRemove),this.columnAddOrRemoveObserverConfig={attributes:!0,childList:!0,subtree:!1},this.columnObserver=new MutationObserver(this.onColumnChange),this.columnObserverConfig={attributeFilter:["span"],childList:!1,subtree:!1},this.columnCache=[],this.columnOutlineRef=xe(),this.gearReaf=xe(),this.addThreshold=0,this.removeThreshold=0,this.saveColumnSettings=Pi.default.debounce(this.saveColumnSettings,150),this.updateColumns=Pi.default.throttle(this.updateColumns,40)}render(e,r){let{emptyColumns:i,gutter:n,columnSpans:o,displaySpans:s,layoutColumns:a,unitsToRemove:l,isMobile:p,mobileStack:f,mobileHideEmpty:d,elWidth:m,gutterWidth:g}=e,{activeIndex:v,delta:x,isDraggingHandle:_,adminWindow:E,showGhost:O,loaded:L,buttonHovered:I,focused:D,noPointerEvents:R,columnSetAbove:W}=r,N=Pi.default.uniq(i).length==1&&i[0]==!0,z=Pi.default.uniq(o).length==1&&o[0]==null,$=(m-g*(a-1))/a,q=o.length<a,J=[],se=a%o.length==0||!z?a:o.length-l;p&&f&&(se=1);let ee=Math.max(0,(m-g*(se-1))/se),Z=Math.max(1,g);ee=ee-(Z-g);let Y=23;for(let te=0;te<se;te++){let re=(ee+Z)*te;J.push(S("div",{className:"ghost-span",style:{transform:`translateX(${re}px)`,opacity:O?.04:0,width:ee+"px"}},`ghost-${te}`))}return S(ce,{children:[S(Zr,{baseNode:this.props.columnInstance}),S("style",{children:i.map((te,re)=>te?`
				::slotted(column-unit:nth-child(${re+1})){
					min-height: 1em;
				}`:"").join(`
`)}),S(Ei,{onPointerIn:this.checkForColumnSetAbove,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,buttonHeight:Y,buttonMode:"outside",baseNode:this.props.columnInstance,el:this.props.columnInstance,render:te=>{let{pointerAttention:re,overlayPosition:ie}=te,ae=0,he=0,de=-Y,we=2;return(ie.y<=Y||W)&&(de=ie.height+1,ie.height+ie.y>ot.data.window.h+-Y&&(de=-ie.y+ot.data.window.h+-Y+1,we=0)),S("div",{ref:this.columnOutlineRef,className:`editor-overlay editor-outline columns-outline${re?" hover":""}${re?" button-hover":""}${D?" focus":""}`,style:{transform:`translate3d(${ie.x}px, ${ie.y}px, 0)`,width:ie.width+"px",height:ie.height+"px",display:re||I||D?"block":"none"},children:[(re||D||I)&&J,(re||D||I)&&!(p&&f)?o.map((Re,ve)=>{let Ae=s[ve];if(Re||(Re=a/o.length),ve==o.length-1||Ae=="hide"||(ae+=Re,ae>=a))return null;he+=$*Re+(Re-1)*g+g;let Ve=`${he+-g*.5}px`,Me=this.handleWidth*-.5;return g<=this.handleWidth-this.minHandleOverlap&&(Me=g*-.5+-this.minHandleOverlap),S(ce,{children:[q&&ve<a&&S("div",{style:{pointerEvents:R?"none":"auto",display:re||D||I?"block":"none",transform:`translateX(${Ve})`,width:this.handleWidth+"px",marginLeft:`${Me}px`},className:"column-divider-handle",onMouseDown:Le=>this.onMouseDown(Le,ve)}),S("div",{style:{display:re||D||I?"block":"none",transform:`translateX(${Ve})`,transition:_?"transform .08s cubic-bezier(0, 0, 0.2, 1)":""},className:"column-divider"},`col-${ve}`)]})}):null,S("div",{className:"in-editor-buttons",style:{pointerEvents:R?"none":"auto",transform:`translate(${we}px, ${de}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:S("div",{className:"pointer-mask",children:[S("button",{className:"columns text",ref:this.gearReaf,onMouseDown:this.launchUIWindow,children:"Columns"}),(!p||this.props.isMobileOnly)&&S(ce,{children:[S("button",{onMouseDown:this.removeColumn,className:"remove",children:S("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:S("rect",{x:"4",y:"9.5",width:"12",height:"1",class:"button-fill"})})}),S("button",{onMouseDown:this.addColumn,className:`add ${o.length>=this.maxColumns?"disabled":""}`,children:S("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[S("rect",{x:"4",y:"9.5",width:"12",height:"1",class:"button-fill"}),S("rect",{x:"9.5",y:"4",width:"1",height:"12",class:"button-fill"})]})})]})]})})]})}})]})}checkForColumnSetAbove=()=>{let e=this.props.columnInstance.getBoundingClientRect();document.getElementById("editor-overlay").style.display="none";let r=document.elementFromPoint(e.right-10,e.top-15);document.getElementById("editor-overlay").style.display="",this.setState({columnSetAbove:r?.tagName?.startsWith("COLUMN-")})};launchUIWindow=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let r=this.gearReaf.current.getBoundingClientRect(),i=this.props.columnInstance.getBoundingClientRect(),n={x:r.x+0,y:i.y+-190,left:r.left+0,right:r.right+0,top:i.top+0+-190,bottom:i.top+27+-190,width:r.width,height:r.height};Ce.adminWindow.UIWindowOpener.openUIWindow({windowName:"columns-ineditor",windowAlias:"columns",supportsMobile:!0,positionRect:n,closeButton:!1,closeOnAllClickout:!0,props:{columnNodes:[this.props.columnInstance]}})};addColumn=e=>{e?.preventDefault(),e?.stopPropagation(),!(this.props.columnSpans.length>=this.maxColumns)&&(CargoEditor.mutationManager.execute(()=>{let r=this.columnCache.pop()||document.createElement("column-unit");r.removeAttribute("span"),r.removeAttribute("slot"),r.removeAttribute("data-discarded-column"),this.props.columnInstance.appendChild(r),this.addThreshold>1&&this.updateColumns(this.props.columnSpans.map(i=>{})),this.addThreshold++,clearTimeout(this.addTimeout),this.addTimeout=setTimeout(()=>{this.addThreshold=0},500)}),this.props.columnInstance.render(),this.saveColumnSettings())};removeColumn=e=>{e?.preventDefault(),e?.stopPropagation();let r=e?.altKey||!1,i=Array.from(this.props.columnInstance.children).filter(n=>n.tagName=="COLUMN-UNIT");i.length!=0&&(CargoEditor.mutationManager.execute(()=>{if(this.props.columnSpans.length==1)Array.from(i[0].childNodes).forEach(n=>{this.props.columnInstance.parentNode.insertBefore(n,this.props.columnInstance)}),this.props.columnInstance.parentNode.insertBefore(document.createElement("br"),this.props.columnInstance),this.props.columnInstance.remove();else{let n=i[i.length-1];if(r){let o=i[i.length-2];Array.from(n.childNodes).forEach(s=>{o.appendChild(s)})}this.columnCache.push(n.cloneNode(!0)),this.waiting=!0,n.remove(),n.setAttribute("data-discarded-column",!0),this.removeThreshold>1&&this.updateColumns(this.props.columnSpans.map(o=>{})),this.removeThreshold++,clearTimeout(this.removeTimeout),this.removeTimeout=setTimeout(()=>{this.removeThreshold=0},500)}}),this.props.columnInstance.render())};updateUIWindowPosition=e=>{!this.state.focused||!this.state.UIWindow||(this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow.props.superBadScrollHack.scroll(e))};onMouseDown=(e,r)=>{e.button!=2&&(this.props.columnSpans.length<2||(e.preventDefault(),e.stopPropagation(),this.setState({showGhost:!0,isDraggingHandle:!0,activeIndex:r,pointerStart:{x:e.clientX,y:e.clientY},referenceColumnSpans:this.props.columnSpans,instanceRect:this.props.columnInstance.getBoundingClientRect()},()=>{this.dragTimeout=setTimeout(()=>{document.body.classList.add("dragging")},100),Ce.adminWindow.addEventListener("pointermove",this.onPointerMove),Ce.adminWindow.addEventListener("pointercancel",this.onPointerUp),Ce.adminWindow.addEventListener("mouseup",this.onPointerUp),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointercancel",this.onPointerUp),window.addEventListener("mouseup",this.onPointerUp)})))};onPointerUp=e=>{clearTimeout(this.dragTimeout),Ce.adminWindow.removeEventListener("pointermove",this.onPointerMove),Ce.adminWindow.removeEventListener("pointercancel",this.onPointerUp),Ce.adminWindow.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerUp),window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("pointermove",this.onPointerMove),this.setState({showGhost:!1,isDraggingHandle:!1,activeIndex:-1,delta:{x:0,y:0}}),document.body.classList.remove("dragging")};onPointerMove=e=>{e.preventDefault();let{activeIndex:r,pointerStart:i,instanceRect:n,referenceColumnSpans:o,isDraggingHandle:s}=this.state,{gutterWidth:a,displaySpans:l,unitsToRemove:p,layoutColumns:f,units:d}=this.props;if(s){let m=[...o];if(Pi.default.uniq(o).length==1&&o[0]==null){let N=0,z=0,$=0,q=d/m.length-Math.floor(d/m.length),J=Math.floor(d/m.length),X=m.map((se,ee)=>{z=z+q;let Z=J;return z>1&&(Z=Z+1,z=z-1),ee==m.length-1&&(Z=d-N),N=N+Z,Z});this.setState({referenceColumnSpans:X});return}let v=(n.width-a*(f-1))/f,x=0,_=[];m.forEach((N,z)=>{N||(N=f/m.length);let $=v*N+(N-1)*a;(z==r||z==r+1)&&_.push({x,width:$}),l[z]!="hide"&&(x+=$+a)});let E=20,{left:O}=n,L={x:e.clientX-(_[1].x+O+-a*.5),y:e.clientY-i.y},I=m.map((N,z)=>{let $=N,q=v*N+(N-1)*a;return z==r?($=(q+L.x+a)/(v+a),Math.round(Math.max(Math.min($,d-1),1))):l[z]=="hide"?N:Math.round(Math.max(Math.min($,d-1),1))}),D=r+1;for(;l[D]=="hide";)D++;let R=Pi.default.sum(I)-I[D];I[D]=d-R,I[D]==0&&(I[D]+=1,I[r]-=1),Pi.default.uniq(I).length==1&&Pi.default.sum(I)==d&&(I=I.map(N=>{})),Math.abs(L.x)>4&&this.updateColumns(I),this.setState({delta:L})}};checkColumns=()=>{let{layoutColumns:e,columnSpans:r,units:i}=this.props;if(r.length==0||Pi.default.uniq(r).length==1&&r[0]==null)return;let o=r.includes(void 0),s=Pi.default.sum(r),a=[...r],l=!1;if(s!=i||o){if(s>i)l=!0;else if(s<=i)if(o){let f=i-s,d=r.filter(g=>g==null).length,m=Math.floor(f/d);r.forEach((g,v)=>{if(v==r.length-1&&f>0)a[v]=f;else if(g==null&&f==0){let x=v;for(;x>=0&&(r[x]<2||r[x]==null);)x--;r[x]>1?(a[v]=Math.floor(r[x]/2),a[x]=r[x]-a[v]):l=!0}else g==null?(a[v]=m,f-=m):a[v]=g})}else{let f=i-s;a[a.length-1]=f+a[a.length-1]}(Pi.default.uniq(a).length==1&&Pi.default.sum(a)==i||l)&&(a=a.map(f=>{})),this.updateColumns(a)}else this.updateColumns(r)};updateColumns=e=>{let r=Array.from(this.props.columnInstance.children).filter(n=>n.tagName=="COLUMN-UNIT"),i=[];r.forEach((n,o)=>{e[o]==null?i.push([n,null]):parseInt(n.getAttribute("span"))!=e[o]&&i.push([n,e[o]])}),i.length>0&&(CargoEditor?.mutationManager?.execute(()=>{i.forEach(([n,o])=>{o===null?n.removeAttribute("span"):n.setAttribute("span",o)})}),this.saveColumnSettings(),this.props.columnInstance.render())};saveColumnSettings=()=>{Ce.adminWindow.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{session:{"last-column-settings":this.getColumnInfo()}}})};onDragOver=(e,r,i)=>{i.fromOutside&&!i.inAdmin?(Ke.activateHoverElement(this.props.columnInstance),Ke.lockItem(this.props.columnInstance)):(Ke.unlockItem(this.props.columnInstance),Ke.deactivateHoverElement(this.props.columnInstance))};onDragStart=(e,r,i)=>{Ke.activateHoverElement(this.props.columnInstance),Ke.lockItem(this.props.columnInstance)};onDragEnd=(e,r)=>{Ke.unlockItem(this.props.columnInstance),Ke.testHover()};componentDidUpdate(e,r){(!Pi.default.isEqual(e.columnSpans,this.props.columnSpans)||e.layoutColumns+e.unitsToRemove!=this.props.layoutColumns+this.props.unitsToRemove)&&(Math.abs(e.layoutColumns+e.unitsToRemove-(this.props.layoutColumns+this.props.unitsToRemove))>2?this.updateColumns(this.props.columnSpans.map(i=>{})):this.checkColumns()),(e.gutter!==this.props.gutter||e["mobile-gutter"]!==this.props["mobile-gutter"])&&this.updateEditorRect()}updateEditorRect=Pi.default.throttle(()=>{Ke.updateElementRect(this.props.columnInstance)},120,{leading:!0,trailing:!0});getColumnInfo=()=>({columnSizes:this.props.columnSpans.map(e=>e??0),units:this.props.units,columns:this.props.columnSpans.length,emptySet:Pi.default.uniq(this.props.emptyColumns).length==1&&this.props.emptyColumns[0]==!0});onColumnAddOrRemove=e=>{let r=!1;e.forEach(i=>{Array.from(i.addedNodes).find(n=>n.tagName=="COLUMN-UNIT")&&(r=!0),Array.from(i.removedNodes).find(n=>n.tagName=="COLUMN-UNIT")&&(r=!0)}),r&&(this.columnObserver.disconnect(),r&&(Array.from(this.props.columnInstance.children).filter(n=>n.tagName=="COLUMN-UNIT").forEach(n=>{this.columnObserver.observe(n,this.columnObserverConfig)}),this.state.UIWindow?.setState?.({activeSettings:this.state.UIWindow.getColumnSettingsFromNodes()}))),this.state.UIWindow?.onMutation?.(),this.props.columnInstance.render()};onColumnChange=e=>{let r=!0;e.forEach(i=>{i.type=="attributes"&&i.attributeName==="span"&&(r=!0)}),r&&(this.props.columnInstance.render(),this.state.UIWindow?.onMutation?.())};setColumns=e=>{let r=Array.from(this.props.columnInstance.children).filter(o=>o.tagName=="COLUMN-UNIT"),i=r.length;if(i!=e){if(i<e)for(var n=0;n<e-i;n++){let o=this.columnCache.pop()||document.createElement("column-unit");o.removeAttribute("span"),this.props.columnInstance.appendChild(o)}else if(e<i)for(var n=i-1;n>=e;n--){let s=r[n];this.columnCache.push(s.cloneNode(!0)),s.setAttribute("data-discarded-column",!0),s.remove()}this.saveColumnSettings()}};resetColumns=()=>{this.updateColumns(this.props.columnSpans.map(e=>{}))};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};componentDidMount(){Lg.add(this),Ce.globalDragEventController.on("dragover",this.onDragOver),Ce.globalDragEventController.on("dragstart",this.onDragStart),Ce.globalDragEventController.on("dragend",this.onDragEnd),Ce.globalDragEventController.on("drop",this.onDragEnd),this.columnAddOrRemoveObserver.observe(this.props.columnInstance,this.columnAddOrRemoveObserverConfig),Array.from(this.props.columnInstance.children).filter(i=>i.tagName=="COLUMN-UNIT").forEach(i=>{this.columnObserver.observe(i,this.columnObserverConfig)}),this.checkColumns(),this.props.columnInstance._editorInterface=this;let r=[];if(Array.from(this.props.columnInstance.childNodes).forEach((i,n)=>{i.tagName!=="COLUMN-UNIT"&&(this.props.columnInstance.removeChild(i),r.push(i))}),r.length>0&&console.warn("removed stray elements from column set",r),this.props.columnInstance._newColumnSet){delete this.props.columnInstance._newColumnSet,Ke.activateHoverElement(this.props.columnInstance),Ke.lockItem(this.props.columnInstance);let i=n=>{this.showOutlinesTimeout=setTimeout(()=>{Ke.unlockItem(this.props.columnInstance),Ke.testHover()},500),window.removeEventListener("mousedown",i)};window.addEventListener("mousedown",i)}this.testHoverTimeout=setTimeout(()=>{Ke.testHover()},300)}componentWillUnmount(){Lg.delete(this),clearTimeout(this.testHoverTimeout),this.state.UIWindow?.closeWindow?.(),clearTimeout(this.showOutlinesTimeout),this.updateColumns.cancel(),this.columnAddOrRemoveObserver.disconnect(),this.columnObserver.disconnect(),Ce.globalDragEventController.off("dragover",this.onDragOver),Ce.globalDragEventController.off("dragstart",this.onDragStart),Ce.globalDragEventController.off("dragend",this.onDragEnd),Ce.globalDragEventController.off("drop",this.onDragEnd),delete this.props.columnInstance._editorInterface}};N3=Ut(Ue(xle,null)(D1))});var D3,Fg,Sle,L3=V(()=>{ke();Ye();ft();Be();na();Br();Tg();D3=ye(Pe(),1);Xr();zr();il();O3();fe();Fg=class extends me{constructor(e){super(e),this.state={mobileActive:ot.data.mobile.active,elWidth:0,gutterWidth:0,hasSizes:!1,incrementLayout:0},this.props.baseNode.render=()=>{this.setState({incrementLayout:this.state.incrementLayout++})}}render(e,r){let{adminMode:i,baseNode:n,pageInfo:o,"mobile-stack":s,"mobile-hide-empty":a,"mobile-gutter":l,units:p}=e,{gutterWidth:f,mobileActive:d,hasSizes:m}=r,{elWidth:g}=r;m||(g=this.props.baseNode.offsetWidth);let v=[],x="";d?l===void 0?(v=lr(e.gutter,"rem"),v[1].indexOf("calc(")>-1?x=v[1].replace("calc(","("):x=v.join(""),x="calc( var(--mobile-padding-offset, 1) * "+x+" )"):(v=lr(l,"rem"),x=v.join(""),x.includes("rem")&&(x="calc( var(--mobile-padding-offset, 1) * "+x+" )")):(v=lr(e.gutter,"rem"),x=v.join(""));let _=Array.from(n.children).filter($=>$.nodeName==="COLUMN-UNIT"&&!$.hasAttribute("data-discarded-column"));Array.from(n.children).filter($=>$.nodeName==="COLUMN-UNIT"&&$.hasAttribute("data-discarded-column")).forEach($=>{$.remove()});let O=_.map($=>!Array.from($.childNodes).some(q=>q.nodeType===Node.ELEMENT_NODE||q.nodeType===Node.TEXT_NODE&&q.nodeValue.trim().length>0)),L=_.map($=>parseInt($.getAttribute("span"))||void 0),I=0,D=L.map(($,q)=>(d&&O[q]&&(a||s)?(I=I+(parseInt($)||1),$="hide"):$=$||"uniform",$)),R=D.filter($=>$=="uniform"||$=="hide").length==D.length,W=Math.max(_.length,this.props.units);R&&(I=D.filter($=>$=="hide").length),W=W-I;let N=f,z="";if(d&&s){z=`::slotted(column-unit){
				--column-width: ${g}px;
				--resize-parent-width: ${g}px;

			}`;let $=D3.default.findLastIndex(D,q=>q!=="hide");D.forEach((q,J)=>{q=="hide"?z+=`
					::slotted(column-unit[slot="${J}"]) {
						display: none;
					}`:J<$&&(z+=`
					::slotted(column-unit[slot="${J}"]) {
						margin-bottom: ${f}px;
					}`)})}else{let $=Vu(R?_.length-I:W,f,g),q=$.columnAndGutterMap;N=$.gutterPixelWidth;let J=$.columnWidth,X=0;z=D.map((se,ee)=>{let Z;switch(se){case"uniform":return Z=q[X]?.right-q[X]?.left||10,X+=1,`::slotted(column-unit[slot="${ee}"]) {
							--column-width: ${Z}px;
							--resize-parent-width: ${Z}px;
						}`;case"hide":return`::slotted(column-unit[slot="${ee}"]) {
							display: none;
						}`;default:return Z=q[X+(se+-1)]?.right-q[X]?.left||10,X+=se,`::slotted(column-unit[slot="${ee}"]) {
							${Z<0?`
								margin-right: ${Z+N}px;
								--column-width: 0px;
								--resize-parent-width: 0px;
							`:`
								--column-width: ${Z}px;
								--resize-parent-width: ${Z}px;							
							`}

						}`}}).join(`
				`)}return _.forEach(($,q)=>{$.setAttribute("slot",q)}),it(S(ce,{children:[S(ia,{adminMode:i,baseNode:n,customElementMode:!0,scrollContext:this.props.scrollContext,children:[S("style",{children:`
						:host{
							visibility: ${m?"visible":"hidden"};
			 				--columns-gutter: ${N}px;
							margin-top: calc(var(--gutter-expand, 0) * ${N}px);
		
							width: 100%;
							position: relative;
							contain: layout;
							clear: both;							

							${d&&s?`
									display: flex;
									align-items: start;
									justify-content: flex-start;
									flex-direction: column;
									flex-wrap: nowrap;
									height: auto;
								`:`
									display: flex;
								    align-items: stretch;
								    justify-content: flex-start;							
									flex-direction: row;
									flex-wrap: nowrap;							
								`}
						}
		
					`}),S("style",{children:`
		
						::slotted(column-unit:not(:last-child)) {
						    margin-right: ${d&&s?0:N+"px"};
						}
		
						::slotted(column-unit) {
							display: block;
							word-wrap: break-word;
							position: relative;
						    max-width: 100%;   
						    flex-grow: 0;
						    flex-shrink: 0;
						    flex-basis: ${d&&s?"auto":"var(--column-width)"};
						    width: var(--column-width);
						}
		
						::slotted(column-unit:last-child) {
						    flex-grow: 1;
						}
		
						${z}				
					`}),S(Yi,{values:{elWidth:"100%",gutterWidth:x},style:{position:"absolute",inset:"0 auto"},onResize:this.onResize}),_.map(($,q)=>S("slot",{name:q}))]}),i&&o.isEditing&&!pe&&S(N3,{elWidth:g,gutterWidth:f,emptyColumns:O,isMobile:d,mobileStack:s,mobileHideEmpty:a,layoutColumns:W,units:p,columnSpans:L,unitsToRemove:I,displaySpans:D,gutter:x,columnInstance:n})]}),this.props.baseNode.shadowRoot)}onResize=(e,r)=>{this.setState(i=>{let n={...i};return n[e]=r,n.hasSizes=!0,n})};onMobileChange=e=>{this.setState({mobileActive:e})};componentDidMount(){ot.on("mobile-change",this.onMobileChange)}componentWillUnmount(){ot.off("mobile-change",this.onMobileChange)}};Fg.defaultProps={units:12,gutter:"1rem","mobile-stack":!0,"mobile-hide-empty":!1,"mobile-gutter":void 0};Sle=Ut(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Fg));sr(Sle,"column-set",["units","gutter","mobile-gutter","mobile-stack","mobile-hide-empty"])});var h2e,L1,F3,z3=V(()=>{ke();Ye();Bt();ps();qr();h2e=ye(Pe(),1);Kn();fe();L1=class extends me{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:null,focused:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,showInsertionIndicator:!1}}render(e,r){let{audioPlayerInstance:i}=e,{draggingOver:n,showInsertionIndicator:o,buttonHovered:s,focused:a}=r,l=23;return S(ce,{children:[S("style",{id:"audio-player-editor",children:`::selection{
						background-color:transparent;
					}
					:host(::selection) {
						background-color:transparent;
					}`}),S(Ei,{hasFocus:a,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,baseNode:this.props.audioPlayerInstance,render:p=>{let{pointerAttention:f,overlayPosition:d}=p,m=0;return d.y<=1&&(m=Math.min(-d.y+1,d.height+-l+1)),S(ce,{children:[S(Zr,{baseNode:i,overlayPosition:d,inFront:!1,overlayMode:!0}),S("div",{className:`editor-overlay editor-outline${f?" hover":""}${f?" button-hover":""}${a?" focus":""}`,style:{transform:`translate3d(${d.x}px, ${d.y}px, 0)`,width:d.width+"px",height:d.height+"px",display:f||s||a?"block":"none",minHeight:"27px"},children:[S("div",{className:"in-editor-buttons audio-player",style:{transform:`translateY(${m}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[S("button",{onMouseDown:g=>{this.launchUIWindow(g)},ref:this.AudioPlayerButtonRef,className:"text",children:"Audio Player"}),e.children]}),e.otherUI]})]})}})]})}launchUIWindow=(e,r)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.props.audioPlayerInstance.getBoundingClientRect(),n={x:i.x,y:i.y,left:i.right,right:i.right,top:i.top-10,bottom:i.top+27,width:i.width,height:10};Ce.adminWindow.UIWindowOpener.openUIWindow({windowName:"audioplayer-ineditor",windowAlias:"audioplayer",positionRect:n,closeButton:!1,closeOnAllClickout:!1,ignoreEditorWindowClickout:!1,closeOnSingleClickout:!0,supportsMobile:!1,props:{audioPlayerNode:this.props.audioPlayerInstance}})};scrollIntoView=()=>{let e=this.props.audioPlayerInstance.getBoundingClientRect();(e.bottom<0||e.top>window.innerHeight)&&this.props.audioPlayerInstance.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})};updateUIWindowPosition=e=>{this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};componentDidMount=()=>{this.props.audioPlayerInstance._editorInterface=this};componentWillUnmount=()=>{this.state.UIWindow?.closeWindow?.(),delete this.props.audioPlayerInstance._editorInterface}},F3=L1});var _2e,F1,hp,z1,_le,B3=V(()=>{ke();Ye();Bs();_2e=ye(Pe(),1);Be();ft();Xr();zr();z3();fe();pe||(F1=new ResizeObserver(t=>{t.forEach(e=>{if(hp.has(e.target)){let r=hp.get(e.target),i=e.borderBoxSize[0]||e.borderBoxSize;r.setState({size:{width:i.inlineSize,height:i.blockSize}})}})}));hp=new Map,z1=class extends me{constructor(e){super(e);let r=this.getFiletype(e.src);this.audio_track=xe(),this.bar=xe(),this.track_buffer=xe(),this.current_time=xe(),this.progressIndicator=xe(),this.state={size:{width:100,height:100},mounted:r!=="stream",filetype:r,seeking:!1,mouseInteractionDisabled:!1,mouseMoveActive:!1,dragging:!1,streaming:!1,paused:!0,playing:!1,started:!1,ended:!1,preventTransition:!1,currentProgress:0,currentBuffer:0,remainingBuffer:0,currentTime:"0:00",rawTimeStamp:0,totalTime:"0:00",progress:0,hasError:!1,hasMetadata:!1}}render(e,r){let{baseNode:i,adminMode:n,label:o,loop:s,"total-time":a,"playback-time":l,"seek-controls":p,"browser-default":f,pageInfo:d}=e,{visible:m}=r,g=!this.state.paused||this.state.started,v=this.props.src?this.props.src:null;return it(S(ce,{children:[n&&d.isEditing&&S(F3,{audioPlayerInstance:i}),S("style",{children:`
					* {
				    	box-sizing: border-box;						
					}

					:host {
						--audio-player-progress: ${this.state.currentProgress/100||0};
						--audio-player-buffer-progress: ${this.state.currentBuffer/100||0};
						--audio-player-buffer-remaining: ${this.state.remainingBuffer/100||0};
						max-width: 100%;
						${f?`
						    width: 400px;
						    `:`
						    position: relative;
						    display: inline-flex;
						    align-items: stretch;
						    width: 100%;`}
					}

					${f&&`
					audio {
						width: 100%;
					}

					[part="time-bar"], 
					[part="button"],
					[part="separator"]{
						display:none!important;
					}						
					`}



					[part="buffer"],
					[part="progress"] {
						display: ${g&&!this.state.streaming?"block":"none"};
					}

					[part="label"] {
						display: ${this.state.paused&&!this.state.started?"block":"none"};
					}

					[part="current-time"] {
						display: ${!this.state.streaming&&this.state.started?"block":"none"};
					}

					[part="stream-anim"] {
						display: ${g&&this.state.streaming?"block":"none"};
					}

					[part="total-time"] {
						display: ${g&&!this.state.streaming?"block":"none"};
					}

					[part="buffer"]{
						left: calc( var(--audio-player-buffer-progress, 0) * 100% );
						width: calc( var(--audio-player-buffer-remaining, 0) * 100% );
					}

					[part="progress"]{
						width: calc( var(--audio-player-progress, 0) * 100% );
					}

					[part="stream-anim"] > span {
					  animation-name: period;
					  animation-duration: 1.5s;
					  animation-iteration-count: infinite;
					  animation-timing-function: steps(2, end);  
					}

					[part="stream-anim"] > span:before {
						content: '.';
					}

					[part="stream-anim"] > span:nth-child(1){
					  animation-delay: -.4s;
					}

					[part="stream-anim"] > span:nth-child(2){
					  animation-delay: -.2s;
					}

					[part="stream-anim"] > span:nth-child(3){
					  animation-delay: 0s;
					}

					@keyframes period {
					  from {
					    visibility: hidden;
					  }
					  to {
					    visibility: visible;
					  }
					   
					}					
				
					`}),S("div",{part:"button",onClick:x=>this.togglePlay(x),children:S("svg",{"vector-effect":"non-scaling-stroke",part:this.state.paused?"play-icon icon":"pause-icon icon",x:"0px",y:"0px",viewBox:this.state.paused?"0 0 11.3 12":"0 0 10 12",children:this.state.paused?S("polygon",{points:"0 0 0 12 11.3 6 0 0",part:"play-icon-path icon-path"}):S(ce,{children:[S("polygon",{part:"pause-icon-path icon-path",points:"0 0 0 12 1 12 4 12 4 0 1 0 0 0"}),S("polygon",{part:"pause-icon-path icon-path",points:"9 0 6 0 6 12 9 12 10 12 10 0 9 0"})]})})}),S("div",{part:"separator",children:"\xA0"}),S("div",{draggable:this.props.adminMode?"true":null,part:"time-bar",ref:this.bar,onMouseDown:x=>this.onMouseDown(x),onTouchStart:x=>this.onMouseDown(x),onTouchEnd:x=>this.onMouseUp(x),children:[S("div",{ref:this.track_buffer,part:"buffer",children:" "}),S("div",{part:"progress",children:S("div",{ref:this.progressIndicator,part:"progress-indicator"})}),S("div",{part:"label",children:this.state.hasError?"Unable to load file":S(ce,{children:this.props.label})}),S("div",{part:"current-time",ref:this.current_time,children:this.state.currentTime}),S("div",{part:"stream-anim",children:[S("span",{part:"animated-period period-one"}),S("span",{part:"animated-period period-two"}),S("span",{part:"animated-period period-three"})]}),S("div",{part:"total-time",children:this.state.totalTime})]}),S("audio",{draggable:this.props.adminMode?"true":null,part:"audio-element",controls:f===!0,src:this.state.mounted?v:null,ref:this.audio_track,loop:this.props.loop===!0||this.props.loop==="true"?!0:void 0,preload:this.state.filetype==="file"?"metadata":null,onProgress:x=>this.onProgress(x),onLoadedMetaData:x=>this.onLoadedMetadata(x),onTimeUpdate:x=>this.updatePlayerTime(x),onSeeking:x=>this.onSeekStart(x),onSeeked:x=>this.onSeekEnd(x),onEnded:x=>this.onTrackEnd(x),onError:x=>this.onError(x),onCanPlay:x=>this.clearError(x)})]}),i.shadowRoot)}disableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!0})};enableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!1})};setPlayState=e=>{this.setState({playing:!0,paused:!1,started:!0,streaming:this.state.filetype==="stream"},()=>{this.props.baseNode.setAttribute("status",this.state.filetype==="stream"?"streaming":"playing")})};setPauseState=e=>{this.setState({paused:!0},()=>{this.props.baseNode.setAttribute("status","stopped")}),this.state.streaming&&this.setInitialState()};setInitialState=(e,r)=>{this.state.streaming&&this.setState({started:!1}),this.setState({playing:!1,paused:!0,animIndex:0,currentTime:0,currentProgress:0,currentBuffer:0,remainingBuffer:0,rawTimeStamp:0},()=>{this.props.baseNode.setAttribute("status",r?.error===!0?"error":"stopped")})};onMouseDown=e=>{this.state.mouseInteractionDisabled||this.state.streaming||e.button===2||this.state.started===!1||(e.preventDefault(),document.body.classList.add("audio-player-dragging"),this.calculateProgressPosition(e),this.setState({mouseMoveActive:!0,preventTransition:!0,dragging:!1}),this.bar.current.addEventListener("mousemove",this.onMouseInteraction),this.bar.current.addEventListener("touchmove",this.onMouseInteraction),window.addEventListener("mousemove",this.onMouseInteraction),window.addEventListener("mouseup",this.onMouseUp))};calculateProgressPosition=e=>{let r=this.bar.current.getBoundingClientRect(),i=e.clientX||e.touches[0].clientX;i<r.left?this.audio_track.current.currentTime=0:i>r.right?this.audio_track.current.currentTime=this.audio_track.current.duration:this.audio_track.current.currentTime=this.audio_track.current.duration*((i-r.left)/this.state.size.width),this.updatePlayerTime()};onMouseInteraction=e=>{this.state.mouseInteractionDisabled||this.state.streaming||!this.state.started||!this.state.mouseMoveActive||this.audio_track.current.readyState===this.audio_track.current.HAVE_NOTHING||(this.calculateProgressPosition(e),this.setState({dragging:!0}))};onMouseUp=e=>{document.body.classList.remove("audio-player-dragging"),this.state.dragging===!0&&(!this.state.mouseInteractionDisabled&&!this.state.streaming&&this.state.started&&this.state.mouseMoveActive&&this.audio_track.current.readyState!==this.audio_track.current.HAVE_NOTHING&&this.calculateProgressPosition(e),this.state.paused===!1&&this.state.started===!0&&(this.audio_track.current.currentTime>=this.audio_track.current.duration-.001?this.setPauseState():this.audio_track.current.play())),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseInteraction),this.bar.current.removeEventListener("mousemove",this.onMouseInteraction),this.bar.current.removeEventListener("touchmove",this.onMouseInteraction),this.setState({dragging:!1,mouseMoveActive:!1})};onSeekStart=e=>{this.setState({seeking:!0})};onSeekEnd=e=>{this.setState({seeking:!1})};togglePlay=e=>{if(!(this.state.mouseInteractionDisabled||!this.state.mounted))if(this.audio_track.current.paused){let r=this.audio_track.current.play();hp.forEach((i,n)=>{i!==this&&(i.audio_track.current.pause(),i.setPauseState())}),r?r.then(function(){this.setPlayState(),this.setState({preventTransition:!1})}.bind(this)).catch(this.onError).finally(function(){this.setState({preventTransition:!0})}.bind(this)):this.setPlayState()}else this.audio_track.current.pause(),this.setPauseState()};onError=e=>{this.props.adminMode||(this.setState({hasError:!0},()=>{this.setInitialState(null,{error:!0})}),e instanceof DOMException&&console.error(e))};clearError=e=>{this.state.hasError&&this.setState({hasError:!1},()=>{this.setInitialState(null,{error:!1})})};onTrackEnd=e=>{this.state.dragging!==!0&&(this.setState({ended:!0}),this.setPauseState())};onLoadedMetadata=e=>{if(!this.audio_track.current)return;let r=this.timestampToHumanReadable(this.audio_track.current.duration);this.setState({totalTime:r,streaming:!1,hasMetadata:!0},()=>{this.props.baseNode.setAttribute("status","stopped")})};onProgress=e=>{this.audio_track.current&&(this.state.filetype==="stream"?this.setState({totalTime:0,streaming:!0,hasMetadata:!0},()=>{this.props.baseNode.setAttribute("status","streaming")}):this.setState({streaming:!1},()=>{this.props.baseNode.setAttribute("status","playing")}),this.updateBufferSize())};updatePlayerTime=e=>{if(cancelAnimationFrame(this.updateFrame),!this.state.started||!this.audio_track.current||this.audio_track.current.readyState===this.audio_track.current.HAVE_NOTHING)return;this.setState({rawTimeStamp:this.audio_track.current.currentTime});let{"browser-default":r}=this.props;if(r)return;let i=!1,n=this.audio_track.current.currentTime,o=this.timestampToHumanReadable(n),s=n/this.audio_track.current.duration*100,a=this.state.size.width,l=parseInt(window.getComputedStyle(this.progressIndicator.current).width);(this.props.loop==="true"||this.props.loop===!0)&&(s>=99.5||s===0)&&(i=!0),a*(s/100)<l&&(s=(100-s)*(l/a)),this.setState(p=>{let f=s;return p.dragging&&Math.abs(p.currentProgress-s)>1&&(f=s*.1+p.currentProgress*.9),this.updateBufferSize(.01*f*this.audio_track.current.duration),{currentTime:o,currentBuffer:f,currentProgress:f,preventTransition:i}}),this.state.dragging&&(this.updateFrame=requestAnimationFrame(this.updatePlayerTime))};getFiletype=(e="")=>{let r=!1;try{r=new URL(e).pathname.split("/").pop()?.indexOf(".")>-1}catch(n){console.error(n)}return r&&["m3u","pls","m3u8","asx"].some(n=>e.toLowerCase().endsWith(n))?"playlist":r?"file":"stream"};updateBufferSize=e=>{if(!this.audio_track.current)return;let r,i=e||this.audio_track.current.currentTime,n=0;for(var o=0;o<this.audio_track.current.buffered.length;o++)if(i>=this.audio_track.current.buffered.start(o)&&i<=this.audio_track.current.buffered.end(o)){r=Math.max(this.audio_track.current.buffered.end(o)-i,0),n=r/this.audio_track.current.duration*100;break}n!==0&&(n+=1),this.setState({remainingBuffer:n})};timestampToHumanReadable=e=>{if(isNaN(e))return"0:00";var r=Math.floor(e%60),i=Math.floor(e/60),n=Math.floor(i/60);return r<10&&(r="0"+r),n>0?(i=i-n*60,i<10&&(i="0"+i),n+":"+i+":"+r):i+":"+r};onDragStart=e=>{this.setState({started:!1}),this.audio_track.current.pause(),this.setInitialState(),e.dataTransfer.setData("audio-player-drag","true")};componentDidMount(){this.setPauseState(),this.state.mounted||setTimeout(()=>{this.setState({mounted:!0})},this.state.filetype==="stream"?2e3:0),pe||(this.props.baseNode.addEventListener("dragstart",this.onDragStart),hp.set(this.bar.current,this),F1.observe(this.bar.current))}componentDidUpdate(e){e.src!==this.props.src&&(this.setState({filetype:this.getFiletype(this.props.src)}),e.src&&e.src.substring(0,5)==="blob:"&&(this.state.rawTimeStamp!==0&&(this.audio_track.current.currentTime=this.state.rawTimeStamp),this.state.paused===!1&&this.audio_track.current.play()))}componentWillUnmount(){pe||(this.props.baseNode.removeEventListener("dragstart",this.onDragStart),hp.delete(this.bar.current),F1.unobserve(this.bar.current)),window.removeEventListener("mouseup",this.onMouseUp)}},_le=Ut(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(z1));sr(_le,"audio-player",["src","label","loop","total-time","playback-time","seek-controls","browser-default"])});var U3=oe((R2e,q3)=>{"use strict";q3.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var i,n,o;if(Array.isArray(e)){if(i=e.length,i!=r.length)return!1;for(n=i;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(r).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=i;n--!==0;){var s=o[n];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r}});function Do(){return Do=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Do.apply(null,arguments)}function ju(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;r[i]=t[i]}return r}function Ele(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cle(t){var e=Ele(t,"string");return typeof e=="symbol"?e:e+""}function Mle(){let[t,e]=wi({});return{mapInstances:t,addMapInstance:(o,s="default")=>{e(a=>Do({},a,{[s]:o}))},removeMapInstance:(o="default")=>{e(s=>ju(s,[o].map(Cle)))},clearMapInstances:()=>{e({})}}}function Rle(t){let{onLoad:e,apiKey:r,version:i,libraries:n=[]}=t,o=ju(t,Ile),[s,a]=wi(dl.loadingStatus),[l,p]=qn((g,v)=>Do({},g,{[v.name]:v.value}),{}),f=Qt(()=>n?.join(","),[n]),d=Qt(()=>JSON.stringify(Do({apiKey:r,version:i},o)),[r,i,o]),m=zs(async g=>{var v;if(l[g])return l[g];if(!((v=google)!=null&&(v=v.maps)!=null&&v.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");let x=await window.google.maps.importLibrary(g);return p({name:g,value:x}),x},[l]);return Ft(()=>{(async()=>{try{let g=Do({key:r},o);i&&(g.v=i),f?.length>0&&(g.libraries=f),g.solutionChannel===void 0?g.solutionChannel=Tle:g.solutionChannel===""&&delete g.solutionChannel,await dl.load(g,v=>a(v));for(let v of["core","maps",...n])await m(v);e&&e()}catch(g){console.error("<ApiProvider> failed to load the Google Maps JavaScript API",g)}})()},[r,f,d]),{status:s,loadedLibraries:l,importLibrary:m}}function kle(t,e){for(let r of Lle){let i=e[r],n=j3[r];Ft(()=>{if(!t||!i)return;let o=google.maps.event.addListener(t,n,s=>{i(Nle(n,t,s))});return()=>o.remove()},[t,n,i])}}function Nle(t,e,r){let i={type:t,map:e,detail:{},stoppable:!1,stop:()=>{}};if(Ole.includes(t)){let o=i,s=e.getCenter(),a=e.getZoom(),l=e.getHeading()||0,p=e.getTilt()||0,f=e.getBounds();return(!s||!f||!Number.isFinite(a))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),o.detail={center:s?.toJSON()||{lat:0,lng:0},zoom:a||0,heading:l,tilt:p,bounds:f?.toJSON()||{north:90,east:180,south:-90,west:-180}},o}else if(Dle.includes(t)){var n;if(!r)throw new Error("[createEvent] mouse events must provide a srcEvent");let o=i;return o.domEvent=r.domEvent,o.stoppable=!0,o.stop=()=>r.stop(),o.detail={latLng:((n=r.latLng)==null?void 0:n.toJSON())||null,placeId:r.placeId},o}return i}function Fle(t,e){let r=xi(void 0);(!r.current||!(0,V3.default)(e,r.current))&&(r.current=e),Ft(t,r.current)}function Ble(t,e){let r={},i=Object.keys(e);for(let n of i)zle.has(n)&&(r[n]=e[n]);Fle(()=>{t&&t.setOptions(r)},[r])}function G3(){var t;return((t=Lr(mp))==null?void 0:t.status)||ys.NOT_LOADED}function qle(t,e){let{viewport:r,viewState:i}=e,n=!!r;return Oi(()=>{if(!t||!i)return;let{latitude:o,longitude:s,bearing:a,pitch:l,zoom:p}=i;t.moveCamera({center:{lat:o,lng:s},heading:a,tilt:l,zoom:p+1})},[t,i]),n}function Ule(t){return!t||typeof t!="object"||!("lat"in t&&"lng"in t)?!1:Number.isFinite(t.lat)&&Number.isFinite(t.lng)}function K3(t){return Ule(t)?t:t.toJSON()}function Hle(t,e,r){let i=r.center?K3(r.center):null,n=null,o=null;i&&Number.isFinite(i.lat)&&Number.isFinite(i.lng)&&(n=i.lat,o=i.lng);let s=Number.isFinite(r.zoom)?r.zoom:null,a=Number.isFinite(r.heading)?r.heading:null,l=Number.isFinite(r.tilt)?r.tilt:null;Oi(()=>{if(!t)return;let p={},f=!1;n!==null&&o!==null&&(e.current.center.lat!==n||e.current.center.lng!==o)&&(p.center={lat:n,lng:o},f=!0),s!==null&&e.current.zoom!==s&&(p.zoom=s,f=!0),a!==null&&e.current.heading!==a&&(p.heading=a,f=!0),l!==null&&e.current.tilt!==l&&(p.tilt=l,f=!0),f&&t.moveCamera(p)})}function Vle(){let[t,e]=wi(null),r=zs(i=>e(i),[e]);return[t,r]}function Y3(){return G3()===ys.LOADED}function $le(){let[,t]=qn(e=>e+1,0);return t}function jle(t,e){let r=t.getCenter(),i=t.getZoom(),n=t.getHeading()||0,o=t.getTilt()||0,s=t.getBounds();(!r||!s||!Number.isFinite(i))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(e.current,{center:r?.toJSON()||{lat:0,lng:0},zoom:i||0,heading:n,tilt:o})}function Gle(t){let e=$le(),r=xi({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return Ft(()=>{if(!t)return;let i=google.maps.event.addListener(t,"bounds_changed",()=>{jle(t,r),e()});return()=>i.remove()},[t,e]),r}function Xle(t,e){let r=Y3(),[i,n]=wi(null),[o,s]=Vle(),a=Gle(i),{id:l,defaultBounds:p,defaultCenter:f,defaultZoom:d,defaultHeading:m,defaultTilt:g,reuseMaps:v,renderingType:x,colorScheme:_}=t,E=ju(t,Kle),O=t.zoom!==void 0||t.defaultZoom!==void 0,L=t.center!==void 0||t.defaultCenter!==void 0;!p&&(!O||!L)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!E.center&&f&&(E.center=f),!E.zoom&&Number.isFinite(d)&&(E.zoom=d),!E.heading&&Number.isFinite(m)&&(E.heading=m),!E.tilt&&Number.isFinite(g)&&(E.tilt=g);for(let D of Object.keys(E))E[D]===void 0&&delete E[D];let I=xi();return Ft(()=>{if(!o||!r)return;let{addMapInstance:D,removeMapInstance:R}=e,{mapId:W}=t,N=`${W||"default"}:${x||"default"}:${_||"LIGHT"}`,z,$;if(v&&$u.has(N)?($=$u.pop(N),z=$.getDiv(),o.appendChild(z),$.setOptions(E),setTimeout(()=>$.setCenter($.getCenter()),0)):(z=document.createElement("div"),z.style.height="100%",o.appendChild(z),$=new google.maps.Map(z,Do({},E,x?{renderingType:x}:{},_?{colorScheme:_}:{}))),n($),D($,l),p){let{padding:q}=p,J=ju(p,Yle);$.fitBounds(J,q)}else(!O||!L)&&$.fitBounds({east:180,west:-180,south:-90,north:90});if(I.current){let{mapId:q,cameraState:J}=I.current;q!==W&&$.setOptions(J)}return()=>{I.current={mapId:W,cameraState:a.current},z.remove(),v?$u.push(N,$):google.maps.event.clearInstanceListeners($),n(null),R(l)}},[o,r,l,t.mapId,t.renderingType,t.colorScheme]),[i,s,a]}function Zle(...t){let e=JSON.stringify(t);H3.has(e)||(H3.add(e),console.error(...t))}function Jle(t){let e=Y3(),r=Lr(mp);return Ft(()=>{!e||!r||r.importLibrary(t)},[e,r,t]),r?.loadedLibraries[t]||null}function Qle(t,e,r){if(e!=null&&typeof e!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");let i=t.style;if(r==null){if(e==null)return;for(let n in e)e.hasOwnProperty(n)&&W3(i,n,e[n]);return}for(let n in r)r.hasOwnProperty(n)&&(e==null||!e.hasOwnProperty(n))&&(n.indexOf("--")===0?i.setProperty(n,""):n==="float"?i.cssFloat="":i[n]="");if(e!=null)for(let n in e){let o=e[n];e.hasOwnProperty(n)&&r[n]!==o&&W3(i,n,o)}}function W3(t,e,r){let i=e.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,r):typeof r=="number"&&r!==0&&!tue(e)?t[e]=r+"px":e==="float"?t.cssFloat=r:t[e]=(""+r).trim()}function tue(t){return eue.has(t)}function zg(t,e,r){Ft(()=>{if(!t||!e||!r)return;let i=google.maps.event.addListener(t,e,r);return()=>i.remove()},[t,e,r])}function fp(t,e,r){Ft(()=>{t&&(t[e]=r)},[t,e,r])}function iue(t){let[e,r]=wi(null),[i,n]=wi(null),o=xi(null),s=Bg(),a=Jle("marker"),{children:l,className:p,style:f,onClick:d,onDrag:m,onDragStart:g,onDragEnd:v,collisionBehavior:x,clickable:_,draggable:E,position:O,title:L,zIndex:I}=t,D=Oa.count(l);return Ft(()=>{if(!s||!a)return;let R=new a.AdvancedMarkerElement;R.map=s,r(R);let W=null;return D>0&&(W=document.createElement("div"),R.content=W,n(W)),()=>{var N;R.map=null,(N=W)==null||N.remove(),r(null),n(null)}},[s,a,D]),Ft(()=>{!e||!e.content||(e.content.className=p||"")},[e,p]),fp(i,"className",p??""),Ft(()=>{i&&(Qle(i,f||null,o.current),o.current=f||null)},[i,p,f]),fp(e,"position",O),fp(e,"title",L??""),fp(e,"zIndex",I),fp(e,"collisionBehavior",x),Ft(()=>{e&&(E!==void 0?e.gmpDraggable=E:m||g||v?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,E,m,v,g]),Ft(()=>{e&&(_!==void 0?e.gmpClickable=_:d?e.gmpClickable=!0:e.gmpClickable=!1)},[e,_,d]),zg(e,"click",d),zg(e,"drag",m),zg(e,"dragstart",g),zg(e,"dragend",v),[e,i]}function oue(t){let[e,r]=wi(null),i=Bg(),{onClick:n,onDrag:o,onDragStart:s,onDragEnd:a,onMouseOver:l,onMouseOut:p}=t,f=ju(t,nue),{position:d,draggable:m}=f;return Ft(()=>{if(!i){i===void 0&&console.error("<Marker> has to be inside a Map component.");return}let g=new google.maps.Marker(f);return g.setMap(i),r(g),()=>{g.setMap(null),r(null)}},[i]),Ft(()=>{if(!e)return;let g=e,v=google.maps.event;return n&&v.addListener(g,"click",n),o&&v.addListener(g,"drag",o),s&&v.addListener(g,"dragstart",s),a&&v.addListener(g,"dragend",a),l&&v.addListener(g,"mouseover",l),p&&v.addListener(g,"mouseout",p),e.setDraggable(!!m),()=>{v.clearInstanceListeners(g)}},[e,m,n,o,s,a,l,p]),Ft(()=>{e&&f&&e.setOptions(f)},[e,f]),Ft(()=>{m||!d||!e||e.setPosition(d)},[m,d,e]),e}var V3,ys,Ple,dl,Ile,Ale,Tle,mp,$3,j3,Ole,Dle,Lle,zle,Wle,Kle,Yle,$u,X3,B1,H3,Bg,eue,rue,Z3,nue,O2e,J3=V(()=>{Ye();Ye();V3=ye(U3(),1);ys={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},Ple="https://maps.googleapis.com/maps/api/js",dl=class{static async load(e,r){var i;let n=e.libraries?e.libraries.split(","):[],o=this.serializeParams(e);this.listeners.push(r),(i=window.google)!=null&&(i=i.maps)!=null&&i.importLibrary?(this.serializedApiParams||(this.loadingStatus=ys.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=o,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==o&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");let s=["maps",...n];await Promise.all(s.map(a=>google.maps.importLibrary(a)))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let r=null,i=()=>r||(r=new Promise((n,o)=>{var s;let a=document.createElement("script"),l=new URLSearchParams;for(let[p,f]of Object.entries(e)){let d=p.replace(/[A-Z]/g,m=>"_"+m[0].toLowerCase());l.set(d,f)}l.set("loading","async"),l.set("callback","__googleMapsCallback__"),a.async=!0,a.src=Ple+"?"+l.toString(),a.nonce=((s=document.querySelector("script[nonce]"))==null?void 0:s.nonce)||"",a.onerror=()=>{this.loadingStatus=ys.FAILED,this.notifyLoadingStatusListeners(),o(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=ys.LOADED,this.notifyLoadingStatusListeners(),n()},window.gm_authFailure=()=>{this.loadingStatus=ys.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=ys.LOADING,this.notifyLoadingStatusListeners(),document.head.append(a)}),r);google.maps.importLibrary=n=>i().then(()=>google.maps.importLibrary(n))}static notifyLoadingStatusListeners(){for(let e of this.listeners)e(this.loadingStatus)}};dl.loadingStatus=ys.NOT_LOADED;dl.serializedApiParams=void 0;dl.listeners=[];Ile=["onLoad","apiKey","version","libraries"],Ale=["children"],Tle="GMP_visgl_rgmlibrary_v1_default",mp=ze.createContext(null);$3=t=>{let{children:e}=t,r=ju(t,Ale),{mapInstances:i,addMapInstance:n,removeMapInstance:o,clearMapInstances:s}=Mle(),{status:a,loadedLibraries:l,importLibrary:p}=Rle(r),f=Qt(()=>({mapInstances:i,addMapInstance:n,removeMapInstance:o,clearMapInstances:s,status:a,loadedLibraries:l,importLibrary:p}),[i,n,o,s,a,l,p]);return ze.createElement(mp.Provider,{value:f},e)};j3={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},Ole=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],Dle=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],Lle=Object.keys(j3);zle=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);Wle=()=>{let t={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return ze.createElement("div",{style:t},ze.createElement("h2",null,"Error: AuthFailure"),ze.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",ze.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};Kle=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"],Yle=["padding"],$u=class{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,r){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(r)}};$u.entries={};X3=ze.createContext(null),B1=t=>{let{children:e,id:r,className:i,style:n}=t,o=Lr(mp),s=G3();if(!o)throw new Error("<Map> can only be used inside an <ApiProvider> component.");let[a,l,p]=Xle(t,o);Hle(a,p,t),kle(a,t),Ble(a,t);let f=qle(a,t),d=!!t.controlled;Ft(()=>{if(a)return f&&a.setOptions({disableDefaultUI:!0}),(f||d)&&a.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{a.setOptions({gestureHandling:t.gestureHandling,keyboardShortcuts:t.keyboardShortcuts})}},[a,f,d,t.gestureHandling,t.keyboardShortcuts]);let m=t.center?K3(t.center):null,g=null,v=null;m&&Number.isFinite(m.lat)&&Number.isFinite(m.lng)&&(g=m.lat,v=m.lng);let x=Qt(()=>{var O,L,I,D,R;return{center:{lat:(O=g)!=null?O:0,lng:(L=v)!=null?L:0},zoom:(I=t.zoom)!=null?I:0,heading:(D=t.heading)!=null?D:0,tilt:(R=t.tilt)!=null?R:0}},[g,v,t.zoom,t.heading,t.tilt]);Oi(()=>{if(!a||!d)return;a.moveCamera(x);let O=a.addListener("bounds_changed",()=>{a.moveCamera(x)});return()=>O.remove()},[a,d,x]);let _=Qt(()=>Do({width:"100%",height:"100%",position:"relative",zIndex:f?-1:0},n),[n,f]),E=Qt(()=>({map:a}),[a]);return s===ys.AUTH_FAILURE?ze.createElement("div",{style:Do({position:"relative"},i?{}:_),className:i},ze.createElement(Wle,null)):ze.createElement("div",Do({ref:l,"data-testid":"map",style:i?void 0:_,className:i},r?{id:r}:{}),a?ze.createElement(X3.Provider,{value:E},e):null)};B1.deckGLViewProps=!0;H3=new Set;Bg=(t=null)=>{let e=Lr(mp),{map:r}=Lr(X3)||{};if(e===null)return Zle("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;let{mapInstances:i}=e;return t!==null?i[t]||null:r||i.default||null};eue=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);rue=ze.createContext(null);Z3=Di((t,e)=>{let{children:r}=t,[i,n]=iue(t),o=Qt(()=>i?{marker:i}:null,[i]);return Fs(e,()=>i,[i]),n?ze.createElement(rue.Provider,{value:o},it(r,n)):null}),nue=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];O2e=Di((t,e)=>{let r=oue(t);return Fs(e,()=>r,[r]),ze.createElement(ze.Fragment,null)})});var vp,gp,sue,Gu,Q3,q1,L2e,F2e,Lo,z2e,B2e,q2e,U2e,H2e,eB=V(()=>{vp=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-vp.Bounce.Out(1-t)},Out:function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375},InOut:function(t){return t<.5?vp.Bounce.In(t*2)*.5:vp.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),gp=function(){return performance.now()},sue=function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var n=0,o=r;n<o.length;n++){var s=o[n];(e=s._group)===null||e===void 0||e.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},t.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,n=e;i<n.length;i++){var o=n[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},t.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},t.prototype.update=function(e,r){e===void 0&&(e=gp()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var o=this._tweens[i[n]],s=!r;o&&o.update(e,s)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},t}(),Gu={Linear:function(t,e){var r=t.length-1,i=r*e,n=Math.floor(i),o=Gu.Utils.Linear;return e<0?o(t[0],t[1],i):e>1?o(t[r],t[r-1],r-i):o(t[n],t[n+1>r?r:n+1],i-n)},Bezier:function(t,e){for(var r=0,i=t.length-1,n=Math.pow,o=Gu.Utils.Bernstein,s=0;s<=i;s++)r+=n(1-e,i-s)*n(e,s)*t[s]*o(i,s);return r},CatmullRom:function(t,e){var r=t.length-1,i=r*e,n=Math.floor(i),o=Gu.Utils.CatmullRom;return t[0]===t[r]?(e<0&&(n=Math.floor(i=r*(1+e))),o(t[(n-1+r)%r],t[n],t[(n+1)%r],t[(n+2)%r],i-n)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[r]-(o(t[r],t[r],t[r-1],t[r-1],i-r)-t[r]):o(t[n?n-1:0],t[n],t[r<n+1?r:n+1],t[r<n+2?r:n+2],i-n)},Utils:{Linear:function(t,e,r){return(e-t)*r+t},Bernstein:function(t,e){var r=Gu.Utils.Factorial;return r(t)/r(e)/r(t-e)},Factorial:function(){var t=[1];return function(e){var r=1;if(t[e])return t[e];for(var i=e;i>1;i--)r*=i;return t[e]=r,r}}(),CatmullRom:function(t,e,r,i,n){var o=(r-t)*.5,s=(i-e)*.5,a=n*n,l=n*a;return(2*e-2*r+o+s)*l+(-3*e+3*r-2*o-s)*a+o*n+e}}},Q3=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),q1=new sue,L2e=function(){function t(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=vp.Linear.None,this._interpolationFunction=Gu.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Q3.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=q1,q1.add(this))}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,r){if(e===void 0&&(e=gp()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var n={};for(var o in this._valuesEnd)n[o]=this._valuesEnd[o];this._valuesEnd=n}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,r,i,n,o){for(var s in i){var a=e[s],l=Array.isArray(a),p=l?"array":typeof a,f=!l&&Array.isArray(i[s]);if(!(p==="undefined"||p==="function")){if(f){var d=i[s];if(d.length===0)continue;for(var m=[a],g=0,v=d.length;g<v;g+=1){var x=this._handleRelativeValue(a,d[g]);if(isNaN(x)){f=!1,console.warn("Found invalid interpolation list. Skipping.");break}m.push(x)}f&&(i[s]=m)}if((p==="object"||l)&&a&&!f){r[s]=l?[]:{};var _=a;for(var E in _)r[s][E]=_[E];n[s]=l?[]:{};var d=i[s];if(!this._isDynamic){var O={};for(var E in d)O[E]=d[E];i[s]=d=O}this._setupProperties(_,r[s],d,n[s],o)}else(typeof r[s]>"u"||o)&&(r[s]=a),l||(r[s]*=1),f?n[s]=i[s].slice().reverse():n[s]=r[s]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},t.prototype.pause=function(e){return e===void 0&&(e=gp()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},t.prototype.resume=function(e){return e===void 0&&(e=gp()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},t.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},t.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=vp.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=Gu.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,r){var i=this,n;if(e===void 0&&(e=gp()),r===void 0&&(r=t.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,a=this._duration+((n=this._repeatDelayTime)!==null&&n!==void 0?n:this._delayTime),l=this._duration+this._repeat*a,p=function(){if(i._duration===0||s>l)return 1;var x=Math.trunc(s/a),_=s-x*a,E=Math.min(_/i._duration,1);return E===0&&s===i._duration?1:E},f=p(),d=this._easingFunction(f);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),this._onUpdateCallback&&this._onUpdateCallback(this._object,f),this._duration===0||s>=this._duration)if(this._repeat>0){var m=Math.min(Math.trunc((s-this._duration)/a)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=m);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=a*m,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var g=0,v=this._chainedTweens.length;g<v;g++)this._chainedTweens[g].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,r,i,n){for(var o in i)if(r[o]!==void 0){var s=r[o]||0,a=i[o],l=Array.isArray(e[o]),p=Array.isArray(a),f=!l&&p;f?e[o]=this._interpolationFunction(a,n):typeof a=="object"&&a?this._updateProperties(e[o],s,a,n):(a=this._handleRelativeValue(s,a),typeof a=="number"&&(e[o]=s+(a-s)*n))}},t.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},t.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},t.autoStartOnUpdate=!1,t}(),F2e=Q3.nextId,Lo=q1,z2e=Lo.getAll.bind(Lo),B2e=Lo.removeAll.bind(Lo),q2e=Lo.add.bind(Lo),U2e=Lo.remove.bind(Lo),H2e=Lo.update.bind(Lo)});var tB,U1,rB,iB=V(()=>{ke();Ye();Bt();ps();qr();tB=ye(Pe(),1);Kn();fe();U1=class extends me{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:null,focused:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,showInsertionIndicator:!1,map:null,markers:[]},this.onMutate=tB.default.debounce(this.onMutate,0),this.changeObserver=new MutationObserver(this.onMutate)}handleMarkerDragEnd=e=>{let{index:r,lat:i,lng:n}=e.detail;if(isNaN(i)||isNaN(n))return;let o=[...this.state.markers];o[r]={...o[r],lat:i,lng:n},CargoEditor.mutationManager.execute(()=>{this.state.map.setAttribute("markers",encodeURIComponent(JSON.stringify(o)))})};onChange(e){CargoEditor.mutationManager.execute(()=>{if(Object.keys(e)[0]==="markers")if(!this.state.markers||e.markers.length!==this.state.markers.length)this.state.map.setAttribute("markers",encodeURIComponent(JSON.stringify(e.markers)));else{let r=this.state.markers.map((i,n)=>e.markers[n]?{...i,...e.markers[n]}:i);console.log("newMarkers",r),this.state.map.setAttribute("markers",encodeURIComponent(JSON.stringify(r)))}})}render(e,r){let{mapInstance:i}=e,{draggingOver:n,showInsertionIndicator:o,buttonHovered:s,focused:a}=r,l=23;return S(ce,{children:[S("style",{id:"map-editor",children:`::selection{
						background-color:transparent;
					}
					:host(::selection) {
						background-color:transparent;
					}`}),S(Ei,{hasFocus:a,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,baseNode:this.props.mapInstance,render:p=>{let{pointerAttention:f,overlayPosition:d}=p,m=0;return d.y<=1&&(m=Math.min(-d.y+1,d.height+-l+1)),S(ce,{children:S("div",{className:`editor-overlay ${f?" button-hover":""}${a?" focus":""}`,style:{transform:`translate3d(${d.x}px, ${d.y}px, 0)`,width:d.width+"px",height:d.height+"px",display:f||s||a?"block":"none",minHeight:"27px"},children:[S("div",{className:"in-editor-buttons map",style:{transform:`translateY(${m}px)`,padding:"10px"},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[S("button",{onMouseDown:g=>{let v=this.state.map.map.getCenter(),x="",_=v.lat(),E=v.lng(),O=this.state.markers?[...this.state.markers,{purl:x,scrollToPage:!1,lat:_,lng:E}]:[{purl:x,scrollToPage:!1,lat:_,lng:E}];this.onChange({markers:O});let L=O.length-1;setTimeout(()=>{this.state.map.dispatchEvent(new CustomEvent("marker-click",{detail:{index:O.length-1,clientY:null,clientX:null}}))},200)},ref:this.MapButtonRef,className:"text",children:"Add Marker"}),S("button",{onMouseDown:g=>{this.launchMapUIWindow(g)},ref:this.MapButtonRef,className:"text",children:"Settings"}),e.children]}),e.otherUI]})})}})]})}handleMarkerClick=e=>{this.launchMarkerUIWindow(e.detail)};launchMarkerUIWindow=({clientX:e,clientY:r,index:i})=>{let o=(this.state.map?.shadowRoot?.querySelectorAll(`.marker-${i}`)[0]).getBoundingClientRect(),s={x:o.x,y:o.y,left:o.right,right:o.right,top:o.top-10,bottom:o.top+27,width:o.width,height:10};Ce.adminWindow.UIWindowOpener.openUIWindow({windowName:"map-ineditor",windowAlias:"map",positionRect:s,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!1,props:{mapNode:this.props.mapInstance,markerIndex:i}})};launchMapUIWindow=(e,r)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.props.mapInstance.getBoundingClientRect(),n={x:i.x-10,y:i.y,left:i.right-10,right:i.right-10,top:i.top-10,bottom:i.top+27,width:i.width,height:10};Ce.adminWindow.UIWindowOpener.openUIWindow({windowName:"map-ineditor",windowAlias:"map",positionRect:n,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!1,props:{mapNode:this.props.mapInstance}})};scrollIntoView=()=>{let e=this.props.mapInstance.getBoundingClientRect();(e.bottom<0||e.top>window.innerHeight)&&this.props.mapInstance.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})};updateUIWindowPosition=e=>{this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};onMutate=()=>{this.getSettingsFromNodes()};getSettingsFromNodes(){this.setState({...this.state,map:this.props.mapInstance,markers:JSON.parse(decodeURIComponent(this.props.mapInstance.getAttribute("markers")||"[]"))})}componentDidUpdate=(e,r)=>{this.changeObserver.disconnect(),this.changeObserver.observe(this.state.map,{attributes:!0})};componentDidMount=()=>{this.props.mapInstance._editorInterface=this,this.canMutateTimeout=setTimeout(()=>{this.setState({...this.state,canMutate:!0})},300),this.getSettingsFromNodes(),this.props.mapInstance.addEventListener("marker-dragend",this.handleMarkerDragEnd),this.props.mapInstance.addEventListener("marker-click",this.handleMarkerClick)};componentWillUnmount=()=>{this.props.mapInstance.removeEventListener("marker-dragend",this.handleMarkerDragEnd),this.props.mapInstance.removeEventListener("marker-click",this.handleMarkerClick),this.state.UIWindow?.closeWindow?.(),delete this.props.mapInstance._editorInterface,clearTimeout(this.canMutateTimeout),this.onMutate.cancel(),this.changeObserver.disconnect()}},rB=U1});var lFe,H1,aue,qg,nB,lue,Ug,W1,uue,oB=V(()=>{ke();Ye();lFe=ye(Pe(),1);Be();ft();Xr();Bt();Pr();J3();eB();Bs();zr();iB();Zx();fe();aue=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,qg=(t,e,r,i={})=>{r=Math.round(r);let{duration:n=1e3,easing:o=aue}=i,s=performance.now(),a=t.getCenter(),l=t.getZoom(),p=t.getProjection(),f=new google.maps.LatLng(e),d=p.fromLatLngToPoint(f),m=p.fromLatLngToPoint(a),g=r-l;function v(_,E,O){return _+(E-_)*O}function x(){let E=performance.now()-s,O=Math.min(E/n,1),L=o(O),I=v(l,r,L),D=new google.maps.Point(v(m.x,d.x,L),v(m.y,d.y,L)),R,W;g>0&&(R=Math.pow(2,Math.abs(I-l)),W=new google.maps.Point(d.x+(D.x-d.x)/R,d.y+(D.y-d.y)/R)),g<0&&(R=Math.pow(2,Math.abs(I-r)),W=new google.maps.Point(m.x+(D.x-m.x)/R,m.y+(D.y-m.y)/R)),g===0&&(Math.sqrt(Math.pow(f.lat()-a.lat(),2)+Math.pow(f.lng()-a.lng(),2))*Math.pow(2,I-l)<4?W=D:W=d);let N=p.fromPointToLatLng(W);t.moveCamera({center:N,zoom:I});let z={x:d.x-W.x,y:d.y-W.y};(g!==0||z.x!==0||z.y!==0)&&O<1&&requestAnimationFrame(x)}x()},nB=()=>S("svg",{width:"58",height:"50",viewBox:"0 0 2 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S("path",{d:"M0.112305 0.460083L28.9258 14.1374L2.10889 24.6191V49.701H0.108887V22.9724H0.112305V0.460083Z",fill:"#FF0026"})}),lue=({targetNode:t,activePurl:e})=>{let r=Bg();return Ft(()=>{r&&(google.maps.event.addListenerOnce(r,"idle",()=>{let i=t.hasAttribute("follow-navigation")?t.getAttribute("follow-navigation")==="true":!1;if(e&&i){let o=(t.hasAttribute("markers")?JSON.parse(decodeURIComponent(t.getAttribute("markers"))):[]).find(s=>s.purl===e);o&&r.moveCamera({center:{lat:o.lat,lng:o.lng},zoom:17})}}),t.map=r)},[r]),null};pe||(H1=new ResizeObserver(t=>{t.forEach(e=>{if(Ug.has(e.target)){let r=Ug.get(e.target),i=e.borderBoxSize[0]||e.borderBoxSize;r.setState({size:{width:i.inlineSize,height:i.blockSize}})}})}));Ug=new Map,W1=class extends me{constructor(e){super(e),this.state={mounted:!1,tagText:null,isInCrossOriginIFrame:!0,mapId:this.getMobileMapId(e["map-id"])},this.mapRef=xe()}parseMarkersAttr(e){return JSON.parse(decodeURIComponent(e))}encodeMarkersAttr(e){return""}render(e,r){let{baseNode:i,adminMode:n,isEditing:o,pageInfo:s,markers:a,width:l="100%",height:p="50vh","map-id":f="6f83276caebd115a",isMobile:d,"default-bounds":m,"show-zoom-controls":g=!1,"show-street-view-controls":v=!1,"show-map-type-controls":x=!1,"follow-navigation":_=!1}=e,E="AIzaSyAuHt0V0nJ5qTiUoWwsOwDfkTv0n1PJUNA",O=m?JSON.parse(decodeURIComponent(m)):{north:34.199298711595,east:-118.20583547095032,west:34.0103546000496,south:-118.33143248997767,padding:0},L=[];if(a&&(L=this.parseMarkersAttr(a)),this.state.tagText!==null&&_===!0){let D=this.state.tagText.split(",").reduce((R,W)=>{let N=this.props.purlsByTag[W];if(!N||N.length===0)return R;for(let z of N)R.includes(z)||R.push(z);return R},[]);L=L.filter(R=>D.includes(R.purl))}return it(S(ce,{children:[n&&s.isEditing&&S(rB,{mapInstance:i}),S("style",{children:`
					* {
				    	box-sizing: border-box;						
					}

					:host {
                        width: ${l};
                        height: ${p};
                        max-width: 100%;
                        max-height: var(--fit-height);
                        display: inline-block;
                        overflow: hidden;
					}

                    .gm-style iframe + div { border:none!important; }
				
					`}),E?S($3,{apiKey:E,children:S(B1,{defaultBounds:O,mapId:this.state.mapId,ref:this.mapRef,fullscreenControl:!1,gestureHandling:"greedy",streetViewControl:v==="true"||v===!0,mapTypeControl:x==="true"||x===!0,zoomControl:g==="true"||g===!0,clickableIcons:!1,children:[L&&L.length?L.map((I,D)=>!I.lat||!I.lng?null:S(Z3,{className:`marker-${D} ${I.id?`mid-${I.id}`:""}`,draggable:!!(n&&s.isEditing),onClick:n&&s.isEditing?R=>{this.props.baseNode.dispatchEvent(new CustomEvent("marker-click",{detail:{index:D}}))}:n===!1?()=>{}:null,onDragEnd:R=>{this.props.baseNode.dispatchEvent(new CustomEvent("marker-dragend",{detail:{index:D,lat:R.latLng.lat(),lng:R.latLng.lng()}}))},position:{lat:I.lat,lng:I.lng},children:n||I.purl==="default"||I.purl===""?S(nB,{}):S("a",{href:`${I.scrollToPage?"#":""}${I.purl}`,rel:"history",style:{fontSize:"24px",lineHeight:1,marginBottom:"-4px"},onClick:()=>{qg(this.props.baseNode.map,{lat:I.lat,lng:I.lng},17)},children:S(nB,{})})},D)):null,S(lue,{targetNode:i,activePurl:this.props.activePurl})]})}):S("div",{style:{width:"100%",height:"100%",background:"gray",color:"red",fontSize:"24px"},children:"API key is required for Google Maps"})]}),i.shadowRoot)}disableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!0})};enableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!1})};getBoundsZoomLevel(e,r){var i={height:256,width:256},n=21;function o(v){var x=Math.sin(v*Math.PI/180),_=Math.log((1+x)/(1-x))/2;return Math.max(Math.min(_,Math.PI),-Math.PI)/2}function s(v,x,_){return Math.floor(Math.log(v/x/_)/Math.LN2)}var a=e.getNorthEast(),l=e.getSouthWest(),p=(o(a.lat())-o(l.lat()))/Math.PI,f=a.lng()-l.lng(),d=(f<0?f+360:f)/360,m=s(r.height,i.height,p),g=s(r.width,i.width,d);return Math.min(m,g,n)}resetMap=()=>{let e=this.props["default-bounds"]?JSON.parse(decodeURIComponent(this.props["default-bounds"])):{north:34.24028483839939,east:-118.16102709664018,west:-118.32410540683625,south:33.994992380212196,padding:0},r=new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.west),new google.maps.LatLng(e.north,e.east)),i=this.getBoundsZoomLevel(r,{width:this.state.size.width,height:this.state.size.height});qg(this.props.baseNode.map,r.getCenter(),i)};handleGlobalClick=(e,r)=>{if(!this.props.markers||this.props.adminMode===!0)return;let i=JSON.parse(decodeURIComponent(this.props.markers));if(r.getAttribute("rel")==="map-marker"){let s=r.getAttribute("href");if(s){let a=i.find(l=>l.id===s);a&&qg(this.props.baseNode.map,{lat:a.lat,lng:a.lng},17);return}else return}let n=r.getAttribute("href");if(!n)return;r.hasAttribute("tag-text")?this.setState({tagText:r.getAttribute("tag-text")}):this.setState({tagText:null});let o=null;for(let s of i)if(s.purl===n){o=s;break}o?qg(this.props.baseNode.map,{lat:o.lat,lng:o.lng},17):this.resetMap()};componentDidMount(){if(pe)return;Ug.set(this.props.baseNode,this),H1.observe(this.props.baseNode),this.props.baseNode.handleGlobalClick=this.handleGlobalClick;let e=!1;try{e=!!(window.parent?.location?.host&&window.location.host!==window.parent.location.host)}catch{e=!0}this.setState({mounted:!0,isInCrossOriginIFrame:e})}getMobileMapId=(e="6f83276caebd115a")=>(console.log("getMobileMapId",e),{"6f83276caebd115a":"253a84a7bd441322","88cce47d0e4397ad":"ed1c36f3c0173c73"}[e]||e);componentDidUpdate(e,r){r.mapId!==this.state.mapId&&console.log("Map ID changed",this.state.mapId),!(e.isMobile===this.props.isMobile&&r.isInCrossOriginIFrame===this.state.isInCrossOriginIFrame)&&(e.isMobile!==this.props.isMobile&&(this.props.isMobile?this.setState({mapId:this.getMobileMapId(this.props["map-id"])}):this.setState({mapId:this.props["map-id"]||"6f83276caebd115a"})),r.isInCrossOriginIFrame!==this.state.isInCrossOriginIFrame&&(this.state.isInCrossOriginIFrame&&mapIdMobileLookup[this.props["map-id"]]?this.setState({mapId:this.getMobileMapId(this.props["map-id"])}):this.setState({mapId:this.props["map-id"]||"6f83276caebd115a"})))}componentWillUnmount(){pe||(Ug.delete(this.props.baseNode),H1.unobserve(this.props.baseNode))}},uue=Ut(Ue((t,e)=>{let r=t.pages.byId,o=(e.markers?JSON.parse(decodeURIComponent(e.markers)).map(a=>a?.purl):[]).map(a=>Object.values(r).find(l=>l.purl===a)).reduce((a,l)=>(l&&l.tags&&l.tags.forEach(p=>{a[p.url]||(a[p.url]=[]),a[p.url].push(l.purl)}),a),{}),s=t.pages.byId[t.frontendState.activePID]?.purl;return{purlsByTag:o,activePurl:s,adminMode:t.frontendState.adminMode,isMobile:t.frontendState.isMobile}})(W1));sr(uue,"cargo-map",["api-key"])});var $1,cue,due,Ku,V1,j1,sB,aB=V(()=>{ke();Ye();Bt();ps();qr();Kn();Be();$1=ye(Pe(),1);fe();cue=["{day}, {month-name} {day-of-month}, {year} {hour}:{minute} {period}","{hour}:{minute}:{second} {period}","{hour}:{minute}:{second}","{day-of-month}-{month}-{year}","{day-of-month} {month-name} {year}","{month-name} {day-of-month}, {year}","{month}/{day-of-month}/{year}","{day-of-month}/{month}/{year}","{time-of-day} of the {ordinal}"],due={day:"Day","day-of-month":"Day of Month",ordinal:"Ordinal Date",month:"Month","month-name":"Name of Month",period:"AM/PM",year:"Year",hour:"Hour",minute:"Minute",second:"Second",centisecond:"Centisecond","roman-year":"Year in Roman Numerals","time-of-day":"Time of Day"},Ku=new Set,V1=$1.default.debounce(()=>{let t=Array.from(Ku),e=[],r=t.filter(o=>o.state.selected).length>1,i=0;if(r){let o=t.map(a=>{let l;return a.state.selected?l=a.props.baseNode.getBoundingClientRect():l={top:-9e9},{component:a,rect:l}});e=$1.default.sortBy(o,(a,l)=>a.rect.top);let s=e.filter(a=>a.component.state.selected);i=s[s.length-1].rect.bottom+-s[0].rect.top,e=e.map(a=>a.component)}else e=t;let n=!1;e.forEach(o=>{!r||!o.state.selected?o.setState({pointerProxyAttention:!1,partOfMultipleSelection:!1,showMultipleSelectionButton:!1,multiSelectHeight:null}):n?o.setState({partOfMultipleSelection:!0,showMultipleSelectionButton:!1,multiSelectHeight:null}):(o.setState({pointerProxyAttention:!0,partOfMultipleSelection:!0,showMultipleSelectionButton:!0,multiSelectHeight:i}),n=!0)})},100);pe||(CargoEditor&&Object.keys(CargoEditor||{}).length>0?CargoEditor.events.on("cursor-activity",V1):window.addEventListener("CargoEditor-load",function(){CargoEditor.events.on("cursor-activity",V1)}),document.addEventListener("selectionchange",V1));j1=class extends me{constructor(e){super(e),this.state={UIWindow:!1,showMultipleSelectionButton:!1,partOfMultipleSelection:!1,fontSizePx:16,lineHeightPx:24,selected:!1}}render(e,r){let{}=e,{UIWindow:i,showMultipleSelectionButton:n,partOfMultipleSelection:o,pointerProxyAttention:s,fontSizePx:a,lineHeightPx:l}=r,p,f=0,d=this.state.showMultipleSelectionButton&&this.state.multiSelectHeight;return S(ce,{children:[S("style",{id:"digital-clock-editor",children:`::selection{
						background-color:transparent;
					}
					:host(::selection) {
						background-color:transparent;
					}`}),S(Zr,{baseNode:this.props.clockInstance,overlayMode:!1,onSelectionChange:this.onSelectionChange}),S(Ei,{hasFocus:!!i,trackResize:!0,buttonMode:"inside",baseNode:this.props.clockInstance,buttonHeight:0,onPointerIn:this.pointerIn,onPointerOut:this.pointerOut,render:m=>{let{pointerAttention:g,overlayPosition:v}=m,x=0;return v.y<=1&&(x=Math.min(-v.y+1,v.height+-f+1)),n&&o?p=S("button",{style:{transform:`translateY(${x}px)`},"data-editor-overlay":"true",class:`${v.height<30?"small":""} clock-button multiple`,onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,onMouseUp:this.onOptionsButtonContextMenu,children:"Edit Multiple"}):!n&&!o&&(p=S("button",{style:{transform:`translateY(${x}px)`},"data-editor-overlay":"true",class:`${v.height<30?"small":""} clock-button`,onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,children:S("svg",{width:"17",height:"18",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S("circle",{className:"inner-circle",cx:"8.5",cy:"8.65747",r:"7.5"}),S("circle",{className:"outer-circle",cx:"8.5",cy:"8.65747",r:"8"}),S("circle",{className:"dot",cx:"8.49977",cy:"8.65747",r:"1"}),S("circle",{className:"dot",cx:"5.07",cy:"8.65747",r:"1"}),S("circle",{className:"dot",cx:"11.9295",cy:"8.65747",r:"1"})]})})),S(ce,{children:S("div",{className:`editor-overlay ${n?"edit-multiple":""} digital-clock editor-outline${g||i?" hover":""}${g||i?" button-hover":""}${i?" focus":""}`,style:{transform:`translate3d(${v.x}px, ${v.y}px, 0)`,width:v.width+"px",height:d?this.state.multiSelectHeight:v.height+"px"},children:[p,e.children]})})}})]})}onOptionsButtonContextMenu=e=>{e.metaKey||e.preventDefault()};onMouseDown=e=>{e.button==2&&!e.metaKey&&(e.preventDefault(),this.launchUIWindow(e))};onOptionsButtonClick=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation(),this.launchUIWindow()}};launchUIWindow=e=>{let r=this.props.clockInstance.getBoundingClientRect(),i=document.documentElement.clientHeight,n=document.documentElement.clientWidth,o=this.props.clockInstance.getAttribute("value"),a=cue.includes(o)||o?.indexOf?.("{")===-1?270:360,l=220,p=15,f=r.left,d=r.top,m={x:r.left,y:r.top,left:r.left,right:r.left,top:r.top,bottom:r.top+27,width:0,height:10};i-r.bottom>a+p?d=r.top+r.height+p:i-(r.bottom+-r.height*.5)>a+p?d=r.top+r.height*.5+p:r.top>a+-p&&(d=r.top+-a+-p),n-r.left<l&&(f=r.left-l),m.x=f,m.left=f,m.right=f,m.width=0,m.height=0,m.y=d,m.top=d,m.bottom=d,Ce.adminWindow.UIWindowOpener.openUIWindow({windowName:"digital-clock",positionRect:m,closeButton:!1,closeOnSingleClickout:!0,ignoreEditorWindowClickout:!1,supportsMobile:!1,props:{clickedElement:this.props.clockInstance,elements:Array.from(Ku).filter(g=>g.state.selected||g.props.clockInstance===this.props.clockInstance).map(g=>g.props.clockInstance)}})};pointerIn=()=>{this.state.selected&&Ku.forEach(r=>{r.state.showMultipleSelectionButton&&r.setState({pointerProxyAttention:!0})});let e=window.getComputedStyle(this.props.clockInstance);this.setState({fontSizePx:e.getPropertyValue("font-size"),lineHeightPx:e.getPropertyValue("line-height"),pointerAttention:!0})};pointerOut=()=>{this.state.selected&&Ku.forEach(e=>{e.state.pointerProxyAttention&&e.setState({pointerProxyAttention:!1})}),this.setState({pointerAttention:!1})};onSelectionChange=e=>{!e&&this.state.showMultipleSelectionButton&&this.setState({pointerProxyAttention:!1,showMultipleSelectionButton:!1}),this.setState({selected:e})};setUIWindow=e=>{this.setState({UIWindow:e})};updateUIWindowPosition=e=>{this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};componentDidMount(){Ku.add(this),this.props.clockInstance._editorInterface=this,this.props.clockInstance._newClock&&(delete this.props.clockInstance._newClock,setTimeout(()=>{this.launchUIWindow()},10)),this.props.clockInstance.addEventListener("contextmenu",this.onMouseDown)}componentWillUnmount(){this.props.clockInstance.removeEventListener("contextmenu",this.onMouseDown),Ku.delete(this),this.state.UIWindow?.closeWindow?.(),delete this.props.clockInstance._editorInterface}componentDidUpdate(e,r){this.props.value!==e.value&&this.props.clockInstance.getAttribute("value")&&this.state.UIWindow?.setState?.({customVal:due.hasOwnProperty(this.props.value)?"{"+this.props.value+"}":this.props.value})}},sB=j1});var t5e,yp,Hg,pue,hue,fue,lB,Wg,mue,uB=V(()=>{ke();Ye();Be();ft();Be();zr();Yr();aB();t5e=ye(Pe(),1);Xr();fe();yp=new Set,Hg=null,pue=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],hue=["january","february","march","april","may","june","july","august","september","october","november","december"],fue=["time-of-day","day","day-of-month","ordinal","month","month-name","period","roman-year","year","hour","minute","second","centisecond"],lB=t=>{yp.forEach(e=>{let r=new Date;e.updateTime(r)}),Hg=requestAnimationFrame(lB)},Wg=class extends me{constructor(e){super(e),this.state={}}romanize(e){if(isNaN(e))return NaN;for(var r=String(+e).split(""),i=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],n="",o=3;o--;)n=(i[+r.pop()+o*10]||"")+n;return Array(+r.join("")+1).join("M")+n}pad=e=>e<10?"0"+e:e.toString();dateTerms=(e,r)=>{switch(e){case"{time-of-day}":return S("span",{part:"time-of-day section"},"time-of-day-"+r);case"{day-of-month}":return S("span",{part:"day-of-month section",children:this.state["day-of-month"]},"day-of-month-"+r);case"{ordinal}":return S("span",{part:"ordinal section"},"ordinal"+r);case"{month}":return S("span",{part:"month section",children:this.state.month},"month-"+r);case"{day}":return S("span",{part:"day section"},"day-"+r);case"{roman-year}":return S("span",{part:"roman-year section",children:this.state.romanYear},"roman-year-"+r);case"{centisecond}":return S("span",{part:"centisecond section",children:this.state.centisecond},"roman-year-"+r);case"{year}":return S("span",{part:"year section",children:this.state.year},"year-"+r);case"{month-name}":return S("span",{part:"month-name section"},"month-name-"+r);case"{hour}":return S("span",{part:"hour section",children:this.props["twentyfour-hour"]?this.state["24hour"]:this.state["12hour"]},"hour-"+r);case"{minute}":return S("span",{part:"minute section",children:this.state.minute},"minute-"+r);case"{second}":return S("span",{part:"second section",children:this.state.second},"second-"+r);case"{period}":return S("span",{part:"period section"},"period-"+r)}return null};updateTime=e=>{let r=this.props["pad-hour"]||this.props.pad,i=this.props["pad-minute"]||this.props.pad,n=this.props["pad-second"]||this.props.pad,o=this.props["pad-day-of-month"]||this.props.pad,s=this.props["pad-month"]||this.props.pad;if(this.props.timezone!=="local"){let _=e.getTimezoneOffset(),E=this.props.timezone;if(this.props.timezone.indexOf(":")>-1){let I=this.props.timezone.split(":");I.length=2,E=parseFloat(I[0])+parseFloat(I[1]||0)/60}let O=-(-_-parseFloat(E*60))||0,L=Date.now();e=new Date(L+O*6e4)}let a=o?this.pad(e.getDate()):e.getDate(),l=pue[e.getDay()],p=e.getMonth(),f=e.getFullYear(),d=e.getHours(),m=e.getMinutes(),g=e.getSeconds(),v=e.getMilliseconds(),x=Math.floor(d/3)*3;this.setState({day:l,"day-of-month":a,"time-of-day":x+"-"+(parseInt(x)+3),ordinal:a,"month-name":hue[p],month:s?this.pad(p+1):p+1,romanYear:this.romanize(f),year:this.props["truncate-year"]?f.toString().substring(2,4):f,period:d>=12?"pm":"am","12hour":r?this.pad(d%12==0?12:d%12):d%12==0?12:d%12,"24hour":r?this.pad(d):d,minute:i?this.pad(m):m,second:n?this.pad(g):g,centisecond:this.pad(Math.floor(v/10))})};render(e,r){let{pageInfo:i,adminMode:n,value:o}=this.props,s=[],a;if(o.indexOf("{")==-1&&(a=this.dateTerms("{"+o+"}")),a)s.push(a);else{let l=new RegExp("{"+fue.join("}|{")+"}","gi"),p=[...o.matchAll(l)],f=0;p.length==0?s.push(this.dateTerms("{second}")):p.forEach((d,m)=>{let g=this.dateTerms(d[0],d.index);g&&(f!=d.index&&s.push(S("span",{part:"text",children:o.substring(f,d.index)},d.index)),f=d.index+d[0].length,s.push(g)),m===p.length-1&&s.push(S("span",{part:"text",children:o.substring(f,o.length)},d.index+"-last"))})}return it(S(ce,{children:[n&&i.isEditing&&!pe&&S(sB,{...this.props,clockInstance:this.props.baseNode}),S("style",{children:`

					:host {

						--0-3: "late night";
						--3-6: "early morning";
						--6-9: "morning";
						--9-12: "late morning";
						--12-15: "afternoon";
						--15-18: "late afternoon";
						--18-21: "evening";
						--21-24: "late evening";

						--am: "AM";
						--pm: "PM";

						--sunday: "Sunday";
						--monday: "Monday";
						--tuesday: "Tuesday";
						--wednesday: "Wednesday";
						--thursday: "Thursday";
						--friday: "Friday";
						--saturday: "Saturday";

						--january: "January";
						--february: "February";
						--march: "March";
						--april: "April";
						--may: "May";
						--june: "June";
						--july: "July";
						--august: "August";
						--september: "September";
						--october: "October";
						--november: "November";
						--december: "December";

						--ordinal-1: "first";
						--ordinal-2: "second";
						--ordinal-3: "third";
						--ordinal-4: "fourth";
						--ordinal-5: "fifth";
						--ordinal-6: "sixth";
						--ordinal-7: "seventh";
						--ordinal-8: "eighth";
						--ordinal-9: "ninth";
						--ordinal-10: "tenth";
						--ordinal-11: "eleventh";
						--ordinal-12: "twelfth";
						--ordinal-13: "thirteenth";
						--ordinal-14: "fourteenth";
						--ordinal-15: "fifteenth";
						--ordinal-16: "sixteenth";
						--ordinal-17: "seventeenth";
						--ordinal-18: "eighteenth";
						--ordinal-19: "nineteenth";
						--ordinal-20: "twentieth";
						--ordinal-21: "twenty-first";
						--ordinal-22: "twenty-second";
						--ordinal-23: "twenty-third";
						--ordinal-24: "twenty-fourth";
						--ordinal-25: "twenty-fifth";
						--ordinal-26: "twenty-sixth";
						--ordinal-27: "twenty-seventh";
						--ordinal-28: "twenty-eighth";
						--ordinal-29: "twenty-ninth";
						--ordinal-30: "thirtieth";
						--ordinal-31: "thirty-first";

						cursor: inherit;
					    display: inline-block;
					    position: relative;
					}

					[part*="section"]{
						font-variant: tabular-nums;
					}

					[part="ordinal section"]:after {
						content: var(--ordinal-${this.state["day-of-month"]}, "${this.state["day-of-month"]}");
					}

					[part="time-of-day section"]:before {
						content: var(--${this.state["time-of-day"]});
					}

					[part="period section"]:before {
						content: var(--${this.state.period});
					}				

					[part="day section"]:before {
						content: var(--${this.state.day});
					}

					[part="time-of-day section"]:before {
						content: var(--${this.state["time-of-day"]});
					}

					span[part="month-name section"]:before {
						content: var(--${this.state["month-name"]});
					}

					
				`}),s]}),this.props.baseNode.shadowRoot)}onViewportIntersectionChange=e=>{let r=e.position==="inside";this.setState({visible:r})};componentDidMount(){if(At(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),yp.size==0&&(cancelAnimationFrame(Hg),Hg=requestAnimationFrame(lB),cn)){let e=this.props.baseNode.parentElement;e.tagName==="SPAN"&&Array.from(e.childNodes).filter(i=>i!==this.props.baseNode).length>0&&(e.style.display="inline-block",requestAnimationFrame(()=>{e.style.display=""}))}this.updateTime(new Date),yp.add(this)}componentDidUpdate(e,r){}componentWillUnmount(){Rt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),yp.delete(this),yp.size==0&&cancelAnimationFrame(Hg)}};Wg.defaultProps={pad:!1,"pad-day-of-month":!1,"pad-hour":!1,"pad-month":!1,"pad-minute":!0,"pad-second":!0,"twentyfour-hour":!1,"truncate-year":!1,timezone:"local",value:"second"};mue=Ut(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Wg));sr(mue,"digital-clock",["pad-day-of-month","pad-hour","pad-month","pad-minute","pad-second","twentyfour-hour","truncate-year","pad","timezone","analogue","value"],{renderIntoShadow:!0})});var g5e,G1,K1,cB=V(()=>{ke();Ye();Bt();ps();qr();g5e=ye(Pe(),1);Kn();fe();G1=class extends me{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:null,focused:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,showInsertionIndicator:!1}}render(e,r){let{shopProductInstance:i}=e,{draggingOver:n,showInsertionIndicator:o,buttonHovered:s,focused:a}=r;return S(ce,{children:S(Ei,{hasFocus:a,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,baseNode:this.props.shopProductInstance,render:l=>{let{pointerAttention:p,overlayPosition:f}=l;return S(ce,{children:[S(Zr,{baseNode:i,overlayPosition:f,inFront:!1,overlayMode:!0}),S("div",{className:`editor-overlay editor-outline${p?" hover":""}${p?" button-hover":""}${a?" focus":""}`,style:{transform:`translate3d(${f.x}px, ${f.y}px, 0)`,width:f.width+"px",height:f.height+"px",display:p||s||a?"block":"none",minHeight:"27px"},children:[S("div",{className:"in-editor-buttons audio-player",style:{transform:`translateY(${f.dip}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[S("button",{onMouseDown:d=>{this.launchUIWindow(d)},ref:this.AudioPlayerButtonRef,className:"text",children:"Product"}),e.children]}),e.otherUI]})]})}})})}launchUIWindow=(e,r)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.props.shopProductInstance.getBoundingClientRect(),n={x:i.x,y:i.y,left:i.right,right:i.right,top:i.top-10,bottom:i.top+27,width:i.width,height:20};Ce.adminWindow.UIWindowOpener.openUIWindow({windowName:"shopproduct-ineditor",windowAlias:"commerce",positionRect:n,closeButton:!1,closeOnAllClickout:!1,ignoreEditorWindowClickout:!1,closeOnSingleClickout:!0,supportsMobile:!0,props:{shopProductNode:this.props.shopProductInstance}})};scrollIntoView=()=>{let e=this.props.shopProductInstance.getBoundingClientRect();(e.bottom<0||e.top>window.innerHeight)&&this.props.shopProductInstance.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})};updateUIWindowPosition=e=>{this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};componentDidMount=()=>{this.props.shopProductInstance._editorInterface=this};componentWillUnmount=()=>{this.state.UIWindow?.closeWindow?.(),delete this.props.shopProductInstance._editorInterface}},K1=G1});function wue(t,e,r,i){var n;if(i!==void 0&&(t=t*i),typeof e!="string")n=t/100+"";else{var o=["BIF","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","VND","VUV","XAF","XOF","XPF"],s={AED:"\u062F.\u0625",AFN:"\u060B",ALL:"L",AMD:"\u058F",ANG:"\u0192",AOA:"Kz",ARS:"$",AUD:"$",AWG:"\u0192",AZN:"\u20BC",BAM:"KM",BBD:"$",BDT:"\u09F3",BGN:"\u043B\u0432",BHD:".\u062F.\u0628",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BRL:"R$",BSD:"$",BTC:"\u0E3F",BTN:"Nu.",BWP:"P",BYR:"p.",BZD:"BZ$",CAD:"$",CDF:"FC",CHF:"CHF",CLP:"$",CNY:"\xA5",COP:"$",CRC:"\u20A1",CUC:"$",CUP:"\u20B1",CVE:"$",CZK:"K\u010D",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"\u062F\u062C",EEK:"kr",EGP:"\xA3",ERN:"Nfk",ETB:"Br",ETH:"\u039E",EUR:"\u20AC",FJD:"$",FKP:"\xA3",GBP:"\xA3",GEL:"\u20BE",GGP:"\xA3",GHC:"\u20B5",GHS:"GH\u20B5",GIP:"\xA3",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"\u20AA",IMP:"\xA3",INR:"\u20B9",IQD:"\u0639.\u062F",IRR:"\uFDFC",ISK:"kr",JEP:"\xA3",JMD:"J$",JOD:"JD",JPY:"\xA5",KES:"KSh",KGS:"\u043B\u0432",KHR:"\u17DB",KMF:"CF",KPW:"\u20A9",KRW:"\u20A9",KWD:"KD",KYD:"$",KZT:"\u043B\u0432",LAK:"\u20AD",LBP:"\xA3",LKR:"\u20A8",LRD:"$",LSL:"M",LTC:"\u0141",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"\u0434\u0435\u043D",MMK:"K",MNT:"\u20AE",MOP:"MOP$",MRO:"UM",MUR:"\u20A8",MVR:"Rf",MWK:"MK",MXN:"$",MYR:"RM",MZN:"MT",NAD:"$",NGN:"\u20A6",NIO:"C$",NOK:"kr",NPR:"\u20A8",NZD:"$",OMR:"\uFDFC",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"\u20B1",PKR:"\u20A8",PLN:"z\u0142",PYG:"Gs",QAR:"\uFDFC",RMB:"\uFFE5",RON:"lei",RSD:"\u0414\u0438\u043D.",RUB:"\u20BD",RWF:"R\u20A3",SAR:"\uFDFC",SBD:"$",SCR:"\u20A8",SDG:"\u062C.\u0633.",SEK:"kr",SGD:"$",SHP:"\xA3",SLL:"Le",SOS:"S",SRD:"$",SSP:"\xA3",STD:"Db",SVC:"$",SYP:"\xA3",SZL:"E",THB:"\u0E3F",TJS:"SM",TMT:"T",TND:"\u062F.\u062A",TOP:"T$",TRL:"\u20A4",TRY:"\u20BA",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"\u20B4",UGX:"USh",USD:"$",UYU:"$U",UZS:"\u043B\u0432",VEF:"Bs",VND:"\u20AB",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"\u0243",XCD:"$",XOF:"CFA",XPF:"\u20A3",YER:"\uFDFC",ZAR:"R",ZWD:"Z$"};e=e.toUpperCase(),o.indexOf(e)===-1&&(t/=100),typeof Intl<"u"?n=new Intl.NumberFormat(r,{style:"currency",currency:e,currencyDisplay:"symbol",useGrouping:!0,minimumFractionDigits:0}).format(t):n=(s.hasOwnProperty(e)?s[e]:e+" ")+""+t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}if(typeof n=="string"&&n.indexOf(".")!==-1){var a=n.split(".");a.length===2&&a[1].length===1&&(a[1]=a[1]+"0",n=a.join("."))}return n}var Ii,dB,gue,vue,yue,pl,Y1,Vg,bue,X1,xue,pB=V(()=>{ke();Ye();Bs();Ii=ye(Pe(),1);Be();ft();xr();Xr();zr();la();cB();il();_i();fe();dB="Product not found",gue="Out of Stock",vue="Add to Cart",yue="Unavailable",pl={buttonInStockText:"button-text",showPrice:"show-price",mergevariantdropdowns:"combine-variants",product:"product"},Y1=[],Vg=null,bue=t=>(Vg||(Vg=new Promise((e,r)=>{requestAnimationFrame(()=>{Ht.dispatch(actions.fetchCommerceProducts({idArray:Y1})).then(e).catch(r),Y1.length=0,Vg=null})})),Y1.push(t),Vg);X1=class extends me{constructor(e){super(e),this.uid=Ii.default.uniqueId(),this.state={loading:!0,selectedVariant:null},this.props.fetchShopModel().finally(()=>{this.fetchProduct().finally(()=>{this.setState({loading:!1})})}),this.props.baseNode.__commerce_widget__=this}render(){let e=this.getOptions(),{baseNode:r,adminMode:i}=this.props;if(!this.props.productData)return this.state.loading?null:it(S(ce,{children:[this.props.adminMode&&this.props.pageInfo.isEditing&&S(K1,{shopProductInstance:this.props.baseNode}),S("div",{draggable:"true",style:{display:"inline-block",width:"100%"},children:dB})]}),this.props.baseNode.shadowRoot);let n=this.state.selectedVariant?.inventory!==null&&this.state.selectedVariant?.inventory<=0,o=this.props.uses||"";return it(S(ia,{scrollContext:this.props.scrollContext,uses:o,adminMode:i,customElementMode:!0,baseNode:r,children:S("div",{draggable:"true",style:{display:"inline-block",width:"100%"},children:[this.props.adminMode&&S(K1,{shopProductInstance:this.props.baseNode}),this.props.productData?S(ce,{children:[e.showPrice&&this.state.selectedVariant&&S("div",{part:"price",class:"price",children:wue(this.state.selectedVariant.price,this.props.currency,this.props.locale)}),this.props.productData.attributes?e.mergevariantdropdowns?S("select",{part:"dropdown",class:"dropdown","variant-list":!0,onChange:this.getSelectedVariant,children:this.props.productData.variants.map(s=>s.is_default?null:S("option",{value:s.variant_id,dangerouslySetInnerHTML:{__html:Ii.default.values(s.attributes).join(", ").replace(/</g,"&lt;")}}))}):Ii.default.keys(this.props.productData.attributes).map(s=>S("select",{"variant-option":s,part:"dropdown",class:"dropdown",onChange:this.getSelectedVariant,children:[S("option",{disabled:!0,dangerouslySetInnerHTML:{__html:s?.replace?.(/</g,"&lt;")}}),this.getAttributeVariations(s).map(a=>S("option",{selected:this.state.selectedVariant?.attributes[s]===a,value:a,dangerouslySetInnerHTML:{__html:a?.replace?.(/</g,"&lt;")}}))]})):null,S("a",{part:"button",className:`button${n?" out-of-stock":""}`,onClick:s=>{n||this.addToCart(s)},children:n?gue:this.state.selectedVariant?e.buttonInStockText:yue})]}):dB]})},"shop-product-host"),this.props.baseNode.shadowRoot)}onDragStart=e=>{e.dataTransfer.setData("shop-product-drag","true")};getAttributeVariations(e){var r=Ii.default.without(Ii.default.uniq(this.props.productData.variants.map(function(n){if(n.is_available===!0&&n.is_default!==!0)return n.attributes[e]})),void 0),i=this.props.productData.attributes[e];return i&&r.sort(function(n,o){var s=i.indexOf(n),a=i.indexOf(o);return s<a?-1:s==a?0:1}),r}getProduct(){return this.props.productData}getOptions(){if(this.props.baseNode.hasAttribute("data-options"))try{let r=JSON.parse(Ii.default.unescape(this.props.baseNode.getAttribute("data-options")));Ii.default.each(r,(i,n)=>{pl[n]&&!this.props.baseNode.hasAttribute(pl[n])&&this.props.baseNode.setAttribute(pl[n],Ii.default.escape(i))}),this.props.baseNode.removeAttribute("data-options")}catch{console.error("Unable to read old product widget options",this.props.baseNode)}let e=Ii.default.mapValues(pl,(r,i)=>{if(!this.props.baseNode.hasAttribute(r))return;let n=Ii.default.unescape(this.props.baseNode.getAttribute(r));return(i==="showPrice"||i==="mergevariantdropdowns")&&(n=n=="true"),n});return Ii.default.defaults(e,{showPrice:!0,mergevariantdropdowns:!1,buttonInStockText:vue}),e}setOptions(e){Ii.default.each(e,(r,i)=>{pl.hasOwnProperty(i)&&this.props.baseNode.setAttribute(pl[i],Ii.default.escape(r))})}addToCart=e=>{this.props.adminMode||(this.props.addCommerceProductToCart(this.state.selectedVariant.product_id,this.state.selectedVariant.variant_id),to.push("/cart",{preventScrollReset:!0}))};fetchProduct(){return this.props.productData&&this.props.productData.product_id==this.props.product||!this.props.product||!this.props.shopId?Promise.resolve():bue(this.props.product)}getSelectedVariant=()=>{let e=null;if(this.props.productData)if(this.props.productData.use_default_variant)e=this.props.productData.variants.find(i=>i.is_default===!0);else if(this.getOptions().mergevariantdropdowns){let i=this.props.baseNode.shadowRoot.querySelector("select[variant-list]")?.value;e=this.props.productData.variants.find(n=>n.variant_id==i)}else{var r=Ii.default.reduce(this.props.baseNode.shadowRoot.querySelectorAll("select[variant-option]"),function(i,n){return i[n.getAttribute("variant-option")]=n.value,i},{});e=this.props.productData.variants.find(i=>Ii.default.isEqual(i.attributes,r))}this.state.selectedVariant!==e&&this.setState({selectedVariant:e})};componentDidUpdate(e,r){this.state.selectedVariant===r.selectedVariant&&this.getSelectedVariant()}componentDidMount(){this.props.baseNode.addEventListener("dragstart",this.onDragStart),this.getSelectedVariant()}componentWillUnmount(){this.props.baseNode.removeEventListener("dragstart",this.onDragStart)}},xue=Ut(Ue((t,e)=>({adminMode:t.frontendState.adminMode,productData:t.commerce.products[e.product],currency:t.commerce.shop.currency||"USD",locale:t.commerce.shop.locale||"en-US",shopId:t.site.shop_id}),t=>zt({addCommerceProductToCart:actions.addCommerceProductToCart,fetchShopModel:actions.fetchShopModel},t))(X1));sr(xue,"shop-product",Object.values(pl),{renderIntoShadow:!0})});var Z1,hB,fB=V(()=>{ke();fe();Z1=class extends me{constructor(e){super(e),this.caveRef=xe(),this.shadowRef=xe()}render(){return S("div",{"aria-hidden":"true",ref:this.caveRef,tabIndex:"-1","data-nosnippet":!0,style:{position:"absolute",top:"0",left:"50px",right:"50px",margin:"0 auto 0 auto",height:"10px",lineHeight:"0",fontSize:0,pointerEvents:"none",zIndex:-99},children:S("div",{ref:this.shadowRef,tabIndex:"-1","data-nosnippet":!0,style:{display:"inline-block",margin:"0 -20px 0 -50px",width:"40px",height:"10px"}})})}componentDidMount(e,r){this.observer=new IntersectionObserver(i=>{i.forEach(n=>{let o="right";switch(n.intersectionRatio){case 0:o="left";break;case 1:o="center";break}this.props.onTextAlignmentChange?.(o)})},{root:this.caveRef.current,rootMargin:"0px",threshold:[0,.6]}),this.observer.observe(this.shadowRef.current)}componentWillUnmount(){this.observer.disconnect()}},hB=Z1});var mB,J1,gB,vB=V(()=>{ke();Ye();Bt();ps();qr();Kn();Yr();mB=ye(Pe(),1);fe();J1=class extends me{constructor(e){super(e),this.state={UIWindow:!1,marqueeIsEmpty:!1,draggingInEditor:!1},this.observer=new MutationObserver(this.onMutation),this.innerObserver=new MutationObserver(this.onInnerMutation)}render(e,r){let{}=e,{UIWindow:i}=r,n=23;return S(ce,{children:S(Ei,{hasFocus:!!i,trackResize:!0,buttonMode:"inside",baseNode:this.props.marqueeInstance,buttonHeight:23,render:o=>{let{pointerAttention:s,overlayPosition:a}=o,l=0;return a.y<=1&&(l=Math.min(-a.y+1,a.height+-n+1)),S(ce,{children:[S(Zr,{baseNode:this.props.marqueeInstance,overlayPosition:a,overlayMode:!0}),S("div",{className:`editor-overlay editor-outline${s||i?" hover":""}${s||i?" button-hover":""}${i?" focus":""}`,style:{transform:`translate3d(${a.x}px, ${a.y}px, 0)`,width:a.width+"px",height:a.height+"px",display:s||i?"block":"none",minHeight:"27px"},children:[S("div",{className:"in-editor-buttons marquee",style:{transform:`translateY(${l}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[S("button",{onMouseDown:p=>{this.launchUIWindow(p)},className:"text",children:"Marquee"}),e.children]}),e.otherUI]})]})}})})}launchUIWindow=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let r=this.props.marqueeInstance.getBoundingClientRect(),i={x:r.x+-10,y:r.y,left:r.right+-10,right:r.right+-10,top:r.top+0,bottom:r.top+27,width:r.width,height:20};Ce.adminWindow.UIWindowOpener.openUIWindow({windowName:"marquee-ineditor",windowAlias:"marquee",positionRect:i,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!1,props:{activeMarquee:this.props.marqueeInstance}})};onMouseDown=e=>{if(this.state.UIWindow||e.button===2)return;let r={x:e.clientX,y:e.clientY};this.props.marqueeInstance.built&&(this.mouseDownTimeout=setTimeout(()=>{this.props.isDragging||(this.props.marqueeInstance.built=!1,setTimeout(()=>{let i=this.props.marqueeInstance.querySelector("marquee-inner"),n=CargoEditor.helpers.createRangeAtCoordinates(r.x,r.y);(!n||!i.contains(n.commonAncestorContainer))&&(n=CargoEditor.rangy.createRange(),n.setStart(i,0),n.setEnd(i,0)),CargoEditor.helpers.setActiveRange(n),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor(),e)},20))},120))};onInnerMutation=e=>{if(Array.from(e).filter(s=>{if(s.type==="attributes"){if(s.target.nodeName==="MEDIA-ITEM")return!0;if(s.target.nodeName==="MARQUEE-INNER")return!1}else return!s.target.closest?.("media-item")}).length==0)return;let i=Array.from(this.props.marqueeInstance.querySelectorAll("marquee-inner")).find(s=>!s.hasAttribute("slot")||s.getAttribute("slot")==="contents");if(!i)return;let n=Array.from(i?.childNodes??[])[0],o=!0;for(;n&&o;)(n.nodeName==="IMG"||n.nodeName==="VIDEO"||n.nodeName==="IFRAME"||n.nodeName==="MEDIA-ITEM"||n.textContent.trim()!=="")&&(o=!1),n=n.nextSibling;this.setState({marqueeIsEmpty:o})};dispatchVisibility=mB.default.debounce(()=>{Array.from(this.props.marqueeInstance.querySelectorAll("*")).forEach(e=>{_t(e,"lazyLoadIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1}),_t(e,"viewportIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})})},30);onMutation=e=>{this.observer.disconnect(),this.innerObserver.disconnect();let r=Array.from(this.props.marqueeInstance.querySelectorAll("marquee-inner")).find(n=>!n.hasAttribute("slot")||n.getAttribute("slot")==="contents"),i=this.props.marqueeInstance.querySelector('marquee-inner[slot="contents-clone"]');r&&i?Array.from(this.props.marqueeInstance.childNodes).forEach(n=>{n!==r&&n!==i&&n.remove()}):r&&!i&&(this.props.marqueeInstance.dirty=!0),this.observer.observe(this.props.marqueeInstance,{childList:!0,subtree:!1,characterData:!0,attributes:!1}),r&&this.innerObserver.observe(r,{childList:!0,subtree:!0,characterData:!0,attributes:!0})};onDragStart=(e,r,i)=>{this.setState({draggingInEditor:!0}),Ke.activateHoverElement(this.props.marqueeInstance),this.props.marqueeInstance.built=!1};onDragFinish=()=>{this.dragFinishTimeout=setTimeout(()=>{this.setState({draggingInEditor:!1})},100),this.props.marqueeInstance.built=!0};setUIWindow=e=>{this.setState({UIWindow:e})};updateUIWindowPosition=e=>{this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};componentDidMount(){this.observer.observe(this.props.marqueeInstance,{childList:!0,subtree:!1,characterData:!0,attributes:!1});let e=Array.from(this.props.marqueeInstance.querySelectorAll("marquee-inner")).find(r=>!r.hasAttribute("slot")||r.getAttribute("slot")==="contents");e&&this.innerObserver.observe(e,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.props.marqueeInstance.addEventListener("mousedown",this.onMouseDown),Ce.globalDragEventController.on("dragstart",this.onDragStart),Ce.globalDragEventController.on("dragend",this.onDragFinish),Ce.globalDragEventController.on("drop",this.onDragFinish),this.props.marqueeInstance._editorInterface=this,this.props.marqueeInstance._newMarqueeSet&&(delete this.props.marqueeInstance._newMarqueeSet,setTimeout(()=>{this.launchUIWindow()},120))}componentWillUnmount(){this.dispatchVisibility.cancel(),clearTimeout(this.mouseDownTimeout),clearTimeout(this.dragFinishTimeout),this.observer.disconnect(),this.innerObserver.disconnect(),this.props.marqueeInstance.removeEventListener("mousedown",this.onMouseDown),Ce.globalDragEventController.off("dragstart",this.onDragStart),Ce.globalDragEventController.off("dragend",this.onDragFinish),Ce.globalDragEventController.off("drop",this.onDragFinish),this.state.UIWindow?.closeWindow?.(),delete this.props.marqueeInstance._editorInterface}componentDidUpdate(e,r){this.props.adminMode!==e.adminMode&&(this.props.marqueeInstance.dirty=!0),this.props.isDragging!==e.isDragging&&clearTimeout(this.mouseDownTimeout),(r.marqueeIsEmpty!==this.state.marqueeIsEmpty||r.draggingInEditor!==this.state.draggingInEditor)&&!this.state.draggingInEditor&&this.state.marqueeIsEmpty&&CargoEditor?.mutationManager?.execute(()=>{this.props.marqueeInstance.remove()})}},gB=J1});var $g,da,bp,jg,Yu,Q1,yB,Gg,Sue,bB=V(()=>{ke();Ye();Xm();ft();Be();zr();na();fB();Br();vB();Yr();$g=ye(Pe(),1);Xr();fe();da=new Map,bp=new Map,jg=null;pe||(Yu=new ResizeObserver(t=>{t.forEach(e=>{bp.has(e.target)?bp.get(e.target).onMarqueeInnerResize(e):da.has(e.target)&&da.get(e.target).onElementResize(e)})}),window.addEventListener("dom-binding-initialized",t=>{da.forEach((e,r)=>{t.target.contains(r)&&(r.dirty=!0)})}));Q1=0,yB=t=>{let e=Q1===0?0:t-Q1;da.forEach((r,i)=>{r.animate(e)}),Q1=t,jg=requestAnimationFrame(yB)},Gg=class extends me{constructor(e){super(e),this.uid=$g.default.uniqueId(),this.initialSizeSet=!1,this.state={dirty:!0,built:!0,marqueeHeight:100,gutterPixelWidth:0,mediaItemLocations:{},contentRect:{marginLeft:0,width:0,height:0,contentWidth:0},elementRect:{horizPad:0,vertPad:0,width:0,height:0},paused:!1,pointerInfo:{type:"mouse",pointerDown:!1,dragging:!1},marqueeInner:null,visible:!0},this.pointerMovement={start:{x:0,y:0},delta:{x:0,y:0},inertia:{x:0,y:0}},this.marqueePositionerRef=xe(),this.marqueePositionerCloneRef=xe(),this.contentRef=xe(),this.contentsObserver=new MutationObserver(this.onContentsChange),this.resetPosition(),this.pauseCount=0,Object.defineProperty(this.props.baseNode,"dragging",{get:()=>this.state.pointerInfo.dragging,configurable:!0}),Object.defineProperty(this.props.baseNode,"paused",{get:()=>this.state.paused,set:r=>{this.setState({paused:!!r})},configurable:!0}),Object.defineProperty(this.props.baseNode,"built",{get:()=>this.state.built,set:r=>{this.setState({built:!!r})},configurable:!0}),Object.defineProperty(this.props.baseNode,"dirty",{get:()=>this.state.dirty,set:r=>{this.setState({dirty:!!r})},configurable:!0})}render(e,r){let i=e.behavior==="bounce",n=e.behavior==="scroll",o=e.direction==="vertical",s=e.direction==="horizontal",a=e.direction==="diagonal";a&&n&&(a=!1,s=!0);let{adminMode:l,pageInfo:p,baseNode:f,"vertical-height":d,gutter:m=0}=e,{contentRect:g,elementRect:v,built:x,marqueeHeight:_,gutterPixelWidth:E}=r,O=lr(d,""),L=m!==void 0?lr(m,"rem").join(""):"0px",I={marqueeHeight:O[1]===""?`calc( var(--fit-height) * ${O[0]*.01} )`:O.join("")};m!==void 0&&m!==0&&(I.gutterPixelWidth=L);let D=E,R=E;s&&(D=0),o&&(R=0);let W=n&&o?0:2,N=n&&s?0:2;return it(S(ce,{children:[l&&p.isEditing&&S(hB,{onTextAlignmentChange:this.onTextAlignmentChange}),S("style",{children:`

					:host {
						--marquee-vertical-padding: ${W}rem;
						--marquee-horizontal-padding: ${N}rem;
						--marquee-vertical-margin: ${-W}rem;
						--marquee-horizontal-margin: ${-N}rem;
						contain: layout;
						${x?`
							cursor: default;
							min-height: .5em;
							${l&&p.isEditing?`
							-moz-user-select:none;
							-webkit-user-select:none;

							user-select: none;`:""}
						`:`
							min-height: ${i&&!s?_+"px":"auto"};
						`}
						box-sizing: border-box;
						height: ${x?o||a?_+"px":g.height+v.vertPad+"px":"auto"};
					    display: block;
					    
					    position: relative;
						--resize-parent-width: ${v.width}px;				    
					}

					.marquee-margin {
						position: relative;
						${x?`
							pointer-events:none;
							margin-top: var(--marquee-vertical-margin);
							margin-left: var(--marquee-horizontal-margin);
							margin-right: var(--marquee-horizontal-margin);
							margin-bottom: var(--marquee-vertical-margin);
							
							${o||a?"height: "+_+"px;":""}
							padding-top: var(--marquee-vertical-padding);
							padding-bottom: var(--marquee-vertical-padding);
							padding-left: var(--marquee-horizontal-padding);
							padding-right: var(--marquee-horizontal-padding);						
							overflow: hidden;
					
						`:""}
					}

					:host .marquee-contents {
						${x?`
							-moz-user-select:none;
							-webkit-user-select:none;
							user-select: none;
						`:`
							-moz-user-select:text;
							-webkit-user-select:text;
							user-select: text;
						`}
						-webkit-backface-visibility: hidden;
						backface-visibility: hidden;
						will-change: transform;
						position: relative;

					    display: ${x?"block":"none"};
					}

					::slotted(marquee-inner){
						pointer-events:auto;
						white-space:${x&&s?"nowrap":"normal"};					
						display: ${x?"inline-block":"block"};
						${!x&&(o||a)?"min-height: "+_+"px;":""}
						min-width: ${v.width}px;
						${x?`
							-moz-user-select:none;
							-webkit-user-select:none;
							user-select: none;
						`:`
						`}
										
					}

					.marquee-positioner {
						position: relative;		
						white-space:nowrap;
						${n?"min-width: 100%;":""}					
					}

					/** scroll mode css **/	
					.marquee-positioner.clone {
						display: ${i||!x?"none":"block"};
						left: ${s?Math.max(g.contentWidth,v.width)+R:0}px;
						top: ${o?Math.max(g.height,v.height)+D:0}px;			
					    position: absolute;
					}

					
				`}),S("div",{className:"marquee-margin",children:[!x&&S("slot",{name:"contents"}),l&&p.isEditing&&!pe&&S(gB,{...this.props,marqueeInstance:f,isDragging:this.state.pointerInfo.dragging}),S(Yi,{values:I,onResize:this.onResize}),S("div",{className:"marquee-contents",style:{willChange:"transform",transform:"translate("+this.lastXClamp+"px, "+(this.lastYClamp+v.vertPad*.5)+"px)"},ref:this.contentRef,children:[S("div",{className:"marquee-positioner",ref:this.marqueePositionerRef,children:x&&S("slot",{name:"contents"})}),S("div",{"aria-hidden":"true",className:"marquee-positioner clone",ref:this.marqueePositionerCloneRef,children:x&&n&&S("slot",{name:"contents-clone"})})]})]})]}),f.shadowRoot)}onClickCapture=e=>{this.dragging&&this.state.built&&e.preventDefault()};onDragStartCapture=e=>{this.state.built&&this.props["pointer-interaction"]==!0&&(e.preventDefault(),e.stopPropagation())};onViewportIntersectionChange=()=>{Array.from(this.props.baseNode.querySelectorAll("*")).forEach(e=>{_t(e,"viewportIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})})};onLazyloadIntersectionChange=()=>{Array.from(this.props.baseNode.querySelectorAll("*")).forEach(e=>{_t(e,"lazyLoadIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})})};componentDidMount(){this.props.baseNode.addEventListener("click",this.onClickCapture,{capture:!0}),this.props.baseNode.addEventListener("dragstart",this.onDragStartCapture,{capture:!0}),this.props.baseNode.addEventListener("mousedown",this.onMouseDown),this.props.baseNode.addEventListener("touchstart",this.onMouseDown),At(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),At(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),da.size==0&&(cancelAnimationFrame(jg),jg=requestAnimationFrame(yB)),da.set(this.props.baseNode,this),Yu.observe(this.props.baseNode),this.innerMarqueeChange()}componentDidUpdate(e,r){(this.props.behavior!==e.behavior||this.props.speed!==e.speed||this.props["vertical-height"]!==e["vertical-height"])&&(this.resetPosition(),this.setState({built:!0})),this.state.dirty!==r.dirty&&this.state.dirty&&this.innerMarqueeChange(),this.state.built!==r.built&&this.state.built&&(this.state.dirty&&this.innerMarqueeChange(),this.resetPosition()),e.adminMode!==this.props.adminMode&&this.setState({built:!0})}componentWillUnmount(){this.props.baseNode.removeEventListener("dragstart",this.onDragStartCapture,{capture:!0}),this.props.baseNode.removeEventListener("mousedown",this.onMouseDown),this.props.baseNode.removeEventListener("touchstart",this.onMouseDown),this.props.baseNode.removeEventListener("click",this.onClickCapture,{capture:!0}),Rt(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),Rt(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),Yu.unobserve(this.props.baseNode),da.delete(this.props.baseNode),cancelAnimationFrame(this.resizeFrame),clearTimeout(this.afterPointerUp);let e=this.props.baseNode.querySelector("marquee-inner");e&&(bp.delete(e),Yu.unobserve(e)),this.contentsObserver.disconnect(),da.size==0&&cancelAnimationFrame(jg)}innerMarqueeChange=()=>{if(!this.state.dirty||!this.state.built||!this.marqueePositionerRef.current||!this.marqueePositionerCloneRef.current)return;let e=Array.from(this.props.baseNode.querySelectorAll("marquee-inner")).find(i=>!i.hasAttribute("slot")||i.getAttribute("slot")==="contents");e?(bp.delete(e),Yu.unobserve(e),Array.from(e.querySelectorAll("marquee-inner")).forEach(i=>{i.remove()})):(e=document.createElement("marquee-inner"),e.setAttribute("slot","contents"),Array.from(this.props.baseNode.childNodes).forEach(i=>{e.appendChild(i)}),this.props.baseNode.appendChild(e)),e.setAttribute("slot","contents"),e.setSaveable(!0),bp.set(e,this),Yu.observe(e),this.contentsObserver.observe(e,{childList:!0,subtree:!0,characterData:!0,attributes:!1});let r=this.props.baseNode.querySelector('marquee-inner[slot="contents-clone"]');for(r||(r=document.createElement("marquee-inner"),r.setAttribute("slot","contents-clone"),this.props.baseNode.appendChild(r));r.lastChild;)r.lastChild.remove();Array.from(e.childNodes).forEach(i=>{r.appendChild(i.cloneNode(!0))}),Array.from(this.props.baseNode.childNodes).forEach(i=>{i!==e&&i!==r&&i.remove()}),this.setState({dirty:!1,marqueeInner:e})};onContentsChange=()=>{this.setState({dirty:!0})};resetPosition=()=>{this.pauseCount=this.props.adminMode?-30:0,this.movingDown=this.props.speed>0,this.movingRight=this.props.speed>0,this.lastXClamp=0,this.lastYClamp=0,this.positionX=0,this.positionY=0,this.translateX=0,this.translateY=0,this.pointerMovement={start:{x:0,y:0},inertia:{x:0,y:0},delta:{x:0,y:0}},this.props.behavior==="bounce"?((this.props.direction==="diagonal"||this.props.direction==="vertical")&&(this.translateY=this.positionY=this.state.elementRect.height*.5+-this.state.contentRect.height*.5),(this.props.direction==="diagonal"||this.props.direction==="horizontal")&&(this.translateX=this.positionX=this.state.elementRect.width*.5+-this.state.contentRect.width*.5+this.state.elementRect.vertPad*.5)):this.translateX=this.positionX=this.translateY=this.positionY=0};onResize=(e,r)=>{this.setState(i=>{let n={...i};return n[e]=r,n})};onTextAlignmentChange=e=>{this.resetPosition(),this.requestTick()};requestTick=()=>{this.ticking||(this.ticking=!0,this.rAf=requestAnimationFrame(()=>{this.getContentWidthAndMargin(),this.ticking=!1}))};getContentWidthAndMargin=$g.default.debounce(()=>{let{marqueeInner:e}=this.state;if(!e)return;let{contentWidth:r,marginLeft:i,width:n}=this.state.contentRect,o=e.childNodes[0],s=e.childNodes[e.childNodes.length-1];if(o&&s){let a=document.createRange();a.setStartBefore(o),a.setEndAfter(s);let l=a.getBoundingClientRect(),p=e.getBoundingClientRect();i=l.left-p.left,r=l.width}else i=0,r=n;this.setState(a=>({contentRect:{...a.contentRect,marginLeft:i,contentWidth:r}}),()=>{this.initialSizeSet||(this.resetPosition(),this.initialSizeSet=!0)})},this.initialSizeSet?300:0,{leading:!0,trailing:!0});onMarqueeInnerResize=e=>{let r=e.borderBoxSize[0]||e.borderBoxSize,i=r.inlineSize;this.setState(n=>({contentRect:{...n.contentRect,width:r.inlineSize,height:r.blockSize}}),()=>{this.requestTick()})};onElementResize=e=>{let r=e.borderBoxSize[0]||e.borderBoxSize,i=e.contentBoxSize[0]||e.contentBoxSize;this.setState({elementRect:{width:r.inlineSize,height:r.blockSize,vertPad:r.blockSize-i.blockSize,horizPad:r.inlineSize-i.inlineSize}})};onMouseDown=e=>{if(!this.state.built||!this.props["pointer-interaction"]||e.button==2)return;this.dragging=!1;let r=e.touches?e.touches[0].clientX:e.clientX,i=e.touches?e.touches[0].clientY:e.clientY,n=e.touches?.length>0;!e.target.closest("a, media-item[href]")&&!n&&e.preventDefault(),this.pointerMovement={start:{x:r,y:i},inertia:{x:0,y:0},delta:{x:0,y:0}},this.setState({pointerInfo:{type:e.touches?.length>0?"touch":"mouse",pointerDown:!0,dragging:!1}}),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerUp)};onPointerMove=e=>{let r={x:e.clientX-this.pointerMovement.start.x+this.pointerMovement.delta.x,y:e.clientY-this.pointerMovement.start.y+this.pointerMovement.delta.y},i=this.state.pointerInfo.dragging||Math.abs(e.clientX-this.pointerMovement.start.x)>3||Math.abs(e.clientY-this.pointerMovement.start.y)>3;this.pointerMovement={start:{x:e.clientX,y:e.clientY},inertia:r,delta:r},this.dragging=i,this.setState({pointerInfo:{type:e.pointerType=="touch"?"touch":"mouse",pointerDown:!0,dragging:i}})};onPointerUp=e=>{this.setState({pointerInfo:{type:e.pointerType=="touch"?"touch":"mouse",dragging:!1,pointerDown:!1}},()=>{document.body.removeEventListener("pointerleave",this.onPointerUp),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerUp)})};animate=e=>{let{built:r,paused:i,elementRect:n,contentRect:o,pointerInfo:s,mediaItemLocations:a,gutterPixelWidth:l}=this.state,{positionX:p,positionY:f,movingRight:d,movingDown:m,translateX:g,translateY:v,pointerMovement:x}=this,{speed:_,friction:E}=this.props;if(!r||!this.contentRef.current)return;let O=!1;_=i||s.dragging?0:_,this.pauseCount<0&&(this.pauseCount++,_=0),_=_*(e/16.6667);let L=this.props.behavior==="bounce",I=this.props.behavior==="scroll",D=this.props.direction==="vertical",R=this.props.direction==="horizontal",W=this.props.direction==="diagonal",N=l,z=l;W&&I&&(W=!1,R=!0),E=1-parseFloat(E)*.01,_=parseFloat(_)*.1;let $=_,q=_,J=Math.abs(x.inertia.y)>.01||Math.abs(x.inertia.x)>.01;s.pointerDown||s.dragging?(O=!0,q=x.delta.x,$=x.delta.y):J&&(O=!0,L?(m?$=Math.abs($)+Math.abs(x.inertia.y):$=-Math.abs($)+-Math.abs(x.inertia.y),d?q=Math.abs(q)+Math.abs(x.inertia.x):q=-Math.abs(q)+-Math.abs(x.inertia.x)):(q=q+x.inertia.x,$=$+x.inertia.y)),L&&!s.dragging&&(m?$=Math.abs($):$=-Math.abs($),d?q=Math.abs(q):q=-Math.abs(q)),$!==0&&(m=$>0),q!==0&&(d=q>0),(D||W)&&(f=$+f),(R||W)&&(p=q+p);let X=!1;if(L){let te=o.contentWidth,re=o.height,ie=-o.marginLeft,ae=n.width+-te+-o.marginLeft,he=0,de=n.height-re;te>=n.width&&(ie=n.width-te,ae=0),re>=n.height&&(he=n.height-re,de=0),d&&p>ae&&(R||W)?(X="right",p=ae,d=!1):!d&&p<ie&&(R||W)&&(X="left",p=ie,d=!0),m&&f>de&&(D||W)?(X="bottom",f=de,m=!1):!m&&f<he&&(D||W)&&(X="top",f=he,m=!0),R?v=0:v=f,D?g=0:g=p}else if(I){R&&(z=0),D&&(N=0);let te=Math.max(o.contentWidth,n.width)+N,re=Math.max(o.height,n.height)+z;te>0&&(p=(p-te)%te),re>0&&(f=(f-re)%re),D?(g=0,v=f):R&&(g=p,v=0)}X&&this.dispatchBounceEvent(X);let se=s.dragging?{x:x.delta.x,y:x.delta.y}:{x:x.inertia.x*E,y:x.inertia.y*E};this.positionX=p,this.positionY=f,this.translateX=g,this.translateY=v,this.movingRight=d,this.movingDown=m;let ee=Math.abs(_)>1?2:4,Z=Math.floor(this.translateX*ee)/ee,Y=Math.floor(this.translateY*ee)/ee;(Z!==this.lastXClamp||Y!==this.lastYClamp)&&(this.contentRef.current.style.transform="translate("+Z+"px, "+(Y+this.state.elementRect.vertPad*.5)+"px)"),this.lastXClamp=Z,this.lastYClamp=Y,O&&(this.pointerMovement={...this.pointerMovement,inertia:se,delta:{x:0,y:0}})};dispatchBounceEvent=$g.default.debounce(e=>{this.props.baseNode.dispatchEvent(new CustomEvent("marquee-bounce",{detail:{edge:e},bubbles:!1,composed:!0}))},40,{leading:!0,tailing:!1})};Gg.defaultProps={speed:-10,direction:"horizontal",behavior:"scroll","pointer-interaction":!0,"vertical-height":"100",friction:5};Sue=Ut(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Gg));sr(Sue,"marquee-set",["gutter","speed","direction","behavior","pointer-interaction","vertical-height","friction"],{renderIntoShadow:!0})});var Mze,Xu,Kg,_ue,wB=V(()=>{ke();Ye();ft();Be();Xm();Kn();Mze=ye(Pe(),1);Xr();zr();fe();Xu=new Map,Kg=class extends me{constructor(){super(),this.state={iconElement:{imgVdom:null,customDimensions:{width:32,height:32}}}}render(e,r){let i=r.iconElement.customDimensions.width/r.iconElement.customDimensions.height;return S(ce,{children:it(S(ce,{children:[S("style",{id:"text-icon",children:`
		:host {
			cursor: ${e.adminMode?"text":"unset"};
			aspect-ratio: ${i};
			height: 1.2em;
			width: auto;
		    contain: layout;
		    margin-top: -1em;
		    margin-bottom: -.25em;
		    display: inline-block;
		    vertical-align: baseline;
			position: relative;
		}

		:host, *{
		    -moz-user-select: text;
		    -webkit-user-select: text;
		    -ms-user-select: text;
		    user-select: text; 		
		}

		img {
			pointer-events:none;
		}
		
		svg, img {
			object-fit: cover;
			display: block;
			position: absolute;
			inset: 0;
			width: 100%;
			height: 100%;
			fill: currentColor;
		}
					`}),this.state.iconElement.imgVdom,this.props.adminMode?S(Zr,{baseNode:this.props.baseNode,inFront:!1}):null]}),this.props.baseNode.shadowRoot)})}getIconSVG=()=>{new Promise((e,r)=>{let i=this.props.icon||null;if(i)if(Xu.has(i))e(Xu.get(i));else{let o=i.indexOf("https://")===0?i:"https://build.cargo.site/frontend/a16aab/icon/icons/"+i+".svg",s=o.split(".")?.pop()||"";if(["jpeg","jpg","png","gif","webp"].indexOf(s.toLowerCase())!=-1){let a=document.createElement("img");a.src=o,a.onload=()=>{let l=S("img",{part:"img",src:i,width:a.naturalWidth,height:a.naturalHeight});Xu.set(i,{imgVdom:l,customDimensions:{width:a.naturalWidth,height:a.naturalHeight}}),a.onload=null,e(Xu.get(i))}}else s=="svg"?fetch(o,{mode:"cors"}).then(a=>a.ok?a.text():r("bad response")).then(a=>{let l=document.createElement("div");l.innerHTML=a;let p={width:32,height:32},f=Array.from(l.children).map((d,m)=>{let g=d.tagName.toLowerCase()=="svg";return g&&d.hasAttribute("width")&&d.hasAttribute("height")&&(p.width=d.getAttribute("width"),p.height=d.getAttribute("height")),Lu(d,null,{part:g?"svg":m,key:i+"-"+m,draggable:!0})});if(f.length>0){if(Xu.set(i,{imgVdom:f,customDimensions:p}),i!==this.props.icon){r("Icon name mismatch");return}e(Xu.get(i))}else r("Icon not found at ",o)}).catch(a=>{r(a)}):r("Invalid url")}else r("Icon not found",i)}).then(e=>{this.setState({iconElement:e})}).catch(e=>{console.log("icon loading failed:",e)})};onDragStart=e=>{e.dataTransfer.setData("text-icon-drag","true")};componentDidMount(){for(this.props.baseNode.addEventListener("dragstart",this.onDragStart);this.props.baseNode.childNodes[0];)this.props.baseNode.childNodes[0].remove();this.getIconSVG()}componentWillUnmount(){this.props.baseNode.removeEventListener("dragstart",this.onDragStart)}componentDidUpdate(e){e.icon!==this.props.icon&&this.getIconSVG()}};Kg.defaultProps={icon:null};_ue=Ut(Ue((t,e)=>({adminMode:t.frontendState.adminMode}))(Kg));sr(_ue,"text-icon",["icon"],{delegatesFocus:!0})});var eS,xB,SB=V(()=>{Ye();Wm();fe();eS=class extends ze.Component{constructor(e){super(e)}render(){return S(ce,{children:[S("div",{className:"colorfilter-color"}),S("div",{className:"colorfilter-base"})]})}componentDidMount(){tt.isSafari()&&(document.querySelector("#editor-overlay")?.classList.add("safari"),document.querySelector("#cargo-dotsite")?.classList.add("safari"),document.querySelector(".colorfilter-base")?.classList.add("safari"),document.querySelector(".colorfilter-color")?.classList.add("safari"))}componentWillUnmount(){document.querySelector("#editor-overlay")?.classList.remove("safari"),document.querySelector("#cargo-dotsite")?.classList.remove("safari")}},xB=eS});function Cue(t){let e=pe?t.site?.is_template:t.site?.is_template&&parent===window;return{hasSitePackage:t.frontendState.hasSitePackage,adminInitialized:t.adminState?.initialized||!1,inAdminFrame:t.frontendState.inAdminFrame,isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,showCargoLogo:!e&&t.site?.show_cargo_logo,customHTML:t.site?.custom_html,access_level:t.site?.access_level,website_title:t.site?.website_title,domain_active:t.site?.domain_active,domain:t.site?.domain,site_url:t.site?.site_url,site_id:t.site?.id,fonts:t.site?.fonts,fontsLoaded:t.frontendState.fontsLoaded,stylesheet:t.frontendState.pageNotFound?" ":t.css?.stylesheet,hasAuth:t.auth.authenticated,canDuplicate:e,activePID:t.frontendState.activePID,itemsInCart:no.default.values(t.commerce.cart).reduce((r,i)=>r+=i?.quantity||0,0),enableColorFilter:!!t.siteDesign.site?.enableColorFilter}}function Pue(t){return zt({fetchSitePackage:Ge.fetchSitePackage,updateFrontendState:Ge.updateFrontendState,getAuthToken:Ge.getAuthToken},t)}var _B,no,EB,Yg,Xg,tS,Eue,rS,CB,PB=V(()=>{ke();xr();ft();_B=ye(Uh(),1),no=ye(Pe(),1);Gs();Be();mk();tr();Ya();Fz();Co();jz();Br();rg();i3();Bx();u3();Xr();S3();kg();tg();T1();R1();O1();L3();B3();oB();uB();pB();bB();wB();qr();_i();SB();fe();EB=!1,Yg=!1,Xg=!0,tS=(t=!1)=>{(t||EB&&Yg&&Xg)&&setTimeout(()=>{Xg&&window.dispatchEvent(new CustomEvent("initial-content-visible",{detail:{screenshots:{hiddenIds:["dl-duplicate-site"]}}}))},1500)},Eue=async t=>{let e=[];if(t.hasSitePackage!==!0&&e.push(t.fetchSitePackage()),pe&&t.fonts&&no.default.isArray(t.fonts)){let r=[...t.fonts].filter(n=>n.provider!=="google"),i=g1({context:"server",families:r});i.then(n=>{t.updateFrontendState({fontsLoaded:no.default.uniq(t.fontsLoaded.concat(r.map(o=>o.family))),serverRenderedFontCSS:n.filter(o=>o??!1)})}),e.push(i)}await Promise.allSettled(e),EB=!0,tS()},rS=class extends me{constructor(e){if(super(e),this.state={checkedExistingAuth:!!pe,checkedCookieAuth:!!pe,mobileOffsetsString:null,inheritableFontSizesString:null,linkStylesString:null,fontFeatureSettingsStylesString:null},!pe){if(Promise.resolve().then(()=>(ap(),u1)).then(({default:n})=>{this.setState({QuickView:n})}),e.inAdminFrame===!0){let n=document.getElementsByTagName("head")[0],o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href="https://build.cargo.site/frontend/a16aab/css/front-end/frontend-interface.css",o.id="frontend-interface",n.appendChild(o)}this.setMobileClass(this.props.isMobile),this.setOSClass();let r=0,i=0;window.addEventListener("backdrop-load-start",()=>{Xg=!1,r++}),window.addEventListener("backdrop-load-complete",()=>{i++,i===r&&(Xg=!0,tS())})}this.globalStyleRef=xe(),this.customHTMLRef=xe(),this.scrollingElement={current:pe?null:window},this.setWindowTitle()}setWindowTitle=()=>{if(pe)return;let e=this.props.store.getState(),r,i="";this.props.activePID&&this.props.activePID!==e.site.homepage_id&&this.props.activePID!==e.site.mobile_homepage_id&&this.props.activePID!=="root"&&(e.pages.byId[this.props.activePID]?r=e.pages.byId[this.props.activePID]:e.sets.byId[this.props.activePID]&&(r=e.sets.byId[this.props.activePID])),this.props.website_title&&(i=`${r?.title?`${r.title} \u2014 `:""}${this.props.website_title}`),i!==document.title&&(document.title=i)};onFirstSiteLoad(){let e=!1;try{e=parent.__c3_admin__===!0}catch{}window.dispatchEvent(new CustomEvent("cargo-site-load",{detail:{editing:e}}))}render(){if(this.props.hasSitePackage!==!0)return null;if(!pe&&!Fr&&this.props.domain_active===!0&&this.props.domain!==window.location.host&&!Ba)return window.location.hostname=this.props.domain,null;if(this.props.access_level==="password"||this.props.access_level==="private"){let r=null;return this.props.hasAuth&&this.state.checkedExistingAuth===!1?this.fetchingSitePackage||(this.fetchingSitePackage=!0,this.props.fetchSitePackage().finally(()=>{delete this.fetchingSitePackage,this.setState({checkedExistingAuth:!0})})):this.state.checkedCookieAuth===!1?this.checkingAuth||(this.checkingAuth=!0,this.props.getAuthToken({timeout:1500,site_url:this.props.site_url,site_id:this.props.site_id}).then(()=>{this.props.fetchSitePackage().finally(()=>{delete this.checkingAuth,this.setState({checkedCookieAuth:!0})})}).catch(i=>{this.setState({checkedCookieAuth:!0})}).finally(()=>{delete this.checkingAuth})):(this.props.access_level==="password"?r=S(qu,{target:"site",onSucces:()=>{this.props.fetchSitePackage()}}):this.props.access_level==="private"&&(r=S(lg,{message:"This site is private."})),this.onFontLoad(!0)),S(ce,{children:S(d1,{children:r})})}let e=this.props.customHTML;return S(ce,{children:[this.props.enableColorFilter?S(xB,{}):null,S("customhtml",{ref:this.customHTMLRef,dangerouslySetInnerHTML:{__html:e}}),S(r3,{}),S(d1,{}),S("style",{ref:this.globalStyleRef,dangerouslySetInnerHTML:{__html:this.props.stylesheet}}),S("style",{id:"mobile-offset-styles",dangerouslySetInnerHTML:{__html:this.state.mobileOffsetsString}}),S("style",{id:"text-style-font-sizes",dangerouslySetInnerHTML:{__html:this.state.inheritableFontSizesString}}),S("style",{id:"link-styles",dangerouslySetInnerHTML:{__html:this.state.linkStylesString}}),S("style",{id:"font-feature-settings-styles",dangerouslySetInnerHTML:{__html:this.state.fontFeatureSettingsStylesString}}),S(uu,{scrollingElement:this.scrollingElement,children:[S(Lz,{}),this.state.QuickView&&S(this.state.QuickView,{isMobile:this.props.isMobile}),this.props.inAdminFrame&&S(Bk,{}),this.state.loginBeforeDuplicatingSite&&S(fk,{loginToUdotCargoOnly:!0,canCreateNewAccount:!this.props.isMobile,animateIn:!0,canClickout:!0,templateID:this.props.site_id,onClickout:()=>{this.setState({loginBeforeDuplicatingSite:!1})},onLoginSuccess:r=>{window.location.href=`${_d}?duplicate=${this.props.site_id}`}}),S(Po,{portalHost:pe?null:document.body})]})]})}componentDidMount(){this.loadNewFonts(),this.inPreviewMode=this.props.inAdminFrame&&this.props.adminMode===!1,this.showHideAdminInterface(),ot.on("mobile-change",this.onMobileChange),this.onMobileChange(ot.data.mobile.active&&ot.data.mobile.portrait),this.updateCartCounter(),this.props.hasSitePackage&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.onFirstSiteLoad()})})}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,r){console.error(e)}onMobileChange=()=>{this.props.updateFrontendState({isMobile:ot.data.mobile.active})};onFontLoad=(e=!1)=>{pe||Yg||(Yg=!0,document.documentElement.classList.remove("wf-initial-load"),tS(e))};componentWillUnmount(){ot.off("mobile-change",this.onMobileChange)}showHideAdminInterface=()=>{this.inPreviewMode?document.querySelector("#frontend-interface")?.setAttribute("disabled",""):document.querySelector("#frontend-interface")?.removeAttribute("disabled")};setOSClass=()=>{!od()&&!sd()&&document.body.classList.add("f-f")};setMobileClass=e=>{e?(document.body.classList.add("mobile"),document.documentElement.classList.add("mobile")):(document.body.classList.remove("mobile"),document.documentElement.classList.remove("mobile"))};setEditingClass=e=>{e?document.body.classList.add("editing"):document.body.classList.remove("editing")};loadNewFonts=()=>{if(!this.props.fonts)return;let e=this.props.fonts.filter(r=>!this.props.fontsLoaded.includes(r.family));e&&e.length>0?(this.props.updateFrontendState({fontsLoaded:no.default.uniq(this.props.fontsLoaded.concat(e.map(r=>r.family)))}),g1({families:e}).then(()=>{Yg||document.fonts.ready.then(()=>{this.onFontLoad()})})):document.fonts.ready.then(()=>{this.onFontLoad()})};componentDidUpdate(e,r){if(!pe){if(this.setWindowTitle(),this.inPreviewMode=this.props.inAdminFrame&&this.props.adminMode===!1,typeof this.props.customHTML=="string"&&this.props.customHTML!==e.customHTML&&this.customHTMLRef.current){let i=document.createRange().createContextualFragment(this.props.customHTML);this.customHTMLRef.current.innerHTML="",this.customHTMLRef.current.appendChild(i)}this.props.stylesheet!==e.stylesheet&&(this.setMobileOffsets(),this.setInheritableFontSizes(),this.setLinkStyles(),this.setFontFeatureSettingsStyles()),this.props.fonts!==e.fonts&&no.default.isArray(this.props.fonts)&&this.loadNewFonts(),this.props.inAdminFrame===!0?(this.setEditingClass(this.props.adminMode),this.props.adminInitialized!==e.adminInitialized&&(this.setMobileOffsets(),this.setInheritableFontSizes(),this.setLinkStyles(),this.setFontFeatureSettingsStyles())):this.setEditingClass(!1),e.isMobile!==this.props.isMobile&&(this.setMobileClass(this.props.isMobile),this.setMobileOffsets(),this.setInheritableFontSizes(),this.setLinkStyles(),this.setFontFeatureSettingsStyles()),this.props.itemsInCart!==e.itemsInCart&&this.updateCartCounter(),this.showHideAdminInterface(),this.props.hasSitePackage&&!e.hasSitePackage&&requestAnimationFrame(()=>{this.onFirstSiteLoad()})}}updateCartCounter=()=>{document.documentElement.style.setProperty("--cart-item-count",this.props.itemsInCart||""),document.documentElement.style.setProperty("--cart-item-count-display",this.props.itemsInCart?"inline":"")};setFontFeatureSettingsStyles=()=>{if(pe||!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let r=e.sheet;if(!r)return null;let i=!1;for(let a of r.cssRules)if(a.selectorText==="bodycopy"&&a.style.getPropertyValue("font-feature-settings")){i=!0;break}else continue;if(!i)return;let n="",o=[],s=[];no.default.each(r.rules,a=>{!a||!a.selectorText||a.selectorText.includes(" ")||((a.style.getPropertyValue("--text-style")||a.selectorText===".caption")&&!a.style.getPropertyValue("font-feature-settings")&&o.push(a.selectorText),a.selectorText.match(/h[1-6]/gi)&&!a.style.getPropertyValue("font-feature-settings")&&s.push(a.selectorText))});for(let a of o)n+=a+" { font-feature-settings: normal; } ";for(let a of s)n+=a+" { font-feature-settings: normal; } ";this.setState({fontFeatureSettingsStylesString:n})};setLinkStyles=()=>{if(pe||!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let r=e.sheet;if(!r)return null;let i="",n=[],o=[];no.default.each(r.rules,s=>{!s||!s.selectorText||((s.style.getPropertyValue("--text-style")||s.selectorText===".caption")&&n.push(s.selectorText),s.selectorText.match(/h[1-6]/gi)&&o.push(s.selectorText))}),no.default.each(r.rules,s=>{!s||!s.selectorText||(n.forEach(a=>{if(s.selectorText.startsWith(a)&&s.selectorText.includes(" a")){let l=s.selectorText.replace(/^(.*)\s(\a(?:[:.]\S*)?)$/i,(d,m,g)=>g+m);s.selectorText!==l&&(i+=l+" { "+(s.style.cssText||"")+" } ");let p=!!(s.selectorText.includes(" a::")||s.selectorText.includes(" a:")),f=s.style.getPropertyValue("text-decoration-color")===""?" text-decoration-color: unset;":"";f!==""&&!p&&(i+=l+" { "+(s.style.cssText||"")+f+" } ",i+=s.selectorText+" { "+f+" } ")}}),o.forEach(a=>{if(s.selectorText.startsWith(a)&&s.selectorText.includes(" a")){let l=!!(s.selectorText.includes(" a::")||s.selectorText.includes(" a:")),p=s.style.getPropertyValue("text-decoration-color")===""?" text-decoration-color: unset;":"";p!==""&&!l&&(i+=s.selectorText+" { "+p+" } ")}}))}),this.setState({linkStylesString:i})};setInheritableFontSizes=()=>{if(pe||!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let r=e.sheet;if(!r)return null;let i="";no.default.each(r.rules,n=>{if(n.style?.fontSize&&n.style?.fontSize!==""){let o=n.style.fontSize,s=n.selectorText==="bodycopy"?", "+n.selectorText+" *":"";i+=n.selectorText+" {--font-size: "+o+`;}
`,i+=n.selectorText+s+` {font-size: calc(var(--font-scale) * var(--font-size));}
`}}),this.setState({inheritableFontSizesString:i})};setMobileOffsets=()=>{if(pe)return;if(!this.props.isMobile){this.setState({mobileOffsetsString:null});return}if(!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let r=nu(e.sheet,[{properties:["padding-top","padding-right","padding-bottom","padding-left"],denyList:["ul","ul.lineated","ol","li","h1","h2","h3","h4","h5","h6","sub","sup","blockquote","small-caps","match:audio-player","match:cargo-map","match:shop-product",".quick-view",".quick-view .caption",".quick-view .caption-background",".mobile .quick-view",".mobile .quick-view .caption"]},{properties:["margin-top","margin-right","margin-bottom","margin-left"],allowList:[".content",".mobile .content"]}]);this.setState({mobileOffsetsString:r})};getIsolatedStyleSheet=no.default.once(()=>{let e=document.implementation.createDocument("http://www.w3.org/1999/xhtml","body",null),r=document.createElement("style");return e.children[0].appendChild(r),r})};CB=Rn(Ue(Cue,Pue)((0,_B.frontloadConnect)(Eue,{onMount:!0,onUpdate:!1})(rS)))});var IB,AB=V(()=>{IB=ye(Mn(),1);IB.default.defaults.validateStatus=function(t){return t>=200&&t<300}});var Zg,Jg,TB,MB=V(()=>{Zg=ye(Mn(),1);Be();la();Jg=new Map,TB=t=>{let e;t.subscribe(()=>{let r=t.getState();if(!r.adminState||!r.adminState.crdt)return;let i=r.adminState.crdt.publishedAt;i!==e&&Jg.clear(),e=i})};pe||(Zg.default.interceptors.request.use(async t=>{if(t.use_cache===!0){let e=Zg.default.getUri(t);Jg.has(e)?t.adapter=function(r){return Jg.get(e).cachedResponsePromise}:(t.cachedResponsePromise=new Promise((r,i)=>{t.resolveCachedResponsePromise=r,t.rejectCachedResponsePromise=i}),t.cachedResponsePromise.catch(r=>r),Jg.set(e,t))}return t}),Zg.default.interceptors.response.use(t=>(t.config.resolveCachedResponsePromise&&t.config.resolveCachedResponsePromise(t),t),t=>(t.config?.rejectCachedResponsePromise&&t.config.rejectCachedResponsePromise(t),Promise.reject(t))))});var iS,RB=V(()=>{iS=ye(Mn(),1);Be();la();tr();pe||(iS.default.interceptors.request.use(async t=>{if(t.use_auth!==!1){let e=Ht?.getState();t.headers.Authorization===void 0&&e&&e.auth.data&&e.auth.data.access_token&&(t.headers.Authorization=`Bearer ${e.auth.data.access_token}`)}return t}),iS.default.interceptors.response.use(void 0,t=>(t.response?.status===403&&Ht.dispatch({type:Ne.AUTHENTICATE_USER_REJECTED,payload:{}}),Promise.reject(t))))});var kB=V(()=>{});var NB=V(()=>{});var OB,DB=V(()=>{kg();T1();tg();R1();O1();OB={grid:ro,columnized:vs,slideshow:br,freeform:ei,justify:io}});var Iue={};var LB,FB=V(()=>{Pr();la();LB=ye(Zb(),1);xr();k0();tr();Bt();DB();qr();pg();window.getClientAPI=()=>({actions:S0,reducers:R0,selectors:nt,history:to,store:Ht,globals:b0,addReduxMiddleWare:LB.addMiddleware,combineReducers:$n,galleryData:OB,editorOverlayAPI:Ke,toggleOverlay:Qr.toggleOverlay,openOverlay:Qr.openOverlay,closeOverlay:Qr.closeOverlay})});var zB,BB,W3e,Ht,to,la=V(()=>{ke();ft();zB=ye(Uh(),1);is();Be();jh();BB=ye(Pe(),1),W3e=ye(Mn(),1);lk();tr();uk();PB();Br();_i();AB();MB();RB();kB();NB();fe();!pe&&Fr&&(FB(),Rc(Iue));({store:Ht}=ak());if(!pe){to=$h(),ot.setupStore(Ht),TB(Ht);let t;try{t=localStorage.getItem("c3-auth")}catch(o){console.log("unable to retrieve stored auth",o)}let e=new URLSearchParams(window.location.search);if(e.has("auth"))try{Ht.dispatch({type:Ne.AUTHENTICATE_USER_FULFILLED,payload:{authenticated:!0,data:JSON.parse(e.get("auth"))}}),e.delete("auth");let o=e.toString();o.length>0&&(o="?"+o),window.history.replaceState({},document.title,window.location.origin+window.location.pathname+o)}catch(o){console.error("unable to use querystring auth",o)}else if(t)try{Ht.dispatch({type:Ne.AUTHENTICATE_USER_FULFILLED,payload:{authenticated:!0,data:JSON.parse(t)}})}catch(o){console.error("unable to retrieve stored auth",o)}window.history.scrollRestoration&&(window.history.scrollRestoration="manual");let r={};to.push=BB.default.wrap(to.push,function(o){r[window.location.pathname]=document.scrollingElement.scrollTop;var s=Array.prototype.slice.call(arguments);let a=s[1]||"";if(!(a.startsWith("#")&&a.length>1||s.some(l=>l.preventScrollReset===!0))){let l=Ht.getState().frontendState.activePID,p=Ht.getState().frontendState.activeTag,f=null,d=Ht.subscribe(()=>{clearTimeout(f);let m=Ht.getState();if(m.frontendState.activePID&&m.frontendState.activePID!==l||m.frontendState.activeTag&&m.frontendState.activeTag.url!==p?.url){document.scrollingElement.scrollTo({top:0,left:0,behavior:"instant"});let g=document.scrollingElement.scrollHeight;F0(10,()=>{let v=document.scrollingElement.scrollHeight;g!==v&&(document.scrollingElement.scrollTo({top:0,left:0,behavior:"instant"}),g=v)}),d()}else f=setTimeout(()=>{d()},4e3)})}s.shift(),o.apply(this,s)}),window.addEventListener("popstate",o=>{let s=window.location.pathname,a=to.location.pathname;if(window.location.hash.length>1)return;r[a]=document.scrollingElement.scrollTop;let l=Ht.getState().frontendState.activePID,p=Ht.getState().frontendState.activeTag,f=Ht.subscribe(()=>{let d=Ht.getState();if((d.frontendState.activePID&&d.frontendState.activePID!==l||d.frontendState.activeTag&&d.frontendState.activeTag.url!==p?.url)&&r.hasOwnProperty(s)){let m=d.frontendState.activePID;setTimeout(async()=>{let g=0,v=!0;for(;v&&d.frontendState.activePID===m;)g>10&&(v=!1),document.scrollingElement.scrollHeight>=r[s]&&(document.scrollingElement.scrollTo({top:r[s],left:0,behavior:"instant"}),v=!1),g++,await new Promise(x=>setTimeout(x,100))}),f()}})});let i=S(Ry,{store:Ht,children:S(Hs,{history:to,children:S(zB.Frontload,{noServerRender:!0,children:S(CB,{})})})}),n=document.body;n.querySelector(".content")!==null?Fc(i,n):Ls(i,n),requestAnimationFrame(()=>{document.body.style.opacity=""})}});la();export{to as history,Ht as store};
/*! lightbox - v1.0.0 Build date: 2017-10-10
	Wrapper for PhotoSwipe (http://photoswipe.com) Copyright (c) 2015 Dmitry Semenov
	*/
/*! PhotoSwipe - v4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
/*! PhotoSwipe Default UI - 4.1.1 - 2015-12-24
 * http://photoswipe.com
 * Copyright (c) 2015 Dmitry Semenov; */
/*! Bundled license information:

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=https://build.cargo.site/frontend/a16aab/index.js.map
